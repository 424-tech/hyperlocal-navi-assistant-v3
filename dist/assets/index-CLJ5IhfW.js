(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var fS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o0={exports:{}},ad={},s0={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vl=Symbol.for("react.element"),pS=Symbol.for("react.portal"),mS=Symbol.for("react.fragment"),gS=Symbol.for("react.strict_mode"),_S=Symbol.for("react.profiler"),yS=Symbol.for("react.provider"),vS=Symbol.for("react.context"),TS=Symbol.for("react.forward_ref"),ES=Symbol.for("react.suspense"),wS=Symbol.for("react.memo"),CS=Symbol.for("react.lazy"),Tg=Symbol.iterator;function SS(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var a0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l0=Object.assign,u0={};function ks(t,e,n){this.props=t,this.context=e,this.refs=u0,this.updater=n||a0}ks.prototype.isReactComponent={};ks.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ks.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function c0(){}c0.prototype=ks.prototype;function ap(t,e,n){this.props=t,this.context=e,this.refs=u0,this.updater=n||a0}var lp=ap.prototype=new c0;lp.constructor=ap;l0(lp,ks.prototype);lp.isPureReactComponent=!0;var Eg=Array.isArray,d0=Object.prototype.hasOwnProperty,up={current:null},h0={key:!0,ref:!0,__self:!0,__source:!0};function f0(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)d0.call(e,i)&&!h0.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];r.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Vl,type:t,key:o,ref:a,props:r,_owner:up.current}}function IS(t,e){return{$$typeof:Vl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vl}function xS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wg=/\/+/g;function Xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xS(""+t.key):e.toString(36)}function rc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Vl:case pS:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Xd(a,0):i,Eg(r)?(n="",t!=null&&(n=t.replace(wg,"$&/")+"/"),rc(r,e,n,"",function(p){return p})):r!=null&&(cp(r)&&(r=IS(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(wg,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Eg(t))for(var u=0;u<t.length;u++){o=t[u];var d=i+Xd(o,u);a+=rc(o,e,n,d,r)}else if(d=SS(t),typeof d=="function")for(t=d.call(t),u=0;!(o=t.next()).done;)o=o.value,d=i+Xd(o,u++),a+=rc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Lu(t,e,n){if(t==null)return t;var i=[],r=0;return rc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function AS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},oc={transition:null},PS={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:oc,ReactCurrentOwner:up};function p0(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Lu,forEach:function(t,e,n){Lu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lu(t,function(){e++}),e},toArray:function(t){return Lu(t,function(e){return e})||[]},only:function(t){if(!cp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=ks;Pe.Fragment=mS;Pe.Profiler=_S;Pe.PureComponent=ap;Pe.StrictMode=gS;Pe.Suspense=ES;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PS;Pe.act=p0;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=l0({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=up.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)d0.call(e,d)&&!h0.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){u=Array(d);for(var p=0;p<d;p++)u[p]=arguments[p+2];i.children=u}return{$$typeof:Vl,type:t.type,key:r,ref:o,props:i,_owner:a}};Pe.createContext=function(t){return t={$$typeof:vS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yS,_context:t},t.Consumer=t};Pe.createElement=f0;Pe.createFactory=function(t){var e=f0.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:TS,render:t}};Pe.isValidElement=cp;Pe.lazy=function(t){return{$$typeof:CS,_payload:{_status:-1,_result:t},_init:AS}};Pe.memo=function(t,e){return{$$typeof:wS,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=oc.transition;oc.transition={};try{t()}finally{oc.transition=e}};Pe.unstable_act=p0;Pe.useCallback=function(t,e){return Kt.current.useCallback(t,e)};Pe.useContext=function(t){return Kt.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return Kt.current.useEffect(t,e)};Pe.useId=function(){return Kt.current.useId()};Pe.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Kt.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};Pe.useRef=function(t){return Kt.current.useRef(t)};Pe.useState=function(t){return Kt.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Kt.current.useTransition()};Pe.version="18.3.1";s0.exports=Pe;var ie=s0.exports;const gs=r0(ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS=ie,NS=Symbol.for("react.element"),kS=Symbol.for("react.fragment"),MS=Object.prototype.hasOwnProperty,LS=RS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DS={key:!0,ref:!0,__self:!0,__source:!0};function m0(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)MS.call(e,i)&&!DS.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:NS,type:t,key:o,ref:a,props:r,_owner:LS.current}}ad.Fragment=kS;ad.jsx=m0;ad.jsxs=m0;o0.exports=ad;var C=o0.exports,bh={},g0={exports:{}},fn={},_0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,me){var te=Z.length;Z.push(me);e:for(;0<te;){var ge=te-1>>>1,Ce=Z[ge];if(0<r(Ce,me))Z[ge]=me,Z[te]=Ce,te=ge;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var me=Z[0],te=Z.pop();if(te!==me){Z[0]=te;e:for(var ge=0,Ce=Z.length,Re=Ce>>>1;ge<Re;){var Ue=2*(ge+1)-1,Se=Z[Ue],ve=Ue+1,_t=Z[ve];if(0>r(Se,te))ve<Ce&&0>r(_t,Se)?(Z[ge]=_t,Z[ve]=te,ge=ve):(Z[ge]=Se,Z[Ue]=te,ge=Ue);else if(ve<Ce&&0>r(_t,te))Z[ge]=_t,Z[ve]=te,ge=ve;else break e}}return me}function r(Z,me){var te=Z.sortIndex-me.sortIndex;return te!==0?te:Z.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],p=[],g=1,y=null,v=3,S=!1,D=!1,b=!1,q=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Z){for(var me=n(p);me!==null;){if(me.callback===null)i(p);else if(me.startTime<=Z)i(p),me.sortIndex=me.expirationTime,e(d,me);else break;me=n(p)}}function z(Z){if(b=!1,R(Z),!D)if(n(d)!==null)D=!0,de(W);else{var me=n(p);me!==null&&xe(z,me.startTime-Z)}}function W(Z,me){D=!1,b&&(b=!1,A(N),N=-1),S=!0;var te=v;try{for(R(me),y=n(d);y!==null&&(!(y.expirationTime>me)||Z&&!B());){var ge=y.callback;if(typeof ge=="function"){y.callback=null,v=y.priorityLevel;var Ce=ge(y.expirationTime<=me);me=t.unstable_now(),typeof Ce=="function"?y.callback=Ce:y===n(d)&&i(d),R(me)}else i(d);y=n(d)}if(y!==null)var Re=!0;else{var Ue=n(p);Ue!==null&&xe(z,Ue.startTime-me),Re=!1}return Re}finally{y=null,v=te,S=!1}}var J=!1,k=null,N=-1,M=5,F=-1;function B(){return!(t.unstable_now()-F<M)}function U(){if(k!==null){var Z=t.unstable_now();F=Z;var me=!0;try{me=k(!0,Z)}finally{me?V():(J=!1,k=null)}}else J=!1}var V;if(typeof x=="function")V=function(){x(U)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,pe=Q.port2;Q.port1.onmessage=U,V=function(){pe.postMessage(null)}}else V=function(){q(U,0)};function de(Z){k=Z,J||(J=!0,V())}function xe(Z,me){N=q(function(){Z(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){D||S||(D=!0,de(W))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var me=3;break;default:me=v}var te=v;v=me;try{return Z()}finally{v=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,me){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var te=v;v=Z;try{return me()}finally{v=te}},t.unstable_scheduleCallback=function(Z,me,te){var ge=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ge+te:ge):te=ge,Z){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=te+Ce,Z={id:g++,callback:me,priorityLevel:Z,startTime:te,expirationTime:Ce,sortIndex:-1},te>ge?(Z.sortIndex=te,e(p,Z),n(d)===null&&Z===n(p)&&(b?(A(N),N=-1):b=!0,xe(z,te-ge))):(Z.sortIndex=Ce,e(d,Z),D||S||(D=!0,de(W))),Z},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(Z){var me=v;return function(){var te=v;v=me;try{return Z.apply(this,arguments)}finally{v=te}}}})(y0);_0.exports=y0;var bS=_0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS=ie,hn=bS;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v0=new Set,ol={};function io(t,e){_s(t,e),_s(t+"Capture",e)}function _s(t,e){for(ol[t]=e,t=0;t<e.length;t++)v0.add(e[t])}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vh=Object.prototype.hasOwnProperty,FS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cg={},Sg={};function US(t){return Vh.call(Sg,t)?!0:Vh.call(Cg,t)?!1:FS.test(t)?Sg[t]=!0:(Cg[t]=!0,!1)}function OS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BS(t,e,n,i){if(e===null||typeof e>"u"||OS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var dp=/[\-:]([a-z])/g;function hp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dp,hp);Lt[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dp,hp);Lt[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dp,hp);Lt[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fp(t,e,n,i){var r=Lt.hasOwnProperty(e)?Lt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BS(e,n,r,i)&&(n=null),i||r===null?US(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Mi=VS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Du=Symbol.for("react.element"),$o=Symbol.for("react.portal"),Ko=Symbol.for("react.fragment"),pp=Symbol.for("react.strict_mode"),Fh=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),E0=Symbol.for("react.context"),mp=Symbol.for("react.forward_ref"),Uh=Symbol.for("react.suspense"),Oh=Symbol.for("react.suspense_list"),gp=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),w0=Symbol.for("react.offscreen"),Ig=Symbol.iterator;function Ia(t){return t===null||typeof t!="object"?null:(t=Ig&&t[Ig]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,jd;function Va(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var eh=!1;function th(t,e){if(!t||eh)return"";eh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var r=p.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var d=`
`+r[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{eh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Va(t):""}function zS(t){switch(t.tag){case 5:return Va(t.type);case 16:return Va("Lazy");case 13:return Va("Suspense");case 19:return Va("SuspenseList");case 0:case 2:case 15:return t=th(t.type,!1),t;case 11:return t=th(t.type.render,!1),t;case 1:return t=th(t.type,!0),t;default:return""}}function Bh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ko:return"Fragment";case $o:return"Portal";case Fh:return"Profiler";case pp:return"StrictMode";case Uh:return"Suspense";case Oh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case E0:return(t.displayName||"Context")+".Consumer";case T0:return(t._context.displayName||"Context")+".Provider";case mp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gp:return e=t.displayName||null,e!==null?e:Bh(t.type)||"Memo";case Ki:e=t._payload,t=t._init;try{return Bh(t(e))}catch{}}return null}function qS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bh(e);case 8:return e===pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HS(t){var e=C0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bu(t){t._valueTracker||(t._valueTracker=HS(t))}function S0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=C0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zh(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I0(t,e){e=e.checked,e!=null&&fp(t,"checked",e,!1)}function qh(t,e){I0(t,e);var n=hr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hh(t,e.type,hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ag(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hh(t,e,n){(e!=="number"||Cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function os(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+hr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Gh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Fa(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hr(n)}}function x0(t,e){var n=hr(e.value),i=hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vu,P0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vu=Vu||document.createElement("div"),Vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GS=["Webkit","ms","Moz","O"];Object.keys(Ga).forEach(function(t){GS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ga[e]=Ga[t]})});function R0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ga.hasOwnProperty(t)&&Ga[t]?(""+e).trim():e+"px"}function N0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=R0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var WS=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $h(t,e){if(e){if(WS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Kh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=null;function _p(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zh=null,ss=null,as=null;function Ng(t){if(t=Ol(t)){if(typeof Zh!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=hd(e),Zh(t.stateNode,t.type,e))}}function k0(t){ss?as?as.push(t):as=[t]:ss=t}function M0(){if(ss){var t=ss,e=as;if(as=ss=null,Ng(t),e)for(t=0;t<e.length;t++)Ng(e[t])}}function L0(t,e){return t(e)}function D0(){}var nh=!1;function b0(t,e,n){if(nh)return t(e,n);nh=!0;try{return L0(t,e,n)}finally{nh=!1,(ss!==null||as!==null)&&(D0(),M0())}}function al(t,e){var n=t.stateNode;if(n===null)return null;var i=hd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Yh=!1;if(Si)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){Yh=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{Yh=!1}function $S(t,e,n,i,r,o,a,u,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(g){this.onError(g)}}var Wa=!1,Sc=null,Ic=!1,Qh=null,KS={onError:function(t){Wa=!0,Sc=t}};function JS(t,e,n,i,r,o,a,u,d){Wa=!1,Sc=null,$S.apply(KS,arguments)}function ZS(t,e,n,i,r,o,a,u,d){if(JS.apply(this,arguments),Wa){if(Wa){var p=Sc;Wa=!1,Sc=null}else throw Error(ee(198));Ic||(Ic=!0,Qh=p)}}function ro(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function V0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kg(t){if(ro(t)!==t)throw Error(ee(188))}function YS(t){var e=t.alternate;if(!e){if(e=ro(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return kg(r),t;if(o===i)return kg(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function F0(t){return t=YS(t),t!==null?U0(t):null}function U0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=U0(t);if(e!==null)return e;t=t.sibling}return null}var O0=hn.unstable_scheduleCallback,Mg=hn.unstable_cancelCallback,QS=hn.unstable_shouldYield,XS=hn.unstable_requestPaint,ct=hn.unstable_now,jS=hn.unstable_getCurrentPriorityLevel,yp=hn.unstable_ImmediatePriority,B0=hn.unstable_UserBlockingPriority,xc=hn.unstable_NormalPriority,eI=hn.unstable_LowPriority,z0=hn.unstable_IdlePriority,ld=null,ei=null;function tI(t){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(ld,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:rI,nI=Math.log,iI=Math.LN2;function rI(t){return t>>>=0,t===0?32:31-(nI(t)/iI|0)|0}var Fu=64,Uu=4194304;function Ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ac(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Ua(u):(o&=a,o!==0&&(i=Ua(o)))}else a=n&~r,a!==0?i=Ua(a):o!==0&&(i=Ua(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-zn(e),r=1<<n,i|=t[n],e&=~r;return i}function oI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-zn(o),u=1<<a,d=r[a];d===-1?(!(u&n)||u&i)&&(r[a]=oI(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function Xh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function q0(){var t=Fu;return Fu<<=1,!(Fu&4194240)&&(Fu=64),t}function ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function aI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-zn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function vp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-zn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Be=0;function H0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G0,Tp,W0,$0,K0,jh=!1,Ou=[],tr=null,nr=null,ir=null,ll=new Map,ul=new Map,Yi=[],lI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lg(t,e){switch(t){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":ll.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(e.pointerId)}}function Aa(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Ol(e),e!==null&&Tp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function uI(t,e,n,i,r){switch(e){case"focusin":return tr=Aa(tr,t,e,n,i,r),!0;case"dragenter":return nr=Aa(nr,t,e,n,i,r),!0;case"mouseover":return ir=Aa(ir,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ll.set(o,Aa(ll.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,ul.set(o,Aa(ul.get(o)||null,t,e,n,i,r)),!0}return!1}function J0(t){var e=Br(t.target);if(e!==null){var n=ro(e);if(n!==null){if(e=n.tag,e===13){if(e=V0(n),e!==null){t.blockedOn=e,K0(t.priority,function(){W0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ef(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Jh=i,n.target.dispatchEvent(i),Jh=null}else return e=Ol(n),e!==null&&Tp(e),t.blockedOn=n,!1;e.shift()}return!0}function Dg(t,e,n){sc(t)&&n.delete(e)}function cI(){jh=!1,tr!==null&&sc(tr)&&(tr=null),nr!==null&&sc(nr)&&(nr=null),ir!==null&&sc(ir)&&(ir=null),ll.forEach(Dg),ul.forEach(Dg)}function Pa(t,e){t.blockedOn===e&&(t.blockedOn=null,jh||(jh=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,cI)))}function cl(t){function e(r){return Pa(r,t)}if(0<Ou.length){Pa(Ou[0],t);for(var n=1;n<Ou.length;n++){var i=Ou[n];i.blockedOn===t&&(i.blockedOn=null)}}for(tr!==null&&Pa(tr,t),nr!==null&&Pa(nr,t),ir!==null&&Pa(ir,t),ll.forEach(e),ul.forEach(e),n=0;n<Yi.length;n++)i=Yi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)J0(n),n.blockedOn===null&&Yi.shift()}var ls=Mi.ReactCurrentBatchConfig,Pc=!0;function dI(t,e,n,i){var r=Be,o=ls.transition;ls.transition=null;try{Be=1,Ep(t,e,n,i)}finally{Be=r,ls.transition=o}}function hI(t,e,n,i){var r=Be,o=ls.transition;ls.transition=null;try{Be=4,Ep(t,e,n,i)}finally{Be=r,ls.transition=o}}function Ep(t,e,n,i){if(Pc){var r=ef(t,e,n,i);if(r===null)fh(t,e,i,Rc,n),Lg(t,i);else if(uI(r,t,e,n,i))i.stopPropagation();else if(Lg(t,i),e&4&&-1<lI.indexOf(t)){for(;r!==null;){var o=Ol(r);if(o!==null&&G0(o),o=ef(t,e,n,i),o===null&&fh(t,e,i,Rc,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else fh(t,e,i,null,n)}}var Rc=null;function ef(t,e,n,i){if(Rc=null,t=_p(i),t=Br(t),t!==null)if(e=ro(t),e===null)t=null;else if(n=e.tag,n===13){if(t=V0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rc=t,null}function Z0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jS()){case yp:return 1;case B0:return 4;case xc:case eI:return 16;case z0:return 536870912;default:return 16}default:return 16}}var Xi=null,wp=null,ac=null;function Y0(){if(ac)return ac;var t,e=wp,n=e.length,i,r="value"in Xi?Xi.value:Xi.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return ac=r.slice(t,1<i?1-i:void 0)}function lc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bu(){return!0}function bg(){return!1}function pn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Bu:bg,this.isPropagationStopped=bg,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),e}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cp=pn(Ms),Ul=rt({},Ms,{view:0,detail:0}),fI=pn(Ul),rh,oh,Ra,ud=rt({},Ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ra&&(Ra&&t.type==="mousemove"?(rh=t.screenX-Ra.screenX,oh=t.screenY-Ra.screenY):oh=rh=0,Ra=t),rh)},movementY:function(t){return"movementY"in t?t.movementY:oh}}),Vg=pn(ud),pI=rt({},ud,{dataTransfer:0}),mI=pn(pI),gI=rt({},Ul,{relatedTarget:0}),sh=pn(gI),_I=rt({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),yI=pn(_I),vI=rt({},Ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TI=pn(vI),EI=rt({},Ms,{data:0}),Fg=pn(EI),wI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function II(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SI[t])?!!e[t]:!1}function Sp(){return II}var xI=rt({},Ul,{key:function(t){if(t.key){var e=wI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sp,charCode:function(t){return t.type==="keypress"?lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AI=pn(xI),PI=rt({},ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ug=pn(PI),RI=rt({},Ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sp}),NI=pn(RI),kI=rt({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),MI=pn(kI),LI=rt({},ud,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DI=pn(LI),bI=[9,13,27,32],Ip=Si&&"CompositionEvent"in window,$a=null;Si&&"documentMode"in document&&($a=document.documentMode);var VI=Si&&"TextEvent"in window&&!$a,Q0=Si&&(!Ip||$a&&8<$a&&11>=$a),Og=" ",Bg=!1;function X0(t,e){switch(t){case"keyup":return bI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jo=!1;function FI(t,e){switch(t){case"compositionend":return j0(e);case"keypress":return e.which!==32?null:(Bg=!0,Og);case"textInput":return t=e.data,t===Og&&Bg?null:t;default:return null}}function UI(t,e){if(Jo)return t==="compositionend"||!Ip&&X0(t,e)?(t=Y0(),ac=wp=Xi=null,Jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Q0&&e.locale!=="ko"?null:e.data;default:return null}}var OI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OI[t.type]:e==="textarea"}function eT(t,e,n,i){k0(i),e=Nc(e,"onChange"),0<e.length&&(n=new Cp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ka=null,dl=null;function BI(t){dT(t,0)}function cd(t){var e=Qo(t);if(S0(e))return t}function zI(t,e){if(t==="change")return e}var tT=!1;if(Si){var ah;if(Si){var lh="oninput"in document;if(!lh){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),lh=typeof qg.oninput=="function"}ah=lh}else ah=!1;tT=ah&&(!document.documentMode||9<document.documentMode)}function Hg(){Ka&&(Ka.detachEvent("onpropertychange",nT),dl=Ka=null)}function nT(t){if(t.propertyName==="value"&&cd(dl)){var e=[];eT(e,dl,t,_p(t)),b0(BI,e)}}function qI(t,e,n){t==="focusin"?(Hg(),Ka=e,dl=n,Ka.attachEvent("onpropertychange",nT)):t==="focusout"&&Hg()}function HI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cd(dl)}function GI(t,e){if(t==="click")return cd(e)}function WI(t,e){if(t==="input"||t==="change")return cd(e)}function $I(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:$I;function hl(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Vh.call(e,r)||!Hn(t[r],e[r]))return!1}return!0}function Gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,e){var n=Gg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gg(n)}}function iT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rT(){for(var t=window,e=Cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cc(t.document)}return e}function xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KI(t){var e=rT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iT(n.ownerDocument.documentElement,n)){if(i!==null&&xp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Wg(n,o);var a=Wg(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JI=Si&&"documentMode"in document&&11>=document.documentMode,Zo=null,tf=null,Ja=null,nf=!1;function $g(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nf||Zo==null||Zo!==Cc(i)||(i=Zo,"selectionStart"in i&&xp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ja&&hl(Ja,i)||(Ja=i,i=Nc(tf,"onSelect"),0<i.length&&(e=new Cp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Zo)))}function zu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:zu("Animation","AnimationEnd"),animationiteration:zu("Animation","AnimationIteration"),animationstart:zu("Animation","AnimationStart"),transitionend:zu("Transition","TransitionEnd")},uh={},oT={};Si&&(oT=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function dd(t){if(uh[t])return uh[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oT)return uh[t]=e[n];return t}var sT=dd("animationend"),aT=dd("animationiteration"),lT=dd("animationstart"),uT=dd("transitionend"),cT=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,e){cT.set(t,e),io(e,[t])}for(var ch=0;ch<Kg.length;ch++){var dh=Kg[ch],ZI=dh.toLowerCase(),YI=dh[0].toUpperCase()+dh.slice(1);_r(ZI,"on"+YI)}_r(sT,"onAnimationEnd");_r(aT,"onAnimationIteration");_r(lT,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(uT,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function Jg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,ZS(i,e,void 0,t),t.currentTarget=null}function dT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],d=u.instance,p=u.currentTarget;if(u=u.listener,d!==o&&r.isPropagationStopped())break e;Jg(r,u,p),o=d}else for(a=0;a<i.length;a++){if(u=i[a],d=u.instance,p=u.currentTarget,u=u.listener,d!==o&&r.isPropagationStopped())break e;Jg(r,u,p),o=d}}}if(Ic)throw t=Qh,Ic=!1,Qh=null,t}function Ke(t,e){var n=e[lf];n===void 0&&(n=e[lf]=new Set);var i=t+"__bubble";n.has(i)||(hT(e,t,2,!1),n.add(i))}function hh(t,e,n){var i=0;e&&(i|=4),hT(n,t,i,e)}var qu="_reactListening"+Math.random().toString(36).slice(2);function fl(t){if(!t[qu]){t[qu]=!0,v0.forEach(function(n){n!=="selectionchange"&&(QI.has(n)||hh(n,!1,t),hh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qu]||(e[qu]=!0,hh("selectionchange",!1,e))}}function hT(t,e,n,i){switch(Z0(e)){case 1:var r=dI;break;case 4:r=hI;break;default:r=Ep}n=r.bind(null,e,n,t),r=void 0,!Yh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function fh(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Br(u),a===null)return;if(d=a.tag,d===5||d===6){i=o=a;continue e}u=u.parentNode}}i=i.return}b0(function(){var p=o,g=_p(n),y=[];e:{var v=cT.get(t);if(v!==void 0){var S=Cp,D=t;switch(t){case"keypress":if(lc(n)===0)break e;case"keydown":case"keyup":S=AI;break;case"focusin":D="focus",S=sh;break;case"focusout":D="blur",S=sh;break;case"beforeblur":case"afterblur":S=sh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Vg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=mI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=NI;break;case sT:case aT:case lT:S=yI;break;case uT:S=MI;break;case"scroll":S=fI;break;case"wheel":S=DI;break;case"copy":case"cut":case"paste":S=TI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Ug}var b=(e&4)!==0,q=!b&&t==="scroll",A=b?v!==null?v+"Capture":null:v;b=[];for(var x=p,R;x!==null;){R=x;var z=R.stateNode;if(R.tag===5&&z!==null&&(R=z,A!==null&&(z=al(x,A),z!=null&&b.push(pl(x,z,R)))),q)break;x=x.return}0<b.length&&(v=new S(v,D,null,n,g),y.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==Jh&&(D=n.relatedTarget||n.fromElement)&&(Br(D)||D[Ii]))break e;if((S||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,S?(D=n.relatedTarget||n.toElement,S=p,D=D?Br(D):null,D!==null&&(q=ro(D),D!==q||D.tag!==5&&D.tag!==6)&&(D=null)):(S=null,D=p),S!==D)){if(b=Vg,z="onMouseLeave",A="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=Ug,z="onPointerLeave",A="onPointerEnter",x="pointer"),q=S==null?v:Qo(S),R=D==null?v:Qo(D),v=new b(z,x+"leave",S,n,g),v.target=q,v.relatedTarget=R,z=null,Br(g)===p&&(b=new b(A,x+"enter",D,n,g),b.target=R,b.relatedTarget=q,z=b),q=z,S&&D)t:{for(b=S,A=D,x=0,R=b;R;R=qo(R))x++;for(R=0,z=A;z;z=qo(z))R++;for(;0<x-R;)b=qo(b),x--;for(;0<R-x;)A=qo(A),R--;for(;x--;){if(b===A||A!==null&&b===A.alternate)break t;b=qo(b),A=qo(A)}b=null}else b=null;S!==null&&Zg(y,v,S,b,!1),D!==null&&q!==null&&Zg(y,q,D,b,!0)}}e:{if(v=p?Qo(p):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var W=zI;else if(zg(v))if(tT)W=WI;else{W=HI;var J=qI}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(W=GI);if(W&&(W=W(t,p))){eT(y,W,n,g);break e}J&&J(t,v,p),t==="focusout"&&(J=v._wrapperState)&&J.controlled&&v.type==="number"&&Hh(v,"number",v.value)}switch(J=p?Qo(p):window,t){case"focusin":(zg(J)||J.contentEditable==="true")&&(Zo=J,tf=p,Ja=null);break;case"focusout":Ja=tf=Zo=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,$g(y,n,g);break;case"selectionchange":if(JI)break;case"keydown":case"keyup":$g(y,n,g)}var k;if(Ip)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Jo?X0(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Q0&&n.locale!=="ko"&&(Jo||N!=="onCompositionStart"?N==="onCompositionEnd"&&Jo&&(k=Y0()):(Xi=g,wp="value"in Xi?Xi.value:Xi.textContent,Jo=!0)),J=Nc(p,N),0<J.length&&(N=new Fg(N,t,null,n,g),y.push({event:N,listeners:J}),k?N.data=k:(k=j0(n),k!==null&&(N.data=k)))),(k=VI?FI(t,n):UI(t,n))&&(p=Nc(p,"onBeforeInput"),0<p.length&&(g=new Fg("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:p}),g.data=k))}dT(y,e)})}function pl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=al(t,n),o!=null&&i.unshift(pl(t,o,r)),o=al(t,e),o!=null&&i.push(pl(t,o,r))),t=t.return}return i}function qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zg(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,d=u.alternate,p=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&p!==null&&(u=p,r?(d=al(n,o),d!=null&&a.unshift(pl(n,d,u))):r||(d=al(n,o),d!=null&&a.push(pl(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var XI=/\r\n?/g,jI=/\u0000|\uFFFD/g;function Yg(t){return(typeof t=="string"?t:""+t).replace(XI,`
`).replace(jI,"")}function Hu(t,e,n){if(e=Yg(e),Yg(t)!==e&&n)throw Error(ee(425))}function kc(){}var rf=null,of=null;function sf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var af=typeof setTimeout=="function"?setTimeout:void 0,ex=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,tx=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(t){return Qg.resolve(null).then(t).catch(nx)}:af;function nx(t){setTimeout(function(){throw t})}function ph(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),cl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);cl(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),jn="__reactFiber$"+Ls,ml="__reactProps$"+Ls,Ii="__reactContainer$"+Ls,lf="__reactEvents$"+Ls,ix="__reactListeners$"+Ls,rx="__reactHandles$"+Ls;function Br(t){var e=t[jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ii]||n[jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[jn])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function Ol(t){return t=t[jn]||t[Ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function hd(t){return t[ml]||null}var uf=[],Xo=-1;function yr(t){return{current:t}}function Ye(t){0>Xo||(t.current=uf[Xo],uf[Xo]=null,Xo--)}function $e(t,e){Xo++,uf[Xo]=t.current,t.current=e}var fr={},qt=yr(fr),en=yr(!1),Zr=fr;function ys(t,e){var n=t.type.contextTypes;if(!n)return fr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function tn(t){return t=t.childContextTypes,t!=null}function Mc(){Ye(en),Ye(qt)}function jg(t,e,n){if(qt.current!==fr)throw Error(ee(168));$e(qt,e),$e(en,n)}function fT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,qS(t)||"Unknown",r));return rt({},n,i)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,Zr=qt.current,$e(qt,t),$e(en,en.current),!0}function e_(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=fT(t,e,Zr),i.__reactInternalMemoizedMergedChildContext=t,Ye(en),Ye(qt),$e(qt,t)):Ye(en),$e(en,n)}var Ti=null,fd=!1,mh=!1;function pT(t){Ti===null?Ti=[t]:Ti.push(t)}function ox(t){fd=!0,pT(t)}function vr(){if(!mh&&Ti!==null){mh=!0;var t=0,e=Be;try{var n=Ti;for(Be=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ti=null,fd=!1}catch(r){throw Ti!==null&&(Ti=Ti.slice(t+1)),O0(yp,vr),r}finally{Be=e,mh=!1}}return null}var jo=[],es=0,Dc=null,bc=0,Sn=[],In=0,Yr=null,Ei=1,wi="";function Fr(t,e){jo[es++]=bc,jo[es++]=Dc,Dc=t,bc=e}function mT(t,e,n){Sn[In++]=Ei,Sn[In++]=wi,Sn[In++]=Yr,Yr=t;var i=Ei;t=wi;var r=32-zn(i)-1;i&=~(1<<r),n+=1;var o=32-zn(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ei=1<<32-zn(e)+r|n<<r|i,wi=o+t}else Ei=1<<o|n<<r|i,wi=t}function Ap(t){t.return!==null&&(Fr(t,1),mT(t,1,0))}function Pp(t){for(;t===Dc;)Dc=jo[--es],jo[es]=null,bc=jo[--es],jo[es]=null;for(;t===Yr;)Yr=Sn[--In],Sn[In]=null,wi=Sn[--In],Sn[In]=null,Ei=Sn[--In],Sn[In]=null}var dn=null,un=null,je=!1,On=null;function gT(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function t_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,un=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yr!==null?{id:Ei,overflow:wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,un=null,!0):!1;default:return!1}}function cf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function df(t){if(je){var e=un;if(e){var n=e;if(!t_(t,e)){if(cf(t))throw Error(ee(418));e=rr(n.nextSibling);var i=dn;e&&t_(t,e)?gT(i,n):(t.flags=t.flags&-4097|2,je=!1,dn=t)}}else{if(cf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,je=!1,dn=t}}}function n_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function Gu(t){if(t!==dn)return!1;if(!je)return n_(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sf(t.type,t.memoizedProps)),e&&(e=un)){if(cf(t))throw _T(),Error(ee(418));for(;e;)gT(t,e),e=rr(e.nextSibling)}if(n_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=dn?rr(t.stateNode.nextSibling):null;return!0}function _T(){for(var t=un;t;)t=rr(t.nextSibling)}function vs(){un=dn=null,je=!1}function Rp(t){On===null?On=[t]:On.push(t)}var sx=Mi.ReactCurrentBatchConfig;function Na(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Wu(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function i_(t){var e=t._init;return e(t._payload)}function yT(t){function e(A,x){if(t){var R=A.deletions;R===null?(A.deletions=[x],A.flags|=16):R.push(x)}}function n(A,x){if(!t)return null;for(;x!==null;)e(A,x),x=x.sibling;return null}function i(A,x){for(A=new Map;x!==null;)x.key!==null?A.set(x.key,x):A.set(x.index,x),x=x.sibling;return A}function r(A,x){return A=lr(A,x),A.index=0,A.sibling=null,A}function o(A,x,R){return A.index=R,t?(R=A.alternate,R!==null?(R=R.index,R<x?(A.flags|=2,x):R):(A.flags|=2,x)):(A.flags|=1048576,x)}function a(A){return t&&A.alternate===null&&(A.flags|=2),A}function u(A,x,R,z){return x===null||x.tag!==6?(x=wh(R,A.mode,z),x.return=A,x):(x=r(x,R),x.return=A,x)}function d(A,x,R,z){var W=R.type;return W===Ko?g(A,x,R.props.children,z,R.key):x!==null&&(x.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ki&&i_(W)===x.type)?(z=r(x,R.props),z.ref=Na(A,x,R),z.return=A,z):(z=mc(R.type,R.key,R.props,null,A.mode,z),z.ref=Na(A,x,R),z.return=A,z)}function p(A,x,R,z){return x===null||x.tag!==4||x.stateNode.containerInfo!==R.containerInfo||x.stateNode.implementation!==R.implementation?(x=Ch(R,A.mode,z),x.return=A,x):(x=r(x,R.children||[]),x.return=A,x)}function g(A,x,R,z,W){return x===null||x.tag!==7?(x=Wr(R,A.mode,z,W),x.return=A,x):(x=r(x,R),x.return=A,x)}function y(A,x,R){if(typeof x=="string"&&x!==""||typeof x=="number")return x=wh(""+x,A.mode,R),x.return=A,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Du:return R=mc(x.type,x.key,x.props,null,A.mode,R),R.ref=Na(A,null,x),R.return=A,R;case $o:return x=Ch(x,A.mode,R),x.return=A,x;case Ki:var z=x._init;return y(A,z(x._payload),R)}if(Fa(x)||Ia(x))return x=Wr(x,A.mode,R,null),x.return=A,x;Wu(A,x)}return null}function v(A,x,R,z){var W=x!==null?x.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return W!==null?null:u(A,x,""+R,z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Du:return R.key===W?d(A,x,R,z):null;case $o:return R.key===W?p(A,x,R,z):null;case Ki:return W=R._init,v(A,x,W(R._payload),z)}if(Fa(R)||Ia(R))return W!==null?null:g(A,x,R,z,null);Wu(A,R)}return null}function S(A,x,R,z,W){if(typeof z=="string"&&z!==""||typeof z=="number")return A=A.get(R)||null,u(x,A,""+z,W);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Du:return A=A.get(z.key===null?R:z.key)||null,d(x,A,z,W);case $o:return A=A.get(z.key===null?R:z.key)||null,p(x,A,z,W);case Ki:var J=z._init;return S(A,x,R,J(z._payload),W)}if(Fa(z)||Ia(z))return A=A.get(R)||null,g(x,A,z,W,null);Wu(x,z)}return null}function D(A,x,R,z){for(var W=null,J=null,k=x,N=x=0,M=null;k!==null&&N<R.length;N++){k.index>N?(M=k,k=null):M=k.sibling;var F=v(A,k,R[N],z);if(F===null){k===null&&(k=M);break}t&&k&&F.alternate===null&&e(A,k),x=o(F,x,N),J===null?W=F:J.sibling=F,J=F,k=M}if(N===R.length)return n(A,k),je&&Fr(A,N),W;if(k===null){for(;N<R.length;N++)k=y(A,R[N],z),k!==null&&(x=o(k,x,N),J===null?W=k:J.sibling=k,J=k);return je&&Fr(A,N),W}for(k=i(A,k);N<R.length;N++)M=S(k,A,N,R[N],z),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?N:M.key),x=o(M,x,N),J===null?W=M:J.sibling=M,J=M);return t&&k.forEach(function(B){return e(A,B)}),je&&Fr(A,N),W}function b(A,x,R,z){var W=Ia(R);if(typeof W!="function")throw Error(ee(150));if(R=W.call(R),R==null)throw Error(ee(151));for(var J=W=null,k=x,N=x=0,M=null,F=R.next();k!==null&&!F.done;N++,F=R.next()){k.index>N?(M=k,k=null):M=k.sibling;var B=v(A,k,F.value,z);if(B===null){k===null&&(k=M);break}t&&k&&B.alternate===null&&e(A,k),x=o(B,x,N),J===null?W=B:J.sibling=B,J=B,k=M}if(F.done)return n(A,k),je&&Fr(A,N),W;if(k===null){for(;!F.done;N++,F=R.next())F=y(A,F.value,z),F!==null&&(x=o(F,x,N),J===null?W=F:J.sibling=F,J=F);return je&&Fr(A,N),W}for(k=i(A,k);!F.done;N++,F=R.next())F=S(k,A,N,F.value,z),F!==null&&(t&&F.alternate!==null&&k.delete(F.key===null?N:F.key),x=o(F,x,N),J===null?W=F:J.sibling=F,J=F);return t&&k.forEach(function(U){return e(A,U)}),je&&Fr(A,N),W}function q(A,x,R,z){if(typeof R=="object"&&R!==null&&R.type===Ko&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Du:e:{for(var W=R.key,J=x;J!==null;){if(J.key===W){if(W=R.type,W===Ko){if(J.tag===7){n(A,J.sibling),x=r(J,R.props.children),x.return=A,A=x;break e}}else if(J.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ki&&i_(W)===J.type){n(A,J.sibling),x=r(J,R.props),x.ref=Na(A,J,R),x.return=A,A=x;break e}n(A,J);break}else e(A,J);J=J.sibling}R.type===Ko?(x=Wr(R.props.children,A.mode,z,R.key),x.return=A,A=x):(z=mc(R.type,R.key,R.props,null,A.mode,z),z.ref=Na(A,x,R),z.return=A,A=z)}return a(A);case $o:e:{for(J=R.key;x!==null;){if(x.key===J)if(x.tag===4&&x.stateNode.containerInfo===R.containerInfo&&x.stateNode.implementation===R.implementation){n(A,x.sibling),x=r(x,R.children||[]),x.return=A,A=x;break e}else{n(A,x);break}else e(A,x);x=x.sibling}x=Ch(R,A.mode,z),x.return=A,A=x}return a(A);case Ki:return J=R._init,q(A,x,J(R._payload),z)}if(Fa(R))return D(A,x,R,z);if(Ia(R))return b(A,x,R,z);Wu(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,x!==null&&x.tag===6?(n(A,x.sibling),x=r(x,R),x.return=A,A=x):(n(A,x),x=wh(R,A.mode,z),x.return=A,A=x),a(A)):n(A,x)}return q}var Ts=yT(!0),vT=yT(!1),Vc=yr(null),Fc=null,ts=null,Np=null;function kp(){Np=ts=Fc=null}function Mp(t){var e=Vc.current;Ye(Vc),t._currentValue=e}function hf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function us(t,e){Fc=t,Np=ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(Np!==t)if(t={context:t,memoizedValue:e,next:null},ts===null){if(Fc===null)throw Error(ee(308));ts=t,Fc.dependencies={lanes:0,firstContext:t}}else ts=ts.next=t;return e}var zr=null;function Lp(t){zr===null?zr=[t]:zr.push(t)}function TT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Lp(e)):(n.next=r.next,r.next=n),e.interleaved=n,xi(t,i)}function xi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ji=!1;function Dp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ET(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,be&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,xi(t,n)}return r=i.interleaved,r===null?(e.next=e,Lp(i)):(e.next=r.next,r.next=e),i.interleaved=e,xi(t,n)}function uc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,vp(t,n)}}function r_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uc(t,e,n,i){var r=t.updateQueue;Ji=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,p=d.next;d.next=null,a===null?o=p:a.next=p,a=d;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==a&&(u===null?g.firstBaseUpdate=p:u.next=p,g.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;a=0,g=p=d=null,u=o;do{var v=u.lane,S=u.eventTime;if((i&v)===v){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var D=t,b=u;switch(v=e,S=n,b.tag){case 1:if(D=b.payload,typeof D=="function"){y=D.call(S,y,v);break e}y=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=b.payload,v=typeof D=="function"?D.call(S,y,v):D,v==null)break e;y=rt({},y,v);break e;case 2:Ji=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else S={eventTime:S,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(p=g=S,d=y):g=g.next=S,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(g===null&&(d=y),r.baseState=d,r.firstBaseUpdate=p,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Xr|=a,t.lanes=a,t.memoizedState=y}}function o_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var Bl={},ti=yr(Bl),gl=yr(Bl),_l=yr(Bl);function qr(t){if(t===Bl)throw Error(ee(174));return t}function bp(t,e){switch($e(_l,e),$e(gl,t),$e(ti,Bl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wh(e,t)}Ye(ti),$e(ti,e)}function Es(){Ye(ti),Ye(gl),Ye(_l)}function wT(t){qr(_l.current);var e=qr(ti.current),n=Wh(e,t.type);e!==n&&($e(gl,t),$e(ti,n))}function Vp(t){gl.current===t&&(Ye(ti),Ye(gl))}var nt=yr(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gh=[];function Fp(){for(var t=0;t<gh.length;t++)gh[t]._workInProgressVersionPrimary=null;gh.length=0}var cc=Mi.ReactCurrentDispatcher,_h=Mi.ReactCurrentBatchConfig,Qr=0,it=null,yt=null,It=null,Bc=!1,Za=!1,yl=0,ax=0;function bt(){throw Error(ee(321))}function Up(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Op(t,e,n,i,r,o){if(Qr=o,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cc.current=t===null||t.memoizedState===null?dx:hx,t=n(i,r),Za){o=0;do{if(Za=!1,yl=0,25<=o)throw Error(ee(301));o+=1,It=yt=null,e.updateQueue=null,cc.current=fx,t=n(i,r)}while(Za)}if(cc.current=zc,e=yt!==null&&yt.next!==null,Qr=0,It=yt=it=null,Bc=!1,e)throw Error(ee(300));return t}function Bp(){var t=yl!==0;return yl=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?it.memoizedState=It=t:It=It.next=t,It}function Nn(){if(yt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=It===null?it.memoizedState:It.next;if(e!==null)It=e,yt=t;else{if(t===null)throw Error(ee(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},It===null?it.memoizedState=It=t:It=It.next=t}return It}function vl(t,e){return typeof e=="function"?e(t):e}function yh(t){var e=Nn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=yt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,d=null,p=o;do{var g=p.lane;if((Qr&g)===g)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var y={lane:g,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(u=d=y,a=i):d=d.next=y,it.lanes|=g,Xr|=g}p=p.next}while(p!==null&&p!==o);d===null?a=i:d.next=u,Hn(i,e.memoizedState)||(jt=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,it.lanes|=o,Xr|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vh(t){var e=Nn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Hn(o,e.memoizedState)||(jt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function CT(){}function ST(t,e){var n=it,i=Nn(),r=e(),o=!Hn(i.memoizedState,r);if(o&&(i.memoizedState=r,jt=!0),i=i.queue,zp(AT.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,Tl(9,xT.bind(null,n,i,r,e),void 0,null),xt===null)throw Error(ee(349));Qr&30||IT(n,e,r)}return r}function IT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xT(t,e,n,i){e.value=n,e.getSnapshot=i,PT(e)&&RT(t)}function AT(t,e,n){return n(function(){PT(e)&&RT(t)})}function PT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function RT(t){var e=xi(t,1);e!==null&&qn(e,t,1,-1)}function s_(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:t},e.queue=t,t=t.dispatch=cx.bind(null,it,t),[e.memoizedState,t]}function Tl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function NT(){return Nn().memoizedState}function dc(t,e,n,i){var r=Xn();it.flags|=t,r.memoizedState=Tl(1|e,n,void 0,i===void 0?null:i)}function pd(t,e,n,i){var r=Nn();i=i===void 0?null:i;var o=void 0;if(yt!==null){var a=yt.memoizedState;if(o=a.destroy,i!==null&&Up(i,a.deps)){r.memoizedState=Tl(e,n,o,i);return}}it.flags|=t,r.memoizedState=Tl(1|e,n,o,i)}function a_(t,e){return dc(8390656,8,t,e)}function zp(t,e){return pd(2048,8,t,e)}function kT(t,e){return pd(4,2,t,e)}function MT(t,e){return pd(4,4,t,e)}function LT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DT(t,e,n){return n=n!=null?n.concat([t]):null,pd(4,4,LT.bind(null,e,t),n)}function qp(){}function bT(t,e){var n=Nn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Up(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function VT(t,e){var n=Nn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Up(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function FT(t,e,n){return Qr&21?(Hn(n,e)||(n=q0(),it.lanes|=n,Xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function lx(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var i=_h.transition;_h.transition={};try{t(!1),e()}finally{Be=n,_h.transition=i}}function UT(){return Nn().memoizedState}function ux(t,e,n){var i=ar(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},OT(t))BT(e,n);else if(n=TT(t,e,n,i),n!==null){var r=$t();qn(n,t,i,r),zT(n,e,i)}}function cx(t,e,n){var i=ar(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(OT(t))BT(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,Hn(u,a)){var d=e.interleaved;d===null?(r.next=r,Lp(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=TT(t,e,r,i),n!==null&&(r=$t(),qn(n,t,i,r),zT(n,e,i))}}function OT(t){var e=t.alternate;return t===it||e!==null&&e===it}function BT(t,e){Za=Bc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,vp(t,n)}}var zc={readContext:Rn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},dx={readContext:Rn,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:a_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dc(4194308,4,LT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dc(4194308,4,t,e)},useInsertionEffect:function(t,e){return dc(4,2,t,e)},useMemo:function(t,e){var n=Xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Xn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ux.bind(null,it,t),[i.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:s_,useDebugValue:qp,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=s_(!1),e=t[0];return t=lx.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=it,r=Xn();if(je){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),xt===null)throw Error(ee(349));Qr&30||IT(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,a_(AT.bind(null,i,o,t),[t]),i.flags|=2048,Tl(9,xT.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Xn(),e=xt.identifierPrefix;if(je){var n=wi,i=Ei;n=(i&~(1<<32-zn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=yl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ax++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hx={readContext:Rn,useCallback:bT,useContext:Rn,useEffect:zp,useImperativeHandle:DT,useInsertionEffect:kT,useLayoutEffect:MT,useMemo:VT,useReducer:yh,useRef:NT,useState:function(){return yh(vl)},useDebugValue:qp,useDeferredValue:function(t){var e=Nn();return FT(e,yt.memoizedState,t)},useTransition:function(){var t=yh(vl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:ST,useId:UT,unstable_isNewReconciler:!1},fx={readContext:Rn,useCallback:bT,useContext:Rn,useEffect:zp,useImperativeHandle:DT,useInsertionEffect:kT,useLayoutEffect:MT,useMemo:VT,useReducer:vh,useRef:NT,useState:function(){return vh(vl)},useDebugValue:qp,useDeferredValue:function(t){var e=Nn();return yt===null?e.memoizedState=t:FT(e,yt.memoizedState,t)},useTransition:function(){var t=vh(vl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:ST,useId:UT,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ff(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var md={isMounted:function(t){return(t=t._reactInternals)?ro(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=$t(),r=ar(t),o=Ci(i,r);o.payload=e,n!=null&&(o.callback=n),e=or(t,o,r),e!==null&&(qn(e,t,r,i),uc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=$t(),r=ar(t),o=Ci(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=or(t,o,r),e!==null&&(qn(e,t,r,i),uc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),i=ar(t),r=Ci(n,i);r.tag=2,e!=null&&(r.callback=e),e=or(t,r,i),e!==null&&(qn(e,t,i,n),uc(e,t,i))}};function l_(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!hl(n,i)||!hl(r,o):!0}function qT(t,e,n){var i=!1,r=fr,o=e.contextType;return typeof o=="object"&&o!==null?o=Rn(o):(r=tn(e)?Zr:qt.current,i=e.contextTypes,o=(i=i!=null)?ys(t,r):fr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=md,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function u_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&md.enqueueReplaceState(e,e.state,null)}function pf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Dp(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Rn(o):(o=tn(e)?Zr:qt.current,r.context=ys(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ff(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&md.enqueueReplaceState(r,r.state,null),Uc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ws(t,e){try{var n="",i=e;do n+=zS(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Th(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var px=typeof WeakMap=="function"?WeakMap:Map;function HT(t,e,n){n=Ci(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Hc||(Hc=!0,If=i),mf(t,e)},n}function GT(t,e,n){n=Ci(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){mf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mf(t,e),typeof i!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function c_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new px;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Px.bind(null,t,e,n),e.then(t,t))}function d_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ci(-1,1),e.tag=2,or(n,e,1))),n.lanes|=1),t)}var mx=Mi.ReactCurrentOwner,jt=!1;function Wt(t,e,n,i){e.child=t===null?vT(e,null,n,i):Ts(e,t.child,n,i)}function f_(t,e,n,i,r){n=n.render;var o=e.ref;return us(e,r),i=Op(t,e,n,i,o,r),n=Bp(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ai(t,e,r)):(je&&n&&Ap(e),e.flags|=1,Wt(t,e,i,r),e.child)}function p_(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Yp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,WT(t,e,o,i,r)):(t=mc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:hl,n(a,i)&&t.ref===e.ref)return Ai(t,e,r)}return e.flags|=1,t=lr(o,i),t.ref=e.ref,t.return=e,e.child=t}function WT(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(hl(o,i)&&t.ref===e.ref)if(jt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Ai(t,e,r)}return gf(t,e,n,i,r)}function $T(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(is,ln),ln|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(is,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(is,ln),ln|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(is,ln),ln|=i;return Wt(t,e,r,n),e.child}function KT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gf(t,e,n,i,r){var o=tn(n)?Zr:qt.current;return o=ys(e,o),us(e,r),n=Op(t,e,n,i,o,r),i=Bp(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ai(t,e,r)):(je&&i&&Ap(e),e.flags|=1,Wt(t,e,n,r),e.child)}function m_(t,e,n,i,r){if(tn(n)){var o=!0;Lc(e)}else o=!1;if(us(e,r),e.stateNode===null)hc(t,e),qT(e,n,i),pf(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Rn(p):(p=tn(n)?Zr:qt.current,p=ys(e,p));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||d!==p)&&u_(e,a,i,p),Ji=!1;var v=e.memoizedState;a.state=v,Uc(e,i,a,r),d=e.memoizedState,u!==i||v!==d||en.current||Ji?(typeof g=="function"&&(ff(e,n,g,i),d=e.memoizedState),(u=Ji||l_(e,n,u,i,v,d,p))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=p,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,ET(t,e),u=e.memoizedProps,p=e.type===e.elementType?u:Fn(e.type,u),a.props=p,y=e.pendingProps,v=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Rn(d):(d=tn(n)?Zr:qt.current,d=ys(e,d));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||v!==d)&&u_(e,a,i,d),Ji=!1,v=e.memoizedState,a.state=v,Uc(e,i,a,r);var D=e.memoizedState;u!==y||v!==D||en.current||Ji?(typeof S=="function"&&(ff(e,n,S,i),D=e.memoizedState),(p=Ji||l_(e,n,p,i,v,D,d)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,D,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,D,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),a.props=i,a.state=D,a.context=d,i=p):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return _f(t,e,n,i,o,r)}function _f(t,e,n,i,r,o){KT(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&e_(e,n,!1),Ai(t,e,o);i=e.stateNode,mx.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ts(e,t.child,null,o),e.child=Ts(e,null,u,o)):Wt(t,e,u,o),e.memoizedState=i.state,r&&e_(e,n,!0),e.child}function JT(t){var e=t.stateNode;e.pendingContext?jg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jg(t,e.context,!1),bp(t,e.containerInfo)}function g_(t,e,n,i,r){return vs(),Rp(r),e.flags|=256,Wt(t,e,n,i),e.child}var yf={dehydrated:null,treeContext:null,retryLane:0};function vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZT(t,e,n){var i=e.pendingProps,r=nt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),$e(nt,r&1),t===null)return df(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=yd(a,i,0,null),t=Wr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=vf(n),e.memoizedState=yf,t):Hp(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return gx(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=lr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=lr(u,o):(o=Wr(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?vf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=yf,i}return o=t.child,t=o.sibling,i=lr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Hp(t,e){return e=yd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $u(t,e,n,i){return i!==null&&Rp(i),Ts(e,t.child,null,n),t=Hp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gx(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Th(Error(ee(422))),$u(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=yd({mode:"visible",children:i.children},r,0,null),o=Wr(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ts(e,t.child,null,a),e.child.memoizedState=vf(a),e.memoizedState=yf,o);if(!(e.mode&1))return $u(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=Th(o,i,void 0),$u(t,e,a,i)}if(u=(a&t.childLanes)!==0,jt||u){if(i=xt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,xi(t,r),qn(i,t,r,-1))}return Zp(),i=Th(Error(ee(421))),$u(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Rx.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,un=rr(r.nextSibling),dn=e,je=!0,On=null,t!==null&&(Sn[In++]=Ei,Sn[In++]=wi,Sn[In++]=Yr,Ei=t.id,wi=t.overflow,Yr=e),e=Hp(e,i.children),e.flags|=4096,e)}function __(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),hf(t.return,e,n)}function Eh(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function YT(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Wt(t,e,i.children,n),i=nt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&__(t,n,e);else if(t.tag===19)__(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(nt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Oc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Eh(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Oc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Eh(e,!0,n,null,o);break;case"together":Eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _x(t,e,n){switch(e.tag){case 3:JT(e),vs();break;case 5:wT(e);break;case 1:tn(e.type)&&Lc(e);break;case 4:bp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$e(Vc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?ZT(t,e,n):($e(nt,nt.current&1),t=Ai(t,e,n),t!==null?t.sibling:null);$e(nt,nt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return YT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(nt,nt.current),i)break;return null;case 22:case 23:return e.lanes=0,$T(t,e,n)}return Ai(t,e,n)}var QT,Tf,XT,jT;QT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tf=function(){};XT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,qr(ti.current);var o=null;switch(n){case"input":r=zh(t,r),i=zh(t,i),o=[];break;case"select":r=rt({},r,{value:void 0}),i=rt({},i,{value:void 0}),o=[];break;case"textarea":r=Gh(t,r),i=Gh(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=kc)}$h(n,i);var a;n=null;for(p in r)if(!i.hasOwnProperty(p)&&r.hasOwnProperty(p)&&r[p]!=null)if(p==="style"){var u=r[p];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(ol.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(u=r!=null?r[p]:void 0,i.hasOwnProperty(p)&&d!==u&&(d!=null||u!=null))if(p==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(ol.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Ke("scroll",t),o||u===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};jT=function(t,e,n,i){n!==i&&(e.flags|=4)};function ka(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function yx(t,e,n){var i=e.pendingProps;switch(Pp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return tn(e.type)&&Mc(),Vt(e),null;case 3:return i=e.stateNode,Es(),Ye(en),Ye(qt),Fp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Gu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Pf(On),On=null))),Tf(t,e),Vt(e),null;case 5:Vp(e);var r=qr(_l.current);if(n=e.type,t!==null&&e.stateNode!=null)XT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return Vt(e),null}if(t=qr(ti.current),Gu(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[jn]=e,i[ml]=o,t=(e.mode&1)!==0,n){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(r=0;r<Oa.length;r++)Ke(Oa[r],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":xg(i,o),Ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ke("invalid",i);break;case"textarea":Pg(i,o),Ke("invalid",i)}$h(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&Hu(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Hu(i.textContent,u,t),r=["children",""+u]):ol.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ke("scroll",i)}switch(n){case"input":bu(i),Ag(i,o,!0);break;case"textarea":bu(i),Rg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=kc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[jn]=e,t[ml]=i,QT(t,e,!1,!1),e.stateNode=t;e:{switch(a=Kh(n,i),n){case"dialog":Ke("cancel",t),Ke("close",t),r=i;break;case"iframe":case"object":case"embed":Ke("load",t),r=i;break;case"video":case"audio":for(r=0;r<Oa.length;r++)Ke(Oa[r],t);r=i;break;case"source":Ke("error",t),r=i;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),r=i;break;case"details":Ke("toggle",t),r=i;break;case"input":xg(t,i),r=zh(t,i),Ke("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=rt({},i,{value:void 0}),Ke("invalid",t);break;case"textarea":Pg(t,i),r=Gh(t,i),Ke("invalid",t);break;default:r=i}$h(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?N0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&P0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&sl(t,d):typeof d=="number"&&sl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ol.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Ke("scroll",t):d!=null&&fp(t,o,d,a))}switch(n){case"input":bu(t),Ag(t,i,!1);break;case"textarea":bu(t),Rg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+hr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?os(t,!!i.multiple,o,!1):i.defaultValue!=null&&os(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=kc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)jT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=qr(_l.current),qr(ti.current),Gu(e)){if(i=e.stateNode,n=e.memoizedProps,i[jn]=e,(o=i.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:Hu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[jn]=e,e.stateNode=i}return Vt(e),null;case 13:if(Ye(nt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&un!==null&&e.mode&1&&!(e.flags&128))_T(),vs(),e.flags|=98560,o=!1;else if(o=Gu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[jn]=e}else vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),o=!1}else On!==null&&(Pf(On),On=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?vt===0&&(vt=3):Zp())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Es(),Tf(t,e),t===null&&fl(e.stateNode.containerInfo),Vt(e),null;case 10:return Mp(e.type._context),Vt(e),null;case 17:return tn(e.type)&&Mc(),Vt(e),null;case 19:if(Ye(nt),o=e.memoizedState,o===null)return Vt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)ka(o,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Oc(t),a!==null){for(e.flags|=128,ka(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(nt,nt.current&1|2),e.child}t=t.sibling}o.tail!==null&&ct()>Cs&&(e.flags|=128,i=!0,ka(o,!1),e.lanes=4194304)}else{if(!i)if(t=Oc(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ka(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!je)return Vt(e),null}else 2*ct()-o.renderingStartTime>Cs&&n!==1073741824&&(e.flags|=128,i=!0,ka(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ct(),e.sibling=null,n=nt.current,$e(nt,i?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return Jp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ln&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function vx(t,e){switch(Pp(e),e.tag){case 1:return tn(e.type)&&Mc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Es(),Ye(en),Ye(qt),Fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vp(e),null;case 13:if(Ye(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(nt),null;case 4:return Es(),null;case 10:return Mp(e.type._context),null;case 22:case 23:return Jp(),null;case 24:return null;default:return null}}var Ku=!1,Ot=!1,Tx=typeof WeakSet=="function"?WeakSet:Set,se=null;function ns(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function Ef(t,e,n){try{n()}catch(i){at(t,e,i)}}var y_=!1;function Ex(t,e){if(rf=Pc,t=rT(),xp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,p=0,g=0,y=t,v=null;t:for(;;){for(var S;y!==n||r!==0&&y.nodeType!==3||(u=a+r),y!==o||i!==0&&y.nodeType!==3||(d=a+i),y.nodeType===3&&(a+=y.nodeValue.length),(S=y.firstChild)!==null;)v=y,y=S;for(;;){if(y===t)break t;if(v===n&&++p===r&&(u=a),v===o&&++g===i&&(d=a),(S=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=S}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(of={focusedElem:t,selectionRange:n},Pc=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var b=D.memoizedProps,q=D.memoizedState,A=e.stateNode,x=A.getSnapshotBeforeUpdate(e.elementType===e.type?b:Fn(e.type,b),q);A.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(z){at(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return D=y_,y_=!1,D}function Ya(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Ef(e,n,o)}r=r.next}while(r!==i)}}function gd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eE(t){var e=t.alternate;e!==null&&(t.alternate=null,eE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jn],delete e[ml],delete e[lf],delete e[ix],delete e[rx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tE(t){return t.tag===5||t.tag===3||t.tag===4}function v_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kc));else if(i!==4&&(t=t.child,t!==null))for(Cf(t,e,n),t=t.sibling;t!==null;)Cf(t,e,n),t=t.sibling}function Sf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Sf(t,e,n),t=t.sibling;t!==null;)Sf(t,e,n),t=t.sibling}var Pt=null,Un=!1;function $i(t,e,n){for(n=n.child;n!==null;)nE(t,e,n),n=n.sibling}function nE(t,e,n){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(ld,n)}catch{}switch(n.tag){case 5:Ot||ns(n,e);case 6:var i=Pt,r=Un;Pt=null,$i(t,e,n),Pt=i,Un=r,Pt!==null&&(Un?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Un?(t=Pt,n=n.stateNode,t.nodeType===8?ph(t.parentNode,n):t.nodeType===1&&ph(t,n),cl(t)):ph(Pt,n.stateNode));break;case 4:i=Pt,r=Un,Pt=n.stateNode.containerInfo,Un=!0,$i(t,e,n),Pt=i,Un=r;break;case 0:case 11:case 14:case 15:if(!Ot&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ef(n,e,a),r=r.next}while(r!==i)}$i(t,e,n);break;case 1:if(!Ot&&(ns(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){at(n,e,u)}$i(t,e,n);break;case 21:$i(t,e,n);break;case 22:n.mode&1?(Ot=(i=Ot)||n.memoizedState!==null,$i(t,e,n),Ot=i):$i(t,e,n);break;default:$i(t,e,n)}}function T_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Tx),e.forEach(function(i){var r=Nx.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Pt=u.stateNode,Un=!1;break e;case 3:Pt=u.stateNode.containerInfo,Un=!0;break e;case 4:Pt=u.stateNode.containerInfo,Un=!0;break e}u=u.return}if(Pt===null)throw Error(ee(160));nE(o,a,r),Pt=null,Un=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(p){at(r,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iE(e,t),e=e.sibling}function iE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),Qn(t),i&4){try{Ya(3,t,t.return),gd(3,t)}catch(b){at(t,t.return,b)}try{Ya(5,t,t.return)}catch(b){at(t,t.return,b)}}break;case 1:Vn(e,t),Qn(t),i&512&&n!==null&&ns(n,n.return);break;case 5:if(Vn(e,t),Qn(t),i&512&&n!==null&&ns(n,n.return),t.flags&32){var r=t.stateNode;try{sl(r,"")}catch(b){at(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&I0(r,o),Kh(u,a);var p=Kh(u,o);for(a=0;a<d.length;a+=2){var g=d[a],y=d[a+1];g==="style"?N0(r,y):g==="dangerouslySetInnerHTML"?P0(r,y):g==="children"?sl(r,y):fp(r,g,y,p)}switch(u){case"input":qh(r,o);break;case"textarea":x0(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?os(r,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?os(r,!!o.multiple,o.defaultValue,!0):os(r,!!o.multiple,o.multiple?[]:"",!1))}r[ml]=o}catch(b){at(t,t.return,b)}}break;case 6:if(Vn(e,t),Qn(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){at(t,t.return,b)}}break;case 3:if(Vn(e,t),Qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{cl(e.containerInfo)}catch(b){at(t,t.return,b)}break;case 4:Vn(e,t),Qn(t);break;case 13:Vn(e,t),Qn(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||($p=ct())),i&4&&T_(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(p=Ot)||g,Vn(e,t),Ot=p):Vn(e,t),Qn(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!g&&t.mode&1)for(se=t,g=t.child;g!==null;){for(y=se=g;se!==null;){switch(v=se,S=v.child,v.tag){case 0:case 11:case 14:case 15:Ya(4,v,v.return);break;case 1:ns(v,v.return);var D=v.stateNode;if(typeof D.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(b){at(i,n,b)}}break;case 5:ns(v,v.return);break;case 22:if(v.memoizedState!==null){w_(y);continue}}S!==null?(S.return=v,se=S):w_(y)}g=g.sibling}e:for(g=null,y=t;;){if(y.tag===5){if(g===null){g=y;try{r=y.stateNode,p?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=R0("display",a))}catch(b){at(t,t.return,b)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(b){at(t,t.return,b)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Vn(e,t),Qn(t),i&4&&T_(t);break;case 21:break;default:Vn(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tE(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(sl(r,""),i.flags&=-33);var o=v_(t);Sf(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=v_(t);Cf(t,u,a);break;default:throw Error(ee(161))}}catch(d){at(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wx(t,e,n){se=t,rE(t)}function rE(t,e,n){for(var i=(t.mode&1)!==0;se!==null;){var r=se,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Ku;if(!a){var u=r.alternate,d=u!==null&&u.memoizedState!==null||Ot;u=Ku;var p=Ot;if(Ku=a,(Ot=d)&&!p)for(se=r;se!==null;)a=se,d=a.child,a.tag===22&&a.memoizedState!==null?C_(r):d!==null?(d.return=a,se=d):C_(r);for(;o!==null;)se=o,rE(o),o=o.sibling;se=r,Ku=u,Ot=p}E_(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,se=o):E_(t)}}function E_(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||gd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ot)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&o_(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o_(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var g=p.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&cl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Ot||e.flags&512&&wf(e)}catch(v){at(e,e.return,v)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function w_(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function C_(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gd(4,e)}catch(d){at(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){at(e,r,d)}}var o=e.return;try{wf(e)}catch(d){at(e,o,d)}break;case 5:var a=e.return;try{wf(e)}catch(d){at(e,a,d)}}}catch(d){at(e,e.return,d)}if(e===t){se=null;break}var u=e.sibling;if(u!==null){u.return=e.return,se=u;break}se=e.return}}var Cx=Math.ceil,qc=Mi.ReactCurrentDispatcher,Gp=Mi.ReactCurrentOwner,An=Mi.ReactCurrentBatchConfig,be=0,xt=null,mt=null,kt=0,ln=0,is=yr(0),vt=0,El=null,Xr=0,_d=0,Wp=0,Qa=null,Qt=null,$p=0,Cs=1/0,vi=null,Hc=!1,If=null,sr=null,Ju=!1,ji=null,Gc=0,Xa=0,xf=null,fc=-1,pc=0;function $t(){return be&6?ct():fc!==-1?fc:fc=ct()}function ar(t){return t.mode&1?be&2&&kt!==0?kt&-kt:sx.transition!==null?(pc===0&&(pc=q0()),pc):(t=Be,t!==0||(t=window.event,t=t===void 0?16:Z0(t.type)),t):1}function qn(t,e,n,i){if(50<Xa)throw Xa=0,xf=null,Error(ee(185));Fl(t,n,i),(!(be&2)||t!==xt)&&(t===xt&&(!(be&2)&&(_d|=n),vt===4&&Qi(t,kt)),nn(t,i),n===1&&be===0&&!(e.mode&1)&&(Cs=ct()+500,fd&&vr()))}function nn(t,e){var n=t.callbackNode;sI(t,e);var i=Ac(t,t===xt?kt:0);if(i===0)n!==null&&Mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Mg(n),e===1)t.tag===0?ox(S_.bind(null,t)):pT(S_.bind(null,t)),tx(function(){!(be&6)&&vr()}),n=null;else{switch(H0(i)){case 1:n=yp;break;case 4:n=B0;break;case 16:n=xc;break;case 536870912:n=z0;break;default:n=xc}n=hE(n,oE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oE(t,e){if(fc=-1,pc=0,be&6)throw Error(ee(327));var n=t.callbackNode;if(cs()&&t.callbackNode!==n)return null;var i=Ac(t,t===xt?kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Wc(t,i);else{e=i;var r=be;be|=2;var o=aE();(xt!==t||kt!==e)&&(vi=null,Cs=ct()+500,Gr(t,e));do try{xx();break}catch(u){sE(t,u)}while(!0);kp(),qc.current=o,be=r,mt!==null?e=0:(xt=null,kt=0,e=vt)}if(e!==0){if(e===2&&(r=Xh(t),r!==0&&(i=r,e=Af(t,r))),e===1)throw n=El,Gr(t,0),Qi(t,i),nn(t,ct()),n;if(e===6)Qi(t,i);else{if(r=t.current.alternate,!(i&30)&&!Sx(r)&&(e=Wc(t,i),e===2&&(o=Xh(t),o!==0&&(i=o,e=Af(t,o))),e===1))throw n=El,Gr(t,0),Qi(t,i),nn(t,ct()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:Ur(t,Qt,vi);break;case 3:if(Qi(t,i),(i&130023424)===i&&(e=$p+500-ct(),10<e)){if(Ac(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){$t(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=af(Ur.bind(null,t,Qt,vi),e);break}Ur(t,Qt,vi);break;case 4:if(Qi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-zn(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ct()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cx(i/1960))-i,10<i){t.timeoutHandle=af(Ur.bind(null,t,Qt,vi),i);break}Ur(t,Qt,vi);break;case 5:Ur(t,Qt,vi);break;default:throw Error(ee(329))}}}return nn(t,ct()),t.callbackNode===n?oE.bind(null,t):null}function Af(t,e){var n=Qa;return t.current.memoizedState.isDehydrated&&(Gr(t,e).flags|=256),t=Wc(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&Pf(e)),t}function Pf(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function Sx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Hn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qi(t,e){for(e&=~Wp,e&=~_d,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),i=1<<n;t[n]=-1,e&=~i}}function S_(t){if(be&6)throw Error(ee(327));cs();var e=Ac(t,0);if(!(e&1))return nn(t,ct()),null;var n=Wc(t,e);if(t.tag!==0&&n===2){var i=Xh(t);i!==0&&(e=i,n=Af(t,i))}if(n===1)throw n=El,Gr(t,0),Qi(t,e),nn(t,ct()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ur(t,Qt,vi),nn(t,ct()),null}function Kp(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Cs=ct()+500,fd&&vr())}}function jr(t){ji!==null&&ji.tag===0&&!(be&6)&&cs();var e=be;be|=1;var n=An.transition,i=Be;try{if(An.transition=null,Be=1,t)return t()}finally{Be=i,An.transition=n,be=e,!(be&6)&&vr()}}function Jp(){ln=is.current,Ye(is)}function Gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ex(n)),mt!==null)for(n=mt.return;n!==null;){var i=n;switch(Pp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Mc();break;case 3:Es(),Ye(en),Ye(qt),Fp();break;case 5:Vp(i);break;case 4:Es();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:Mp(i.type._context);break;case 22:case 23:Jp()}n=n.return}if(xt=t,mt=t=lr(t.current,null),kt=ln=e,vt=0,El=null,Wp=_d=Xr=0,Qt=Qa=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}zr=null}return t}function sE(t,e){do{var n=mt;try{if(kp(),cc.current=zc,Bc){for(var i=it.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Bc=!1}if(Qr=0,It=yt=it=null,Za=!1,yl=0,Gp.current=null,n===null||n.return===null){vt=1,El=e,mt=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=kt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=d_(a);if(S!==null){S.flags&=-257,h_(S,a,u,o,e),S.mode&1&&c_(o,p,e),e=S,d=p;var D=e.updateQueue;if(D===null){var b=new Set;b.add(d),e.updateQueue=b}else D.add(d);break e}else{if(!(e&1)){c_(o,p,e),Zp();break e}d=Error(ee(426))}}else if(je&&u.mode&1){var q=d_(a);if(q!==null){!(q.flags&65536)&&(q.flags|=256),h_(q,a,u,o,e),Rp(ws(d,u));break e}}o=d=ws(d,u),vt!==4&&(vt=2),Qa===null?Qa=[o]:Qa.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=HT(o,d,e);r_(o,A);break e;case 1:u=d;var x=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(sr===null||!sr.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=GT(o,u,e);r_(o,z);break e}}o=o.return}while(o!==null)}uE(n)}catch(W){e=W,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function aE(){var t=qc.current;return qc.current=zc,t===null?zc:t}function Zp(){(vt===0||vt===3||vt===2)&&(vt=4),xt===null||!(Xr&268435455)&&!(_d&268435455)||Qi(xt,kt)}function Wc(t,e){var n=be;be|=2;var i=aE();(xt!==t||kt!==e)&&(vi=null,Gr(t,e));do try{Ix();break}catch(r){sE(t,r)}while(!0);if(kp(),be=n,qc.current=i,mt!==null)throw Error(ee(261));return xt=null,kt=0,vt}function Ix(){for(;mt!==null;)lE(mt)}function xx(){for(;mt!==null&&!QS();)lE(mt)}function lE(t){var e=dE(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?uE(t):mt=e,Gp.current=null}function uE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vx(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,mt=null;return}}else if(n=yx(n,e,ln),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);vt===0&&(vt=5)}function Ur(t,e,n){var i=Be,r=An.transition;try{An.transition=null,Be=1,Ax(t,e,n,i)}finally{An.transition=r,Be=i}return null}function Ax(t,e,n,i){do cs();while(ji!==null);if(be&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(aI(t,o),t===xt&&(mt=xt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ju||(Ju=!0,hE(xc,function(){return cs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=An.transition,An.transition=null;var a=Be;Be=1;var u=be;be|=4,Gp.current=null,Ex(t,n),iE(n,t),KI(of),Pc=!!rf,of=rf=null,t.current=n,wx(n),XS(),be=u,Be=a,An.transition=o}else t.current=n;if(Ju&&(Ju=!1,ji=t,Gc=r),o=t.pendingLanes,o===0&&(sr=null),tI(n.stateNode),nn(t,ct()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hc)throw Hc=!1,t=If,If=null,t;return Gc&1&&t.tag!==0&&cs(),o=t.pendingLanes,o&1?t===xf?Xa++:(Xa=0,xf=t):Xa=0,vr(),null}function cs(){if(ji!==null){var t=H0(Gc),e=An.transition,n=Be;try{if(An.transition=null,Be=16>t?16:t,ji===null)var i=!1;else{if(t=ji,ji=null,Gc=0,be&6)throw Error(ee(331));var r=be;for(be|=4,se=t.current;se!==null;){var o=se,a=o.child;if(se.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var p=u[d];for(se=p;se!==null;){var g=se;switch(g.tag){case 0:case 11:case 15:Ya(8,g,o)}var y=g.child;if(y!==null)y.return=g,se=y;else for(;se!==null;){g=se;var v=g.sibling,S=g.return;if(eE(g),g===p){se=null;break}if(v!==null){v.return=S,se=v;break}se=S}}}var D=o.alternate;if(D!==null){var b=D.child;if(b!==null){D.child=null;do{var q=b.sibling;b.sibling=null,b=q}while(b!==null)}}se=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,se=a;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ya(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,se=A;break e}se=o.return}}var x=t.current;for(se=x;se!==null;){a=se;var R=a.child;if(a.subtreeFlags&2064&&R!==null)R.return=a,se=R;else e:for(a=x;se!==null;){if(u=se,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:gd(9,u)}}catch(W){at(u,u.return,W)}if(u===a){se=null;break e}var z=u.sibling;if(z!==null){z.return=u.return,se=z;break e}se=u.return}}if(be=r,vr(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(ld,t)}catch{}i=!0}return i}finally{Be=n,An.transition=e}}return!1}function I_(t,e,n){e=ws(n,e),e=HT(t,e,1),t=or(t,e,1),e=$t(),t!==null&&(Fl(t,1,e),nn(t,e))}function at(t,e,n){if(t.tag===3)I_(t,t,n);else for(;e!==null;){if(e.tag===3){I_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(sr===null||!sr.has(i))){t=ws(n,t),t=GT(e,t,1),e=or(e,t,1),t=$t(),e!==null&&(Fl(e,1,t),nn(e,t));break}}e=e.return}}function Px(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(kt&n)===n&&(vt===4||vt===3&&(kt&130023424)===kt&&500>ct()-$p?Gr(t,0):Wp|=n),nn(t,e)}function cE(t,e){e===0&&(t.mode&1?(e=Uu,Uu<<=1,!(Uu&130023424)&&(Uu=4194304)):e=1);var n=$t();t=xi(t,e),t!==null&&(Fl(t,e,n),nn(t,n))}function Rx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cE(t,n)}function Nx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),cE(t,n)}var dE;dE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,_x(t,e,n);jt=!!(t.flags&131072)}else jt=!1,je&&e.flags&1048576&&mT(e,bc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;hc(t,e),t=e.pendingProps;var r=ys(e,qt.current);us(e,n),r=Op(null,e,i,t,r,n);var o=Bp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(i)?(o=!0,Lc(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Dp(e),r.updater=md,e.stateNode=r,r._reactInternals=e,pf(e,i,t,n),e=_f(null,e,i,!0,o,n)):(e.tag=0,je&&o&&Ap(e),Wt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(hc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Mx(i),t=Fn(i,t),r){case 0:e=gf(null,e,i,t,n);break e;case 1:e=m_(null,e,i,t,n);break e;case 11:e=f_(null,e,i,t,n);break e;case 14:e=p_(null,e,i,Fn(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fn(i,r),gf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fn(i,r),m_(t,e,i,r,n);case 3:e:{if(JT(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,ET(t,e),Uc(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=ws(Error(ee(423)),e),e=g_(t,e,i,n,r);break e}else if(i!==r){r=ws(Error(ee(424)),e),e=g_(t,e,i,n,r);break e}else for(un=rr(e.stateNode.containerInfo.firstChild),dn=e,je=!0,On=null,n=vT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vs(),i===r){e=Ai(t,e,n);break e}Wt(t,e,i,n)}e=e.child}return e;case 5:return wT(e),t===null&&df(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,sf(i,r)?a=null:o!==null&&sf(i,o)&&(e.flags|=32),KT(t,e),Wt(t,e,a,n),e.child;case 6:return t===null&&df(e),null;case 13:return ZT(t,e,n);case 4:return bp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ts(e,null,i,n):Wt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fn(i,r),f_(t,e,i,r,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,$e(Vc,i._currentValue),i._currentValue=a,o!==null)if(Hn(o.value,a)){if(o.children===r.children&&!en.current){e=Ai(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Ci(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var g=p.pending;g===null?d.next=d:(d.next=g.next,g.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),hf(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),hf(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Wt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,us(e,n),r=Rn(r),i=i(r),e.flags|=1,Wt(t,e,i,n),e.child;case 14:return i=e.type,r=Fn(i,e.pendingProps),r=Fn(i.type,r),p_(t,e,i,r,n);case 15:return WT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fn(i,r),hc(t,e),e.tag=1,tn(i)?(t=!0,Lc(e)):t=!1,us(e,n),qT(e,i,r),pf(e,i,r,n),_f(null,e,i,!0,t,n);case 19:return YT(t,e,n);case 22:return $T(t,e,n)}throw Error(ee(156,e.tag))};function hE(t,e){return O0(t,e)}function kx(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,i){return new kx(t,e,n,i)}function Yp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mx(t){if(typeof t=="function")return Yp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mp)return 11;if(t===gp)return 14}return 2}function lr(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Yp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ko:return Wr(n.children,r,o,e);case pp:a=8,r|=8;break;case Fh:return t=xn(12,n,e,r|2),t.elementType=Fh,t.lanes=o,t;case Uh:return t=xn(13,n,e,r),t.elementType=Uh,t.lanes=o,t;case Oh:return t=xn(19,n,e,r),t.elementType=Oh,t.lanes=o,t;case w0:return yd(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T0:a=10;break e;case E0:a=9;break e;case mp:a=11;break e;case gp:a=14;break e;case Ki:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=xn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Wr(t,e,n,i){return t=xn(7,t,i,e),t.lanes=n,t}function yd(t,e,n,i){return t=xn(22,t,i,e),t.elementType=w0,t.lanes=n,t.stateNode={isHidden:!1},t}function wh(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function Ch(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lx(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ih(0),this.expirationTimes=ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Qp(t,e,n,i,r,o,a,u,d){return t=new Lx(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dp(o),t}function Dx(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function fE(t){if(!t)return fr;t=t._reactInternals;e:{if(ro(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(tn(n))return fT(t,n,e)}return e}function pE(t,e,n,i,r,o,a,u,d){return t=Qp(n,i,!0,t,r,o,a,u,d),t.context=fE(null),n=t.current,i=$t(),r=ar(n),o=Ci(i,r),o.callback=e??null,or(n,o,r),t.current.lanes=r,Fl(t,r,i),nn(t,i),t}function vd(t,e,n,i){var r=e.current,o=$t(),a=ar(r);return n=fE(n),e.context===null?e.context=n:e.pendingContext=n,e=Ci(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=or(r,e,a),t!==null&&(qn(t,r,a,o),uc(t,r,a)),a}function $c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xp(t,e){x_(t,e),(t=t.alternate)&&x_(t,e)}function bx(){return null}var mE=typeof reportError=="function"?reportError:function(t){console.error(t)};function jp(t){this._internalRoot=t}Td.prototype.render=jp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));vd(t,e,null,null)};Td.prototype.unmount=jp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jr(function(){vd(null,t,null,null)}),e[Ii]=null}};function Td(t){this._internalRoot=t}Td.prototype.unstable_scheduleHydration=function(t){if(t){var e=$0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yi.length&&e!==0&&e<Yi[n].priority;n++);Yi.splice(n,0,t),n===0&&J0(t)}};function em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ed(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function A_(){}function Vx(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var p=$c(a);o.call(p)}}var a=pE(e,i,t,0,null,!1,!1,"",A_);return t._reactRootContainer=a,t[Ii]=a.current,fl(t.nodeType===8?t.parentNode:t),jr(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var p=$c(d);u.call(p)}}var d=Qp(t,0,!1,null,null,!1,!1,"",A_);return t._reactRootContainer=d,t[Ii]=d.current,fl(t.nodeType===8?t.parentNode:t),jr(function(){vd(e,d,n,i)}),d}function wd(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var d=$c(a);u.call(d)}}vd(e,a,t,r)}else a=Vx(n,e,t,r,i);return $c(a)}G0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ua(e.pendingLanes);n!==0&&(vp(e,n|1),nn(e,ct()),!(be&6)&&(Cs=ct()+500,vr()))}break;case 13:jr(function(){var i=xi(t,1);if(i!==null){var r=$t();qn(i,t,1,r)}}),Xp(t,1)}};Tp=function(t){if(t.tag===13){var e=xi(t,134217728);if(e!==null){var n=$t();qn(e,t,134217728,n)}Xp(t,134217728)}};W0=function(t){if(t.tag===13){var e=ar(t),n=xi(t,e);if(n!==null){var i=$t();qn(n,t,e,i)}Xp(t,e)}};$0=function(){return Be};K0=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};Zh=function(t,e,n){switch(e){case"input":if(qh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=hd(i);if(!r)throw Error(ee(90));S0(i),qh(i,r)}}}break;case"textarea":x0(t,n);break;case"select":e=n.value,e!=null&&os(t,!!n.multiple,e,!1)}};L0=Kp;D0=jr;var Fx={usingClientEntryPoint:!1,Events:[Ol,Qo,hd,k0,M0,Kp]},Ma={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ux={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=F0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{ld=Zu.inject(Ux),ei=Zu}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fx;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!em(e))throw Error(ee(200));return Dx(t,e,null,n)};fn.createRoot=function(t,e){if(!em(t))throw Error(ee(299));var n=!1,i="",r=mE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Qp(t,1,!1,null,null,n,!1,i,r),t[Ii]=e.current,fl(t.nodeType===8?t.parentNode:t),new jp(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=F0(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return jr(t)};fn.hydrate=function(t,e,n){if(!Ed(e))throw Error(ee(200));return wd(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!em(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=mE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=pE(e,null,t,1,n??null,r,!1,o,a),t[Ii]=e.current,fl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Td(e)};fn.render=function(t,e,n){if(!Ed(e))throw Error(ee(200));return wd(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Ed(t))throw Error(ee(40));return t._reactRootContainer?(jr(function(){wd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ii]=null})}),!0):!1};fn.unstable_batchedUpdates=Kp;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ed(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return wd(t,e,n,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function gE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gE)}catch(t){console.error(t)}}gE(),g0.exports=fn;var _E=g0.exports,P_=_E;bh.createRoot=P_.createRoot,bh.hydrateRoot=P_.hydrateRoot;const Cd={className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2},Ox=()=>C.jsx("svg",{...Cd,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Bx=()=>C.jsx("svg",{...Cd,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),zx=()=>C.jsx("svg",{...Cd,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),qx=()=>C.jsx("svg",{...Cd,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),yE=()=>C.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 13v-6l6 3m-6-3l6-3"})}),vE=()=>C.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3h2m-4 13h2"})}),TE=()=>C.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h2m6-4v2m-6-2v2"})}),tm=()=>C.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Hx=()=>C.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 2.21-1.79 4-4 4-1.742 0-3.223-.835-3.772-2M12 18v.01"})}),Gx=()=>C.jsxs("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),EE=()=>C.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),wE=()=>C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Wx=()=>C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),$x=()=>C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Kx=()=>C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),Jx=()=>C.jsx("svg",{className:"w-6 h-6 transform rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),Zx=()=>C.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M3 9h2m14 0h2M3 15h2m14 0h2M10 21h4c1.105 0 2-.895 2-2v-2H8v2c0 1.105.895 2 2 2z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 9V7a2 2 0 012-2h10a2 2 0 012 2v2"})]}),CE=()=>C.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Yx=()=>C.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:[C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25ZM12 22.5C17.799 22.5 22.5 17.799 22.5 12C22.5 6.20101 17.799 1.5 12 1.5C6.20101 1.5 1.5 6.20101 1.5 12C1.5 17.799 6.20101 22.5 12 22.5Z"}),C.jsx("path",{d:"M12 15.75C14.0711 15.75 15.75 14.0711 15.75 12C15.75 9.92893 14.0711 8.25 12 8.25C9.92893 8.25 8.25 9.92893 8.25 12C8.25 14.0711 9.92893 15.75 12 15.75Z"})]}),Qx=()=>C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),Xx=()=>C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),jx=()=>C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),eA=()=>C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),tA=()=>C.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),nA=()=>C.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0-.714.211-1.412.608-2.006L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})}),iA=()=>C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M8 5v14l11-7z"})}),rA=()=>C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),oA=()=>C.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),R_=()=>C.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),N_=()=>C.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),sA=()=>C.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),aA=()=>C.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})}),lA=()=>C.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 13v-6l6 3m-6-3l6-3"})}),uA=()=>C.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),oo={en:{appName:"SCB Navigation",welcome:"SCB Medical Navigation",welcomeSub:"Find Emergency, OPD, or any department instantly.",emergencyButton:"EMERGENCY HELP",emergencySubtext:"Tap for immediate directions to Emergency/Casualty",quickCallAmbulance:"Call Ambulance",quickMapOverview:"Campus Map",quickAskHelp:"Ask for Help",orExplore:"or explore",gettingLocation:"Getting your location...",manualLocationSet:"Location manually set to:",planRouteTitle:"Plan Smart Route",planRouteDesc:"Get the best path with AI-powered 'thinking mode'.",planRouteDescScb:"For SCB Campus navigation only",localUpdatesTitle:"Local Updates",localUpdatesDesc:"Check for real-time traffic and event news.",chatTitle:"Ask Assistant",chatDesc:"Chat with Gemini for any questions you have.",setLocationTitle:"Set Location Manually",setLocationDesc:"Override GPS and set your starting point.",reportTitle:"Report Traffic",reportDesc:"Help the community by reporting an issue.",navHome:"Home",navPlanner:"Planner",navUpdates:"Updates",navChat:"Chat",quickDestEmergency:" Emergency",quickDestOPD:" OPD",quickDestBloodBank:" Blood Bank",quickDestMainGate:" Main Gate",navMode:"Navigation (A to B)",dayMode:"Day Planner",campusNavTitle:"Campus Navigator",itineraryTitle:"AI Itinerary Planner",navSub:"Get interactive, step-by-step directions inside the campus.",daySub:'Plan a full day: "Visiting OPD, then blood bank, then lunch".',destLabel:"Where do you want to go?",destPlace:"e.g., Cardiology Department, Main Gate",notesLabel:"Any preferences?",notesPlace:"e.g., Avoid stairs, need wheelchair access...",dayPromptLabel:"Describe your plan:",dayPromptPlace:"e.g., I need to visit the Eye Dept at 10am, then grab lunch at 1pm, and meet a doctor at Surgery Dept at 3pm.",findPath:"Find Best Path",genPlan:"Generate Itinerary",analyzing:"Analyzing Routes...",connecting:"Gemini is connecting...",step:"Step",prev:"Previous",next:"Next",viewSummary:"View Route Summary & Sources",viewPlanText:"View Itinerary Details",planNew:"Plan New Route",createNew:"Create New Plan",savePlan:"Save Plan",savedPlans:"Saved Plans",yourItinerary:"Your Day Plan",chatWelcome:"Hello! I'm here to help. Need directions to Emergency, OPD, or any department?",chatInput:"Type your question or tap a suggestion below...",chatSuggest1:"Where is Emergency?",chatSuggest2:"OPD timings",chatSuggest3:"Nearest parking",updatesHeader:"Daily Campus Briefing",updatesSub:"Real-time checks for SCB Medical College",fetchingUpdates:"Gathering latest reports from local authorities...",noUpdates:"No major incidents reported by authorities.",yourReports:"Community Reports",noUserReports:"No active user reports.",statusTraffic:"Traffic Flow",statusOPD:"OPD Crowds",statusGate:"Main Gate",statusNormal:"Normal",statusBusy:"Busy",statusCritical:"Jammed",readAloud:"Listen to Briefing",stopReading:"Stop Audio",wisdomHeader:"Standard Campus Info",wisdomSub:"General guidelines for patients",wisdomOPD:"OPD Registration: 8:00 AM - 12:00 PM (Mon-Sat). Come early to avoid queues.",wisdomEmergency:"Emergency / Casualty is open 24/7. Use the dedicated Red Lane for ambulances.",wisdomParking:"Patient parking is available near the Playground area. Do not park on main roads.",reportHeader:"Report an Issue",reportLocation:"Location",reportLocationPlace:"e.g., Near Main Gate",reportSeverity:"Severity",sevLight:"Light Traffic",sevModerate:"Moderate Traffic",sevHeavy:"Heavy Traffic / Jam",sevAccident:"Accident / Hazard",sevClosure:"Road Closed",reportDescLabel:"Description",reportDescPlace:"e.g., Stuck for 10 mins, ambulance blocked.",cancel:"Cancel",submitReport:"Submit Report",processingReport:"AI is processing...",reportSuccess:"Report Live!",verifiedBy:"Verified by",users:"users",justNow:"Just now",minsAgo:"mins ago",hrsAgo:"hrs ago",guideTitle:"App Guide",guideSub:"Here's a quick look at what each feature does.",guidePlanTitle:"Plan Smart Route",guidePlanDesc:"Use this to get detailed, step-by-step directions. Our AI 'Thinks' like a local, considering real-time traffic, narrow streets, market days, and even temporary closures. Just enter your destination and any special requests (like 'avoid the crowded temple road').",guideUpdatesTitle:"Local Updates",guideUpdatesDesc:"Tap here to get a quick summary of what's happening around you right now. The AI scans for news on traffic jams, road closures, festivals, or other events that could affect your travel. It's like having a local news reporter just for you.",guideChatTitle:"Ask Assistant",guideChatDesc:"This is your personal chat assistant. Have a question? Just ask! You can ask for directions, find the nearest pharmacy, or even ask about the weather. For example, try asking: 'Where can I find the best chai near me?'",guideReportTitle:"Report Traffic",guideReportDesc:"This feature will allow you to help other users by reporting traffic jams, accidents, or road closures you see. By working together, we can make navigation easier for everyone.",gotIt:"Got It!"},or:{appName:"SCB ",welcome:"SCB  ",welcomeSub:", OPD,     |",emergencyButton:" ",emergencySubtext:"     ",quickCallAmbulance:" ",quickMapOverview:" ",quickAskHelp:" ",orExplore:"  ",gettingLocation:"   ...",manualLocationSet:"  :",planRouteTitle:"  ",planRouteDesc:"AI     |",planRouteDescScb:" SCB  ",localUpdatesTitle:" ",localUpdatesDesc:"      |",chatTitle:" ",chatDesc:"Gemini    |",setLocationTitle:" ",setLocationDesc:"      |",reportTitle:"  ",reportDesc:"      |",navHome:"",navPlanner:"",navUpdates:"",navChat:"",quickDestEmergency:" ",quickDestOPD:" OPD",quickDestBloodBank:"  ",quickDestMainGate:"  ",navMode:" (  )",dayMode:" ",campusNavTitle:" ",itineraryTitle:"AI  ",navSub:"     |",daySub:"    |",destLabel:"   ?",destPlace:",  ,  ",notesLabel:"    ?",notesPlace:",  ,   ...",dayPromptLabel:"   :",dayPromptPlace:":     ,   ,      |",findPath:" ",genPlan:"  ",analyzing:"  ...",connecting:"Gemini   ...",step:"",prev:"",next:"",viewSummary:" ",viewPlanText:"  ",planNew:"  ",createNew:"  ",savePlan:"  ",savedPlans:"  ",yourItinerary:"  ",chatWelcome:"!      | , OPD,        ?",chatInput:"        ...",chatSuggest1:" ?",chatSuggest2:"OPD ",chatSuggest3:" ",updatesHeader:"  ",updatesSub:"SCB    - ",fetchingUpdates:"     ...",noUpdates:"     |",yourReports:" ",noUserReports:"    |",statusTraffic:" ",statusOPD:"OPD ",statusGate:" ",statusNormal:"",statusBusy:"",statusCritical:" ",readAloud:" ",stopReading:" ",wisdomHeader:" ",wisdomSub:"   ",wisdomOPD:"OPD :     (-) |     |",wisdomEmergency:"     |       |",wisdomParking:"      |      |",reportHeader:" ",reportLocation:"",reportLocationPlace:",   ",reportSeverity:"",sevLight:" ",sevModerate:" ",sevHeavy:"  / ",sevAccident:" / ",sevClosure:" ",reportDescLabel:"",reportDescPlace:":     ,   |",cancel:" ",submitReport:" ",processingReport:"AI  ...",reportSuccess:"  !",verifiedBy:" ",users:"",justNow:"",minsAgo:" ",hrsAgo:" ",guideTitle:" ",guideSub:"         |",guidePlanTitle:"  ",guidePlanDesc:", --       |  AI      , ,        |",guideUpdatesTitle:" ",guideUpdatesDesc:"          |  ,        |",guideChatTitle:" ",guideChatDesc:"    |   ?  !   ,        |",guideReportTitle:" ",guideReportDesc:"           |",gotIt:"!"}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let cA,dA;function hA(){return{geminiUrl:cA,vertexUrl:dA}}function fA(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const a=hA();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(o=a.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Li{}function re(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let p=0;p<d.length;p++){const g=d[p];f(g,e.slice(o+1),n[p])}else for(const p of d)f(p,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];f(d[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(u=>c(u,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function pA(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),a=new Set;let u=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){u=d;break}if(u!==-1&&o.length>u)for(let d=u;d<o.length;d++){const p=o[d];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&a.add(p)}Rf(t,r,o,0,a)}}function Rf(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])Rf(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(p=>!p.startsWith("_")&&!r.has(p)),d={};for(const p of u)d[p]=a[p];for(const[p,g]of Object.entries(d)){const y=[];for(const v of n.slice(i))v==="*"?y.push(p):y.push(v);f(a,y,g)}for(const p of u)delete a[p]}}else{const a=t;o in a&&Rf(a[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mA(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=c(t,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function gA(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&f(e,["response"],yA(a)),e}function _A(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],vA(a)),e}function yA(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>TA(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function vA(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>EA(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function TA(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],AA(n)),e}function EA(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],PA(n)),e}function wA(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function CA(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function SA(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],IA(a)),e}function IA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function SE(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],xA(a)),e}function xA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function AA(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],nm(i));const r=c(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function PA(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],nm(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var k_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(k_||(k_={}));var M_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(M_||(M_={}));var L_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(L_||(L_={}));var We;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(We||(We={}));var D_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(D_||(D_={}));var b_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(b_||(b_={}));var V_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(V_||(V_={}));var F_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(F_||(F_={}));var U_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(U_||(U_={}));var O_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(O_||(O_={}));var B_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(B_||(B_={}));var z_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(z_||(z_={}));var q_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(q_||(q_={}));var H_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(H_||(H_={}));var G_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(G_||(G_={}));var W_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(W_||(W_={}));var $_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($_||($_={}));var K_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(K_||(K_={}));var J_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(J_||(J_={}));var Kc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Kc||(Kc={}));var Z_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Z_||(Z_={}));var Y_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Y_||(Y_={}));var Q_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Q_||(Q_={}));var Nf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Nf||(Nf={}));var X_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(X_||(X_={}));var j_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(j_||(j_={}));var ey;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ey||(ey={}));var ty;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ty||(ty={}));var ny;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ny||(ny={}));var iy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(iy||(iy={}));var ry;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ry||(ry={}));var oy;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(oy||(oy={}));var sy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(sy||(sy={}));var ay;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ay||(ay={}));var ly;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ly||(ly={}));var uy;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(uy||(uy={}));var cy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(cy||(cy={}));var dy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dy||(dy={}));var hy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(hy||(hy={}));var fy;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(fy||(fy={}));var py;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(py||(py={}));var my;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(my||(my={}));var gy;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(gy||(gy={}));var _y;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(_y||(_y={}));var yy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(yy||(yy={}));var vy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(vy||(vy={}));var Ty;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ty||(Ty={}));var Ey;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Ey||(Ey={}));var wy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wy||(wy={}));var Cy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Cy||(Cy={}));var Sy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Sy||(Sy={}));var Iy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Iy||(Iy={}));var xy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xy||(xy={}));var Ay;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ay||(Ay={}));var rs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(rs||(rs={}));class kf{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class La{get text(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",g=!1;const y=[];for(const v of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[S,D]of Object.entries(v))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(D!==null||D!==void 0)&&y.push(S);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;g=!0,p+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?p:void 0}get data(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const g=[];for(const y of(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[v,S]of Object.entries(y))v!=="inlineData"&&(S!==null||S!==void 0)&&g.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(p+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,i,r,o,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,i,r,o,a,u,d,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(p=g==null?void 0:g[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,i,r,o,a,u,d,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(d=(u=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(p=g==null?void 0:g[0])===null||p===void 0?void 0:p.output}}class Py{}class Ry{}class RA{}class NA{}class kA{}class MA{}class Ny{}class ky{}class My{}class LA{}class Jc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Jc;let r;const o=e;return n?r=_A(o):r=gA(o),Object.assign(i,r),i}}class Ly{}class Dy{}class by{}class Vy{}class DA{}class bA{}class VA{}class im{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new im,o=SA(e);return Object.assign(i,o),i}}class FA{}class UA{}class OA{}class Fy{}class BA{get text(){var e,n,i;let r="",o=!1;const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="text"&&d!=="thought"&&p!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&o.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class zA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class rm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new rm,o=SE(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function IE(t,e){const n=Fe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function xE(t){return Array.isArray(t)?t.map(e=>Zc(e)):[Zc(t)]}function Zc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function AE(t){const e=Zc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function PE(t){const e=Zc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Uy(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function RE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Uy(e)):[Uy(t)]}function Mf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Oy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function By(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function zt(t){if(t==null)throw new Error("ContentUnion is required");return Mf(t)?t:{role:"user",parts:RE(t)}}function om(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=zt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=zt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>zt(n)):[zt(e)]}function Pn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Oy(t)||By(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zt(t)]}const e=[],n=[],i=Mf(t[0]);for(const r of t){const o=Mf(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(Oy(r)||By(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:RE(n)}),e}function qA(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(We).includes(n[0].toUpperCase())?n[0].toUpperCase():We.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(We).includes(i.toUpperCase())?i.toUpperCase():We.TYPE_UNSPECIFIED})}}function ds(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&qA(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(We).includes(u.toUpperCase())?u.toUpperCase():We.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=ds(u);else if(i.includes(a)){const d=[];for(const p of u){if(p.type=="null"){e.nullable=!0;continue}d.push(ds(p))}e[a]=d}else if(r.includes(a)){const d={};for(const[p,g]of Object.entries(u))d[p]=ds(g);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function sm(t){return ds(t)}function am(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function lm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ds(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ds(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ds(e.response));return t}function bs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function HA(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Di(t,e){if(typeof e!="string")throw new Error("name must be a string");return HA(t,e,"cachedContents")}function NE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Tr(t){return nm(t)}function GA(t){return t!=null&&typeof t=="object"&&"name"in t}function WA(t){return t!=null&&typeof t=="object"&&"video"in t}function $A(t){return t!=null&&typeof t=="object"&&"uri"in t}function kE(t){var e;let n;if(GA(t)&&(n=t.name),!($A(t)&&(n=t.uri,n===void 0))&&!(WA(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ME(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function LE(t){for(const e of["models","tunedModels","publisherModels"])if(KA(t,e))return t[e];return[]}function KA(t,e){return t!==null&&typeof t=="object"&&e in t}function JA(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function ZA(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const a=JA(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function DE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function YA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function bE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Vs(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function VE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QA(t){const e={},n=c(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>kP(a))),f(e,["inlinedResponses"],o)}const r=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["inlinedEmbedContentResponses"],o)}return e}function XA(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const r=c(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function jA(t){const e={},n=c(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function gc(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["metadata","state"]);r!=null&&f(e,["state"],VE(r));const o=c(t,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);const a=c(t,["metadata","endTime"]);a!=null&&f(e,["endTime"],a);const u=c(t,["metadata","updateTime"]);u!=null&&f(e,["updateTime"],u);const d=c(t,["metadata","model"]);d!=null&&f(e,["model"],d);const p=c(t,["metadata","output"]);return p!=null&&f(e,["dest"],QA(bE(p))),e}function Lf(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["state"]);r!=null&&f(e,["state"],VE(r));const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["createTime"]);a!=null&&f(e,["createTime"],a);const u=c(t,["startTime"]);u!=null&&f(e,["startTime"],u);const d=c(t,["endTime"]);d!=null&&f(e,["endTime"],d);const p=c(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const g=c(t,["model"]);g!=null&&f(e,["model"],g);const y=c(t,["inputConfig"]);y!=null&&f(e,["src"],eP(y));const v=c(t,["outputConfig"]);v!=null&&f(e,["dest"],XA(bE(v)));const S=c(t,["completionStats"]);return S!=null&&f(e,["completionStats"],S),e}function eP(t){const e={},n=c(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const r=c(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function tP(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&f(n,["fileName"],i);const r=c(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>NP(t,a))),f(n,["requests","requests"],o)}return n}function nP(t){const e={},n=c(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function iP(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function rP(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Vs(t,i)),n}function oP(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Vs(t,i)),n}function sP(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],aP(i));const r=c(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&f(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&f(e,["index"],d);const p=c(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&f(e,["urlContextMetadata"],y),e}function aP(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["citations"],i)}return e}function FE(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>UP(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function lP(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function uP(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],jA(YA(r))),n}function zy(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["src"]);r!=null&&f(n,["batch","inputConfig"],tP(t,DE(t,r)));const o=c(e,["config"]);return o!=null&&lP(o,n),n}function cP(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],Fe(t,i));const r=c(e,["src"]);r!=null&&f(n,["inputConfig"],nP(DE(t,r)));const o=c(e,["config"]);return o!=null&&uP(o,n),n}function dP(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),n}function hP(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["src"]);r!=null&&f(n,["batch","inputConfig"],vP(t,r));const o=c(e,["config"]);return o!=null&&dP(o,n),n}function fP(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Vs(t,i)),n}function pP(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Vs(t,i)),n}function mP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function gP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function _P(t,e){const n={},i=c(e,["contents"]);if(i!=null){let o=om(t,i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["requests[]","request","content"],o)}const r=c(e,["config"]);return r!=null&&(f(n,["_self"],yP(r,n)),pA(n,{"requests[].*":"requests[].request.*"})),n}function yP(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function vP(t,e){const n={},i=c(e,["fileName"]);i!=null&&f(n,["file_name"],i);const r=c(e,["inlinedRequests"]);return r!=null&&f(n,["requests"],_P(t,r)),n}function TP(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function EP(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wP(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function CP(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],FE(zt(r)));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const p=c(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&f(i,["presencePenalty"],S);const D=c(e,["frequencyPenalty"]);D!=null&&f(i,["frequencyPenalty"],D);const b=c(e,["seed"]);b!=null&&f(i,["seed"],b);const q=c(e,["responseMimeType"]);q!=null&&f(i,["responseMimeType"],q);const A=c(e,["responseSchema"]);A!=null&&f(i,["responseSchema"],sm(A));const x=c(e,["responseJsonSchema"]);if(x!=null&&f(i,["responseJsonSchema"],x),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=c(e,["safetySettings"]);if(n!==void 0&&R!=null){let U=R;Array.isArray(U)&&(U=U.map(V=>OP(V))),f(n,["safetySettings"],U)}const z=c(e,["tools"]);if(n!==void 0&&z!=null){let U=bs(z);Array.isArray(U)&&(U=U.map(V=>zP(Ds(V)))),f(n,["tools"],U)}const W=c(e,["toolConfig"]);if(n!==void 0&&W!=null&&f(n,["toolConfig"],BP(W)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=c(e,["cachedContent"]);n!==void 0&&J!=null&&f(n,["cachedContent"],Di(t,J));const k=c(e,["responseModalities"]);k!=null&&f(i,["responseModalities"],k);const N=c(e,["mediaResolution"]);N!=null&&f(i,["mediaResolution"],N);const M=c(e,["speechConfig"]);if(M!=null&&f(i,["speechConfig"],am(M)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=c(e,["thinkingConfig"]);F!=null&&f(i,["thinkingConfig"],F);const B=c(e,["imageConfig"]);return B!=null&&f(i,["imageConfig"],RP(B)),i}function SP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>sP(p))),f(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&f(e,["usageMetadata"],u),e}function IP(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Vs(t,i)),n}function xP(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Vs(t,i)),n}function AP(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function PP(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function RP(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function NP(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["request","model"],Fe(t,i));const r=c(e,["contents"]);if(r!=null){let u=Pn(r);Array.isArray(u)&&(u=u.map(d=>FE(d))),f(n,["request","contents"],u)}const o=c(e,["metadata"]);o!=null&&f(n,["metadata"],o);const a=c(e,["config"]);return a!=null&&f(n,["request","generationConfig"],CP(t,a,c(n,["request"],{}))),n}function kP(t){const e={},n=c(t,["response"]);n!=null&&f(e,["response"],SP(n));const i=c(t,["error"]);return i!=null&&f(e,["error"],i),e}function MP(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function LP(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const o=c(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function DP(t){const e={},n=c(t,["config"]);return n!=null&&MP(n,e),e}function bP(t){const e={},n=c(t,["config"]);return n!=null&&LP(n,e),e}function VP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>gc(a))),f(e,["batchJobs"],o)}return e}function FP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Lf(a))),f(e,["batchJobs"],o)}return e}function UP(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],TP(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],EP(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],iP(d));const p=c(t,["text"]);p!=null&&f(e,["text"],p);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function OP(t){const e={},n=c(t,["category"]);if(n!=null&&f(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function BP(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],wP(n));const i=c(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function zP(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],AP(u));const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],PP(d));const p=c(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Pi||(Pi={}));class so{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qP extends Li{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(Pi.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=zy(this.apiClient,e),i=n._url,r=re("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,d=u.requests,p=[];for(const g of d){const y=Object.assign({},g);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const S=y.request;S.systemInstruction=v,y.request=S}p.push(y)}return u.requests=p,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=cP(this.apiClient,e);return u=re("batchPredictionJobs",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Lf(g))}else{const p=zy(this.apiClient,e);return u=re("{model}:batchGenerateContent",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>gc(g))}}async createEmbeddingsInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hP(this.apiClient,e);return o=re("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>gc(d))}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=xP(this.apiClient,e);return u=re("batchPredictionJobs/{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>Lf(g))}else{const p=IP(this.apiClient,e);return u=re("batches/{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>gc(g))}}async cancel(e){var n,i,r,o;let a="",u={};if(this.apiClient.isVertexAI()){const d=oP(this.apiClient,e);a=re("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=rP(this.apiClient,e);a=re("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=bP(e);return u=re("batchPredictionJobs",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=FP(g),v=new Fy;return Object.assign(v,y),v})}else{const p=DP(e);return u=re("batches",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=VP(g),v=new Fy;return Object.assign(v,y),v})}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=pP(this.apiClient,e);return u=re("batchPredictionJobs/{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>gP(g))}else{const p=fP(this.apiClient,e);return u=re("batches/{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>mP(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HP(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function qy(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>hR(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function GP(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let g=Pn(a);Array.isArray(g)&&(g=g.map(y=>qy(y))),f(e,["contents"],g)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&f(e,["systemInstruction"],qy(zt(u)));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>pR(y))),f(e,["tools"],g)}const p=c(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],fR(p)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function WP(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let y=Pn(a);Array.isArray(y)&&(y=y.map(v=>v)),f(e,["contents"],y)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&f(e,["systemInstruction"],zt(u));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>mR(v))),f(e,["tools"],y)}const p=c(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const g=c(t,["kmsKeyName"]);return e!==void 0&&g!=null&&f(e,["encryption_spec","kmsKeyName"],g),n}function $P(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],IE(t,i));const r=c(e,["config"]);return r!=null&&GP(r,n),n}function KP(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],IE(t,i));const r=c(e,["config"]);return r!=null&&WP(r,n),n}function JP(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Di(t,i)),n}function ZP(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Di(t,i)),n}function YP(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function QP(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function XP(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function jP(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eR(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function tR(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);return u!=null&&f(e,["responseJsonSchema"],u),e}function nR(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Di(t,i)),n}function iR(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Di(t,i)),n}function rR(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function oR(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function sR(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function aR(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function lR(t){const e={},n=c(t,["config"]);return n!=null&&sR(n,e),e}function uR(t){const e={},n=c(t,["config"]);return n!=null&&aR(n,e),e}function cR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["cachedContents"],o)}return e}function dR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["cachedContents"],o)}return e}function hR(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],XP(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],jP(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],HP(d));const p=c(t,["text"]);p!=null&&f(e,["text"],p);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function fR(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],eR(n));const i=c(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function pR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],rR(u));const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],oR(d));const p=c(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function mR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>tR(v))),f(e,["functionDeclarations"],y)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const u=c(t,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(t,["googleMaps"]);d!=null&&f(e,["googleMaps"],d);const p=c(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function gR(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function _R(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function yR(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Di(t,i));const r=c(e,["config"]);return r!=null&&gR(r,n),n}function vR(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Di(t,i));const r=c(e,["config"]);return r!=null&&_R(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TR extends Li{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(Pi.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=KP(this.apiClient,e);return u=re("cachedContents",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const p=$P(this.apiClient,e);return u=re("cachedContents",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=iR(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const p=nR(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=ZP(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=QP(g),v=new by;return Object.assign(v,y),v})}else{const p=JP(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=YP(g),v=new by;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=vR(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>g)}else{const p=yR(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=uR(e);return u=re("cachedContents",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=dR(g),v=new Vy;return Object.assign(v,y),v})}else{const p=lR(e);return u=re("cachedContents",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=cR(g),v=new Vy;return Object.assign(v,y),v})}}}function Hy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(t){return this instanceof Je?(this.v=t,this):new Je(t)}function hs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(S){return function(D){return Promise.resolve(D).then(S,y)}}function u(S,D){i[S]&&(r[S]=function(b){return new Promise(function(q,A){o.push([S,b,q,A])>1||d(S,b)})},D&&(r[S]=D(r[S])))}function d(S,D){try{p(i[S](D))}catch(b){v(o[0][3],b)}}function p(S){S.value instanceof Je?Promise.resolve(S.value.v).then(g,y):v(o[0][2],S)}function g(S){d("next",S)}function y(S){d("throw",S)}function v(S,D){S(D),o.shift(),o.length&&d(o[0][0],o[0][1])}}function ja(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Hy=="function"?Hy(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(a){return new Promise(function(u,d){a=t[o](a),r(u,d,a.done,a.value)})}}function r(o,a,u,d){Promise.resolve(d).then(function(p){o({value:p,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ER(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:UE(n)}function UE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function wR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Gy(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!UE(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class CR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new SR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class SR{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),wR(o)}async sendMessage(e){var n;await this.sendPromise;const i=zt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,u;const d=await r,p=(a=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,g=d.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];g!=null&&(v=(u=g.slice(y))!==null&&u!==void 0?u:[]);const S=p?[p]:[];this.recordHistory(i,S,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=zt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Gy(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return hs(this,arguments,function*(){var a,u,d,p;const g=[];try{for(var y=!0,v=ja(e),S;S=yield Je(v.next()),a=S.done,!a;y=!0){p=S.value,y=!1;const D=p;if(ER(D)){const b=(r=(i=D.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;b!==void 0&&g.push(b)}yield yield Je(D)}}catch(D){u={error:D}}finally{try{!y&&!a&&(d=v.return)&&(yield Je(d.call(v)))}finally{if(u)throw u.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Gy(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Sd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(t){const e={},n=c(t,["file"]);return n!=null&&f(e,["file"],n),e}function xR(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function AR(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],kE(n)),e}function PR(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function RR(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],kE(n)),e}function NR(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function kR(t){const e={},n=c(t,["config"]);return n!=null&&NR(n,e),e}function MR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LR extends Li{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(Pi.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kR(e);return o=re("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const p=MR(d),g=new FA;return Object.assign(g,p),g})}}async createInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=IR(e);return o=re("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const p=xR(d),g=new UA;return Object.assign(g,p),g})}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RR(e);return o=re("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=AR(e);return o=re("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const p=PR(d),g=new OA;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _c(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function DR(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>YR(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function bR(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function VR(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FR(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);return u!=null&&f(e,["responseJsonSchema"],u),e}function UR(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&f(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&f(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&f(e,["logprobs"],d);const p=c(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const g=c(t,["mediaResolution"]);g!=null&&f(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&f(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&f(e,["responseLogprobs"],v);const S=c(t,["responseMimeType"]);S!=null&&f(e,["responseMimeType"],S);const D=c(t,["responseModalities"]);D!=null&&f(e,["responseModalities"],D);const b=c(t,["responseSchema"]);b!=null&&f(e,["responseSchema"],b);const q=c(t,["routingConfig"]);q!=null&&f(e,["routingConfig"],q);const A=c(t,["seed"]);A!=null&&f(e,["seed"],A);const x=c(t,["speechConfig"]);x!=null&&f(e,["speechConfig"],OE(x));const R=c(t,["stopSequences"]);R!=null&&f(e,["stopSequences"],R);const z=c(t,["temperature"]);z!=null&&f(e,["temperature"],z);const W=c(t,["thinkingConfig"]);W!=null&&f(e,["thinkingConfig"],W);const J=c(t,["topK"]);J!=null&&f(e,["topK"],J);const k=c(t,["topP"]);if(k!=null&&f(e,["topP"],k),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function OR(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function BR(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function zR(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const p=c(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],lm(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=c(t,["systemInstruction"]);e!==void 0&&D!=null&&f(e,["setup","systemInstruction"],DR(zt(D)));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let J=bs(b);Array.isArray(J)&&(J=J.map(k=>XR(Ds(k)))),f(e,["setup","tools"],J)}const q=c(t,["sessionResumption"]);e!==void 0&&q!=null&&f(e,["setup","sessionResumption"],QR(q));const A=c(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","inputAudioTranscription"],A);const x=c(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","outputAudioTranscription"],x);const R=c(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const z=c(t,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const W=c(t,["proactivity"]);return e!==void 0&&W!=null&&f(e,["setup","proactivity"],W),n}function qR(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],UR(i));const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const p=c(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],OE(lm(y)));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=c(t,["systemInstruction"]);e!==void 0&&D!=null&&f(e,["setup","systemInstruction"],zt(D));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let J=bs(b);Array.isArray(J)&&(J=J.map(k=>jR(Ds(k)))),f(e,["setup","tools"],J)}const q=c(t,["sessionResumption"]);e!==void 0&&q!=null&&f(e,["setup","sessionResumption"],q);const A=c(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","inputAudioTranscription"],A);const x=c(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","outputAudioTranscription"],x);const R=c(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const z=c(t,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const W=c(t,["proactivity"]);return e!==void 0&&W!=null&&f(e,["setup","proactivity"],W),n}function HR(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Fe(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],zR(r,n)),n}function GR(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Fe(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],qR(r,n)),n}function WR(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function $R(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["weightedPrompts"],i)}return e}function KR(t){const e={},n=c(t,["media"]);if(n!=null){let p=xE(n);Array.isArray(p)&&(p=p.map(g=>_c(g))),f(e,["mediaChunks"],p)}const i=c(t,["audio"]);i!=null&&f(e,["audio"],_c(PE(i)));const r=c(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&f(e,["video"],_c(AE(o)));const a=c(t,["text"]);a!=null&&f(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&f(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&f(e,["activityEnd"],d),e}function JR(t){const e={},n=c(t,["media"]);if(n!=null){let p=xE(n);Array.isArray(p)&&(p=p.map(g=>g)),f(e,["mediaChunks"],p)}const i=c(t,["audio"]);i!=null&&f(e,["audio"],PE(i));const r=c(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const o=c(t,["video"]);o!=null&&f(e,["video"],AE(o));const a=c(t,["text"]);a!=null&&f(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&f(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&f(e,["activityEnd"],d),e}function ZR(t){const e={},n=c(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const i=c(t,["serverContent"]);i!=null&&f(e,["serverContent"],i);const r=c(t,["toolCall"]);r!=null&&f(e,["toolCall"],r);const o=c(t,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);const a=c(t,["usageMetadata"]);a!=null&&f(e,["usageMetadata"],e1(a));const u=c(t,["goAway"]);u!=null&&f(e,["goAway"],u);const d=c(t,["sessionResumptionUpdate"]);return d!=null&&f(e,["sessionResumptionUpdate"],d),e}function YR(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],bR(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],VR(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],_c(d));const p=c(t,["text"]);p!=null&&f(e,["text"],p);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function QR(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function OE(t){const e={},n=c(t,["languageCode"]);n!=null&&f(e,["languageCode"],n);const i=c(t,["voiceConfig"]);if(i!=null&&f(e,["voiceConfig"],i),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function XR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],OR(u));const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],BR(d));const p=c(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function jR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>FR(v))),f(e,["functionDeclarations"],y)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const u=c(t,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(t,["googleMaps"]);d!=null&&f(e,["googleMaps"],d);const p=c(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function e1(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=c(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const o=c(t,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);const a=c(t,["thoughtsTokenCount"]);a!=null&&f(e,["thoughtsTokenCount"],a);const u=c(t,["totalTokenCount"]);u!=null&&f(e,["totalTokenCount"],u);const d=c(t,["promptTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(D=>D)),f(e,["promptTokensDetails"],S)}const p=c(t,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(D=>D)),f(e,["cacheTokensDetails"],S)}const g=c(t,["candidatesTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(D=>D)),f(e,["responseTokensDetails"],S)}const y=c(t,["toolUsePromptTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(D=>D)),f(e,["toolUsePromptTokensDetails"],S)}const v=c(t,["trafficType"]);return v!=null&&f(e,["trafficType"],v),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t1(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function n1(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],i1(i));const r=c(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const o=c(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&f(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&f(e,["index"],d);const p=c(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const g=c(t,["safetyRatings"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["safetyRatings"],v)}const y=c(t,["urlContextMetadata"]);return y!=null&&f(e,["urlContextMetadata"],y),e}function i1(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),f(e,["citations"],i)}return e}function r1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["contents"]);if(r!=null){let o=Pn(r);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}return n}function o1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["tokensInfo"],r)}return e}function s1(t){const e={},n=c(t,["values"]);n!=null&&f(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&f(e,["statistics"],a1(i)),e}function a1(t){const e={},n=c(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function Id(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>gN(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function l1(t){const e={},n=c(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function u1(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function c1(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],zt(i));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>GE(u))),f(e,["tools"],a)}const o=c(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],tN(o)),n}function d1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["contents"]);if(r!=null){let a=Pn(r);Array.isArray(a)&&(a=a.map(u=>Id(u))),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&u1(o),n}function h1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["contents"]);if(r!=null){let a=Pn(r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&c1(o,n),n}function f1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const r=c(t,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function p1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function m1(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Fe(t,i)),n}function g1(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Fe(t,i)),n}function _1(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function y1(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function v1(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const p=c(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const S=c(t,["language"]);e!==void 0&&S!=null&&f(e,["parameters","language"],S);const D=c(t,["outputMimeType"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","mimeType"],D);const b=c(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","compressionQuality"],b);const q=c(t,["addWatermark"]);e!==void 0&&q!=null&&f(e,["parameters","addWatermark"],q);const A=c(t,["labels"]);e!==void 0&&A!=null&&f(e,["labels"],A);const x=c(t,["editMode"]);e!==void 0&&x!=null&&f(e,["parameters","editMode"],x);const R=c(t,["baseSteps"]);return e!==void 0&&R!=null&&f(e,["parameters","editConfig","baseSteps"],R),n}function T1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>wN(d))),f(n,["instances[0]","referenceImages"],u)}const a=c(e,["config"]);return a!=null&&v1(a,n),n}function E1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>xd(o))),f(e,["generatedImages"],r)}return e}function w1(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function C1(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const o=c(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);const a=c(t,["mimeType"]);e!==void 0&&a!=null&&f(e,["instances[]","mimeType"],a);const u=c(t,["autoTruncate"]);return e!==void 0&&u!=null&&f(e,["parameters","autoTruncate"],u),n}function S1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["contents"]);if(r!=null){let u=om(t,r);Array.isArray(u)&&(u=u.map(d=>d)),f(n,["requests[]","content"],u)}const o=c(e,["config"]);o!=null&&w1(o,n);const a=c(e,["model"]);return a!==void 0&&f(n,["requests[]","model"],Fe(t,a)),n}function I1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["contents"]);if(r!=null){let a=om(t,r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["instances[]","content"],a)}const o=c(e,["config"]);return o!=null&&C1(o,n),n}function x1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function A1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>s1(a))),f(e,["embeddings"],o)}const r=c(t,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function P1(t){const e={},n=c(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function R1(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function N1(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function k1(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function M1(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=c(t,["response"]);a!=null&&f(e,["response"],a);const u=c(t,["responseJsonSchema"]);return u!=null&&f(e,["responseJsonSchema"],u),e}function L1(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Id(zt(r)));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const p=c(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&f(i,["presencePenalty"],S);const D=c(e,["frequencyPenalty"]);D!=null&&f(i,["frequencyPenalty"],D);const b=c(e,["seed"]);b!=null&&f(i,["seed"],b);const q=c(e,["responseMimeType"]);q!=null&&f(i,["responseMimeType"],q);const A=c(e,["responseSchema"]);A!=null&&f(i,["responseSchema"],sm(A));const x=c(e,["responseJsonSchema"]);if(x!=null&&f(i,["responseJsonSchema"],x),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=c(e,["safetySettings"]);if(n!==void 0&&R!=null){let U=R;Array.isArray(U)&&(U=U.map(V=>CN(V))),f(n,["safetySettings"],U)}const z=c(e,["tools"]);if(n!==void 0&&z!=null){let U=bs(z);Array.isArray(U)&&(U=U.map(V=>NN(Ds(V)))),f(n,["tools"],U)}const W=c(e,["toolConfig"]);if(n!==void 0&&W!=null&&f(n,["toolConfig"],RN(W)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=c(e,["cachedContent"]);n!==void 0&&J!=null&&f(n,["cachedContent"],Di(t,J));const k=c(e,["responseModalities"]);k!=null&&f(i,["responseModalities"],k);const N=c(e,["mediaResolution"]);N!=null&&f(i,["mediaResolution"],N);const M=c(e,["speechConfig"]);if(M!=null&&f(i,["speechConfig"],am(M)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=c(e,["thinkingConfig"]);F!=null&&f(i,["thinkingConfig"],F);const B=c(e,["imageConfig"]);return B!=null&&f(i,["imageConfig"],sN(B)),i}function D1(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],zt(r));const o=c(e,["temperature"]);o!=null&&f(i,["temperature"],o);const a=c(e,["topP"]);a!=null&&f(i,["topP"],a);const u=c(e,["topK"]);u!=null&&f(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const p=c(e,["maxOutputTokens"]);p!=null&&f(i,["maxOutputTokens"],p);const g=c(e,["stopSequences"]);g!=null&&f(i,["stopSequences"],g);const y=c(e,["responseLogprobs"]);y!=null&&f(i,["responseLogprobs"],y);const v=c(e,["logprobs"]);v!=null&&f(i,["logprobs"],v);const S=c(e,["presencePenalty"]);S!=null&&f(i,["presencePenalty"],S);const D=c(e,["frequencyPenalty"]);D!=null&&f(i,["frequencyPenalty"],D);const b=c(e,["seed"]);b!=null&&f(i,["seed"],b);const q=c(e,["responseMimeType"]);q!=null&&f(i,["responseMimeType"],q);const A=c(e,["responseSchema"]);A!=null&&f(i,["responseSchema"],sm(A));const x=c(e,["responseJsonSchema"]);x!=null&&f(i,["responseJsonSchema"],x);const R=c(e,["routingConfig"]);R!=null&&f(i,["routingConfig"],R);const z=c(e,["modelSelectionConfig"]);z!=null&&f(i,["modelConfig"],z);const W=c(e,["safetySettings"]);if(n!==void 0&&W!=null){let de=W;Array.isArray(de)&&(de=de.map(xe=>xe)),f(n,["safetySettings"],de)}const J=c(e,["tools"]);if(n!==void 0&&J!=null){let de=bs(J);Array.isArray(de)&&(de=de.map(xe=>GE(Ds(xe)))),f(n,["tools"],de)}const k=c(e,["toolConfig"]);n!==void 0&&k!=null&&f(n,["toolConfig"],k);const N=c(e,["labels"]);n!==void 0&&N!=null&&f(n,["labels"],N);const M=c(e,["cachedContent"]);n!==void 0&&M!=null&&f(n,["cachedContent"],Di(t,M));const F=c(e,["responseModalities"]);F!=null&&f(i,["responseModalities"],F);const B=c(e,["mediaResolution"]);B!=null&&f(i,["mediaResolution"],B);const U=c(e,["speechConfig"]);U!=null&&f(i,["speechConfig"],HE(am(U)));const V=c(e,["audioTimestamp"]);V!=null&&f(i,["audioTimestamp"],V);const Q=c(e,["thinkingConfig"]);Q!=null&&f(i,["thinkingConfig"],Q);const pe=c(e,["imageConfig"]);return pe!=null&&f(i,["imageConfig"],aN(pe)),i}function Wy(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["contents"]);if(r!=null){let a=Pn(r);Array.isArray(a)&&(a=a.map(u=>Id(u))),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&f(n,["generationConfig"],L1(t,o,n)),n}function $y(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["contents"]);if(r!=null){let a=Pn(r);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["contents"],a)}const o=c(e,["config"]);return o!=null&&f(n,["generationConfig"],D1(t,o,n)),n}function Ky(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>n1(p))),f(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&f(e,["usageMetadata"],u),e}function Jy(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(g=>g)),f(e,["candidates"],p)}const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const o=c(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const a=c(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const u=c(t,["responseId"]);u!=null&&f(e,["responseId"],u);const d=c(t,["usageMetadata"]);return d!=null&&f(e,["usageMetadata"],d),e}function b1(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const o=c(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const u=c(t,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const d=c(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&f(e,["parameters","includeSafetyAttributes"],d);const p=c(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const g=c(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);const y=c(t,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);const v=c(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=c(t,["imageSize"]);if(e!==void 0&&S!=null&&f(e,["parameters","sampleImageSize"],S),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function V1(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const p=c(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const S=c(t,["language"]);e!==void 0&&S!=null&&f(e,["parameters","language"],S);const D=c(t,["outputMimeType"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","mimeType"],D);const b=c(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","compressionQuality"],b);const q=c(t,["addWatermark"]);e!==void 0&&q!=null&&f(e,["parameters","addWatermark"],q);const A=c(t,["labels"]);e!==void 0&&A!=null&&f(e,["labels"],A);const x=c(t,["imageSize"]);e!==void 0&&x!=null&&f(e,["parameters","sampleImageSize"],x);const R=c(t,["enhancePrompt"]);return e!==void 0&&R!=null&&f(e,["parameters","enhancePrompt"],R),n}function F1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&b1(o,n),n}function U1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["config"]);return o!=null&&V1(o,n),n}function O1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Q1(a))),f(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],zE(r)),e}function B1(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>xd(a))),f(e,["generatedImages"],o)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],qE(r)),e}function z1(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["resolution"]);e!==void 0&&a!=null&&f(e,["parameters","resolution"],a);const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=c(t,["negativePrompt"]);e!==void 0&&d!=null&&f(e,["parameters","negativePrompt"],d);const p=c(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=c(t,["lastFrame"]);e!==void 0&&g!=null&&f(e,["instances[0]","lastFrame"],Ad(g));const y=c(t,["referenceImages"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>HN(S))),f(e,["instances[0]","referenceImages"],v)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function q1(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const o=c(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);const a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a);const u=c(t,["seed"]);e!==void 0&&u!=null&&f(e,["parameters","seed"],u);const d=c(t,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const p=c(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const y=c(t,["pubsubTopic"]);e!==void 0&&y!=null&&f(e,["parameters","pubsubTopic"],y);const v=c(t,["negativePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","negativePrompt"],v);const S=c(t,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const D=c(t,["generateAudio"]);e!==void 0&&D!=null&&f(e,["parameters","generateAudio"],D);const b=c(t,["lastFrame"]);e!==void 0&&b!=null&&f(e,["instances[0]","lastFrame"],Wn(b));const q=c(t,["referenceImages"]);if(e!==void 0&&q!=null){let R=q;Array.isArray(R)&&(R=R.map(z=>GN(z))),f(e,["instances[0]","referenceImages"],R)}const A=c(t,["mask"]);e!==void 0&&A!=null&&f(e,["instances[0]","mask"],qN(A));const x=c(t,["compressionQuality"]);return e!==void 0&&x!=null&&f(e,["parameters","compressionQuality"],x),n}function H1(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response","generateVideoResponse"]);return a!=null&&f(e,["response"],K1(a)),e}function G1(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],J1(a)),e}function W1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&f(n,["instances[0]","image"],Ad(o));const a=c(e,["video"]);a!=null&&f(n,["instances[0]","video"],WE(a));const u=c(e,["source"]);u!=null&&Z1(u,n);const d=c(e,["config"]);return d!=null&&z1(d,n),n}function $1(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const o=c(e,["image"]);o!=null&&f(n,["instances[0]","image"],Wn(o));const a=c(e,["video"]);a!=null&&f(n,["instances[0]","video"],$E(a));const u=c(e,["source"]);u!=null&&Y1(u,n);const d=c(e,["config"]);return d!=null&&q1(d,n),n}function K1(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>j1(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function J1(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>eN(a))),f(e,["generatedVideos"],o)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function Z1(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Ad(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],WE(o)),n}function Y1(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Wn(r));const o=c(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],$E(o)),n}function Q1(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],lN(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=c(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],zE(r)),e}function xd(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],BE(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=c(t,["_self"]);r!=null&&f(e,["safetyAttributes"],qE(r));const o=c(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function X1(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["mask"],BE(n));const i=c(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["labels"],r)}return e}function j1(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],BN(n)),e}function eN(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],zN(n)),e}function tN(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const o=c(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const a=c(t,["enableAffectiveDialog"]);a!=null&&f(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&f(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&f(e,["logprobs"],d);const p=c(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const g=c(t,["mediaResolution"]);g!=null&&f(e,["mediaResolution"],g);const y=c(t,["presencePenalty"]);y!=null&&f(e,["presencePenalty"],y);const v=c(t,["responseLogprobs"]);v!=null&&f(e,["responseLogprobs"],v);const S=c(t,["responseMimeType"]);S!=null&&f(e,["responseMimeType"],S);const D=c(t,["responseModalities"]);D!=null&&f(e,["responseModalities"],D);const b=c(t,["responseSchema"]);b!=null&&f(e,["responseSchema"],b);const q=c(t,["routingConfig"]);q!=null&&f(e,["routingConfig"],q);const A=c(t,["seed"]);A!=null&&f(e,["seed"],A);const x=c(t,["speechConfig"]);x!=null&&f(e,["speechConfig"],HE(x));const R=c(t,["stopSequences"]);R!=null&&f(e,["stopSequences"],R);const z=c(t,["temperature"]);z!=null&&f(e,["temperature"],z);const W=c(t,["thinkingConfig"]);W!=null&&f(e,["thinkingConfig"],W);const J=c(t,["topK"]);J!=null&&f(e,["topK"],J);const k=c(t,["topP"]);if(k!=null&&f(e,["topP"],k),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nN(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Fe(t,i)),n}function iN(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],Fe(t,i)),n}function rN(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function oN(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function sN(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function aN(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=c(t,["imageSize"]);i!=null&&f(e,["imageSize"],i);const r=c(t,["outputMimeType"]);r!=null&&f(e,["imageOutputOptions","mimeType"],r);const o=c(t,["outputCompressionQuality"]);return o!=null&&f(e,["imageOutputOptions","compressionQuality"],o),e}function lN(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Tr(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function BE(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Tr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Ad(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Tr(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Wn(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Tr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function uN(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&f(n,["_url","models_url"],ME(t,u)),i}function cN(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const a=c(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&f(n,["_url","models_url"],ME(t,u)),i}function dN(t,e){const n={},i=c(e,["config"]);return i!=null&&uN(t,i,n),n}function hN(t,e){const n={},i=c(e,["config"]);return i!=null&&cN(t,i,n),n}function fN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=LE(r);Array.isArray(o)&&(o=o.map(a=>Df(a))),f(e,["models"],o)}return e}function pN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let o=LE(r);Array.isArray(o)&&(o=o.map(a=>bf(a))),f(e,["models"],o)}return e}function mN(t){const e={},n=c(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const r=c(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function Df(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const o=c(t,["version"]);o!=null&&f(e,["version"],o);const a=c(t,["_self"]);a!=null&&f(e,["tunedModelInfo"],kN(a));const u=c(t,["inputTokenLimit"]);u!=null&&f(e,["inputTokenLimit"],u);const d=c(t,["outputTokenLimit"]);d!=null&&f(e,["outputTokenLimit"],d);const p=c(t,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const g=c(t,["temperature"]);g!=null&&f(e,["temperature"],g);const y=c(t,["maxTemperature"]);y!=null&&f(e,["maxTemperature"],y);const v=c(t,["topP"]);v!=null&&f(e,["topP"],v);const S=c(t,["topK"]);S!=null&&f(e,["topK"],S);const D=c(t,["thinking"]);return D!=null&&f(e,["thinking"],D),e}function bf(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const o=c(t,["versionId"]);o!=null&&f(e,["version"],o);const a=c(t,["deployedModels"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>P1(v))),f(e,["endpoints"],y)}const u=c(t,["labels"]);u!=null&&f(e,["labels"],u);const d=c(t,["_self"]);d!=null&&f(e,["tunedModelInfo"],MN(d));const p=c(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const g=c(t,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(v=>v)),f(e,["checkpoints"],y)}return e}function gN(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],R1(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],N1(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],t1(d));const p=c(t,["text"]);p!=null&&f(e,["text"],p);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function _N(t){const e={},n=c(t,["productImage"]);return n!=null&&f(e,["image"],Wn(n)),e}function yN(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","baseSteps"],r);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);const p=c(t,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const g=c(t,["outputMimeType"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","mimeType"],g);const y=c(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v);const S=c(t,["labels"]);return e!==void 0&&S!=null&&f(e,["labels"],S),n}function vN(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["source"]);r!=null&&EN(r,n);const o=c(e,["config"]);return o!=null&&yN(o,n),n}function TN(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>xd(r))),f(e,["generatedImages"],i)}return e}function EN(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],Wn(r));const o=c(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>_N(u))),f(e,["instances[0]","productImages"],a)}return n}function wN(t){const e={},n=c(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Wn(n));const i=c(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const r=c(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const o=c(t,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],mN(o));const a=c(t,["controlImageConfig"]);a!=null&&f(e,["controlImageConfig"],l1(a));const u=c(t,["styleImageConfig"]);u!=null&&f(e,["styleImageConfig"],u);const d=c(t,["subjectImageConfig"]);return d!=null&&f(e,["subjectImageConfig"],d),e}function zE(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function qE(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function CN(t){const e={},n=c(t,["category"]);if(n!=null&&f(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function SN(t){const e={},n=c(t,["image"]);return n!=null&&f(e,["image"],Wn(n)),e}function IN(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&f(e,["parameters","maxPredictions"],r);const o=c(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);const a=c(t,["maskDilation"]);e!==void 0&&a!=null&&f(e,["parameters","maskDilation"],a);const u=c(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&f(e,["parameters","binaryColorThreshold"],u);const d=c(t,["labels"]);return e!==void 0&&d!=null&&f(e,["labels"],d),n}function xN(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["source"]);r!=null&&PN(r,n);const o=c(e,["config"]);return o!=null&&IN(o,n),n}function AN(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>X1(r))),f(e,["generatedMasks"],i)}return e}function PN(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Wn(r));const o=c(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],SN(o)),n}function HE(t){const e={},n=c(t,["languageCode"]);n!=null&&f(e,["languageCode"],n);const i=c(t,["voiceConfig"]);if(i!=null&&f(e,["voiceConfig"],i),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function RN(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],k1(n));const i=c(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function NN(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],rN(u));const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],oN(d));const p=c(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function GE(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>M1(v))),f(e,["functionDeclarations"],y)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const u=c(t,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(t,["googleMaps"]);d!=null&&f(e,["googleMaps"],d);const p=c(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const g=c(t,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function kN(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function MN(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function LN(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function DN(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function bN(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],Fe(t,i));const r=c(e,["config"]);return r!=null&&LN(r,n),n}function VN(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["config"]);return r!=null&&DN(r,n),n}function FN(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const o=c(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);const a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&f(e,["parameters","includeRaiReason"],a);const u=c(t,["outputMimeType"]);e!==void 0&&u!=null&&f(e,["parameters","outputOptions","mimeType"],u);const d=c(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&f(e,["parameters","outputOptions","compressionQuality"],d);const p=c(t,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const g=c(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const y=c(t,["labels"]);e!==void 0&&y!=null&&f(e,["labels"],y);const v=c(t,["numberOfImages"]);e!==void 0&&v!=null&&f(e,["parameters","sampleCount"],v);const S=c(t,["mode"]);return e!==void 0&&S!=null&&f(e,["parameters","mode"],S),n}function UN(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],Fe(t,i));const r=c(e,["image"]);r!=null&&f(n,["instances[0]","image"],Wn(r));const o=c(e,["upscaleFactor"]);o!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=c(e,["config"]);return a!=null&&FN(a,n),n}function ON(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>xd(o))),f(e,["generatedImages"],r)}return e}function BN(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Tr(i));const r=c(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function zN(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Tr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function qN(t){const e={},n=c(t,["image"]);n!=null&&f(e,["_self"],Wn(n));const i=c(t,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function HN(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Ad(n));const i=c(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function GN(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Wn(n));const i=c(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function WE(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["encodedVideo"],Tr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["encoding"],r),e}function $E(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Tr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WN(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["displayName"],i),n}function $N(t){const e={},n=c(t,["config"]);return n!=null&&WN(n,e),e}function KN(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function JN(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&KN(i,e),e}function ZN(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function YN(t,e){const n={},i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["customMetadata"],o)}const r=c(t,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),n}function QN(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const a=c(t,["response"]);return a!=null&&f(e,["response"],jN(a)),e}function XN(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=c(t,["fileName"]);i!=null&&f(e,["fileName"],i);const r=c(t,["config"]);return r!=null&&YN(r,e),e}function jN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&f(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function ek(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function tk(t){const e={},n=c(t,["config"]);return n!=null&&ek(n,e),e}function nk(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["fileSearchStores"],o)}return e}function KE(t,e){const n={},i=c(t,["mimeType"]);e!==void 0&&i!=null&&f(e,["mimeType"],i);const r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["customMetadata"],u)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),n}function ik(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=c(t,["config"]);return i!=null&&KE(i,e),e}function rk(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ok="Content-Type",sk="X-Server-Timeout",ak="User-Agent",Vf="x-goog-api-client",lk="1.31.0",uk=`google-genai-sdk/${lk}`,ck="v1beta1",dk="v1beta",Zy=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class hk{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ck,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:dk,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&fk(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Yy(r),new kf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Yy(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return hs(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield Je(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=o.decode(d,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),S=v.status,D=v.code,b=`got status: ${S}. ${JSON.stringify(y)}`;if(D>=400&&D<600)throw new Sd({message:b,status:D})}}catch(y){if(y.name==="ApiError")throw y}a+=p;let g=a.match(Zy);for(;g;){const y=g[1];try{const v=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Je(new kf(v)),a=a.slice(g[0].length),g=a.match(Zy)}catch(v){throw new Error(`exception parsing stream chunk ${y}. ${v}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=uk+" "+this.clientOptions.userAgentExtra;return e[ak]=n,e[Vf]=n,e[ok]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(sk,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);r.sizeBytes=String(a.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d={file:r},p=this.getFileName(e),g=re("upload/v1beta/files",d._url),y=await this.fetchUploadUrl(g,r.sizeBytes,r.mimeType,p,d,n==null?void 0:n.httpOptions);return o.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,a=await o.stat(n),u=String(a.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),y={};i!=null&&KE(i,y);const v=await this.fetchUploadUrl(p,u,d,g,y,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(u=p==null?void 0:p.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function Yy(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Sd({message:r,status:n}):new Error(r)}}function fk(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,a){const u=Object.assign({},o);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const p=a[d],g=u[d];p&&typeof p=="object"&&!Array.isArray(p)&&g&&typeof g=="object"&&!Array.isArray(g)?u[d]=i(g,p):(g&&p&&typeof g!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof g}, New type: ${typeof p}. Overwriting.`),u[d]=p)}return u}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pk="mcp_used/unknown";let mk=!1;function JE(t){for(const e of t)if(gk(e)||typeof e=="object"&&"inputSchema"in e)return!0;return mk}function ZE(t){var e;const n=(e=t[Vf])!==null&&e!==void 0?e:"";t[Vf]=(n+` ${pk}`).trimStart()}function gk(t){return t!==null&&typeof t=="object"&&t instanceof um}function _k(t,e=100){return hs(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield Je(t.listTools({cursor:i}));for(const a of o.tools)yield yield Je(a),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class um{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new um(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},a=[];for(const g of this.mcpClients)try{for(var u=!0,d=(n=void 0,ja(_k(g))),p;p=await d.next(),e=p.done,!e;u=!0){r=p.value,u=!1;const y=r;a.push(y);const v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=g}}catch(y){n={error:y}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),ZA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yk(t,e,n){const i=new zA;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class vk{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=wk(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let p=()=>{};const g=new Promise(R=>{p=R}),y=e.callbacks,v=function(){p({})},S=this.apiClient,D={onopen:v,onmessage:R=>{yk(S,y.onmessage,R)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(R){}},b=this.webSocketFactory.create(d,Ek(a),D);b.connect(),await g;const x={setup:{model:Fe(this.apiClient,e.model)}};return b.send(JSON.stringify(x)),new Tk(b,this.apiClient)}}class Tk{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=$R(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=WR(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(rs.PLAY)}pause(){this.sendPlaybackControl(rs.PAUSE)}stop(){this.sendPlaybackControl(rs.STOP)}resetContext(){this.sendPlaybackControl(rs.RESET_CONTEXT)}close(){this.conn.close()}}function Ek(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function wk(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ck="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Sk(t,e,n){const i=new BA;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const a=ZR(o);Object.assign(i,a)}else Object.assign(i,o);e(i)}class Ik{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new vk(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&JE(e.config.tools)&&ZE(y);const v=Rk(y);if(this.apiClient.isVertexAI())g=`${d}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,g);else{const M=this.apiClient.getApiKey();let F="BidiGenerateContent",B="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",B="access_token"),g=`${d}/ws/google.ai.generativelanguage.${p}.GenerativeService.${F}?${B}=${M}`}let S=()=>{};const D=new Promise(M=>{S=M}),b=e.callbacks,q=function(){var M;(M=b==null?void 0:b.onopen)===null||M===void 0||M.call(b),S({})},A=this.apiClient,x={onopen:q,onmessage:M=>{Sk(A,b.onmessage,M)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(M){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(M){}},R=this.webSocketFactory.create(g,Pk(v),x);R.connect(),await D;let z=Fe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const M=this.apiClient.getProject(),F=this.apiClient.getLocation();z=`projects/${M}/locations/${F}/`+z}let W={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Kc.AUDIO]}:e.config.responseModalities=[Kc.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],k=[];for(const M of J)if(this.isCallableTool(M)){const F=M;k.push(await F.tool())}else k.push(M);k.length>0&&(e.config.tools=k);const N={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=GR(this.apiClient,N):W=HR(this.apiClient,N),delete W.config,R.send(JSON.stringify(W)),new Ak(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const xk={turnComplete:!0};class Ak{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Pn(n.turns),e.isVertexAI()||(i=i.map(r=>Id(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(Ck)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},xk),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:JR(e)}:n={realtimeInput:KR(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Pk(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Rk(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qy=10;function Xy(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(fs(a)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function fs(t){return"callTool"in t&&typeof t.callTool=="function"}function Nk(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>fs(r)))!==null&&i!==void 0?i:!1}function jy(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(fs(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function ev(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kk extends Li{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Nk(n)||Xy(n.config))return await this.generateContentInternal(d);const p=jy(n);if(p.length>0){const b=p.map(q=>`tools[${q}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let g,y;const v=Pn(d.contents),S=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Qy;let D=0;for(;D<S&&(g=await this.generateContentInternal(d),!(!g.functionCalls||g.functionCalls.length===0));){const b=g.candidates[0].content,q=[];for(const A of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(fs(A)){const R=await A.callTool(g.functionCalls);q.push(...R)}D++,y={role:"user",parts:q},d.contents=Pn(d.contents),d.contents.push(b),d.contents.push(y),ev(d.config)&&(v.push(b),v.push(y))}return ev(d.config)&&(g.automaticFunctionCallingHistory=v),g},this.generateContentStream=async n=>{var i,r,o,a,u;if(this.maybeMoveToResponseJsonSchem(n),Xy(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const d=jy(n);if(d.length>0){const y=d.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,g=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(p&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const a=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:a.push(d);let u;return o?u={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new so(Pi.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async d=>fs(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&JE(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},d);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),ZE(p),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return u}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(fs(a)){const u=a,d=await u.tool();for(const p of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(o.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);o.set(p.name,u)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Qy;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(p,g,y){var v,S;return hs(this,arguments,function*(){for(var D,b,q,A;u<o;){a&&(u++,a=!1);const W=yield Je(p.processParamsMaybeAddMcpUsage(y)),J=yield Je(p.generateContentStreamInternal(W)),k=[],N=[];try{for(var x=!0,R=(b=void 0,ja(J)),z;z=yield Je(R.next()),D=z.done,!D;x=!0){A=z.value,x=!1;const M=A;if(yield yield Je(M),M.candidates&&(!((v=M.candidates[0])===null||v===void 0)&&v.content)){N.push(M.candidates[0].content);for(const F of(S=M.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(u<o&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(F.functionCall.name)){const B=yield Je(g.get(F.functionCall.name).callTool([F.functionCall]));k.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(M){b={error:M}}finally{try{!x&&!D&&(q=R.return)&&(yield Je(q.call(R)))}finally{if(b)throw b.error}}if(k.length>0){a=!0;const M=new La;M.candidates=[{content:{role:"user",parts:k}}],yield yield Je(M);const F=[];F.push(...N),F.push({role:"user",parts:k});const B=Pn(y.contents).concat(F);y.contents=B}else break}})}(this,d,e)}async generateContentInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=$y(this.apiClient,e);return u=re("{model}:generateContent",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Jy(g),v=new La;return Object.assign(v,y),v})}else{const p=Wy(this.apiClient,e);return u=re("{model}:generateContent",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=Ky(g),v=new La;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=$y(this.apiClient,e);return u=re("{model}:streamGenerateContent?alt=sse",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(y){return hs(this,arguments,function*(){var v,S,D,b;try{for(var q=!0,A=ja(y),x;x=yield Je(A.next()),v=x.done,!v;q=!0){b=x.value,q=!1;const R=b,z=Jy(yield Je(R.json()));z.sdkHttpResponse={headers:R.headers};const W=new La;Object.assign(W,z),yield yield Je(W)}}catch(R){S={error:R}}finally{try{!q&&!v&&(D=A.return)&&(yield Je(D.call(A)))}finally{if(S)throw S.error}}})})}else{const p=Wy(this.apiClient,e);return u=re("{model}:streamGenerateContent?alt=sse",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(y){return hs(this,arguments,function*(){var v,S,D,b;try{for(var q=!0,A=ja(y),x;x=yield Je(A.next()),v=x.done,!v;q=!0){b=x.value,q=!1;const R=b,z=Ky(yield Je(R.json()));z.sdkHttpResponse={headers:R.headers};const W=new La;Object.assign(W,z),yield yield Je(W)}}catch(R){S={error:R}}finally{try{!q&&!v&&(D=A.return)&&(yield Je(D.call(A)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=I1(this.apiClient,e);return u=re("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=A1(g),v=new Py;return Object.assign(v,y),v})}else{const p=S1(this.apiClient,e);return u=re("{model}:batchEmbedContents",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=x1(g),v=new Py;return Object.assign(v,y),v})}}async generateImagesInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=U1(this.apiClient,e);return u=re("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=B1(g),v=new Ry;return Object.assign(v,y),v})}else{const p=F1(this.apiClient,e);return u=re("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=O1(g),v=new Ry;return Object.assign(v,y),v})}}async editImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=T1(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const p=E1(d),g=new RA;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=UN(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const p=ON(d),g=new NA;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=vN(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const p=TN(d),g=new kA;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=xN(this.apiClient,e);return o=re("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const p=AN(d),g=new MA;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=iN(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>bf(g))}else{const p=nN(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Df(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=hN(this.apiClient,e);return u=re("{models_url}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=pN(g),v=new Ny;return Object.assign(v,y),v})}else{const p=dN(this.apiClient,e);return u=re("{models_url}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=fN(g),v=new Ny;return Object.assign(v,y),v})}}async update(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=VN(this.apiClient,e);return u=re("{model}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>bf(g))}else{const p=bN(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>Df(g))}}async delete(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=g1(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=y1(g),v=new ky;return Object.assign(v,y),v})}else{const p=m1(this.apiClient,e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=_1(g),v=new ky;return Object.assign(v,y),v})}}async countTokens(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=h1(this.apiClient,e);return u=re("{model}:countTokens",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=p1(g),v=new My;return Object.assign(v,y),v})}else{const p=d1(this.apiClient,e);return u=re("{model}:countTokens",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=f1(g),v=new My;return Object.assign(v,y),v})}}async computeTokens(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=r1(this.apiClient,e);return o=re("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>{const p=o1(d),g=new LA;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=$1(this.apiClient,e);return u=re("{model}:predictLongRunning",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>{const y=G1(g),v=new Jc;return Object.assign(v,y),v})}else{const p=W1(this.apiClient,e);return u=re("{model}:predictLongRunning",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const y=H1(g),v=new Jc;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mk extends Li{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=CA(e);return u=re("{operationName}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a}else{const p=wA(e);return u=re("{operationName}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=mA(e);return o=re("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lk(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Dk(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Hk(o))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function bk(t,e,n){const i={},r=c(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const o=c(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&f(n,["newSessionExpireTime"],o);const a=c(e,["uses"]);n!==void 0&&a!=null&&f(n,["uses"],a);const u=c(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&f(n,["bidiGenerateContentSetup"],qk(t,u));const d=c(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&f(n,["fieldMask"],d),i}function Vk(t,e){const n={},i=c(e,["config"]);return i!=null&&f(n,["config"],bk(t,i,n)),n}function Fk(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Uk(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);if(r!=null&&f(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ok(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Bk(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function zk(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const a=c(t,["topP"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","maxOutputTokens"],d);const p=c(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const g=c(t,["seed"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","seed"],g);const y=c(t,["speechConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","speechConfig"],lm(y));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const S=c(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=c(t,["systemInstruction"]);e!==void 0&&D!=null&&f(e,["setup","systemInstruction"],Dk(zt(D)));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let J=bs(b);Array.isArray(J)&&(J=J.map(k=>Wk(Ds(k)))),f(e,["setup","tools"],J)}const q=c(t,["sessionResumption"]);e!==void 0&&q!=null&&f(e,["setup","sessionResumption"],Gk(q));const A=c(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","inputAudioTranscription"],A);const x=c(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","outputAudioTranscription"],x);const R=c(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const z=c(t,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const W=c(t,["proactivity"]);return e!==void 0&&W!=null&&f(e,["setup","proactivity"],W),n}function qk(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],Fe(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],zk(r,n)),n}function Hk(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],Fk(o));const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],Uk(a));const u=c(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&f(e,["inlineData"],Lk(d));const p=c(t,["text"]);p!=null&&f(e,["text"],p);const g=c(t,["thought"]);g!=null&&f(e,["thought"],g);const y=c(t,["thoughtSignature"]);y!=null&&f(e,["thoughtSignature"],y);const v=c(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function Gk(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Wk(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["functionDeclarations"],g)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],Ok(u));const d=c(t,["googleSearch"]);d!=null&&f(e,["googleSearch"],Bk(d));const p=c(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $k(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function Kk(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=$k(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(p=>a.includes(p)?`generationConfig.${p}`:p));const d=[];o&&d.push(o),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Jk extends Li{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Vk(this.apiClient,e);o=re("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=Kk(u,e.config);return r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zk(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function Yk(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&Zk(i,e),e}function Qk(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function Xk(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function jk(t){const e={},n=c(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const i=c(t,["config"]);return i!=null&&Xk(i,e),e}function eM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const r=c(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tM extends Li{constructor(e){super(),this.apiClient=e,this.list=async n=>new so(Pi.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qk(e);return o=re("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Yk(e);r=re("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jk(e);return o=re("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const p=eM(d),g=new DA;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nM extends Li{constructor(e,n=new tM(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new so(Pi.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$N(e);return o=re("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ZN(e);return o=re("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=JN(e);r=re("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tk(e);return o=re("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const p=nk(d),g=new bA;return Object.assign(g,p),g})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ik(e);return o=re("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const p=rk(d),g=new VA;return Object.assign(g,p),g})}}async importFile(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=XN(e);return o=re("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const p=QN(d),g=new im;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iM(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function rM(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function oM(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function sM(t,e){const n={},i=c(t,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function aM(t,e,n){const i={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);if(a!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","batchSize"],u);const d=c(t,["learningRate"]);if(e!==void 0&&d!=null&&f(e,["tuningTask","hyperparameters","learningRate"],d),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function lM(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec"],tv(S))}else if(r==="PREFERENCE_TUNING"){const S=c(t,["validationDataset"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec"],tv(S))}const o=c(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&f(e,["tunedModelDisplayName"],o);const a=c(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(u==="PREFERENCE_TUNING"){const S=c(t,["epochCount"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(d==="PREFERENCE_TUNING"){const S=c(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let p=c(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(p==="PREFERENCE_TUNING"){const S=c(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let g=c(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(g==="PREFERENCE_TUNING"){const S=c(t,["adapterSize"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=c(t,["labels"]);e!==void 0&&y!=null&&f(e,["labels"],y);const v=c(t,["beta"]);return e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),i}function uM(t,e){const n={},i=c(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&TM(o);const a=c(t,["config"]);return a!=null&&aM(a,n),n}function cM(t,e){const n={},i=c(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&EM(o,n,e);const a=c(t,["config"]);return a!=null&&lM(a,n,e),n}function dM(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function hM(t,e){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function fM(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),i}function pM(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),i}function mM(t,e){const n={},i=c(t,["config"]);return i!=null&&fM(i,n),n}function gM(t,e){const n={},i=c(t,["config"]);return i!=null&&pM(i,n),n}function _M(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const o=c(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>YE(u))),f(n,["tuningJobs"],a)}return n}function yM(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const o=c(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Ff(u))),f(n,["tuningJobs"],a)}return n}function vM(t,e){const n={},i=c(t,["name"]);i!=null&&f(n,["model"],i);const r=c(t,["name"]);return r!=null&&f(n,["endpoint"],r),n}function TM(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(n,["examples","examples"],r)}return n}function EM(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function YE(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["state"]);o!=null&&f(n,["state"],NE(o));const a=c(t,["createTime"]);a!=null&&f(n,["createTime"],a);const u=c(t,["tuningTask","startTime"]);u!=null&&f(n,["startTime"],u);const d=c(t,["tuningTask","completeTime"]);d!=null&&f(n,["endTime"],d);const p=c(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const g=c(t,["description"]);g!=null&&f(n,["description"],g);const y=c(t,["baseModel"]);y!=null&&f(n,["baseModel"],y);const v=c(t,["_self"]);return v!=null&&f(n,["tunedModel"],vM(v)),n}function Ff(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["state"]);o!=null&&f(n,["state"],NE(o));const a=c(t,["createTime"]);a!=null&&f(n,["createTime"],a);const u=c(t,["startTime"]);u!=null&&f(n,["startTime"],u);const d=c(t,["endTime"]);d!=null&&f(n,["endTime"],d);const p=c(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const g=c(t,["error"]);g!=null&&f(n,["error"],g);const y=c(t,["description"]);y!=null&&f(n,["description"],y);const v=c(t,["baseModel"]);v!=null&&f(n,["baseModel"],v);const S=c(t,["tunedModel"]);S!=null&&f(n,["tunedModel"],S);const D=c(t,["preTunedModel"]);D!=null&&f(n,["preTunedModel"],D);const b=c(t,["supervisedTuningSpec"]);b!=null&&f(n,["supervisedTuningSpec"],b);const q=c(t,["preferenceOptimizationSpec"]);q!=null&&f(n,["preferenceOptimizationSpec"],q);const A=c(t,["tuningDataStats"]);A!=null&&f(n,["tuningDataStats"],A);const x=c(t,["encryptionSpec"]);x!=null&&f(n,["encryptionSpec"],x);const R=c(t,["partnerModelTuningSpec"]);R!=null&&f(n,["partnerModelTuningSpec"],R);const z=c(t,["customBaseModel"]);z!=null&&f(n,["customBaseModel"],z);const W=c(t,["experiment"]);W!=null&&f(n,["experiment"],W);const J=c(t,["labels"]);J!=null&&f(n,["labels"],J);const k=c(t,["outputUri"]);k!=null&&f(n,["outputUri"],k);const N=c(t,["pipelineJob"]);N!=null&&f(n,["pipelineJob"],N);const M=c(t,["serviceAccount"]);M!=null&&f(n,["serviceAccount"],M);const F=c(t,["tunedModelDisplayName"]);F!=null&&f(n,["tunedModelDisplayName"],F);const B=c(t,["veoTuningSpec"]);return B!=null&&f(n,["veoTuningSpec"],B),n}function wM(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&f(n,["name"],r);const o=c(t,["metadata"]);o!=null&&f(n,["metadata"],o);const a=c(t,["done"]);a!=null&&f(n,["done"],a);const u=c(t,["error"]);return u!=null&&f(n,["error"],u),n}function tv(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const r=c(t,["vertexDatasetResource"]);return r!=null&&f(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CM extends Li{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(Pi.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:Nf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=hM(e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>Ff(g))}else{const p=dM(e);return u=re("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>YE(g))}}async listInternal(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=gM(e);return u=re("tuningJobs",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=yM(g),v=new Ly;return Object.assign(v,y),v})}else{const p=mM(e);return u=re("tunedModels",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=_M(g),v=new Ly;return Object.assign(v,y),v})}}async cancel(e){var n,i,r,o;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=rM(e);return u=re("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=sM(g),v=new Dy;return Object.assign(v,y),v})}else{const p=iM(e);return u=re("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const y=oM(g),v=new Dy;return Object.assign(v,y),v})}}async tuneInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI()){const u=cM(e,e);return o=re("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>Ff(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uM(e);return o=re("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),r.then(d=>wM(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SM{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const IM=1024*1024*8,xM=3,AM=1e3,PM=2,Yc="x-goog-upload-status";async function RM(t,e,n){var i;const r=await QE(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Yc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function NM(t,e,n){var i;const r=await QE(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Yc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=SE(o),u=new rm;return Object.assign(u,a),u}async function QE(t,e,n){var i,r;let o=0,a=0,u=new kf(new Response),d="upload";for(o=t.size;a<o;){const p=Math.min(IM,o-a),g=t.slice(a,a+p);a+p>=o&&(d+=", finalize");let y=0,v=AM;for(;y<xM&&(u=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[Yc]));)y++,await MM(v),v=v*PM;if(a+=p,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[Yc])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function kM(t){return{size:t.size,type:t.type}}function MM(t){return new Promise(e=>setTimeout(e,t))}class LM{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RM(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NM(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DM{create(e,n,i){return new bM(e,n,i)}}class bM{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nv="x-goog-api-key";class VM{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(nv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(nv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FM="gl-node/";class UM{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=fA(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new VM(this.apiKey);this.apiClient=new hk({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:FM+"web",uploader:new LM,downloader:new SM}),this.models=new kk(this.apiClient),this.live=new Ik(this.apiClient,r,new DM),this.batches=new qP(this.apiClient),this.chats=new CR(this.models,this.apiClient),this.caches=new TR(this.apiClient),this.files=new LR(this.apiClient),this.operations=new Mk(this.apiClient),this.authTokens=new Jk(this.apiClient),this.tunings=new CM(this.apiClient),this.fileSearchStores=new nM(this.apiClient)}}const el=t=>typeof t=="number"&&!isNaN(t),Bn=t=>typeof t=="string",XE=t=>Array.isArray(t),wl=t=>t&&el(t.lat)&&el(t.lng),OM=t=>t&&Bn(t.description)&&XE(t.path)&&t.path.every(wl),BM=t=>t&&Bn(t.name)&&wl(t.position),zM=t=>t&&XE(t.path)&&t.path.every(wl)&&Bn(t.level)&&["light","moderate","heavy"].includes(t.level)&&Bn(t.description),qM=t=>t&&Bn(t.name)&&Bn(t.description)&&el(t.lat)&&el(t.lng)&&(t.time===void 0||Bn(t.time))&&(t.duration===void 0||Bn(t.duration))&&(t.sequence===void 0||el(t.sequence)),HM=t=>t&&Bn(t.name)&&wl(t.start)&&wl(t.end)&&(t.transport===void 0||Bn(t.transport))&&(t.travelTime===void 0||Bn(t.travelTime));let Yu=null;const Fs=()=>{if(Yu)return Yu;const t="AIzaSyDgaYVoqpLioABK9Wvjq88KF9ByiEnyX6U";return Yu=new UM({apiKey:t}),Yu},GM={name:"location",parameters:{type:We.OBJECT,description:"Geographic coordinates of a location on the SCB Medical College Campus.",properties:{name:{type:We.STRING,description:"Name of the location."},description:{type:We.STRING,description:"Description of activity at this location."},lat:{type:We.NUMBER,description:"Latitude of the location."},lng:{type:We.NUMBER,description:"Longitude of the location."},time:{type:We.STRING,description:'Time of day to visit (e.g., "09:00").'},duration:{type:We.STRING,description:'Duration of stay (e.g., "45 minutes").'},sequence:{type:We.NUMBER,description:"Order in the day itinerary (1 = first stop)."}},required:["name","description","lat","lng"]}},WM={name:"line",parameters:{type:We.OBJECT,description:"Connection between two locations.",properties:{name:{type:We.STRING,description:"Name of the route segment."},start:{type:We.OBJECT,properties:{lat:{type:We.NUMBER},lng:{type:We.NUMBER}}},end:{type:We.OBJECT,properties:{lat:{type:We.NUMBER},lng:{type:We.NUMBER}}},transport:{type:We.STRING,description:"Mode of transport (Walking, Wheelchair, etc.)."},travelTime:{type:We.STRING,description:"Estimated travel time."}},required:["name","start","end"]}},zl=t=>{let e="";if(t.candidates&&t.candidates.length>0&&t.candidates[0].content&&t.candidates[0].content.parts)for(const n of t.candidates[0].content.parts)n.text&&(e+=n.text);return e},$M=async t=>{try{const e=Fs(),n=`Based on your knowledge, is the location "${t}" part of, or inside, the SCB Medical College & Hospital campus in Cuttack, India? Answer with a single word: "yes" or "no".`,i=await e.models.generateContent({model:"gemini-2.5-flash",contents:n});return zl(i).trim().toLowerCase().includes("yes")}catch(e){return console.error("Error checking location context:",e),!0}},KM=async(t,e="en")=>{var n,i,r,o;try{const a=Fs(),d=`
      You are an expert Day Planner for the SCB Medical College & Hospital Campus in Cuttack.
      Your goal is to create a logical, sequential day plan for a user visiting the campus (e.g., for treatment, visiting a student, or medical formalities).
      
      ${e==="or"?"IMPORTANT: Provide all names, descriptions, and summaries in Odia (Oriya) language. The user speaks Odia.":""}

      **Constraints:**
      1. All coordinates MUST be strictly within the campus bounds: Latitude ~20.478 to 20.486, Longitude ~85.872 to 85.883.
      2. If the user asks for something outside the campus, politely explain you only cover the campus area.
      3. Use the 'location' tool to mark stops with times and sequence numbers.
      4. Use the 'line' tool to connect these stops.
      5. Create a realistic schedule (walking times, waiting times at OPDs).
    `,p=await a.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{systemInstruction:d,temperature:.5,tools:[{functionDeclarations:[GM,WM]}]}}),g=[],y=[];if(p.functionCalls)for(const S of p.functionCalls){const D=S.args;if(D){if(S.name==="location"){const b={name:D.name,description:D.description,lat:Number(D.lat),lng:Number(D.lng),time:D.time,duration:D.duration,sequence:Number(D.sequence)};qM(b)&&g.push(b)}else if(S.name==="line"){const b={name:D.name,start:{lat:Number((n=D.start)==null?void 0:n.lat),lng:Number((i=D.start)==null?void 0:i.lng)},end:{lat:Number((r=D.end)==null?void 0:r.lat),lng:Number((o=D.end)==null?void 0:o.lng)},transport:D.transport,travelTime:D.travelTime};HM(b)&&y.push(b)}}}const v=zl(p);return g.sort((S,D)=>(S.sequence||0)-(D.sequence||0)),{locations:g,lines:y,summaryText:v}}catch(a){throw console.error("Error generating itinerary:",a),a}},JM=async(t,e,n,i,r="en")=>{var o,a,u;try{const d=Fs(),g=`
      You are a hyperlocal navigation expert for the SCB Medical College campus in Cuttack, India. Your primary function is to provide detailed, step-by-step navigation *within this campus*.
      A user needs directions from "${t}" to "${e}".
      
      ${r==="or"?"IMPORTANT: Provide all step descriptions, landmarks names, traffic descriptions, and the final summary in Odia (Oriya) language. The user speaks Odia.":""}

      **IMPORTANT CONTEXT CHECK:**
      1.  **If the route is within the SCB campus:** Proceed to generate a detailed, interactive route plan. The user will be viewing a specific digital map of the campus, so your directions must be precise and reference landmarks visible on that map. The JSON output is critical.
      2.  **If the start or destination is clearly outside the SCB campus (e.g., "Bhubaneswar Airport", another city, etc.):** You MUST respond differently. First, state clearly that your expertise is limited to the SCB campus and you cannot provide an interactive map for their requested route. Then, provide general, high-level text-based directions for their query. In this specific case, the JSON object you generate MUST have empty arrays for "steps", "landmarks", and "traffic".

      The user has provided these notes: "${n}".
      Current user location is approximately latitude: ${i==null?void 0:i.latitude}, longitude: ${i==null?void 0:i.longitude}.
      
      **JSON Object Specification (ONLY FOR ON-CAMPUS ROUTES):**
      The JSON object MUST be in a fenced code block and have the following structure. If the route is off-campus, this object must contain empty arrays as specified above.
      {
        "steps": [
          {
            "description": "A short, clear instruction for this step. e.g., 'Walk from the main gate towards the Department of Surgery.'",
            "path": [{"lat": 20.481, "lng": 85.876}, {"lat": 20.482, "lng": 85.877}]
          }
        ],
        "landmarks": [
          {
            "name": "A key landmark mentioned in the steps. e.g., 'Department of Surgery SCB'",
            "position": {"lat": 20.482, "lng": 85.877}
          }
        ],
        "traffic": [
          {
            "level": "moderate",
            "description": "Reason for congestion. e.g., 'Crowded near OPD building.'",
            "path": [{"lat": 20.482, "lng": 85.877}, {"lat": 20.4825, "lng": 85.8775}]
          }
        ]
      }

      **GUIDELINES (ONLY FOR ON-CAMPUS ROUTES):**
      1.  **Steps**: Break the route into small, logical steps. Each step must have a clear 'description' and a 'path' with an array of coordinates. The path for one step should connect to the next.
      2.  **Landmarks**: Identify key landmarks (e.g., 'Department of Surgery SCB', 'Overhead Water Tank', 'College of Nursing') and provide their precise coordinates in the 'landmarks' array. This is crucial for plotting them on the map.
      3.  **Coordinates**: All coordinates MUST fall within the approximate bounds of the SCB campus (latitude ~20.478 to 20.486, longitude ~85.872 to 85.883).
      4.  **Traffic**: Use your knowledge and tools to identify potential areas of congestion (e.g., near the main entrance, outpatient departments) and add them to the 'traffic' array.
      
      After the JSON block, provide a summary of the route in Markdown. For off-campus routes, this summary will be your main response.
    `,y=await d.models.generateContent({model:"gemini-2.5-pro",contents:g,config:{thinkingConfig:{thinkingBudget:16384},tools:[{googleSearch:{}},{googleMaps:{}}],toolConfig:i?{retrievalConfig:{latLng:{latitude:i.latitude,longitude:i.longitude}}}:void 0}}),v=zl(y);let S=[],D=[],b=[],q=v;const A=/```json\s*([\s\S]*?)\s*```/,x=v.match(A);if(x&&x[1])try{const z=JSON.parse(x[1]);z.steps&&Array.isArray(z.steps)&&(S=z.steps.filter(OM)),z.landmarks&&Array.isArray(z.landmarks)&&(D=z.landmarks.filter(BM)),z.traffic&&Array.isArray(z.traffic)&&(b=z.traffic.filter(zM)),q=v.replace(A,"").trim()}catch(z){console.error("Failed to parse or validate route JSON:",z)}const R=((u=(a=(o=y.candidates)==null?void 0:o[0])==null?void 0:a.groundingMetadata)==null?void 0:u.groundingChunks)||[];return{text:q,groundingChunks:R,steps:S,landmarks:D,trafficSegments:b}}catch(d){return console.error("Error planning route:",d),{text:"Sorry, I couldn't plan a route. Check your API Key.",groundingChunks:[],steps:[],landmarks:[],trafficSegments:[]}}},ZM=async(t,e="en")=>{var n,i,r;try{const o=Fs();let a="";typeof t=="string"&&t.trim()!==""?a=`in the area around "${t}"`:typeof t=="object"&&(t!=null&&t.latitude)&&t.longitude?a=`around latitude: ${t.latitude}, longitude: ${t.longitude}`:a="in the general Cuttack area";const d=`
            You are a kind, empathetic, and authoritative Hospital Guide for SCB Medical College, Cuttack.
            A patient or their relative is looking for the "Daily Situation Report" to navigate the campus.

            **YOUR TASK:**
            Search Google for the VERY LATEST updates (last 24 hours) from:
            1. Commissionerate Police Cuttack-Bhubaneswar (Traffic updates)
            2. Cuttack Municipal Corporation (CMC) or Collector Cuttack (Road works/Closures)
            3. SCB Medical College Official Notices (Hospital admin news)
            4. Local news (Weather, Strikes/Bandhs)
            
            ${e==="or"?"OUTPUT MUST BE IN ODIA (ORIYA) SCRIPT.":""}

            **TONE:** 
            Kind, Clear, and Explanatory. Like a helpful volunteer speaking to a worried patient.
            Avoid "police jargon" or dry lists. Explain *what it means* for the patient.

            **STRUCTURE OF RESPONSE:**
            1. **Headline:** A 3-5 word summary of the current status (e.g., "Normal Traffic Flow Today" or "Heavy Rain Alert").
            2. **The Situation Report:** Write 2-3 sentences summarizing the key events. If there is a traffic diversion, explain *where* to go instead. 
            
            **CRITICAL RULES:**
            *   **NO FAKE NEWS:** If you find NO recent updates, state clearly: "We have checked with local authorities and there are no major incidents reported at this time."
            *   **NO BULLET POINTS:** Write in natural, comforting sentences.
            *   **INTEGRITY:** If you mention a specific road closure or event, ensure it is based on a real recent source.
        `,p=await o.models.generateContent({model:"gemini-2.5-flash",contents:d,config:{tools:[{googleSearch:{}}]}}),g=zl(p)||"No major alerts.",y=((r=(i=(n=p.candidates)==null?void 0:n[0])==null?void 0:i.groundingMetadata)==null?void 0:r.groundingChunks)||[];return{text:g,groundingChunks:y}}catch(o){return console.error("Error fetching local updates:",o),{text:"Could not fetch local updates. Check connection.",groundingChunks:[]}}};let Sh=null,iv="en";const YM=(t="en")=>{const e=Fs();if(!Sh||iv!==t){iv=t;const n=t==="or"?"You MUST reply in Odia (Oriya) language.":"";Sh=e.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:`You are a helpful assistant for the Hyperlocal Navi-Assistant app. Answer questions about navigation, local places, or general topics concisely. ${n}`}})}return Sh},QM=async(t,e)=>{try{return await t.sendMessageStream({message:e})}catch(n){throw console.error("Error sending message to chat:",n),new Error("Failed to get a response from the assistant. Check API Key.")}},XM=async(t,e)=>{try{const n=Fs(),r=`
            A user has submitted a traffic report: "${t}".
            Rewrite this to be ultra-concise (under 10 words) for a dashboard ticker. 
            Do not add new facts.
            ${e==="or"?"The output MUST be in Odia (Oriya) language.":"The output MUST be in English."}
        `,o=await n.models.generateContent({model:"gemini-2.5-flash",contents:r});return zl(o).trim()}catch(n){return console.error("Error enhancing report:",n),t}};var rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},jM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],d=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,d=r+2<t.length,p=d?t[r+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|p>>6,S=p&63;d||(S=64,a||(v=64)),i.push(n[g],n[y],n[v],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||p==null||y==null)throw new eL;const v=o<<2|u>>4;if(i.push(v),p!==64){const S=u<<4&240|p>>2;if(i.push(S),y!==64){const D=p<<6&192|y;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tL=function(t){const e=jE(t);return ew.encodeByteArray(e,!0)},Qc=function(t){return tL(t).replace(/\./g,"")},nL=function(t){try{return ew.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=()=>iL().__FIREBASE_DEFAULTS__,oL=()=>{if(typeof process>"u"||typeof rv>"u")return;const t=rv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nL(t[1]);return e&&JSON.parse(e)},cm=()=>{try{return rL()||oL()||sL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aL=t=>{var e,n;return(n=(e=cm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lL=t=>{const e=aL(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},tw=()=>{var t;return(t=cm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qc(JSON.stringify(n)),Qc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hL(){var t;const e=(t=cm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fL(){return!hL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pL(){try{return typeof indexedDB=="object"}catch{return!1}}function mL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="FirebaseError";class Us extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=gL,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nw.prototype.create)}}class nw{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?_L(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Us(r,u,i)}}function _L(t,e){return t.replace(yL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const yL=/\{\$([^}]+)}/g;function Uf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(ov(o)&&ov(a)){if(!Uf(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ov(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){return t&&t._delegate?t._delegate:t}class Cl{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new uL;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EL(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TL(t){return t===Or?void 0:t}function EL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const CL={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},SL=De.INFO,IL={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},xL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=IL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iw{constructor(e){this.name=e,this._logLevel=SL,this._logHandler=xL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const AL=(t,e)=>e.some(n=>t instanceof n);let sv,av;function PL(){return sv||(sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RL(){return av||(av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rw=new WeakMap,Of=new WeakMap,ow=new WeakMap,Ih=new WeakMap,dm=new WeakMap;function NL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ur(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&rw.set(n,t)}).catch(()=>{}),dm.set(e,t),e}function kL(t){if(Of.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Of.set(t,e)}let Bf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Of.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ow.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ML(t){Bf=t(Bf)}function LL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(xh(this),e,...n);return ow.set(i,e.sort?e.sort():[e]),ur(i)}:RL().includes(t)?function(...e){return t.apply(xh(this),e),ur(rw.get(this))}:function(...e){return ur(t.apply(xh(this),e))}}function DL(t){return typeof t=="function"?LL(t):(t instanceof IDBTransaction&&kL(t),AL(t,PL())?new Proxy(t,Bf):t)}function ur(t){if(t instanceof IDBRequest)return NL(t);if(Ih.has(t))return Ih.get(t);const e=DL(t);return e!==t&&(Ih.set(t,e),dm.set(e,t)),e}const xh=t=>dm.get(t);function bL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=ur(a);return i&&a.addEventListener("upgradeneeded",d=>{i(ur(a.result),d.oldVersion,d.newVersion,ur(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const VL=["get","getKey","getAll","getAllKeys","count"],FL=["put","add","delete","clear"],Ah=new Map;function lv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ah.get(e))return Ah.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=FL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||VL.includes(n)))return;const o=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(u.shift())),(await Promise.all([p[n](...u),r&&d.done]))[0]};return Ah.set(e,o),o}ML(t=>({...t,get:(e,n,i)=>lv(e,n)||t.get(e,n,i),has:(e,n)=>!!lv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function OL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zf="@firebase/app",uv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new iw("@firebase/app"),BL="@firebase/app-compat",zL="@firebase/analytics-compat",qL="@firebase/analytics",HL="@firebase/app-check-compat",GL="@firebase/app-check",WL="@firebase/auth",$L="@firebase/auth-compat",KL="@firebase/database",JL="@firebase/data-connect",ZL="@firebase/database-compat",YL="@firebase/functions",QL="@firebase/functions-compat",XL="@firebase/installations",jL="@firebase/installations-compat",e2="@firebase/messaging",t2="@firebase/messaging-compat",n2="@firebase/performance",i2="@firebase/performance-compat",r2="@firebase/remote-config",o2="@firebase/remote-config-compat",s2="@firebase/storage",a2="@firebase/storage-compat",l2="@firebase/firestore",u2="@firebase/vertexai-preview",c2="@firebase/firestore-compat",d2="firebase",h2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="[DEFAULT]",f2={[zf]:"fire-core",[BL]:"fire-core-compat",[qL]:"fire-analytics",[zL]:"fire-analytics-compat",[GL]:"fire-app-check",[HL]:"fire-app-check-compat",[WL]:"fire-auth",[$L]:"fire-auth-compat",[KL]:"fire-rtdb",[JL]:"fire-data-connect",[ZL]:"fire-rtdb-compat",[YL]:"fire-fn",[QL]:"fire-fn-compat",[XL]:"fire-iid",[jL]:"fire-iid-compat",[e2]:"fire-fcm",[t2]:"fire-fcm-compat",[n2]:"fire-perf",[i2]:"fire-perf-compat",[r2]:"fire-rc",[o2]:"fire-rc-compat",[s2]:"fire-gcs",[a2]:"fire-gcs-compat",[l2]:"fire-fst",[c2]:"fire-fst-compat",[u2]:"fire-vertex","fire-js":"fire-js",[d2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Map,p2=new Map,Hf=new Map;function cv(t,e){try{t.container.addComponent(e)}catch(n){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jc(t){const e=t.name;if(Hf.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Hf.set(e,t);for(const n of Xc.values())cv(n,t);for(const n of p2.values())cv(n,t);return!0}function m2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new nw("app","Firebase",g2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Cl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=h2;function sw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:qf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw cr.create("bad-app-name",{appName:String(r)});if(n||(n=tw()),!n)throw cr.create("no-options");const o=Xc.get(r);if(o){if(Uf(n,o.options)&&Uf(i,o.config))return o;throw cr.create("duplicate-app",{appName:r})}const a=new wL(r);for(const d of Hf.values())a.addComponent(d);const u=new _2(n,i,a);return Xc.set(r,u),u}function v2(t=qf){const e=Xc.get(t);if(!e&&t===qf&&tw())return sw();if(!e)throw cr.create("no-app",{appName:t});return e}function ps(t,e,n){var i;let r=(i=f2[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(u.join(" "));return}jc(new Cl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebase-heartbeat-database",E2=1,Sl="firebase-heartbeat-store";let Ph=null;function aw(){return Ph||(Ph=bL(T2,E2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw cr.create("idb-open",{originalErrorMessage:t.message})})),Ph}async function w2(t){try{const n=(await aw()).transaction(Sl),i=await n.objectStore(Sl).get(lw(t));return await n.done,i}catch(e){if(e instanceof Us)Ri.warn(e.message);else{const n=cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(n.message)}}}async function dv(t,e){try{const i=(await aw()).transaction(Sl,"readwrite");await i.objectStore(Sl).put(e,lw(t)),await i.done}catch(n){if(n instanceof Us)Ri.warn(n.message);else{const i=cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ri.warn(i.message)}}}function lw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=1024,S2=30*24*60*60*1e3;class I2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new A2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=hv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=S2}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ri.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hv(),{heartbeatsToSend:i,unsentEntries:r}=x2(this._heartbeatsCache.heartbeats),o=Qc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ri.warn(n),""}}}function hv(){return new Date().toISOString().substring(0,10)}function x2(t,e=C2){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),fv(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),fv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class A2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pL()?mL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await w2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return dv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return dv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function fv(t){return Qc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){jc(new Cl("platform-logger",e=>new UL(e),"PRIVATE")),jc(new Cl("heartbeat",e=>new I2(e),"PRIVATE")),ps(zf,uv,t),ps(zf,uv,"esm2017"),ps("fire-js","")}P2("");var R2="firebase",N2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps(R2,N2,"app");var pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $r,uw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,N){function M(){}M.prototype=N.prototype,k.D=N.prototype,k.prototype=new M,k.prototype.constructor=k,k.C=function(F,B,U){for(var V=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)V[Q-2]=arguments[Q];return N.prototype[B].apply(F,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,N,M){M||(M=0);var F=Array(16);if(typeof N=="string")for(var B=0;16>B;++B)F[B]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(B=0;16>B;++B)F[B]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=k.g[0],M=k.g[1],B=k.g[2];var U=k.g[3],V=N+(U^M&(B^U))+F[0]+3614090360&4294967295;N=M+(V<<7&4294967295|V>>>25),V=U+(B^N&(M^B))+F[1]+3905402710&4294967295,U=N+(V<<12&4294967295|V>>>20),V=B+(M^U&(N^M))+F[2]+606105819&4294967295,B=U+(V<<17&4294967295|V>>>15),V=M+(N^B&(U^N))+F[3]+3250441966&4294967295,M=B+(V<<22&4294967295|V>>>10),V=N+(U^M&(B^U))+F[4]+4118548399&4294967295,N=M+(V<<7&4294967295|V>>>25),V=U+(B^N&(M^B))+F[5]+1200080426&4294967295,U=N+(V<<12&4294967295|V>>>20),V=B+(M^U&(N^M))+F[6]+2821735955&4294967295,B=U+(V<<17&4294967295|V>>>15),V=M+(N^B&(U^N))+F[7]+4249261313&4294967295,M=B+(V<<22&4294967295|V>>>10),V=N+(U^M&(B^U))+F[8]+1770035416&4294967295,N=M+(V<<7&4294967295|V>>>25),V=U+(B^N&(M^B))+F[9]+2336552879&4294967295,U=N+(V<<12&4294967295|V>>>20),V=B+(M^U&(N^M))+F[10]+4294925233&4294967295,B=U+(V<<17&4294967295|V>>>15),V=M+(N^B&(U^N))+F[11]+2304563134&4294967295,M=B+(V<<22&4294967295|V>>>10),V=N+(U^M&(B^U))+F[12]+1804603682&4294967295,N=M+(V<<7&4294967295|V>>>25),V=U+(B^N&(M^B))+F[13]+4254626195&4294967295,U=N+(V<<12&4294967295|V>>>20),V=B+(M^U&(N^M))+F[14]+2792965006&4294967295,B=U+(V<<17&4294967295|V>>>15),V=M+(N^B&(U^N))+F[15]+1236535329&4294967295,M=B+(V<<22&4294967295|V>>>10),V=N+(B^U&(M^B))+F[1]+4129170786&4294967295,N=M+(V<<5&4294967295|V>>>27),V=U+(M^B&(N^M))+F[6]+3225465664&4294967295,U=N+(V<<9&4294967295|V>>>23),V=B+(N^M&(U^N))+F[11]+643717713&4294967295,B=U+(V<<14&4294967295|V>>>18),V=M+(U^N&(B^U))+F[0]+3921069994&4294967295,M=B+(V<<20&4294967295|V>>>12),V=N+(B^U&(M^B))+F[5]+3593408605&4294967295,N=M+(V<<5&4294967295|V>>>27),V=U+(M^B&(N^M))+F[10]+38016083&4294967295,U=N+(V<<9&4294967295|V>>>23),V=B+(N^M&(U^N))+F[15]+3634488961&4294967295,B=U+(V<<14&4294967295|V>>>18),V=M+(U^N&(B^U))+F[4]+3889429448&4294967295,M=B+(V<<20&4294967295|V>>>12),V=N+(B^U&(M^B))+F[9]+568446438&4294967295,N=M+(V<<5&4294967295|V>>>27),V=U+(M^B&(N^M))+F[14]+3275163606&4294967295,U=N+(V<<9&4294967295|V>>>23),V=B+(N^M&(U^N))+F[3]+4107603335&4294967295,B=U+(V<<14&4294967295|V>>>18),V=M+(U^N&(B^U))+F[8]+1163531501&4294967295,M=B+(V<<20&4294967295|V>>>12),V=N+(B^U&(M^B))+F[13]+2850285829&4294967295,N=M+(V<<5&4294967295|V>>>27),V=U+(M^B&(N^M))+F[2]+4243563512&4294967295,U=N+(V<<9&4294967295|V>>>23),V=B+(N^M&(U^N))+F[7]+1735328473&4294967295,B=U+(V<<14&4294967295|V>>>18),V=M+(U^N&(B^U))+F[12]+2368359562&4294967295,M=B+(V<<20&4294967295|V>>>12),V=N+(M^B^U)+F[5]+4294588738&4294967295,N=M+(V<<4&4294967295|V>>>28),V=U+(N^M^B)+F[8]+2272392833&4294967295,U=N+(V<<11&4294967295|V>>>21),V=B+(U^N^M)+F[11]+1839030562&4294967295,B=U+(V<<16&4294967295|V>>>16),V=M+(B^U^N)+F[14]+4259657740&4294967295,M=B+(V<<23&4294967295|V>>>9),V=N+(M^B^U)+F[1]+2763975236&4294967295,N=M+(V<<4&4294967295|V>>>28),V=U+(N^M^B)+F[4]+1272893353&4294967295,U=N+(V<<11&4294967295|V>>>21),V=B+(U^N^M)+F[7]+4139469664&4294967295,B=U+(V<<16&4294967295|V>>>16),V=M+(B^U^N)+F[10]+3200236656&4294967295,M=B+(V<<23&4294967295|V>>>9),V=N+(M^B^U)+F[13]+681279174&4294967295,N=M+(V<<4&4294967295|V>>>28),V=U+(N^M^B)+F[0]+3936430074&4294967295,U=N+(V<<11&4294967295|V>>>21),V=B+(U^N^M)+F[3]+3572445317&4294967295,B=U+(V<<16&4294967295|V>>>16),V=M+(B^U^N)+F[6]+76029189&4294967295,M=B+(V<<23&4294967295|V>>>9),V=N+(M^B^U)+F[9]+3654602809&4294967295,N=M+(V<<4&4294967295|V>>>28),V=U+(N^M^B)+F[12]+3873151461&4294967295,U=N+(V<<11&4294967295|V>>>21),V=B+(U^N^M)+F[15]+530742520&4294967295,B=U+(V<<16&4294967295|V>>>16),V=M+(B^U^N)+F[2]+3299628645&4294967295,M=B+(V<<23&4294967295|V>>>9),V=N+(B^(M|~U))+F[0]+4096336452&4294967295,N=M+(V<<6&4294967295|V>>>26),V=U+(M^(N|~B))+F[7]+1126891415&4294967295,U=N+(V<<10&4294967295|V>>>22),V=B+(N^(U|~M))+F[14]+2878612391&4294967295,B=U+(V<<15&4294967295|V>>>17),V=M+(U^(B|~N))+F[5]+4237533241&4294967295,M=B+(V<<21&4294967295|V>>>11),V=N+(B^(M|~U))+F[12]+1700485571&4294967295,N=M+(V<<6&4294967295|V>>>26),V=U+(M^(N|~B))+F[3]+2399980690&4294967295,U=N+(V<<10&4294967295|V>>>22),V=B+(N^(U|~M))+F[10]+4293915773&4294967295,B=U+(V<<15&4294967295|V>>>17),V=M+(U^(B|~N))+F[1]+2240044497&4294967295,M=B+(V<<21&4294967295|V>>>11),V=N+(B^(M|~U))+F[8]+1873313359&4294967295,N=M+(V<<6&4294967295|V>>>26),V=U+(M^(N|~B))+F[15]+4264355552&4294967295,U=N+(V<<10&4294967295|V>>>22),V=B+(N^(U|~M))+F[6]+2734768916&4294967295,B=U+(V<<15&4294967295|V>>>17),V=M+(U^(B|~N))+F[13]+1309151649&4294967295,M=B+(V<<21&4294967295|V>>>11),V=N+(B^(M|~U))+F[4]+4149444226&4294967295,N=M+(V<<6&4294967295|V>>>26),V=U+(M^(N|~B))+F[11]+3174756917&4294967295,U=N+(V<<10&4294967295|V>>>22),V=B+(N^(U|~M))+F[2]+718787259&4294967295,B=U+(V<<15&4294967295|V>>>17),V=M+(U^(B|~N))+F[9]+3951481745&4294967295,k.g[0]=k.g[0]+N&4294967295,k.g[1]=k.g[1]+(B+(V<<21&4294967295|V>>>11))&4294967295,k.g[2]=k.g[2]+B&4294967295,k.g[3]=k.g[3]+U&4294967295}i.prototype.u=function(k,N){N===void 0&&(N=k.length);for(var M=N-this.blockSize,F=this.B,B=this.h,U=0;U<N;){if(B==0)for(;U<=M;)r(this,k,U),U+=this.blockSize;if(typeof k=="string"){for(;U<N;)if(F[B++]=k.charCodeAt(U++),B==this.blockSize){r(this,F),B=0;break}}else for(;U<N;)if(F[B++]=k[U++],B==this.blockSize){r(this,F),B=0;break}}this.h=B,this.o+=N},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var N=1;N<k.length-8;++N)k[N]=0;var M=8*this.o;for(N=k.length-8;N<k.length;++N)k[N]=M&255,M/=256;for(this.u(k),k=Array(16),N=M=0;4>N;++N)for(var F=0;32>F;F+=8)k[M++]=this.g[N]>>>F&255;return k};function o(k,N){var M=u;return Object.prototype.hasOwnProperty.call(M,k)?M[k]:M[k]=N(k)}function a(k,N){this.h=N;for(var M=[],F=!0,B=k.length-1;0<=B;B--){var U=k[B]|0;F&&U==N||(M[B]=U,F=!1)}this.g=M}var u={};function d(k){return-128<=k&&128>k?o(k,function(N){return new a([N|0],0>N?-1:0)}):new a([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return y;if(0>k)return q(p(-k));for(var N=[],M=1,F=0;k>=M;F++)N[F]=k/M|0,M*=4294967296;return new a(N,0)}function g(k,N){if(k.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(k.charAt(0)=="-")return q(g(k.substring(1),N));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=p(Math.pow(N,8)),F=y,B=0;B<k.length;B+=8){var U=Math.min(8,k.length-B),V=parseInt(k.substring(B,B+U),N);8>U?(U=p(Math.pow(N,U)),F=F.j(U).add(p(V))):(F=F.j(M),F=F.add(p(V)))}return F}var y=d(0),v=d(1),S=d(16777216);t=a.prototype,t.m=function(){if(b(this))return-q(this).m();for(var k=0,N=1,M=0;M<this.g.length;M++){var F=this.i(M);k+=(0<=F?F:4294967296+F)*N,N*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(D(this))return"0";if(b(this))return"-"+q(this).toString(k);for(var N=p(Math.pow(k,6)),M=this,F="";;){var B=z(M,N).g;M=A(M,B.j(N));var U=((0<M.g.length?M.g[0]:M.h)>>>0).toString(k);if(M=B,D(M))return U+F;for(;6>U.length;)U="0"+U;F=U+F}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function D(k){if(k.h!=0)return!1;for(var N=0;N<k.g.length;N++)if(k.g[N]!=0)return!1;return!0}function b(k){return k.h==-1}t.l=function(k){return k=A(this,k),b(k)?-1:D(k)?0:1};function q(k){for(var N=k.g.length,M=[],F=0;F<N;F++)M[F]=~k.g[F];return new a(M,~k.h).add(v)}t.abs=function(){return b(this)?q(this):this},t.add=function(k){for(var N=Math.max(this.g.length,k.g.length),M=[],F=0,B=0;B<=N;B++){var U=F+(this.i(B)&65535)+(k.i(B)&65535),V=(U>>>16)+(this.i(B)>>>16)+(k.i(B)>>>16);F=V>>>16,U&=65535,V&=65535,M[B]=V<<16|U}return new a(M,M[M.length-1]&-2147483648?-1:0)};function A(k,N){return k.add(q(N))}t.j=function(k){if(D(this)||D(k))return y;if(b(this))return b(k)?q(this).j(q(k)):q(q(this).j(k));if(b(k))return q(this.j(q(k)));if(0>this.l(S)&&0>k.l(S))return p(this.m()*k.m());for(var N=this.g.length+k.g.length,M=[],F=0;F<2*N;F++)M[F]=0;for(F=0;F<this.g.length;F++)for(var B=0;B<k.g.length;B++){var U=this.i(F)>>>16,V=this.i(F)&65535,Q=k.i(B)>>>16,pe=k.i(B)&65535;M[2*F+2*B]+=V*pe,x(M,2*F+2*B),M[2*F+2*B+1]+=U*pe,x(M,2*F+2*B+1),M[2*F+2*B+1]+=V*Q,x(M,2*F+2*B+1),M[2*F+2*B+2]+=U*Q,x(M,2*F+2*B+2)}for(F=0;F<N;F++)M[F]=M[2*F+1]<<16|M[2*F];for(F=N;F<2*N;F++)M[F]=0;return new a(M,0)};function x(k,N){for(;(k[N]&65535)!=k[N];)k[N+1]+=k[N]>>>16,k[N]&=65535,N++}function R(k,N){this.g=k,this.h=N}function z(k,N){if(D(N))throw Error("division by zero");if(D(k))return new R(y,y);if(b(k))return N=z(q(k),N),new R(q(N.g),q(N.h));if(b(N))return N=z(k,q(N)),new R(q(N.g),N.h);if(30<k.g.length){if(b(k)||b(N))throw Error("slowDivide_ only works with positive integers.");for(var M=v,F=N;0>=F.l(k);)M=W(M),F=W(F);var B=J(M,1),U=J(F,1);for(F=J(F,2),M=J(M,2);!D(F);){var V=U.add(F);0>=V.l(k)&&(B=B.add(M),U=V),F=J(F,1),M=J(M,1)}return N=A(k,B.j(N)),new R(B,N)}for(B=y;0<=k.l(N);){for(M=Math.max(1,Math.floor(k.m()/N.m())),F=Math.ceil(Math.log(M)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),U=p(M),V=U.j(N);b(V)||0<V.l(k);)M-=F,U=p(M),V=U.j(N);D(U)&&(U=v),B=B.add(U),k=A(k,V)}return new R(B,k)}t.A=function(k){return z(this,k).h},t.and=function(k){for(var N=Math.max(this.g.length,k.g.length),M=[],F=0;F<N;F++)M[F]=this.i(F)&k.i(F);return new a(M,this.h&k.h)},t.or=function(k){for(var N=Math.max(this.g.length,k.g.length),M=[],F=0;F<N;F++)M[F]=this.i(F)|k.i(F);return new a(M,this.h|k.h)},t.xor=function(k){for(var N=Math.max(this.g.length,k.g.length),M=[],F=0;F<N;F++)M[F]=this.i(F)^k.i(F);return new a(M,this.h^k.h)};function W(k){for(var N=k.g.length+1,M=[],F=0;F<N;F++)M[F]=k.i(F)<<1|k.i(F-1)>>>31;return new a(M,k.h)}function J(k,N){var M=N>>5;N%=32;for(var F=k.g.length-M,B=[],U=0;U<F;U++)B[U]=0<N?k.i(U+M)>>>N|k.i(U+M+1)<<32-N:k.i(U+M);return new a(B,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,uw=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=p,a.fromString=g,$r=a}).apply(typeof pv<"u"?pv:typeof self<"u"?self:typeof window<"u"?window:{});var Qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cw,Ba,dw,yc,Gf,hw,fw,pw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,w){return h==Array.prototype||h==Object.prototype||(h[T]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qu=="object"&&Qu];for(var T=0;T<h.length;++T){var w=h[T];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(h,T){if(T)e:{var w=i;h=h.split(".");for(var P=0;P<h.length-1;P++){var H=h[P];if(!(H in w))break e;w=w[H]}h=h[h.length-1],P=w[h],T=T(P),T!=P&&T!=null&&e(w,h,{configurable:!0,writable:!0,value:T})}}function o(h,T){h instanceof String&&(h+="");var w=0,P=!1,H={next:function(){if(!P&&w<h.length){var K=w++;return{value:T(K,h[K]),done:!1}}return P=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}r("Array.prototype.values",function(h){return h||function(){return o(this,function(T,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function p(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function g(h,T,w){return h.call.apply(h.bind,arguments)}function y(h,T,w){if(!h)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,P),h.apply(T,H)}}return function(){return h.apply(T,arguments)}}function v(h,T,w){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function S(h,T){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function D(h,T){function w(){}w.prototype=T.prototype,h.aa=T.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(P,H,K){for(var ne=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ne[Oe-2]=arguments[Oe];return T.prototype[H].apply(P,ne)}}function b(h){const T=h.length;if(0<T){const w=Array(T);for(let P=0;P<T;P++)w[P]=h[P];return w}return[]}function q(h,T){for(let w=1;w<arguments.length;w++){const P=arguments[w];if(d(P)){const H=h.length||0,K=P.length||0;h.length=H+K;for(let ne=0;ne<K;ne++)h[H+ne]=P[ne]}else h.push(P)}}class A{constructor(T,w){this.i=T,this.j=w,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function x(h){return/^[\s\xa0]*$/.test(h)}function R(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function z(h){return z[" "](h),h}z[" "]=function(){};var W=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function J(h,T,w){for(const P in h)T.call(w,h[P],P,h)}function k(h,T){for(const w in h)T.call(void 0,h[w],w,h)}function N(h){const T={};for(const w in h)T[w]=h[w];return T}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(h,T){let w,P;for(let H=1;H<arguments.length;H++){P=arguments[H];for(w in P)h[w]=P[w];for(let K=0;K<M.length;K++)w=M[K],Object.prototype.hasOwnProperty.call(P,w)&&(h[w]=P[w])}}function B(h){var T=1;h=h.split(":");const w=[];for(;0<T&&h.length;)w.push(h.shift()),T--;return h.length&&w.push(h.join(":")),w}function U(h){u.setTimeout(()=>{throw h},0)}function V(){var h=me;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class Q{constructor(){this.h=this.g=null}add(T,w){const P=pe.get();P.set(T,w),this.h?this.h.next=P:this.g=P,this.h=P}}var pe=new A(()=>new de,h=>h.reset());class de{constructor(){this.next=this.g=this.h=null}set(T,w){this.h=T,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,Z=!1,me=new Q,te=()=>{const h=u.Promise.resolve(void 0);xe=()=>{h.then(ge)}};var ge=()=>{for(var h;h=V();){try{h.h.call(h.g)}catch(w){U(w)}var T=pe;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}Z=!1};function Ce(){this.s=this.s,this.C=this.C}Ce.prototype.s=!1,Ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};u.addEventListener("test",w,T),u.removeEventListener("test",w,T)}catch{}return h}();function Se(h,T){if(Re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(W){e:{try{z(T.nodeName);var H=!0;break e}catch{}H=!1}H||(T=null)}}else w=="mouseover"?T=h.fromElement:w=="mouseout"&&(T=h.toElement);this.relatedTarget=T,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Se.aa.h.call(this)}}D(Se,Re);var ve={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),$n=0;function Ql(h,T,w,P,H){this.listener=h,this.proxy=null,this.src=T,this.type=w,this.capture=!!P,this.ha=H,this.key=++$n,this.da=this.fa=!1}function bi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vi(h){this.src=h,this.g={},this.h=0}Vi.prototype.add=function(h,T,w,P,H){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var ne=Cr(h,T,P,H);return-1<ne?(T=h[ne],w||(T.fa=!1)):(T=new Ql(T,this.src,K,!!P,H),T.fa=w,h.push(T)),T};function ai(h,T){var w=T.type;if(w in h.g){var P=h.g[w],H=Array.prototype.indexOf.call(P,T,void 0),K;(K=0<=H)&&Array.prototype.splice.call(P,H,1),K&&(bi(T),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Cr(h,T,w,P){for(var H=0;H<h.length;++H){var K=h[H];if(!K.da&&K.listener==T&&K.capture==!!w&&K.ha==P)return H}return-1}var Hs="closure_lm_"+(1e6*Math.random()|0),co={};function Gs(h,T,w,P,H){if(Array.isArray(T)){for(var K=0;K<T.length;K++)Gs(h,T[K],w,P,H);return null}return w=eu(w),h&&h[_t]?h.K(T,w,p(P)?!!P.capture:!1,H):Ws(h,T,w,!1,P,H)}function Ws(h,T,w,P,H,K){if(!T)throw Error("Invalid event type");var ne=p(H)?!!H.capture:!!H,Oe=mo(h);if(Oe||(h[Hs]=Oe=new Vi(h)),w=Oe.add(T,w,P,ne,K),w.proxy)return w;if(P=ho(),w.proxy=P,P.src=h,P.listener=w,h.addEventListener)Ue||(H=ne),H===void 0&&(H=!1),h.addEventListener(T.toString(),P,H);else if(h.attachEvent)h.attachEvent(po(T.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ho(){function h(w){return T.call(h.src,h.listener,w)}const T=jl;return h}function Xl(h,T,w,P,H){if(Array.isArray(T))for(var K=0;K<T.length;K++)Xl(h,T[K],w,P,H);else P=p(P)?!!P.capture:!!P,w=eu(w),h&&h[_t]?(h=h.i,T=String(T).toString(),T in h.g&&(K=h.g[T],w=Cr(K,w,P,H),-1<w&&(bi(K[w]),Array.prototype.splice.call(K,w,1),K.length==0&&(delete h.g[T],h.h--)))):h&&(h=mo(h))&&(T=h.g[T.toString()],h=-1,T&&(h=Cr(T,w,P,H)),(w=-1<h?T[h]:null)&&fo(w))}function fo(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[_t])ai(T.i,h);else{var w=h.type,P=h.proxy;T.removeEventListener?T.removeEventListener(w,P,h.capture):T.detachEvent?T.detachEvent(po(w),P):T.addListener&&T.removeListener&&T.removeListener(P),(w=mo(T))?(ai(w,h),w.h==0&&(w.src=null,T[Hs]=null)):bi(h)}}}function po(h){return h in co?co[h]:co[h]="on"+h}function jl(h,T){if(h.da)h=!0;else{T=new Se(T,this);var w=h.listener,P=h.ha||h.src;h.fa&&fo(h),h=w.call(P,T)}return h}function mo(h){return h=h[Hs],h instanceof Vi?h:null}var $s="__closure_events_fn_"+(1e9*Math.random()>>>0);function eu(h){return typeof h=="function"?h:(h[$s]||(h[$s]=function(T){return h.handleEvent(T)}),h[$s])}function dt(){Ce.call(this),this.i=new Vi(this),this.M=this,this.F=null}D(dt,Ce),dt.prototype[_t]=!0,dt.prototype.removeEventListener=function(h,T,w,P){Xl(this,h,T,w,P)};function Et(h,T){var w,P=h.F;if(P)for(w=[];P;P=P.F)w.push(P);if(h=h.M,P=T.type||T,typeof T=="string")T=new Re(T,h);else if(T instanceof Re)T.target=T.target||h;else{var H=T;T=new Re(P,h),F(T,H)}if(H=!0,w)for(var K=w.length-1;0<=K;K--){var ne=T.g=w[K];H=Sr(ne,P,!0,T)&&H}if(ne=T.g=h,H=Sr(ne,P,!0,T)&&H,H=Sr(ne,P,!1,T)&&H,w)for(K=0;K<w.length;K++)ne=T.g=w[K],H=Sr(ne,P,!1,T)&&H}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var w=h.g[T],P=0;P<w.length;P++)bi(w[P]);delete h.g[T],h.h--}}this.F=null},dt.prototype.K=function(h,T,w,P){return this.i.add(String(h),T,!1,w,P)},dt.prototype.L=function(h,T,w,P){return this.i.add(String(h),T,!0,w,P)};function Sr(h,T,w,P){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var H=!0,K=0;K<T.length;++K){var ne=T[K];if(ne&&!ne.da&&ne.capture==w){var Oe=ne.listener,ht=ne.ha||ne.src;ne.fa&&ai(h.i,ne),H=Oe.call(ht,P)!==!1&&H}}return H&&!P.defaultPrevented}function tu(h,T,w){if(typeof h=="function")w&&(h=v(h,w));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:u.setTimeout(h,T||0)}function Ks(h){h.g=tu(()=>{h.g=null,h.i&&(h.i=!1,Ks(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class nu extends Ce{constructor(T,w){super(),this.m=T,this.l=w,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ks(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(h){Ce.call(this),this.h=h,this.g={}}D(Ir,Ce);var Js=[];function go(h){J(h.g,function(T,w){this.g.hasOwnProperty(w)&&fo(T)},h),h.g={}}Ir.prototype.N=function(){Ir.aa.N.call(this),go(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _o=u.JSON.stringify,Gd=u.JSON.parse,xr=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Zs(){}Zs.prototype.h=null;function iu(h){return h.h||(h.h=h.i())}function Ys(){}var Fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yo(){Re.call(this,"d")}D(yo,Re);function Qs(){Re.call(this,"c")}D(Qs,Re);var li={},ru=null;function vo(){return ru=ru||new dt}li.La="serverreachability";function ou(h){Re.call(this,li.La,h)}D(ou,Re);function Ar(h){const T=vo();Et(T,new ou(T))}li.STAT_EVENT="statevent";function To(h,T){Re.call(this,li.STAT_EVENT,h),this.stat=T}D(To,Re);function At(h){const T=vo();Et(T,new To(T,h))}li.Ma="timingevent";function su(h,T){Re.call(this,li.Ma,h),this.size=T}D(su,Re);function Pr(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},T)}function Rr(){this.g=!0}Rr.prototype.xa=function(){this.g=!1};function mn(h,T,w,P,H,K){h.info(function(){if(h.g)if(K)for(var ne="",Oe=K.split("&"),ht=0;ht<Oe.length;ht++){var Me=Oe[ht].split("=");if(1<Me.length){var He=Me[0];Me=Me[1];var tt=He.split("_");ne=2<=tt.length&&tt[1]=="type"?ne+(He+"="+Me+"&"):ne+(He+"=redacted&")}}else ne=null;else ne=K;return"XMLHTTP REQ ("+P+") [attempt "+H+"]: "+T+`
`+w+`
`+ne})}function ue(h,T,w,P,H,K,ne){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+H+"]: "+T+`
`+w+`
`+K+" "+ne})}function ui(h,T,w,P){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+lu(h,w)+(P?" "+P:"")})}function au(h,T){h.info(function(){return"TIMEOUT: "+T})}Rr.prototype.info=function(){};function lu(h,T){if(!h.g)return T;if(!T)return null;try{var w=JSON.parse(T);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var P=w[h];if(!(2>P.length)){var H=P[1];if(Array.isArray(H)&&!(1>H.length)){var K=H[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ne=1;ne<H.length;ne++)H[ne]=""}}}}return _o(w)}catch{return T}}var Nr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Eo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wo;function kn(){}D(kn,Zs),kn.prototype.g=function(){return new XMLHttpRequest},kn.prototype.i=function(){return{}},wo=new kn;function Mn(h,T,w,P){this.j=h,this.i=T,this.l=w,this.R=P||1,this.U=new Ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uu}function uu(){this.i=null,this.g="",this.h=!1}var cu={},Xs={};function js(h,T,w){h.L=1,h.v=_n(st(T)),h.m=w,h.P=!0,ea(h,null)}function ea(h,T){h.F=Date.now(),So(h),h.A=st(h.v);var w=h.A,P=h.R;Array.isArray(P)||(P=[String(P)]),fu(w.i,"t",P),h.C=0,w=h.j.J,h.h=new uu,h.g=Tu(h.j,w?T:null,!h.m),0<h.O&&(h.M=new nu(v(h.Y,h,h.g),h.O)),T=h.U,w=h.g,P=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(Js[0]=H.toString()),H=Js);for(var K=0;K<H.length;K++){var ne=Gs(w,H[K],P||T.handleEvent,!1,T.h||T);if(!ne)break;T.g[ne.key]=ne}T=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Ar(),mn(h.i,h.u,h.A,h.l,h.R,h.m)}Mn.prototype.ca=function(h){h=h.target;const T=this.M;T&&Ht(h)==3?T.j():this.Y(h)},Mn.prototype.Y=function(h){try{if(h==this.g)e:{const tt=Ht(this.g);var T=this.g.Ba();const Gi=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||ga(this.g)))){this.J||tt!=4||T==7||(T==8||0>=Gi?Ar(3):Ar(2)),ta(this);var w=this.g.Z();this.X=w;t:if(du(this)){var P=ga(this.g);h="";var H=P.length,K=Ht(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),kr(this);var ne="";break t}this.h.i=new u.TextDecoder}for(T=0;T<H;T++)this.h.h=!0,h+=this.h.i.decode(P[T],{stream:!(K&&T==H-1)});P.length=0,this.h.g+=h,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=w==200,ue(this.i,this.u,this.A,this.l,this.R,tt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,ht=this.g;if((Oe=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Oe)){var Me=Oe;break t}}Me=null}if(w=Me)ui(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mr(this,w);else{this.o=!1,this.s=3,At(12),ci(this),kr(this);break e}}if(this.P){w=!0;let lt;for(;!this.J&&this.C<ne.length;)if(lt=Co(this,ne),lt==Xs){tt==4&&(this.s=4,At(14),w=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==cu){this.s=4,At(15),ui(this.i,this.l,ne,"[Invalid Chunk]"),w=!1;break}else ui(this.i,this.l,lt,null),Mr(this,lt);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||ne.length!=0||this.h.h||(this.s=1,At(16),w=!1),this.o=this.o&&w,!w)ui(this.i,this.l,ne,"[Invalid Chunked Response]"),ci(this),kr(this);else if(0<ne.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Lo(He),He.M=!0,At(11))}}else ui(this.i,this.l,ne,null),Mr(this,ne);tt==4&&ci(this),this.o&&!this.J&&(tt==4?ya(this.j,this):(this.o=!1,So(this)))}else Wd(this.g),w==400&&0<ne.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),ci(this),kr(this)}}}catch{}finally{}};function du(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Co(h,T){var w=h.C,P=T.indexOf(`
`,w);return P==-1?Xs:(w=Number(T.substring(w,P)),isNaN(w)?cu:(P+=1,P+w>T.length?Xs:(T=T.slice(P,P+w),h.C=P+w,T)))}Mn.prototype.cancel=function(){this.J=!0,ci(this)};function So(h){h.S=Date.now()+h.I,hu(h,h.I)}function hu(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Pr(v(h.ba,h),T)}function ta(h){h.B&&(u.clearTimeout(h.B),h.B=null)}Mn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(au(this.i,this.A),this.L!=2&&(Ar(),At(17)),ci(this),this.s=2,kr(this)):hu(this,this.S-h)};function kr(h){h.j.G==0||h.J||ya(h.j,h)}function ci(h){ta(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,go(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function Mr(h,T){try{var w=h.j;if(w.G!=0&&(w.g==h||Ne(w.h,h))){if(!h.K&&Ne(w.h,h)&&w.G==3){try{var P=w.Da.g.parse(T)}catch{P=null}if(Array.isArray(P)&&P.length==3){var H=P;if(H[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)bo(w),ko(w);else break e;Mo(w),At(18)}}else w.za=H[1],0<w.za-w.T&&37500>H[2]&&w.F&&w.v==0&&!w.C&&(w.C=Pr(v(w.Za,w),6e3));if(1>=Ui(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else mi(w,11)}else if((h.K||w.g==h)&&bo(w),!x(T))for(H=w.Da.g.parse(T),T=0;T<H.length;T++){let Me=H[T];if(w.T=Me[0],Me=Me[1],w.G==2)if(Me[0]=="c"){w.K=Me[1],w.ia=Me[2];const He=Me[3];He!=null&&(w.la=He,w.j.info("VER="+w.la));const tt=Me[4];tt!=null&&(w.Aa=tt,w.j.info("SVER="+w.Aa));const Gi=Me[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(P=1.5*Gi,w.L=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const lt=h.g;if(lt){const Fo=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var K=P.h;K.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ge(K,K.h),K.h=null))}if(P.D){const Zn=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zn&&(P.ya=Zn,_e(P.I,P.D,Zn))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),P=w;var ne=h;if(P.qa=Vo(P,P.J?P.ia:null,P.W),ne.K){Dr(P.h,ne);var Oe=ne,ht=P.L;ht&&(Oe.I=ht),Oe.B&&(ta(Oe),So(Oe)),P.g=ne}else bn(P);0<w.i.length&&Hi(w)}else Me[0]!="stop"&&Me[0]!="close"||mi(w,7);else w.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?mi(w,7):No(w):Me[0]!="noop"&&w.l&&w.l.ta(Me),w.v=0)}}Ar(4)}catch{}}var Lr=class{constructor(h,T){this.g=h,this.map=T}};function na(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ia(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ui(h){return h.h?1:h.g?h.g.size:0}function Ne(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function Ge(h,T){h.g?h.g.add(T):h.h=T}function Dr(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}na.prototype.cancel=function(){if(this.i=di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function di(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const w of h.g.values())T=T.concat(w.D);return T}return b(h.i)}function Oi(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var T=[],w=h.length,P=0;P<w;P++)T.push(h[P]);return T}T=[],w=0;for(P in h)T[w++]=h[P];return T}function ra(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var T=[];h=h.length;for(var w=0;w<h;w++)T.push(w);return T}T=[],w=0;for(const P in h)T[w++]=P;return T}}}function we(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var w=ra(h),P=Oi(h),H=P.length,K=0;K<H;K++)T.call(void 0,P[K],w&&w[K],h)}var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oa(h,T){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var P=h[w].indexOf("="),H=null;if(0<=P){var K=h[w].substring(0,P);H=h[w].substring(P+1)}else K=h[w];T(K,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function gn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof gn){this.h=h.h,Io(this,h.j),this.o=h.o,this.g=h.g,hi(this,h.s),this.l=h.l;var T=h.i,w=new fi;w.i=T.i,T.g&&(w.g=new Map(T.g),w.h=T.h),Kn(this,w),this.m=h.m}else h&&(T=String(h).match(Qe))?(this.h=!1,Io(this,T[1]||"",!0),this.o=Ln(T[2]||""),this.g=Ln(T[3]||"",!0),hi(this,T[4]),this.l=Ln(T[5]||"",!0),Kn(this,T[6]||"",!0),this.m=Ln(T[7]||"")):(this.h=!1,this.i=new fi(null,this.h))}gn.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Dn(T,Bi,!0),":");var w=this.g;return(w||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Dn(T,Bi,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Dn(w,w.charAt(0)=="/"?la:aa,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Dn(w,ua)),h.join("")};function st(h){return new gn(h)}function Io(h,T,w){h.j=w?Ln(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function hi(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Kn(h,T,w){T instanceof fi?(h.i=T,yn(h.i,h.h)):(w||(T=Dn(T,xo)),h.i=new fi(T,h.h))}function _e(h,T,w){h.i.set(T,w)}function _n(h){return _e(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ln(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Dn(h,T,w){return typeof h=="string"?(h=encodeURI(h).replace(T,sa),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sa(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Bi=/[#\/\?@]/g,aa=/[#\?:]/g,la=/[#\?]/g,xo=/[#\?@]/g,ua=/#/g;function fi(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function on(h){h.g||(h.g=new Map,h.h=0,h.i&&oa(h.i,function(T,w){h.add(decodeURIComponent(T.replace(/\+/g," ")),w)}))}t=fi.prototype,t.add=function(h,T){on(this),this.i=null,h=he(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(T),this.h+=1,this};function ca(h,T){on(h),T=he(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function Ao(h,T){return on(h),T=he(h,T),h.g.has(T)}t.forEach=function(h,T){on(this),this.g.forEach(function(w,P){w.forEach(function(H){h.call(T,H,P,this)},this)},this)},t.na=function(){on(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),w=[];for(let P=0;P<T.length;P++){const H=h[P];for(let K=0;K<H.length;K++)w.push(T[P])}return w},t.V=function(h){on(this);let T=[];if(typeof h=="string")Ao(this,h)&&(T=T.concat(this.g.get(he(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)T=T.concat(h[w])}return T},t.set=function(h,T){return on(this),this.i=null,h=he(this,h),Ao(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},t.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function fu(h,T,w){ca(h,T),0<w.length&&(h.i=null,h.g.set(he(h,T),b(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var w=0;w<T.length;w++){var P=T[w];const K=encodeURIComponent(String(P)),ne=this.V(P);for(P=0;P<ne.length;P++){var H=K;ne[P]!==""&&(H+="="+encodeURIComponent(String(ne[P]))),h.push(H)}}return this.i=h.join("&")};function he(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function yn(h,T){T&&!h.j&&(on(h),h.i=null,h.g.forEach(function(w,P){var H=P.toLowerCase();P!=H&&(ca(this,P),fu(this,H,w))},h)),h.j=T}function qe(h,T){const w=new Rr;if(u.Image){const P=new Image;P.onload=S(vn,w,"TestLoadImage: loaded",!0,T,P),P.onerror=S(vn,w,"TestLoadImage: error",!1,T,P),P.onabort=S(vn,w,"TestLoadImage: abort",!1,T,P),P.ontimeout=S(vn,w,"TestLoadImage: timeout",!1,T,P),u.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else T(!1)}function pu(h,T){const w=new Rr,P=new AbortController,H=setTimeout(()=>{P.abort(),vn(w,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:P.signal}).then(K=>{clearTimeout(H),K.ok?vn(w,"TestPingServer: ok",!0,T):vn(w,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),vn(w,"TestPingServer: error",!1,T)})}function vn(h,T,w,P,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),P(w)}catch{}}function da(){this.g=new xr}function ha(h,T,w){const P=w||"";try{we(h,function(H,K){let ne=H;p(H)&&(ne=_o(H)),T.push(P+K+"="+encodeURIComponent(ne))})}catch(H){throw T.push(P+"type="+encodeURIComponent("_badmap")),H}}function Tn(h){this.l=h.Ub||null,this.j=h.eb||!1}D(Tn,Zs),Tn.prototype.g=function(){return new zi(this.l,this.j)},Tn.prototype.i=function(h){return function(){return h}}({});function zi(h,T){dt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(zi,dt),t=zi.prototype,t.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,sn(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||u).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,et(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sn(this)),this.g&&(this.readyState=3,sn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function qi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?et(this):sn(this),this.readyState==3&&qi(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,et(this))},t.Qa=function(h){this.g&&(this.response=h,et(this))},t.ga=function(){this.g&&et(this)};function et(h){h.readyState=4,h.l=null,h.j=null,h.v=null,sn(h)}t.setRequestHeader=function(h,T){this.u.append(h,T)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var w=T.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=T.next();return h.join(`\r
`)};function sn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function fa(h){let T="";return J(h,function(w,P){T+=P,T+=":",T+=w,T+=`\r
`}),T}function Po(h,T,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=fa(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):_e(h,T,w))}function Xe(h){dt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Xe,dt);var mu=/^https?$/i,pa=["POST","PUT"];t=Xe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,T,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wo.g(),this.v=this.o?iu(this.o):iu(wo),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(K){gu(this,K);return}if(h=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var H in P)w.set(H,P[H]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const K of P.keys())w.set(K,P.get(K));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),H=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(pa,T,void 0))||P||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ne]of w)this.g.setRequestHeader(K,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zt(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){gu(this,K)}};function gu(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,ma(h),Ro(h)}function ma(h){h.A||(h.A=!0,Et(h,"complete"),Et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Et(this,"complete"),Et(this,"abort"),Ro(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ro(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ae(this):this.bb())},t.bb=function(){Ae(this)};function Ae(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Ht(h)!=4||h.Z()!=2)){if(h.u&&Ht(h)==4)tu(h.Ea,0,h);else if(Et(h,"readystatechange"),Ht(h)==4){h.h=!1;try{const ne=h.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var w;if(!(w=T)){var P;if(P=ne===0){var H=String(h.D).match(Qe)[1]||null;!H&&u.self&&u.self.location&&(H=u.self.location.protocol.slice(0,-1)),P=!mu.test(H?H.toLowerCase():"")}w=P}if(w)Et(h,"complete"),Et(h,"success");else{h.m=6;try{var K=2<Ht(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",ma(h)}}finally{Ro(h)}}}}function Ro(h,T){if(h.g){Zt(h);const w=h.g,P=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||Et(h,"ready");try{w.onreadystatechange=P}catch{}}}function Zt(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Ht(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),Gd(T)}};function ga(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wd(h){const T={};h=(h.g&&2<=Ht(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(x(h[P]))continue;var w=B(h[P]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=T[H]||[];T[H]=K,K.push(w)}k(T,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(h,T,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||T}function _u(h){this.Aa=0,this.i=[],this.j=new Rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pi("baseRetryDelayMs",5e3,h),this.cb=pi("retryDelaySeedMs",1e4,h),this.Wa=pi("forwardChannelMaxRetries",2,h),this.wa=pi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new na(h&&h.concurrentRequestLimit),this.Da=new da,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_u.prototype,t.la=8,t.G=1,t.connect=function(h,T,w,P){At(0),this.W=h,this.H=T||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.I=Vo(this,null,this.W),Hi(this)};function No(h){if(yu(h),h.G==3){var T=h.U++,w=st(h.I);if(_e(w,"SID",h.K),_e(w,"RID",T),_e(w,"TYPE","terminate"),br(h,w),T=new Mn(h,h.j,T),T.L=2,T.v=_n(st(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(T.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=T.v,w=!0),w||(T.g=Tu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),So(T)}vu(h)}function ko(h){h.g&&(Lo(h),h.g.cancel(),h.g=null)}function yu(h){ko(h),h.u&&(u.clearTimeout(h.u),h.u=null),bo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function Hi(h){if(!ia(h.h)&&!h.s){h.s=!0;var T=h.Ga;xe||te(),Z||(xe(),Z=!0),me.add(T,h),h.B=0}}function $d(h,T){return Ui(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Pr(v(h.Ga,h,T),va(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new Mn(this,this.j,h);let K=this.o;if(this.S&&(K?(K=N(K),F(K,this.S)):K=this.S),this.m!==null||this.O||(H.H=K,K=null),this.P)e:{for(var T=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(T+=P,4096<T){T=w;break e}if(T===4096||w===this.i.length-1){T=w+1;break e}}T=1e3}else T=1e3;T=_a(this,H,T),w=st(this.I),_e(w,"RID",h),_e(w,"CVER",22),this.D&&_e(w,"X-HTTP-Session-Id",this.D),br(this,w),K&&(this.O?T="headers="+encodeURIComponent(String(fa(K)))+"&"+T:this.m&&Po(w,this.m,K)),Ge(this.h,H),this.Ua&&_e(w,"TYPE","init"),this.P?(_e(w,"$req",T),_e(w,"SID","null"),H.T=!0,js(H,w,null)):js(H,w,T),this.G=2}}else this.G==3&&(h?an(this,h):this.i.length==0||ia(this.h)||an(this))};function an(h,T){var w;T?w=T.l:w=h.U++;const P=st(h.I);_e(P,"SID",h.K),_e(P,"RID",w),_e(P,"AID",h.T),br(h,P),h.m&&h.o&&Po(P,h.m,h.o),w=new Mn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),T&&(h.i=T.D.concat(h.i)),T=_a(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ge(h.h,w),js(w,P,T)}function br(h,T){h.H&&J(h.H,function(w,P){_e(T,P,w)}),h.l&&we({},function(w,P){_e(T,P,w)})}function _a(h,T,w){w=Math.min(h.i.length,w);var P=h.l?v(h.l.Na,h.l,h):null;e:{var H=h.i;let K=-1;for(;;){const ne=["count="+w];K==-1?0<w?(K=H[0].g,ne.push("ofs="+K)):K=0:ne.push("ofs="+K);let Oe=!0;for(let ht=0;ht<w;ht++){let Me=H[ht].g;const He=H[ht].map;if(Me-=K,0>Me)K=Math.max(0,H[ht].g-100),Oe=!1;else try{ha(He,ne,"req"+Me+"_")}catch{P&&P(He)}}if(Oe){P=ne.join("&");break e}}}return h=h.i.splice(0,w),T.D=h,P}function bn(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;xe||te(),Z||(xe(),Z=!0),me.add(T,h),h.v=0}}function Mo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Pr(v(h.Fa,h),va(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Do(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Pr(v(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),ko(this),Do(this))};function Lo(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function Do(h){h.g=new Mn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=st(h.qa);_e(T,"RID","rpc"),_e(T,"SID",h.K),_e(T,"AID",h.T),_e(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&_e(T,"TO",h.ja),_e(T,"TYPE","xmlhttp"),br(h,T),h.m&&h.o&&Po(T,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=_n(st(T)),w.m=null,w.P=!0,ea(w,h)}t.Za=function(){this.C!=null&&(this.C=null,ko(this),Mo(this),At(19))};function bo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function ya(h,T){var w=null;if(h.g==T){bo(h),Lo(h),h.g=null;var P=2}else if(Ne(h.h,T))w=T.D,Dr(h.h,T),P=1;else return;if(h.G!=0){if(T.o)if(P==1){w=T.m?T.m.length:0,T=Date.now()-T.F;var H=h.B;P=vo(),Et(P,new su(P,w)),Hi(h)}else bn(h);else if(H=T.s,H==3||H==0&&0<T.X||!(P==1&&$d(h,T)||P==2&&Mo(h)))switch(w&&0<w.length&&(T=h.h,T.i=T.i.concat(w)),H){case 1:mi(h,5);break;case 4:mi(h,10);break;case 3:mi(h,6);break;default:mi(h,2)}}}function va(h,T){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*T}function mi(h,T){if(h.j.info("Error code "+T),T==2){var w=v(h.fb,h),P=h.Xa;const H=!P;P=new gn(P||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Io(P,"https"),_n(P),H?qe(P.toString(),w):pu(P.toString(),w)}else At(2);h.G=0,h.l&&h.l.sa(T),vu(h),yu(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function vu(h){if(h.G=0,h.ka=[],h.l){const T=di(h.h);(T.length!=0||h.i.length!=0)&&(q(h.ka,T),q(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function Vo(h,T,w){var P=w instanceof gn?st(w):new gn(w);if(P.g!="")T&&(P.g=T+"."+P.g),hi(P,P.s);else{var H=u.location;P=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;var K=new gn(null);P&&Io(K,P),T&&(K.g=T),H&&hi(K,H),w&&(K.l=w),P=K}return w=h.D,T=h.ya,w&&T&&_e(P,w,T),_e(P,"VER",h.la),br(h,P),P}function Tu(h,T,w){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new Xe(new Tn({eb:w})):new Xe(h.pa),T.Ha(h.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ta(){}t=Ta.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vr(){}Vr.prototype.g=function(h,T){return new wt(h,T)};function wt(h,T){dt.call(this),this.g=new _u(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!x(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!x(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new En(this)}D(wt,dt),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){No(this.g)},wt.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=_o(h),h=w);T.i.push(new Lr(T.Ya++,h)),T.G==3&&Hi(T)},wt.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,wt.aa.N.call(this)};function Jn(h){yo.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const w in T){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}D(Jn,yo);function Eu(){Qs.call(this),this.status=1}D(Eu,Qs);function En(h){this.g=h}D(En,Ta),En.prototype.ua=function(){Et(this.g,"a")},En.prototype.ta=function(h){Et(this.g,new Jn(h))},En.prototype.sa=function(h){Et(this.g,new Eu)},En.prototype.ra=function(){Et(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,pw=function(){return new Vr},fw=function(){return vo()},hw=li,Gf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,yc=Nr,Eo.COMPLETE="complete",dw=Eo,Ys.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ba=Ys,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,cw=Xe}).apply(typeof Qu<"u"?Qu:typeof self<"u"?self:typeof window<"u"?window:{});const mv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Os="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new iw("@firebase/firestore");function Da(){return eo.logLevel}function le(t,...e){if(eo.logLevel<=De.DEBUG){const n=e.map(hm);eo.debug(`Firestore (${Os}): ${t}`,...n)}}function Ni(t,...e){if(eo.logLevel<=De.ERROR){const n=e.map(hm);eo.error(`Firestore (${Os}): ${t}`,...n)}}function Ss(t,...e){if(eo.logLevel<=De.WARN){const n=e.map(hm);eo.warn(`Firestore (${Os}): ${t}`,...n)}}function hm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t="Unexpected state"){const e=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: `+t;throw Ni(e),new Error(e)}function ze(t,e){t||ye()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Us{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class M2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class L2{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string"),new mw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new Ut(e)}}class D2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class b2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new D2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ze(this.o===void 0);const i=o=>{o.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,le("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string"),this.R=n.token,new V2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=U2(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Ve(t,e){return t<e?-1:t>e?1:0}function Is(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ae(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Tt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Tt(0,0))}static max(){return new Te(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n,i){n===void 0?n=0:n>e.length&&ye(),i===void 0?i=e.length-n:i>e.length-n&&ye(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Il.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Il?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ze extends Il{construct(e,n,i){return new Ze(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const O2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Il{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return O2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ae(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ae(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ae(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ae(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ze.fromString(e))}static fromName(e){return new ce(Ze.fromString(e).popFirst(5))}static empty(){return new ce(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ze(e.slice()))}}function B2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Te.fromTimestamp(i===1e9?new Tt(n+1,0):new Tt(n,i));return new pr(r,ce.empty(),e)}function z2(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new pr(Te.min(),ce.empty(),-1)}static max(){return new pr(Te.max(),ce.empty(),-1)}}function q2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==H2)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},d=>i(d))}),a=!0,o===r&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(r=>r?j.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new j((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(g=>{a[p]=g,++u,u===o&&i(a)},g=>r(g))}})}static doWhile(e,n){return new j((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function W2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fm.oe=-1;function Pd(t){return t==null}function ed(t){return t===0&&1/t==-1/0}function $2(t){return typeof t=="number"&&Number.isInteger(t)&&!ed(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _w(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xu(this.root,e,this.comparator,!0)}}class Xu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=r??Rt.EMPTY,this.right=o??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Rt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Rt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _v(this.data.getIterator())}getIteratorFrom(e){return new _v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class _v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Mt(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Is(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yw("Invalid base64 string: "+o):o}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const K2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(t){if(ze(!!t),typeof t=="string"){let e=0;const n=K2.exec(t);if(ze(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function to(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mm(t){const e=t.mapValue.fields.__previous_value__;return pm(e)?mm(e):e}function xl(t){const e=mr(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n,i,r,o,a,u,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p}}class Al{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju={mapValue:{}};function no(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:Y2(t)?9007199254740991:Z2(t)?10:11:ye()}function si(t,e){if(t===e)return!0;const n=no(t);if(n!==no(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xl(t).isEqual(xl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=mr(r.timestampValue),u=mr(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return to(r.bytesValue).isEqual(to(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ut(r.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(r.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ut(r.integerValue)===ut(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ut(r.doubleValue),u=ut(o.doubleValue);return a===u?ed(a)===ed(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Is(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(gv(a)!==gv(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!si(a[d],u[d])))return!1;return!0}(t,e);default:return ye()}}function Pl(t,e){return(t.values||[]).find(n=>si(n,e))!==void 0}function xs(t,e){if(t===e)return 0;const n=no(t),i=no(e);if(n!==i)return Ve(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ut(o.integerValue||o.doubleValue),d=ut(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return yv(t.timestampValue,e.timestampValue);case 4:return yv(xl(t),xl(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(o,a){const u=to(o),d=to(a);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),d=a.split("/");for(let p=0;p<u.length&&p<d.length;p++){const g=Ve(u[p],d[p]);if(g!==0)return g}return Ve(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ve(ut(o.latitude),ut(a.latitude));return u!==0?u:Ve(ut(o.longitude),ut(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vv(t.arrayValue,e.arrayValue);case 10:return function(o,a){var u,d,p,g;const y=o.fields||{},v=a.fields||{},S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,D=(d=v.value)===null||d===void 0?void 0:d.arrayValue,b=Ve(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((g=D==null?void 0:D.values)===null||g===void 0?void 0:g.length)||0);return b!==0?b:vv(S,D)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===ju.mapValue&&a===ju.mapValue)return 0;if(o===ju.mapValue)return 1;if(a===ju.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),p=a.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=Ve(d[y],g[y]);if(v!==0)return v;const S=xs(u[d[y]],p[g[y]]);if(S!==0)return S}return Ve(d.length,g.length)}(t.mapValue,e.mapValue);default:throw ye()}}function yv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=mr(t),i=mr(e),r=Ve(n.seconds,i.seconds);return r!==0?r:Ve(n.nanos,i.nanos)}function vv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=xs(n[r],i[r]);if(o)return o}return Ve(n.length,i.length)}function As(t){return Wf(t)}function Wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=mr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return to(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Wf(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Wf(n.fields[a])}`;return r+"}"}(t.mapValue):ye()}function Tv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $f(t){return!!t&&"integerValue"in t}function gm(t){return!!t&&"arrayValue"in t}function Ev(t){return!!t&&"nullValue"in t}function wv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}function Z2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function tl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ao(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=tl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Y2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=tl(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];vc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ao(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Xt(tl(this.value))}}function vw(t){const e=[];return ao(t.fields,(n,i)=>{const r=new Nt([n]);if(vc(i)){const o=vw(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Bt(e,0,Te.min(),Te.min(),Te.min(),Xt.empty(),0)}static newFoundDocument(e,n,i,r){return new Bt(e,1,n,Te.min(),i,r,0)}static newNoDocument(e,n){return new Bt(e,2,n,Te.min(),Te.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,Te.min(),Te.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.position=e,this.inclusive=n}}function Cv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ce.comparator(ce.fromName(a.referenceValue),n.key):i=xs(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Sv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{}class gt extends Tw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new j2(e,n,i):n==="array-contains"?new nD(e,i):n==="in"?new iD(e,i):n==="not-in"?new rD(e,i):n==="array-contains-any"?new oD(e,i):new gt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new eD(e,i):new tD(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xs(n,this.value)):n!==null&&no(this.value)===no(n)&&this.matchesComparison(xs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends Tw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gn(e,n)}matches(e){return Ew(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ew(t){return t.op==="and"}function ww(t){return X2(t)&&Ew(t)}function X2(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function Kf(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+As(t.value);if(ww(t))return t.filters.map(e=>Kf(e)).join(",");{const e=t.filters.map(n=>Kf(n)).join(",");return`${t.op}(${e})`}}function Cw(t,e){return t instanceof gt?function(i,r){return r instanceof gt&&i.op===r.op&&i.field.isEqual(r.field)&&si(i.value,r.value)}(t,e):t instanceof Gn?function(i,r){return r instanceof Gn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&Cw(a,r.filters[u]),!0):!1}(t,e):void ye()}function Sw(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${As(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(Sw).join(" ,")+"}"}(t):"Filter"}class j2 extends gt{constructor(e,n,i){super(e,n,i),this.key=ce.fromName(i.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class eD extends gt{constructor(e,n){super(e,"in",n),this.keys=Iw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tD extends gt{constructor(e,n){super(e,"not-in",n),this.keys=Iw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Iw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ce.fromName(i.referenceValue))}class nD extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gm(n)&&Pl(n.arrayValue,this.value)}}class iD extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pl(this.value.arrayValue,n)}}class rD extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Pl(this.value.arrayValue,n)}}class oD extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Pl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function Iv(t,e=null,n=[],i=[],r=null,o=null,a=null){return new sD(t,e,n,i,r,o,a)}function _m(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Kf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Pd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>As(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>As(i)).join(",")),e.ue=n}return e.ue}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Cw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sv(t.startAt,e.startAt)&&Sv(t.endAt,e.endAt)}function Jf(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function aD(t,e,n,i,r,o,a,u){return new Bs(t,e,n,i,r,o,a,u)}function vm(t){return new Bs(t)}function xv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xw(t){return t.collectionGroup!==null}function nl(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Mt(Nt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(u=u.add(p.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Rl(o,i))}),n.has(Nt.keyField().canonicalString())||e.ce.push(new Rl(Nt.keyField(),i))}return e.ce}function ni(t){const e=Ee(t);return e.le||(e.le=lD(e,nl(t))),e.le}function lD(t,e){if(t.limitType==="F")return Iv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Rl(r.field,o)});const n=t.endAt?new td(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new td(t.startAt.position,t.startAt.inclusive):null;return Iv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Zf(t,e){const n=t.filters.concat([e]);return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nd(t,e,n){return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return ym(ni(t),ni(e))&&t.limitType===e.limitType}function Aw(t){return`${_m(ni(t))}|lt:${t.limitType}`}function Ho(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Sw(r)).join(", ")}]`),Pd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>As(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>As(r)).join(",")),`Target(${i})`}(ni(t))}; limitType=${t.limitType})`}function Nd(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of nl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,d){const p=Cv(a,u,d);return a.inclusive?p<=0:p<0}(i.startAt,nl(i),r)||i.endAt&&!function(a,u,d){const p=Cv(a,u,d);return a.inclusive?p>=0:p>0}(i.endAt,nl(i),r))}(t,e)}function uD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pw(t){return(e,n)=>{let i=!1;for(const r of nl(t)){const o=cD(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function cD(t,e,n){const i=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,a,u){const d=a.data.field(o),p=u.data.field(o);return d!==null&&p!==null?xs(d,p):ye()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return _w(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new ot(ce.comparator);function ki(){return dD}const Rw=new ot(ce.comparator);function za(...t){let e=Rw;for(const n of t)e=e.insert(n.key,n);return e}function Nw(t){let e=Rw;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Hr(){return il()}function kw(){return il()}function il(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const hD=new ot(ce.comparator),fD=new Mt(ce.comparator);function ke(...t){let e=fD;for(const n of t)e=e.add(n);return e}const pD=new Mt(Ve);function mD(){return pD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ed(e)?"-0":e}}function Mw(t){return{integerValue:""+t}}function Lw(t,e){return $2(e)?Mw(e):Tm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function gD(t,e,n){return t instanceof Nl?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&pm(o)&&(o=mm(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof kl?bw(t,e):t instanceof Ml?Vw(t,e):function(r,o){const a=Dw(r,o),u=Av(a)+Av(r.Pe);return $f(a)&&$f(r.Pe)?Mw(u):Tm(r.serializer,u)}(t,e)}function _D(t,e,n){return t instanceof kl?bw(t,e):t instanceof Ml?Vw(t,e):n}function Dw(t,e){return t instanceof Ll?function(i){return $f(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Nl extends kd{}class kl extends kd{constructor(e){super(),this.elements=e}}function bw(t,e){const n=Fw(e);for(const i of t.elements)n.some(r=>si(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ml extends kd{constructor(e){super(),this.elements=e}}function Vw(t,e){let n=Fw(e);for(const i of t.elements)n=n.filter(r=>!si(r,i));return{arrayValue:{values:n}}}class Ll extends kd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Av(t){return ut(t.integerValue||t.doubleValue)}function Fw(t){return gm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.field=e,this.transform=n}}function yD(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof kl&&r instanceof kl||i instanceof Ml&&r instanceof Ml?Is(i.elements,r.elements,si):i instanceof Ll&&r instanceof Ll?si(i.Pe,r.Pe):i instanceof Nl&&r instanceof Nl}(t.transform,e.transform)}class vD{constructor(e,n){this.version=e,this.transformResults=n}}class ii{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Md{}function Ow(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zw(t.key,ii.none()):new Gl(t.key,t.data,ii.none());{const n=t.data,i=Xt.empty();let r=new Mt(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Er(t.key,i,new cn(r.toArray()),ii.none())}}function TD(t,e,n){t instanceof Gl?function(r,o,a){const u=r.value.clone(),d=Rv(r.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Er?function(r,o,a){if(!Tc(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Rv(r.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(Bw(r)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function rl(t,e,n,i){return t instanceof Gl?function(o,a,u,d){if(!Tc(o.precondition,a))return u;const p=o.value.clone(),g=Nv(o.fieldTransforms,d,a);return p.setAll(g),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Er?function(o,a,u,d){if(!Tc(o.precondition,a))return u;const p=Nv(o.fieldTransforms,d,a),g=a.data;return g.setAll(Bw(o)),g.setAll(p),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,a,u){return Tc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function ED(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=Dw(i.transform,r||null);o!=null&&(n===null&&(n=Xt.empty()),n.set(i.field,o))}return n||null}function Pv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Is(i,r,(o,a)=>yD(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gl extends Md{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Er extends Md{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Bw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Rv(t,e,n){const i=new Map;ze(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,_D(a,u,n[r]))}return i}function Nv(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,gD(o,a,e))}return i}class zw extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wD extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&TD(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=rl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=rl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=kw();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const d=Ow(a,u);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Is(this.mutations,e.mutations,(n,i)=>Pv(n,i))&&Is(this.baseMutations,e.baseMutations,(n,i)=>Pv(n,i))}}class Em{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ze(e.mutations.length===i.length);let r=function(){return hD}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Em(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Le;function xD(t){switch(t){default:return ye();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function qw(t){if(t===void 0)return Ni("GRPC error has no .code"),Y.UNKNOWN;switch(t){case pt.OK:return Y.OK;case pt.CANCELLED:return Y.CANCELLED;case pt.UNKNOWN:return Y.UNKNOWN;case pt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case pt.INTERNAL:return Y.INTERNAL;case pt.UNAVAILABLE:return Y.UNAVAILABLE;case pt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case pt.NOT_FOUND:return Y.NOT_FOUND;case pt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case pt.ABORTED:return Y.ABORTED;case pt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case pt.DATA_LOSS:return Y.DATA_LOSS;default:return ye()}}(Le=pt||(pt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new $r([4294967295,4294967295],0);function kv(t){const e=AD().encode(t),n=new uw;return n.update(e),new Uint8Array(n.digest())}function Mv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $r([n,i],0),new $r([r,o],0)]}class wm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new qa(`Invalid padding: ${n}`);if(i<0)throw new qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new qa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$r.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply($r.fromNumber(i)));return r.compare(PD)===1&&(r=new $r([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=kv(e),[i,r]=Mv(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new wm(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=kv(e),[i,r]=Mv(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ld(Te.min(),r,new ot(Ve),ki(),ke())}}class Wl{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Wl(i,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class Hw{constructor(e,n){this.targetId=e,this.me=n}}class Gw{constructor(e,n,i=Dt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Lv{constructor(){this.fe=0,this.ge=bv(),this.pe=Dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),n=ke(),i=ke();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ye()}}),new Wl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=bv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RD{constructor(e){this.Le=e,this.Be=new Map,this.ke=ki(),this.qe=Dv(),this.Qe=new ot(Ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(Jf(o))if(i===0){const a=new ce(o.path);this.Ue(n,a,Bt.newNoDocument(a,Te.min()))}else ze(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),d=u?this.Xe(u,e,a):1;if(d!==0){this.je(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=to(i).toUint8Array()}catch(d){if(d instanceof yw)return Ss("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new wm(a,r,o)}catch(d){return Ss(d instanceof qa?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&Jf(u.target)){const d=new ce(u.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,Bt.newNoDocument(d,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let i=ke();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{const p=this.Je(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new Ld(e,n,this.Qe,this.ke,i);return this.ke=ki(),this.qe=Dv(),this.Qe=new ot(Ve),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Lv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Mt(Ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Dv(){return new ot(ce.comparator)}function bv(){return new ot(ce.comparator)}const ND={asc:"ASCENDING",desc:"DESCENDING"},kD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MD={and:"AND",or:"OR"};class LD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yf(t,e){return t.useProto3Json||Pd(e)?e:{value:e}}function id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ww(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DD(t,e){return id(t,e.toTimestamp())}function ri(t){return ze(!!t),Te.fromTimestamp(function(n){const i=mr(n);return new Tt(i.seconds,i.nanos)}(t))}function Cm(t,e){return Qf(t,e).canonicalString()}function Qf(t,e){const n=function(r){return new Ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $w(t){const e=Ze.fromString(t);return ze(Qw(e)),e}function Xf(t,e){return Cm(t.databaseId,e.path)}function Rh(t,e){const n=$w(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(Jw(n))}function Kw(t,e){return Cm(t.databaseId,e)}function bD(t){const e=$w(t);return e.length===4?Ze.emptyPath():Jw(e)}function jf(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Jw(t){return ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vv(t,e,n){return{name:Xf(t,e),fields:n.value.mapValue.fields}}function VD(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(p,g){return p.useProto3Json?(ze(g===void 0||typeof g=="string"),Dt.fromBase64String(g||"")):(ze(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Dt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(p){const g=p.code===void 0?Y.UNKNOWN:qw(p.code);return new ae(g,p.message||"")}(a);n=new Gw(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Rh(t,i.document.name),o=ri(i.document.updateTime),a=i.document.createTime?ri(i.document.createTime):Te.min(),u=new Xt({mapValue:{fields:i.document.fields}}),d=Bt.newFoundDocument(r,o,a,u),p=i.targetIds||[],g=i.removedTargetIds||[];n=new Ec(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Rh(t,i.document),o=i.readTime?ri(i.readTime):Te.min(),a=Bt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Ec([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Rh(t,i.document),o=i.removedTargetIds||[];n=new Ec([],o,r,null)}else{if(!("filter"in e))return ye();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new ID(r,o),u=i.targetId;n=new Hw(u,a)}}return n}function FD(t,e){let n;if(e instanceof Gl)n={update:Vv(t,e.key,e.value)};else if(e instanceof zw)n={delete:Xf(t,e.key)};else if(e instanceof Er)n={update:Vv(t,e.key,e.data),updateMask:$D(e.fieldMask)};else{if(!(e instanceof wD))return ye();n={verify:Xf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Nl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof kl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ml)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ll)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw ye()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:DD(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye()}(t,e.precondition)),n}function UD(t,e){return t&&t.length>0?(ze(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?ri(r.updateTime):ri(o);return a.isEqual(Te.min())&&(a=ri(o)),new vD(a,r.transformResults||[])}(n,e))):[]}function OD(t,e){return{documents:[Kw(t,e.path)]}}function BD(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Kw(t,r);const o=function(p){if(p.length!==0)return Yw(Gn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(p){if(p.length!==0)return p.map(g=>function(v){return{field:Go(v.field),direction:HD(v.dir)}}(g))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Yf(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:r}}function zD(t){let e=bD(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ze(i===1);const g=n.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const v=Zw(y);return v instanceof Gn&&ww(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(D){return new Rl(Wo(D.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,Pd(v)?null:v}(n.limit));let d=null;n.startAt&&(d=function(y){const v=!!y.before,S=y.values||[];return new td(S,v)}(n.startAt));let p=null;return n.endAt&&(p=function(y){const v=!y.before,S=y.values||[];return new td(S,v)}(n.endAt)),aD(e,r,a,o,u,"F",d,p)}function qD(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Wo(n.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Wo(n.unaryFilter.field);return gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wo(n.unaryFilter.field);return gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wo(n.unaryFilter.field);return gt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):t.fieldFilter!==void 0?function(n){return gt.create(Wo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(i=>Zw(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(t):ye()}function HD(t){return ND[t]}function GD(t){return kD[t]}function WD(t){return MD[t]}function Go(t){return{fieldPath:t.canonicalString()}}function Wo(t){return Nt.fromServerFormat(t.fieldPath)}function Yw(t){return t instanceof gt?function(n){if(n.op==="=="){if(wv(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(Ev(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wv(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(Ev(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:GD(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const i=n.getFilters().map(r=>Yw(r));return i.length===1?i[0]:{compositeFilter:{op:WD(n.op),filters:i}}}(t):ye()}function $D(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,i,r,o=Te.min(),a=Te.min(),u=Dt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.ct=e}}function JD(t){const e=zD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.un=new YD}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(pr.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class YD{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Mt(Ze.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Mt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ps(0)}static kn(){return new Ps(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&rl(i.mutation,r,cn.empty(),Tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ke()){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=za();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ke()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=ki();const a=il(),u=function(){return il()}();return n.forEach((d,p)=>{const g=i.get(p.key);r.has(p.key)&&(g===void 0||g.mutation instanceof Er)?o=o.insert(p.key,p):g!==void 0?(a.set(p.key,g.mutation.getFieldMask()),rl(g.mutation,p,g.mutation.getFieldMask(),Tt.now())):a.set(p.key,cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,g)=>a.set(p,g)),n.forEach((p,g)=>{var y;return u.set(p,new XD(g,(y=a.get(p))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const i=il();let r=new ot((a,u)=>a-u),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let g=i.get(d)||cn.empty();g=u.applyToLocalView(p,g),i.set(d,g);const y=(r.get(u.batchId)||ke()).add(d);r=r.insert(u.batchId,y)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,g=d.value,y=kw();g.forEach(v=>{if(!o.has(v)){const S=Ow(n.get(v),i.get(v));S!==null&&y.set(v,S),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,p,y))}return j.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):j.resolve(Hr());let u=-1,d=o;return a.next(p=>j.forEach(p,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?j.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{d=d.insert(g,v)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,ke())).next(g=>({batchId:u,changes:Nw(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(i=>{let r=za();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=za();return this.indexManager.getCollectionParents(e,o).next(u=>j.forEach(u,d=>{const p=function(y,v){return new Bs(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next(g=>{g.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((d,p)=>{const g=p.getKey();a.get(g)===null&&(a=a.insert(g,Bt.newInvalidDocument(g)))});let u=za();return a.forEach((d,p)=>{const g=o.get(d);g!==void 0&&rl(g.mutation,p,cn.empty(),Tt.now()),Nd(n,p)&&(u=u.insert(d,p))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ri(r.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:JD(r.bundledQuery),readTime:ri(r.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.overlays=new ot(ce.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Hr();return j.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const r=Hr(),o=n.length+1,a=new ce(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return j.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ot((p,g)=>p-g);const a=this.overlays.getIterator();for(;a.hasNext();){const p=a.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let g=o.get(p.largestBatchId);g===null&&(g=Hr(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const u=Hr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,g)=>u.set(p,g)),!(u.size()>=r)););return j.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new SD(n,i));let o=this.Ir.get(n);o===void 0&&(o=ke(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.Tr=new Mt(St.Er),this.dr=new Mt(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new St(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new St(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ce(new Ze([])),i=new St(n,e),r=new St(n,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ce(new Ze([])),i=new St(n,e),r=new St(n,e+1);let o=ke();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new St(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ce.comparator(e.key,n.key)||Ve(e.wr,n.wr)}static Ar(e,n){return Ve(e.wr,n.wr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Mt(St.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new CD(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new St(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return j.resolve(a)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new St(n,0),r=new St(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{const u=this.Dr(a.wr);o.push(u)}),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Mt(Ve);return n.forEach(r=>{const o=new St(r,0),a=new St(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{i=i.add(u.wr)})}),j.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ce.isDocumentKey(o)||(o=o.child(""));const a=new St(new ce(o),0);let u=new Mt(Ve);return this.br.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(u=u.add(d.wr)),!0)},a),j.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ze(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return j.forEach(n.mutations,r=>{const o=new St(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new St(n,0),r=this.br.firstAfterOrEqual(i);return j.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.Mr=e,this.docs=function(){return new ot(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let i=ki();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Bt.newInvalidDocument(r))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=ki();const a=n.path,u=new ce(a.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!a.isPrefixOf(p.path))break;p.path.length>a.length+1||q2(z2(g),i)<=0||(r.has(g.key)||Nd(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ye()}Or(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new ob(this)}getSize(e){return j.resolve(this.size)}}class ob extends QD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.persistence=e,this.Nr=new zs(n=>_m(n),ym),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sm,this.targetCount=0,this.kr=Ps.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ps(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),j.waitFor(o).next(()=>r)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),j.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fm(0),this.Kr=!1,this.Kr=!0,this.$r=new nb,this.referenceDelegate=e(this),this.Ur=new sb(this),this.indexManager=new ZD,this.remoteDocumentCache=function(r){return new rb(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new KD(n),this.Gr=new eb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new ib(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){le("MemoryPersistence","Starting transaction:",e);const r=new lb(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return j.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class lb extends G2{constructor(e){super(),this.currentSequenceNumber=e}}class Im{constructor(e){this.persistence=e,this.Jr=new Sm,this.Yr=null}static Zr(e){return new Im(e)}get Xr(){if(this.Yr)return this.Yr;throw ye()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,i=>{const r=ce.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,Te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ke(),r=ke();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new xm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fL()?8:W2(dL())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new ub;return this.Xi(e,n,a).next(u=>{if(o.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Da()<=De.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Da()<=De.DEBUG&&le("QueryEngine","Query:",Ho(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Da()<=De.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(n))):j.resolve())}Yi(e,n){if(xv(n))return j.resolve(null);let i=ni(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=nd(n,null,"F"),i=ni(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ke(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.ts(n,u);return this.ns(n,p,a,d.readTime)?this.Yi(e,nd(n,null,"F")):this.rs(e,p,n,d)}))})))}Zi(e,n,i,r){return xv(n)||r.isEqual(Te.min())?j.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const a=this.ts(n,o);return this.ns(n,a,i,r)?j.resolve(null):(Da()<=De.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ho(n)),this.rs(e,a,n,B2(r,-1)).next(u=>u))})}ts(e,n){let i=new Mt(Pw(e));return n.forEach((r,o)=>{Nd(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return Da()<=De.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Ho(n)),this.Ji.getDocumentsMatchingQuery(e,n,pr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new ot(Ve),this._s=new zs(o=>_m(o),ym),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function hb(t,e,n,i){return new db(t,e,n,i)}async function Xw(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let d=ke();for(const p of r){a.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of o){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next(p=>({hs:p,removedBatchIds:a,addedBatchIds:u}))})})}function fb(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,d,p,g){const y=p.batch,v=y.keys();let S=j.resolve();return v.forEach(D=>{S=S.next(()=>g.getEntry(d,D)).next(b=>{const q=p.docVersions.get(D);ze(q!==null),b.version.compareTo(q)<0&&(y.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),g.addEntry(b)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=ke();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function jw(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function pb(t,e){const n=Ee(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const u=[];e.targetChanges.forEach((g,y)=>{const v=r.get(y);if(!v)return;u.push(n.Ur.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,g.addedDocuments,y)));let S=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Dt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),r=r.insert(y,S),function(b,q,A){return b.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,S,g)&&u.push(n.Ur.updateTargetData(o,S))});let d=ki(),p=ke();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(mb(o,a,e.documentUpdates).next(g=>{d=g.Ps,p=g.Is})),!i.isEqual(Te.min())){const g=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(g)}return j.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.os=r,o))}function mb(t,e,n){let i=ke(),r=ke();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=ki();return n.forEach((u,d)=>{const p=o.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Te.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):le("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)}),{Ps:a,Is:r}})}function gb(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _b(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,j.resolve(r)):n.Ur.allocateTargetId(i).next(a=>(r=new er(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function ep(t,e,n){const i=Ee(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Hl(a))throw a;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Fv(t,e,n){const i=Ee(t);let r=Te.min(),o=ke();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,p,g){const y=Ee(d),v=y._s.get(g);return v!==void 0?j.resolve(y.os.get(v)):y.Ur.getTargetData(p,g)}(i,a,ni(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,n?r:Te.min(),n?o:ke())).next(u=>(yb(i,uD(e),u),{documents:u,Ts:o})))}function yb(t,e,n){let i=t.us.get(e)||Te.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class Uv{constructor(){this.activeTargetIds=mD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vb{constructor(){this.so=new Uv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Uv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec=null;function Nh(){return ec===null?ec=function(){return 268435456+Math.round(2147483648*Math.random())}():ec++,"0x"+ec.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class Cb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,a){const u=Nh(),d=this.xo(n,i.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${u}:`,d,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,a),this.No(n,d,p,r).then(g=>(le("RestConnection",`Received RPC '${n}' ${u}: `,g),g),g=>{throw Ss("RestConnection",`RPC '${n}' ${u} failed with error: `,g,"url: ",d,"request:",r),g})}Lo(n,i,r,o,a,u){return this.Mo(n,i,r,o,a)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Os}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}xo(n,i){const r=Eb[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=Nh();return new Promise((a,u)=>{const d=new cw;d.setWithCredentials(!0),d.listenOnce(dw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case yc.NO_ERROR:const g=d.getResponseJson();le(Ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case yc.TIMEOUT:le(Ft,`RPC '${e}' ${o} timed out`),u(new ae(Y.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const y=d.getStatus();if(le(Ft,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const D=function(q){const A=q.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(A)>=0?A:Y.UNKNOWN}(S.status);u(new ae(D,S.message))}else u(new ae(Y.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ae(Y.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{le(Ft,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(r);le(Ft,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",p,i,15)})}Bo(e,n,i){const r=Nh(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=pw(),u=fw(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const g=o.join("");le(Ft,`Creating RPC '${e}' stream ${r}: ${g}`,d);const y=a.createWebChannel(g,d);let v=!1,S=!1;const D=new wb({Io:q=>{S?le(Ft,`Not sending because RPC '${e}' stream ${r} is closed:`,q):(v||(le(Ft,`Opening RPC '${e}' stream ${r} transport.`),y.open(),v=!0),le(Ft,`RPC '${e}' stream ${r} sending:`,q),y.send(q))},To:()=>y.close()}),b=(q,A,x)=>{q.listen(A,R=>{try{x(R)}catch(z){setTimeout(()=>{throw z},0)}})};return b(y,Ba.EventType.OPEN,()=>{S||(le(Ft,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),b(y,Ba.EventType.CLOSE,()=>{S||(S=!0,le(Ft,`RPC '${e}' stream ${r} transport closed`),D.So())}),b(y,Ba.EventType.ERROR,q=>{S||(S=!0,Ss(Ft,`RPC '${e}' stream ${r} transport errored:`,q),D.So(new ae(Y.UNAVAILABLE,"The operation could not be completed")))}),b(y,Ba.EventType.MESSAGE,q=>{var A;if(!S){const x=q.data[0];ze(!!x);const R=x,z=R.error||((A=R[0])===null||A===void 0?void 0:A.error);if(z){le(Ft,`RPC '${e}' stream ${r} received error:`,z);const W=z.status;let J=function(M){const F=pt[M];if(F!==void 0)return qw(F)}(W),k=z.message;J===void 0&&(J=Y.INTERNAL,k="Unknown error status: "+W+" with message "+z.message),S=!0,D.So(new ae(J,k)),y.close()}else le(Ft,`RPC '${e}' stream ${r} received:`,x),D.bo(x)}}),b(u,hw.STAT_EVENT,q=>{q.stat===Gf.PROXY?le(Ft,`RPC '${e}' stream ${r} detected buffering proxy`):q.stat===Gf.NOPROXY&&le(Ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){return new LD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&le("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,i,r,o,a,u,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Ni(n.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ae(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sb extends tC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=VD(this.serializer,e),i=function(o){if(!("targetChange"in o))return Te.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Te.min():a.readTime?ri(a.readTime):Te.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=jf(this.serializer),n.addTarget=function(o,a){let u;const d=a.target;if(u=Jf(d)?{documents:OD(o,d)}:{query:BD(o,d)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Ww(o,a.resumeToken);const p=Yf(o,a.expectedCount);p!==null&&(u.expectedCount=p)}else if(a.snapshotVersion.compareTo(Te.min())>0){u.readTime=id(o,a.snapshotVersion.toTimestamp());const p=Yf(o,a.expectedCount);p!==null&&(u.expectedCount=p)}return u}(this.serializer,e);const i=qD(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=jf(this.serializer),n.removeTarget=e,this.a_(n)}}class Ib extends tC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UD(e.writeResults,e.commitTime),i=ri(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=jf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>FD(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ae(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Qf(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(Y.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Qf(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(Y.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ab{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ni(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(async()=>{lo(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(d){const p=Ee(d);p.L_.add(4),await $l(p),p.q_.set("Unknown"),p.L_.delete(4),await bd(p)}(this))})}),this.q_=new Ab(i,r)}}async function bd(t){if(lo(t))for(const e of t.B_)await e(!0)}async function $l(t){for(const e of t.B_)await e(!1)}function nC(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Nm(n)?Rm(n):qs(n).r_()&&Pm(n,e))}function Am(t,e){const n=Ee(t),i=qs(n);n.N_.delete(e),i.r_()&&iC(n,e),n.N_.size===0&&(i.r_()?i.o_():lo(n)&&n.q_.set("Unknown"))}function Pm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).A_(e)}function iC(t,e){t.Q_.xe(e),qs(t).R_(e)}function Rm(t){t.Q_=new RD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.q_.v_()}function Nm(t){return lo(t)&&!qs(t).n_()&&t.N_.size>0}function lo(t){return Ee(t).L_.size===0}function rC(t){t.Q_=void 0}async function Rb(t){t.q_.set("Online")}async function Nb(t){t.N_.forEach((e,n)=>{Pm(t,e)})}async function kb(t,e){rC(t),Nm(t)?(t.q_.M_(e),Rm(t)):t.q_.set("Unknown")}async function Mb(t,e,n){if(t.q_.set("Online"),e instanceof Gw&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(i){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await rd(t,i)}else if(e instanceof Ec?t.Q_.Ke(e):e instanceof Hw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Te.min()))try{const i=await jw(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Q_.rt(a);return u.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.N_.get(p);g&&o.N_.set(p,g.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,p)=>{const g=o.N_.get(d);if(!g)return;o.N_.set(d,g.withResumeToken(Dt.EMPTY_BYTE_STRING,g.snapshotVersion)),iC(o,d);const y=new er(g.target,d,p,g.sequenceNumber);Pm(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){le("RemoteStore","Failed to raise snapshot:",i),await rd(t,i)}}async function rd(t,e,n){if(!Hl(e))throw e;t.L_.add(1),await $l(t),t.q_.set("Offline"),n||(n=()=>jw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await bd(t)})}function oC(t,e){return e().catch(n=>rd(t,n,e))}async function Vd(t){const e=Ee(t),n=gr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lb(e);)try{const r=await gb(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,Db(e,r)}catch(r){await rd(e,r)}sC(e)&&aC(e)}function Lb(t){return lo(t)&&t.O_.length<10}function Db(t,e){t.O_.push(e);const n=gr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function sC(t){return lo(t)&&!gr(t).n_()&&t.O_.length>0}function aC(t){gr(t).start()}async function bb(t){gr(t).p_()}async function Vb(t){const e=gr(t);for(const n of t.O_)e.m_(n.mutations)}async function Fb(t,e,n){const i=t.O_.shift(),r=Em.from(i,e,n);await oC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Vd(t)}async function Ub(t,e){e&&gr(t).V_&&await async function(i,r){if(function(a){return xD(a)&&a!==Y.ABORTED}(r.code)){const o=i.O_.shift();gr(i).s_(),await oC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Vd(i)}}(t,e),sC(t)&&aC(t)}async function Bv(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const i=lo(n);n.L_.add(3),await $l(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await bd(n)}async function Ob(t,e){const n=Ee(t);e?(n.L_.delete(2),await bd(n)):e||(n.L_.add(2),await $l(n),n.q_.set("Unknown"))}function qs(t){return t.K_||(t.K_=function(n,i,r){const o=Ee(n);return o.w_(),new Sb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:Rb.bind(null,t),Ro:Nb.bind(null,t),mo:kb.bind(null,t),d_:Mb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Nm(t)?Rm(t):t.q_.set("Unknown")):(await t.K_.stop(),rC(t))})),t.K_}function gr(t){return t.U_||(t.U_=function(n,i,r){const o=Ee(n);return o.w_(),new Ib(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bb.bind(null,t),mo:Ub.bind(null,t),f_:Vb.bind(null,t),g_:Fb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vd(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new km(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(t,e){if(Ni("AsyncQueue",`${e}: ${t}`),Hl(t))return new ae(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ce.comparator(n.key,i.key):(n,i)=>ce.comparator(n.key,i.key),this.keyedMap=za(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new ms(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ms;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.W_=new ot(ce.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ye():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Rs{constructor(e,n,i,r,o,a,u,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Rs(e,n,ms.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zb{constructor(){this.queries=qv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ee(n),o=r.queries;r.queries=qv(),o.forEach((a,u)=>{for(const d of u.j_)d.onError(i)})})(this,new ae(Y.ABORTED,"Firestore shutting down"))}}function qv(){return new zs(t=>Aw(t),Rd)}async function qb(t,e){const n=Ee(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new Bb,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Mm(a,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Lm(n)}async function Hb(t,e){const n=Ee(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Gb(t,e){const n=Ee(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.j_)u.X_(r)&&(i=!0);a.z_=r}}i&&Lm(n)}function Wb(t,e,n){const i=Ee(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Lm(t){t.Y_.forEach(e=>{e.next()})}var tp,Hv;(Hv=tp||(tp={})).ea="default",Hv.Cache="cache";class $b{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Rs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.key=e}}class uC{constructor(e){this.key=e}}class Kb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=Pw(e),this.Ra=new ms(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new zv,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,y)=>{const v=r.get(g),S=Nd(this.query,y)?y:null,D=!!v&&this.mutatedKeys.has(v.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let q=!1;v&&S?v.data.isEqual(S.data)?D!==b&&(i.track({type:3,doc:S}),q=!0):this.ga(v,S)||(i.track({type:2,doc:S}),q=!0,(d&&this.Aa(S,d)>0||p&&this.Aa(S,p)<0)&&(u=!0)):!v&&S?(i.track({type:0,doc:S}),q=!0):v&&!S&&(i.track({type:1,doc:v}),q=!0,(d||p)&&(u=!0)),q&&(S?(a=a.add(S),o=b?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{Ra:a,fa:i,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((g,y)=>function(S,D){const b=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return b(S)-b(D)}(g.type,y.type)||this.Aa(g.doc,y.doc)),this.pa(i),r=r!=null&&r;const u=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,p=d!==this.Ea;return this.Ea=d,a.length!==0||p?{snapshot:new Rs(this.query,e.Ra,o,a,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new uC(i))}),this.da.forEach(i=>{e.has(i)||n.push(new lC(i))}),n}ba(e){this.Ta=e.Ts,this.da=ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Rs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Jb{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Zb{constructor(e){this.key=e,this.va=!1}}class Yb{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zs(u=>Aw(u),Rd),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ce.comparator),this.Na=new Map,this.La=new Sm,this.Ba={},this.ka=new Map,this.qa=Ps.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Qb(t,e,n=!0){const i=mC(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await cC(i,e,n,!0),r}async function Xb(t,e){const n=mC(t);await cC(n,e,!0,!1)}async function cC(t,e,n,i){const r=await _b(t.localStore,ni(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await jb(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&nC(t.remoteStore,r),u}async function jb(t,e,n,i,r){t.Ka=(y,v,S)=>async function(b,q,A,x){let R=q.view.ma(A);R.ns&&(R=await Fv(b.localStore,q.query,!1).then(({documents:k})=>q.view.ma(k,R)));const z=x&&x.targetChanges.get(q.targetId),W=x&&x.targetMismatches.get(q.targetId)!=null,J=q.view.applyChanges(R,b.isPrimaryClient,z,W);return Wv(b,q.targetId,J.wa),J.snapshot}(t,y,v,S);const o=await Fv(t.localStore,e,!0),a=new Kb(e,o.Ts),u=a.ma(o.documents),d=Wl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=a.applyChanges(u,t.isPrimaryClient,d);Wv(t,n,p.wa);const g=new Jb(e,n,a);return t.Fa.set(e,g),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function eV(t,e,n){const i=Ee(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!Rd(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ep(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Am(i.remoteStore,r.targetId),np(i,r.targetId)}).catch(ql)):(np(i,r.targetId),await ep(i.localStore,r.targetId,!0))}async function tV(t,e){const n=Ee(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Am(n.remoteStore,i.targetId))}async function nV(t,e,n){const i=uV(t);try{const r=await function(a,u){const d=Ee(a),p=Tt.now(),g=u.reduce((S,D)=>S.add(D.key),ke());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=ki(),b=ke();return d.cs.getEntries(S,g).next(q=>{D=q,D.forEach((A,x)=>{x.isValidDocument()||(b=b.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,D)).next(q=>{y=q;const A=[];for(const x of u){const R=ED(x,y.get(x.key).overlayedDocument);R!=null&&A.push(new Er(x.key,R,vw(R.value.mapValue),ii.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,A,u)}).next(q=>{v=q;const A=q.applyToLocalDocumentSet(y,b);return d.documentOverlayCache.saveOverlays(S,q.batchId,A)})}).then(()=>({batchId:v.batchId,changes:Nw(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,d){let p=a.Ba[a.currentUser.toKey()];p||(p=new ot(Ve)),p=p.insert(u,d),a.Ba[a.currentUser.toKey()]=p}(i,r.batchId,n),await Kl(i,r.changes),await Vd(i.remoteStore)}catch(r){const o=Mm(r,"Failed to persist write");n.reject(o)}}async function dC(t,e){const n=Ee(t);try{const i=await pb(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Na.get(o);a&&(ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?ze(a.va):r.removedDocuments.size>0&&(ze(a.va),a.va=!1))}),await Kl(n,i,e)}catch(i){await ql(i)}}function Gv(t,e,n){const i=Ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const d=Ee(a);d.onlineState=u;let p=!1;d.queries.forEach((g,y)=>{for(const v of y.j_)v.Z_(u)&&(p=!0)}),p&&Lm(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function iV(t,e,n){const i=Ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let a=new ot(ce.comparator);a=a.insert(o,Bt.newNoDocument(o,Te.min()));const u=ke().add(o),d=new Ld(Te.min(),new Map,new ot(Ve),a,u);await dC(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Dm(i)}else await ep(i.localStore,e,!1).then(()=>np(i,e,n)).catch(ql)}async function rV(t,e){const n=Ee(t),i=e.batch.batchId;try{const r=await fb(n.localStore,e);fC(n,i,null),hC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Kl(n,r)}catch(r){await ql(r)}}async function oV(t,e,n){const i=Ee(t);try{const r=await function(a,u){const d=Ee(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return d.mutationQueue.lookupMutationBatch(p,u).next(y=>(ze(y!==null),g=y.keys(),d.mutationQueue.removeMutationBatch(p,y))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>d.localDocuments.getDocuments(p,g))})}(i.localStore,e);fC(i,e,n),hC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Kl(i,r)}catch(r){await ql(r)}}function hC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function fC(t,e,n){const i=Ee(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function np(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||pC(t,i)})}function pC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Am(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Dm(t))}function Wv(t,e,n){for(const i of n)i instanceof lC?(t.La.addReference(i.key,e),sV(t,i)):i instanceof uC?(le("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||pC(t,i.key)):ye()}function sV(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(i),Dm(t))}function Dm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ce(Ze.fromString(e)),i=t.qa.next();t.Na.set(i,new Zb(n)),t.Oa=t.Oa.insert(n,i),nC(t.remoteStore,new er(ni(vm(n.path)),i,"TargetPurposeLimboResolution",fm.oe))}}async function Kl(t,e,n){const i=Ee(t),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((u,d)=>{a.push(i.Ka(d,e,n).then(p=>{var g;if((p||n)&&i.isPrimaryClient){const y=p?!p.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){r.push(p);const y=xm.Wi(d.targetId,p);o.push(y)}}))}),await Promise.all(a),i.Ca.d_(r),await async function(d,p){const g=Ee(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>j.forEach(p,v=>j.forEach(v.$i,S=>g.persistence.referenceDelegate.addReference(y,v.targetId,S)).next(()=>j.forEach(v.Ui,S=>g.persistence.referenceDelegate.removeReference(y,v.targetId,S)))))}catch(y){if(!Hl(y))throw y;le("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const v=y.targetId;if(!y.fromCache){const S=g.os.get(v),D=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(D);g.os=g.os.insert(v,b)}}}(i.localStore,o))}async function aV(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const i=await Xw(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(d=>{d.reject(new ae(Y.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Kl(n,i.hs)}}function lV(t,e){const n=Ee(t),i=n.Na.get(e);if(i&&i.va)return ke().add(i.key);{let r=ke();const o=n.Ma.get(e);if(!o)return r;for(const a of o){const u=n.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function mC(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iV.bind(null,e),e.Ca.d_=Gb.bind(null,e.eventManager),e.Ca.$a=Wb.bind(null,e.eventManager),e}function uV(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oV.bind(null,e),e}class od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return hb(this.persistence,new cb,e.initialUser,this.serializer)}Ga(e){return new ab(Im.Zr,this.serializer)}Wa(e){return new vb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}od.provider={build:()=>new od};class ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Gv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aV.bind(null,this.syncEngine),await Ob(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zb}()}createDatastore(e){const n=Dd(e.databaseInfo.databaseId),i=function(o){return new Cb(o)}(e.databaseInfo);return function(o,a,u,d){return new xb(o,a,u,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new Pb(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Gv(this.syncEngine,n,0),function(){return Ov.D()?new Ov:new Tb}())}createSyncEngine(e,n){return function(r,o,a,u,d,p,g){const y=new Yb(r,o,a,u,d,p);return g&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ee(r);le("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await $l(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ip.provider={build:()=>new ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ut.UNAUTHENTICATED,this.clientId=gw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{le("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(le("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Mm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Mh(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Xw(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $v(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hV(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Bv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Bv(e.remoteStore,r)),t._onlineComponents=e}async function hV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ss("Error using user provided cache. Falling back to memory cache: "+n),await Mh(t,new od)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await Mh(t,new od);return t._offlineComponents}async function gC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await $v(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await $v(t,new ip))),t._onlineComponents}function fV(t){return gC(t).then(e=>e.syncEngine)}async function Kv(t){const e=await gC(t),n=e.eventManager;return n.onListen=Qb.bind(null,e.syncEngine),n.onUnlisten=eV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Xb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tV.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e,n){if(!n)throw new ae(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pV(t,e,n,i){if(e===!0&&i===!0)throw new ae(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zv(t){if(!ce.isDocumentKey(t))throw new ae(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yv(t){if(ce.isDocumentKey(t))throw new ae(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye()}function Jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fd(t);throw new ae(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_C((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ud{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new k2;switch(i.type){case"firstParty":return new b2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Jv.get(n);i&&(le("ComponentProvider","Removing Datastore"),Jv.delete(n),i.terminate())}(this),Promise.resolve()}}function mV(t,e,n,i={}){var r;const o=(t=Jr(t,Ud))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=Ut.MOCK_USER;else{u=cL(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ae(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ut(p)}t._authCredentials=new M2(new mw(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wr(this.firestore,e,this._query)}}class rn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class dr extends wr{constructor(e,n,i){super(e,n,vm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new ce(e))}withConverter(e){return new dr(this.firestore,e,this._path)}}function vC(t,e,...n){if(t=oi(t),yC("collection","path",e),t instanceof Ud){const i=Ze.fromString(e,...n);return Yv(i),new dr(t,null,i)}{if(!(t instanceof rn||t instanceof dr))throw new ae(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ze.fromString(e,...n));return Yv(i),new dr(t.firestore,null,i)}}function TC(t,e,...n){if(t=oi(t),arguments.length===1&&(e=gw.newId()),yC("doc","path",e),t instanceof Ud){const i=Ze.fromString(e,...n);return Zv(i),new rn(t,null,new ce(i))}{if(!(t instanceof rn||t instanceof dr))throw new ae(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ze.fromString(e,...n));return Zv(i),new rn(t.firestore,t instanceof dr?t.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eC(this,"async_queue_retry"),this.Vu=()=>{const i=kh();i&&le("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=kh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Kr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hl(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw Ni("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=km.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&ye()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function jv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Dl extends Ud{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Xv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xv(e),this._firestoreClient=void 0,await e}}}function gV(t,e){const n=typeof t=="object"?t:v2(),i=typeof t=="string"?t:"(default)",r=m2(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=lL("firestore");o&&mV(r,...o)}return r}function EC(t){if(t._terminated)throw new ae(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_V(t),t._firestoreClient}function _V(t){var e,n,i;const r=t._freezeSettings(),o=function(u,d,p,g){return new J2(u,d,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,_C(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new dV(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ns(Dt.fromBase64String(e))}catch(n){throw new ae(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ns(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=/^__.*__$/;class vV{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gl(e,this.data,n,this.fieldTransforms)}}class wC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Er(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class Fm{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(CC(this.Cu)&&yV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class TV{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Dd(e)}Qu(e,n,i,r=!1){return new Fm({Cu:e,methodName:n,qu:i,path:Nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Um(t){const e=t._freezeSettings(),n=Dd(t._databaseId);return new TV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EV(t,e,n,i,r,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);zm("Data must be an object, but it was:",a,i);const u=SC(i,a);let d,p;if(o.merge)d=new cn(a.fieldMask),p=a.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=rp(e,y,n);if(!a.contains(v))throw new ae(Y.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);xC(g,v)||g.push(v)}d=new cn(g),p=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,p=a.fieldTransforms;return new vV(new Xt(u),d,p)}class Bd extends Jl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bd}}class Om extends Jl{_toFieldTransform(e){return new Uw(e.path,new Nl)}isEqual(e){return e instanceof Om}}class Bm extends Jl{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ll(e.serializer,Lw(e.serializer,this.$u));return new Uw(e.path,n)}isEqual(e){return e instanceof Bm&&this.$u===e.$u}}function wV(t,e,n,i){const r=t.Qu(1,e,n);zm("Data must be an object, but it was:",r,i);const o=[],a=Xt.empty();ao(i,(d,p)=>{const g=qm(e,d,n);p=oi(p);const y=r.Nu(g);if(p instanceof Bd)o.push(g);else{const v=Zl(p,y);v!=null&&(o.push(g),a.set(g,v))}});const u=new cn(o);return new wC(a,u,r.fieldTransforms)}function CV(t,e,n,i,r,o){const a=t.Qu(1,e,n),u=[rp(e,i,n)],d=[r];if(o.length%2!=0)throw new ae(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(rp(e,o[v])),d.push(o[v+1]);const p=[],g=Xt.empty();for(let v=u.length-1;v>=0;--v)if(!xC(p,u[v])){const S=u[v];let D=d[v];D=oi(D);const b=a.Nu(S);if(D instanceof Bd)p.push(S);else{const q=Zl(D,b);q!=null&&(p.push(S),g.set(S,q))}}const y=new cn(p);return new wC(g,y,a.fieldTransforms)}function SV(t,e,n,i=!1){return Zl(n,t.Qu(i?4:3,e))}function Zl(t,e){if(IC(t=oi(t)))return zm("Unsupported field value:",e,t),SC(t,e);if(t instanceof Jl)return function(i,r){if(!CC(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let d=Zl(u,r.Lu(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=oi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Lw(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Tt.fromDate(i);return{timestampValue:id(r.serializer,o)}}if(i instanceof Tt){const o=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:id(r.serializer,o)}}if(i instanceof bm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ns)return{bytesValue:Ww(r.serializer,i._byteString)};if(i instanceof rn){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Cm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Vm)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return Tm(u.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Fd(i)}`)}(t,e)}function SC(t,e){const n={};return _w(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(t,(i,r)=>{const o=Zl(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function IC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof bm||t instanceof Ns||t instanceof rn||t instanceof Jl||t instanceof Vm)}function zm(t,e,n){if(!IC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Fd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function rp(t,e,n){if((e=oi(e))instanceof Od)return e._internalPath;if(typeof e=="string")return qm(t,e);throw sd("Field path arguments must be of type string or ",t,!1,void 0,n)}const IV=new RegExp("[~\\*/\\[\\]]");function qm(t,e,n){if(e.search(IV)>=0)throw sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Od(...e.split("."))._internalPath}catch{throw sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new ae(Y.INVALID_ARGUMENT,u+t+d)}function xC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xV extends AC{data(){return super.data()}}function Hm(t,e){return typeof e=="string"?qm(t,e):e instanceof Od?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gm{}class Wm extends Gm{}function PV(t,e,...n){let i=[];e instanceof Gm&&i.push(e),i=i.concat(n),function(o){const a=o.filter(d=>d instanceof Km).length,u=o.filter(d=>d instanceof $m).length;if(a>1||a>0&&u>0)throw new ae(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class $m extends Wm{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new $m(e,n,i)}_apply(e){const n=this._parse(e);return PC(e._query,n),new wr(e.firestore,e.converter,Zf(e._query,n))}_parse(e){const n=Um(e.firestore);return function(o,a,u,d,p,g,y){let v;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ae(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){t0(y,g);const S=[];for(const D of y)S.push(e0(d,o,D));v={arrayValue:{values:S}}}else v=e0(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||t0(y,g),v=SV(u,a,y,g==="in"||g==="not-in");return gt.create(p,g,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Km extends Gm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Km(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r;const u=o.getFlattenedFilters();for(const d of u)PC(a,d),a=Zf(a,d)}(e._query,n),new wr(e.firestore,e.converter,Zf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jm extends Wm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jm(e,n)}_apply(e){const n=function(r,o,a){if(r.startAt!==null)throw new ae(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ae(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rl(o,a)}(e._query,this._field,this._direction);return new wr(e.firestore,e.converter,function(r,o){const a=r.explicitOrderBy.concat([o]);return new Bs(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function RV(t,e="asc"){const n=e,i=Hm("orderBy",t);return Jm._create(i,n)}class Zm extends Wm{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Zm(e,n,i)}_apply(e){return new wr(e.firestore,e.converter,nd(e._query,this._limit,this._limitType))}}function NV(t){return Zm._create("limit",t,"F")}function e0(t,e,n){if(typeof(n=oi(n))=="string"){if(n==="")throw new ae(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xw(e)&&n.indexOf("/")!==-1)throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ze.fromString(n));if(!ce.isDocumentKey(i))throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Tv(t,new ce(i))}if(n instanceof rn)return Tv(t,n._key);throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(n)}.`)}function t0(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PC(t,e){const n=function(r,o){for(const a of r)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kV{convertValue(e,n="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ao(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>ut(a.doubleValue));return new Vm(o)}convertGeoPoint(e){return new bm(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=mm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(xl(e));default:return null}}convertTimestamp(e){const n=mr(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ze.fromString(e);ze(Qw(i));const r=new Al(i.get(1),i.get(3)),o=new ce(i.popFirst(5));return r.isEqual(n)||Ni(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RC extends AC{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Hm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class wc extends RC{data(e={}){return super.data(e)}}class LV{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ha(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new wc(this._firestore,this._userDataWriter,i.key,i,new Ha(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const d=new wc(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ha(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new wc(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ha(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,g=-1;return u.type!==0&&(p=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:DV(u.type),doc:d,oldIndex:p,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}class NC extends kV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ns(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function bV(t,e,n,...i){t=Jr(t,rn);const r=Jr(t.firestore,Dl),o=Um(r);let a;return a=typeof(e=oi(e))=="string"||e instanceof Od?CV(o,"updateDoc",t._key,e,n,i):wV(o,"updateDoc",t._key,e),kC(r,[a.toMutation(t._key,ii.exists(!0))])}function VV(t,e){const n=Jr(t.firestore,Dl),i=TC(t),r=MV(t.converter,e);return kC(n,[EV(Um(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,ii.exists(!1))]).then(()=>i)}function FV(t,...e){var n,i,r;t=oi(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||jv(e[a])||(o=e[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(jv(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[a+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let d,p,g;if(t instanceof rn)p=Jr(t.firestore,Dl),g=vm(t._key.path),d={next:y=>{e[a]&&e[a](UV(p,t,y))},error:e[a+1],complete:e[a+2]};else{const y=Jr(t,wr);p=Jr(y.firestore,Dl),g=y._query;const v=new NC(p);d={next:S=>{e[a]&&e[a](new LV(p,v,y,S))},error:e[a+1],complete:e[a+2]},AV(t._query)}return function(v,S,D,b){const q=new cV(b),A=new $b(S,q,D);return v.asyncQueue.enqueueAndForget(async()=>qb(await Kv(v),A)),()=>{q.Za(),v.asyncQueue.enqueueAndForget(async()=>Hb(await Kv(v),A))}}(EC(p),g,u,d)}function kC(t,e){return function(i,r){const o=new Kr;return i.asyncQueue.enqueueAndForget(async()=>nV(await fV(i),r,o)),o.promise}(EC(t),e)}function UV(t,e,n){const i=n.docs.get(e._key),r=new NC(t);return new RC(t,r,e._key,i,new Ha(n.hasPendingWrites,n.fromCache),e.converter)}function OV(){return new Om("serverTimestamp")}function BV(t){return new Bm("increment",t)}(function(e,n=!0){(function(r){Os=r})(y2),jc(new Cl("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Dl(new L2(i.getProvider("auth-internal")),new F2(i.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ae(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(p.options.projectId,g)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),ps(mv,"4.7.3",e),ps(mv,"4.7.3","esm2017")})();const zV={apiKey:"AIzaSyD3hqT8usseOu1Jol2xMmjNUjbKTXOa4tY",authDomain:"scb-indoor-navigation.firebaseapp.com",projectId:"scb-indoor-navigation",storageBucket:"scb-indoor-navigation.firebasestorage.app",messagingSenderId:"590547766764",appId:"1:590547766764:web:2755b35fe5c7ecb44f04c9"},qV=sw(zV),Zi=gV(qV),HV=({isOpen:t,onClose:e,language:n})=>{const i=oo[n],[r,o]=ie.useState(""),[a,u]=ie.useState(""),[d,p]=ie.useState("moderate"),[g,y]=ie.useState(!1),[v,S]=ie.useState(!1),[D,b]=ie.useState(null);if(!t)return null;const q=()=>{const x=["Neon","Cyber","Solar","Rapid","Urban","Night","Swift","Metro","Campus"],R=["Scout","Rider","Guide","Pilot","Walker","Ranger","Drifter","Surfer","Navigator"],z=x[Math.floor(Math.random()*x.length)],W=R[Math.floor(Math.random()*R.length)],J=Math.floor(Math.random()*99)+1;return`${z} ${W} ${J}`},A=async x=>{x.preventDefault(),y(!0),b(null);try{if(!Zi)throw new Error("Community database is not connected. Please contact admin.");const R=`${a} at ${r}`,z=await XM(R,n);let W=sessionStorage.getItem("scb_user_alias");W||(W=q(),sessionStorage.setItem("scb_user_alias",W)),await VV(vC(Zi,"reports"),{timestamp:OV(),severity:d,location:r,description:z,originalText:a,reporterName:W,verificationCount:1}),S(!0),setTimeout(()=>{S(!1),o(""),u(""),p("moderate"),e()},1500)}catch(R){console.error("Failed to submit report",R),b("Could not submit report. Check connection.")}finally{y(!1)}};return C.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",onClick:e,children:C.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 space-y-5",onClick:x=>x.stopPropagation(),children:[C.jsx("h3",{className:"text-xl font-bold text-blue-800 border-b border-slate-100 pb-3",children:i.reportHeader}),v?C.jsxs("div",{className:"text-center py-8",children:[C.jsx("div",{className:"text-green-500 text-6xl mb-4",children:""}),C.jsx("p",{className:"text-xl font-bold text-slate-800",children:i.reportSuccess})]}):C.jsxs("form",{onSubmit:A,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:i.reportLocation}),C.jsx("input",{type:"text",value:r,onChange:x=>o(x.target.value),placeholder:i.reportLocationPlace,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:i.reportSeverity}),C.jsxs("select",{value:d,onChange:x=>p(x.target.value),className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[C.jsx("option",{value:"light",children:i.sevLight}),C.jsx("option",{value:"moderate",children:i.sevModerate}),C.jsx("option",{value:"heavy",children:i.sevHeavy}),C.jsx("option",{value:"accident",children:i.sevAccident}),C.jsx("option",{value:"closure",children:i.sevClosure})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:i.reportDescLabel}),C.jsx("textarea",{value:a,onChange:x=>u(x.target.value),placeholder:i.reportDescPlace,rows:3,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]}),D&&C.jsx("p",{className:"text-red-500 text-sm bg-red-50 p-2 rounded border border-red-100",children:D}),C.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[C.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 font-semibold rounded-lg transition-colors",disabled:g,children:i.cancel}),C.jsxs("button",{type:"submit",disabled:g,className:"px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors flex items-center shadow-sm",children:[g&&C.jsx(EE,{}),C.jsx("span",{className:g?"ml-2":"",children:g?i.processingReport:i.submitReport})]})]})]})]})})},tc=({icon:t,title:e,description:n,onClick:i,disabled:r=!1})=>C.jsxs("button",{onClick:i,disabled:r,className:"bg-white border border-slate-200 p-5 rounded-xl shadow-sm flex items-center space-x-4 w-full text-left transition-all duration-200 hover:shadow-md hover:border-blue-300 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none disabled:bg-slate-100",children:[C.jsx("div",{className:`p-3 rounded-full ${r?"bg-slate-200 text-slate-400":"bg-blue-50 text-blue-600"}`,children:t}),C.jsxs("div",{children:[C.jsx("h3",{className:`font-bold text-lg ${r?"text-slate-500":"text-slate-800"}`,children:e}),C.jsx("p",{className:"text-sm text-slate-500 mt-1 leading-snug",children:n})]})]}),Lh=({icon:t,label:e,onClick:n,variant:i="default"})=>C.jsxs("button",{onClick:n,className:`flex flex-col items-center justify-center p-3 rounded-xl transition-all duration-200 flex-1 ${i==="emergency"?"bg-red-50 text-red-600 hover:bg-red-100 border border-red-100":"bg-slate-100 text-slate-600 hover:bg-slate-200 border border-slate-200"}`,children:[t,C.jsx("span",{className:"text-xs font-semibold mt-1.5",children:e})]}),GV=({setView:t,geoStatus:e,onShowInstructions:n,manualLocation:i,onEnterLocationManually:r,isScbContext:o,language:a})=>{const u=oo[a],[d,p]=ie.useState(!1),g=()=>{t("planner"),sessionStorage.setItem("scb_emergency_mode","true")},y=()=>{window.location.href="tel:108"};return C.jsxs("div",{className:"animate-fadeIn space-y-5 max-w-lg mx-auto",children:[C.jsx(HV,{isOpen:d,onClose:()=>p(!1),language:a}),C.jsx("button",{onClick:g,className:"w-full bg-gradient-to-r from-red-600 to-red-500 hover:from-red-700 hover:to-red-600 text-white p-5 rounded-2xl shadow-lg transition-all duration-300 animate-emergency-pulse hover:animate-none focus:outline-none focus:ring-4 focus:ring-red-300 animate-emergency-glow",children:C.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[C.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:C.jsx(aA,{})}),C.jsxs("div",{className:"text-left",children:[C.jsx("h2",{className:"text-xl font-extrabold tracking-wide",children:u.emergencyButton}),C.jsx("p",{className:"text-sm text-red-100 font-medium",children:u.emergencySubtext})]})]})}),C.jsxs("div",{className:"flex space-x-3",children:[C.jsx(Lh,{icon:C.jsx(uA,{}),label:u.quickCallAmbulance,onClick:y,variant:"emergency"}),C.jsx(Lh,{icon:C.jsx(lA,{}),label:u.quickMapOverview,onClick:()=>t("updates")}),C.jsx(Lh,{icon:C.jsx(TE,{}),label:u.quickAskHelp,onClick:()=>t("chat")})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-400 text-xs font-medium uppercase tracking-wider",children:[C.jsx("div",{className:"flex-1 border-t border-slate-200"}),C.jsx("span",{children:u.orExplore}),C.jsx("div",{className:"flex-1 border-t border-slate-200"})]}),C.jsxs("div",{className:"text-center p-5 bg-white border border-slate-200 rounded-2xl shadow-sm relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-cyan-400"}),C.jsx("button",{onClick:n,className:"absolute top-3 right-3 text-slate-400 hover:text-blue-600 transition-colors p-2","aria-label":"Show instructions",children:C.jsx(Hx,{})}),C.jsx("h2",{className:"text-xl font-bold text-slate-800",children:u.welcome}),C.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:u.welcomeSub}),C.jsxs("div",{className:"mt-3 flex flex-col items-center justify-center text-sm font-medium",children:[e.loading&&!i&&C.jsx("span",{className:"flex items-center text-blue-600 bg-blue-50 px-3 py-1 rounded-full animate-pulse text-xs",children:u.gettingLocation}),e.error&&!i&&C.jsx("span",{className:"text-red-600 bg-red-50 px-3 py-1 rounded-full border border-red-100 text-xs",children:e.error}),i&&C.jsxs("span",{className:"flex items-center text-green-700 bg-green-50 px-3 py-1 rounded-full border border-green-100 text-xs",children:[C.jsx("span",{className:"mr-1",children:""})," ",u.manualLocationSet," ",C.jsx("strong",{className:"ml-1",children:i})]})]})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx(tc,{icon:C.jsx(yE,{}),title:u.planRouteTitle,description:o?u.planRouteDesc:u.planRouteDescScb,onClick:()=>t("planner"),disabled:e.loading&&!i||!o}),C.jsx(tc,{icon:C.jsx(vE,{}),title:u.localUpdatesTitle,description:i&&!o&&a==="en"?`Check for news in ${i}`:u.localUpdatesDesc,onClick:()=>t("updates"),disabled:e.loading&&!i})]}),C.jsxs("details",{className:"group",children:[C.jsxs("summary",{className:"flex items-center justify-center text-slate-400 text-xs font-medium cursor-pointer hover:text-slate-600 transition-colors py-2",children:[C.jsx("span",{className:"mr-1",children:""})," More Options",C.jsx("span",{className:"ml-1 group-open:rotate-180 transition-transform",children:""})]}),C.jsxs("div",{className:"space-y-3 mt-3",children:[C.jsx(tc,{icon:C.jsx(Gx,{}),title:u.setLocationTitle,description:u.setLocationDesc,onClick:r}),C.jsx(tc,{icon:C.jsx(tm,{}),title:u.reportTitle,description:u.reportDesc,onClick:()=>p(!0)})]})]})]})};function MC(t,e){const n=ie.useRef(e);ie.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function WV(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const $V=1;function KV(t){return Object.freeze({__version:$V,map:t})}function Ym(t,e){return Object.freeze({...t,...e})}const LC=ie.createContext(null),DC=LC.Provider;function zd(){const t=ie.useContext(LC);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function bC(t){function e(n,i){const{instance:r,context:o}=t(n).current;return ie.useImperativeHandle(i,()=>r),n.children==null?null:gs.createElement(DC,{value:o},n.children)}return ie.forwardRef(e)}function JV(t){function e(n,i){const[r,o]=ie.useState(!1),{instance:a}=t(n,o).current;ie.useImperativeHandle(i,()=>a),ie.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?_E.createPortal(n.children,u):null}return ie.forwardRef(e)}function ZV(t){function e(n,i){const{instance:r}=t(n).current;return ie.useImperativeHandle(i,()=>r),null}return ie.forwardRef(e)}function Qm(t,e){const n=ie.useRef();ie.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function qd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function YV(t,e){return function(i,r){const o=zd(),a=t(qd(i,o),o);return MC(o.map,i.attribution),Qm(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var op={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(fS,function(n){var i="1.9.4";function r(s){var l,m,_,E;for(m=1,_=arguments.length;m<_;m++){E=arguments[m];for(l in E)s[l]=E[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var m=Array.prototype.slice;if(s.bind)return s.bind.apply(s,m.call(arguments,1));var _=m.call(arguments,2);return function(){return s.apply(l,_.length?_.concat(m.call(arguments)):arguments)}}var u=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function p(s,l,m){var _,E,I,O;return O=function(){_=!1,E&&(I.apply(m,E),E=!1)},I=function(){_?E=arguments:(s.apply(m,arguments),setTimeout(O,l),_=!0)},I}function g(s,l,m){var _=l[1],E=l[0],I=_-E;return s===_&&m?s:((s-E)%I+I)%I+E}function y(){return!1}function v(s,l){if(l===!1)return s;var m=Math.pow(10,l===void 0?6:l);return Math.round(s*m)/m}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function D(s){return S(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var m in l)s.options[m]=l[m];return s.options}function q(s,l,m){var _=[];for(var E in s)_.push(encodeURIComponent(m?E.toUpperCase():E)+"="+encodeURIComponent(s[E]));return(!l||l.indexOf("?")===-1?"?":"&")+_.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function x(s,l){return s.replace(A,function(m,_){var E=l[_];if(E===void 0)throw new Error("No value provided for variable "+m);return typeof E=="function"&&(E=E(l)),E})}var R=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function z(s,l){for(var m=0;m<s.length;m++)if(s[m]===l)return m;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var k=0;function N(s){var l=+new Date,m=Math.max(0,16-(l-k));return k=l+m,window.setTimeout(s,m)}var M=window.requestAnimationFrame||J("RequestAnimationFrame")||N,F=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function B(s,l,m){if(m&&M===N)s.call(l);else return M.call(window,a(s,l))}function U(s){s&&F.call(window,s)}var V={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:d,throttle:p,wrapNum:g,falseFn:y,formatNum:v,trim:S,splitWords:D,setOptions:b,getParamString:q,template:x,isArray:R,indexOf:z,emptyImageUrl:W,requestFn:M,cancelFn:F,requestAnimFrame:B,cancelAnimFrame:U};function Q(){}Q.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=l.__super__=this.prototype,_=o(m);_.constructor=l,l.prototype=_;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return s.statics&&r(l,s.statics),s.includes&&(pe(s.includes),r.apply(null,[_].concat(s.includes))),r(_,s),delete _.statics,delete _.includes,_.options&&(_.options=m.options?o(m.options):{},r(_.options,s.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,O=_._initHooks.length;I<O;I++)_._initHooks[I].call(this)}},l},Q.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Q.mergeOptions=function(s){return r(this.prototype.options,s),this},Q.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),m=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function pe(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=R(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var de={on:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l);else{s=D(s);for(var E=0,I=s.length;E<I;E++)this._on(s[E],l,m)}return this},off:function(s,l,m){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var _ in s)this._off(_,s[_],l);else{s=D(s);for(var E=arguments.length===1,I=0,O=s.length;I<O;I++)E?this._off(s[I]):this._off(s[I],l,m)}return this},_on:function(s,l,m,_){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,m)===!1){m===this&&(m=void 0);var E={fn:l,ctx:m};_&&(E.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(E)}},_off:function(s,l,m){var _,E,I;if(this._events&&(_=this._events[s],!!_)){if(arguments.length===1){if(this._firingCount)for(E=0,I=_.length;E<I;E++)_[E].fn=y;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var O=this._listens(s,l,m);if(O!==!1){var G=_[O];this._firingCount&&(G.fn=y,this._events[s]=_=_.slice()),_.splice(O,1)}}},fire:function(s,l,m){if(!this.listens(s,m))return this;var _=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[s];if(E){this._firingCount=this._firingCount+1||1;for(var I=0,O=E.length;I<O;I++){var G=E[I],$=G.fn;G.once&&this.off(s,$,G.ctx),$.call(G.ctx||this,_)}this._firingCount--}}return m&&this._propagateEvent(_),this},listens:function(s,l,m,_){typeof s!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(_=!!l,E=void 0,m=void 0);var I=this._events&&this._events[s];if(I&&I.length&&this._listens(s,E,m)!==!1)return!0;if(_){for(var O in this._eventParents)if(this._eventParents[O].listens(s,l,m,_))return!0}return!1},_listens:function(s,l,m){if(!this._events)return!1;var _=this._events[s]||[];if(!l)return!!_.length;m===this&&(m=void 0);for(var E=0,I=_.length;E<I;E++)if(_[E].fn===l&&_[E].ctx===m)return E;return!1},once:function(s,l,m){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l,!0);else{s=D(s);for(var E=0,I=s.length;E<I;E++)this._on(s[E],l,m,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};de.addEventListener=de.on,de.removeEventListener=de.clearAllEventListeners=de.off,de.addOneTimeEventListener=de.once,de.fireEvent=de.fire,de.hasEventListeners=de.listens;var xe=Q.extend(de);function Z(s,l,m){this.x=m?Math.round(s):s,this.y=m?Math.round(l):l}var me=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(te(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(te(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(s){s=te(s);var l=s.x-this.x,m=s.y-this.y;return Math.sqrt(l*l+m*m)},equals:function(s){return s=te(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=te(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function te(s,l,m){return s instanceof Z?s:R(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,m)}function ge(s,l){if(s)for(var m=l?[s,l]:s,_=0,E=m.length;_<E;_++)this.extend(m[_])}ge.prototype={extend:function(s){var l,m;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=m=te(s);else if(s=Ce(s),l=s.min,m=s.max,!l||!m)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=m.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(s){return te((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return te(this.min.x,this.max.y)},getTopRight:function(){return te(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,m;return typeof s[0]=="number"||s instanceof Z?s=te(s):s=Ce(s),s instanceof ge?(l=s.min,m=s.max):l=m=s,l.x>=this.min.x&&m.x<=this.max.x&&l.y>=this.min.y&&m.y<=this.max.y},intersects:function(s){s=Ce(s);var l=this.min,m=this.max,_=s.min,E=s.max,I=E.x>=l.x&&_.x<=m.x,O=E.y>=l.y&&_.y<=m.y;return I&&O},overlaps:function(s){s=Ce(s);var l=this.min,m=this.max,_=s.min,E=s.max,I=E.x>l.x&&_.x<m.x,O=E.y>l.y&&_.y<m.y;return I&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,m=this.max,_=Math.abs(l.x-m.x)*s,E=Math.abs(l.y-m.y)*s;return Ce(te(l.x-_,l.y-E),te(m.x+_,m.y+E))},equals:function(s){return s?(s=Ce(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Ce(s,l){return!s||s instanceof ge?s:new ge(s,l)}function Re(s,l){if(s)for(var m=l?[s,l]:s,_=0,E=m.length;_<E;_++)this.extend(m[_])}Re.prototype={extend:function(s){var l=this._southWest,m=this._northEast,_,E;if(s instanceof Se)_=s,E=s;else if(s instanceof Re){if(_=s._southWest,E=s._northEast,!_||!E)return this}else return s?this.extend(ve(s)||Ue(s)):this;return!l&&!m?(this._southWest=new Se(_.lat,_.lng),this._northEast=new Se(E.lat,E.lng)):(l.lat=Math.min(_.lat,l.lat),l.lng=Math.min(_.lng,l.lng),m.lat=Math.max(E.lat,m.lat),m.lng=Math.max(E.lng,m.lng)),this},pad:function(s){var l=this._southWest,m=this._northEast,_=Math.abs(l.lat-m.lat)*s,E=Math.abs(l.lng-m.lng)*s;return new Re(new Se(l.lat-_,l.lng-E),new Se(m.lat+_,m.lng+E))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Se||"lat"in s?s=ve(s):s=Ue(s);var l=this._southWest,m=this._northEast,_,E;return s instanceof Re?(_=s.getSouthWest(),E=s.getNorthEast()):_=E=s,_.lat>=l.lat&&E.lat<=m.lat&&_.lng>=l.lng&&E.lng<=m.lng},intersects:function(s){s=Ue(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),E=s.getNorthEast(),I=E.lat>=l.lat&&_.lat<=m.lat,O=E.lng>=l.lng&&_.lng<=m.lng;return I&&O},overlaps:function(s){s=Ue(s);var l=this._southWest,m=this._northEast,_=s.getSouthWest(),E=s.getNorthEast(),I=E.lat>l.lat&&_.lat<m.lat,O=E.lng>l.lng&&_.lng<m.lng;return I&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Ue(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ue(s,l){return s instanceof Re?s:new Re(s,l)}function Se(s,l,m){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,m!==void 0&&(this.alt=+m)}Se.prototype={equals:function(s,l){if(!s)return!1;s=ve(s);var m=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return m<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return $n.distance(this,ve(s))},wrap:function(){return $n.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,m=l/Math.cos(Math.PI/180*this.lat);return Ue([this.lat-l,this.lng-m],[this.lat+l,this.lng+m])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function ve(s,l,m){return s instanceof Se?s:R(s)&&typeof s[0]!="object"?s.length===3?new Se(s[0],s[1],s[2]):s.length===2?new Se(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Se(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Se(s,l,m)}var _t={latLngToPoint:function(s,l){var m=this.projection.project(s),_=this.scale(l);return this.transformation._transform(m,_)},pointToLatLng:function(s,l){var m=this.scale(l),_=this.transformation.untransform(s,m);return this.projection.unproject(_)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,m=this.scale(s),_=this.transformation.transform(l.min,m),E=this.transformation.transform(l.max,m);return new ge(_,E)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,m=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,_=s.alt;return new Se(m,l,_)},wrapLatLngBounds:function(s){var l=s.getCenter(),m=this.wrapLatLng(l),_=l.lat-m.lat,E=l.lng-m.lng;if(_===0&&E===0)return s;var I=s.getSouthWest(),O=s.getNorthEast(),G=new Se(I.lat-_,I.lng-E),$=new Se(O.lat-_,O.lng-E);return new Re(G,$)}},$n=r({},_t,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var m=Math.PI/180,_=s.lat*m,E=l.lat*m,I=Math.sin((l.lat-s.lat)*m/2),O=Math.sin((l.lng-s.lng)*m/2),G=I*I+Math.cos(_)*Math.cos(E)*O*O,$=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*$}}),Ql=6378137,bi={R:Ql,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,m=this.MAX_LATITUDE,_=Math.max(Math.min(m,s.lat),-m),E=Math.sin(_*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(s){var l=180/Math.PI;return new Se((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Ql*Math.PI;return new ge([-s,-s],[s,s])}()};function Vi(s,l,m,_){if(R(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=m,this._d=_}Vi.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function ai(s,l,m,_){return new Vi(s,l,m,_)}var Cr=r({},$n,{code:"EPSG:3857",projection:bi,transformation:function(){var s=.5/(Math.PI*bi.R);return ai(s,.5,-s,.5)}()}),Hs=r({},Cr,{code:"EPSG:900913"});function co(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Gs(s,l){var m="",_,E,I,O,G,$;for(_=0,I=s.length;_<I;_++){for(G=s[_],E=0,O=G.length;E<O;E++)$=G[E],m+=(E?"L":"M")+$.x+" "+$.y;m+=l?ue.svg?"z":"x":""}return m||"M0 0"}var Ws=document.documentElement.style,ho="ActiveXObject"in window,Xl=ho&&!document.addEventListener,fo="msLaunchUri"in navigator&&!("documentMode"in document),po=mn("webkit"),jl=mn("android"),mo=mn("android 2")||mn("android 3"),$s=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),eu=jl&&mn("Google")&&$s<537&&!("AudioNode"in window),dt=!!window.opera,Et=!fo&&mn("chrome"),Sr=mn("gecko")&&!po&&!dt&&!ho,tu=!Et&&mn("safari"),Ks=mn("phantom"),nu="OTransition"in Ws,Ir=navigator.platform.indexOf("Win")===0,Js=ho&&"transition"in Ws,go="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!mo,_o="MozPerspective"in Ws,Gd=!window.L_DISABLE_3D&&(Js||go||_o)&&!nu&&!Ks,xr=typeof orientation<"u"||mn("mobile"),Zs=xr&&po,iu=xr&&go,Ys=!window.PointerEvent&&window.MSPointerEvent,Fi=!!(window.PointerEvent||Ys),yo="ontouchstart"in window||!!window.TouchEvent,Qs=!window.L_NO_TOUCH&&(yo||Fi),li=xr&&dt,ru=xr&&Sr,vo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ou=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return s}(),Ar=function(){return!!document.createElement("canvas").getContext}(),To=!!(document.createElementNS&&co("svg").createSVGRect),At=!!To&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),su=!To&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Pr=navigator.platform.indexOf("Mac")===0,Rr=navigator.platform.indexOf("Linux")===0;function mn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ue={ie:ho,ielt9:Xl,edge:fo,webkit:po,android:jl,android23:mo,androidStock:eu,opera:dt,chrome:Et,gecko:Sr,safari:tu,phantom:Ks,opera12:nu,win:Ir,ie3d:Js,webkit3d:go,gecko3d:_o,any3d:Gd,mobile:xr,mobileWebkit:Zs,mobileWebkit3d:iu,msPointer:Ys,pointer:Fi,touch:Qs,touchNative:yo,mobileOpera:li,mobileGecko:ru,retina:vo,passiveEvents:ou,canvas:Ar,svg:To,vml:su,inlineSvg:At,mac:Pr,linux:Rr},ui=ue.msPointer?"MSPointerDown":"pointerdown",au=ue.msPointer?"MSPointerMove":"pointermove",lu=ue.msPointer?"MSPointerUp":"pointerup",Nr=ue.msPointer?"MSPointerCancel":"pointercancel",Eo={touchstart:ui,touchmove:au,touchend:lu,touchcancel:Nr},wo={touchstart:So,touchmove:Co,touchend:Co,touchcancel:Co},kn={},Mn=!1;function uu(s,l,m){return l==="touchstart"&&du(),wo[l]?(m=wo[l].bind(this,m),s.addEventListener(Eo[l],m,!1),m):(console.warn("wrong event specified:",l),y)}function cu(s,l,m){if(!Eo[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Eo[l],m,!1)}function Xs(s){kn[s.pointerId]=s}function js(s){kn[s.pointerId]&&(kn[s.pointerId]=s)}function ea(s){delete kn[s.pointerId]}function du(){Mn||(document.addEventListener(ui,Xs,!0),document.addEventListener(au,js,!0),document.addEventListener(lu,ea,!0),document.addEventListener(Nr,ea,!0),Mn=!0)}function Co(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var m in kn)l.touches.push(kn[m]);l.changedTouches=[l],s(l)}}function So(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&et(l),Co(s,l)}function hu(s){var l={},m,_;for(_ in s)m=s[_],l[_]=m&&m.bind?m.bind(s):m;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var ta=200;function kr(s,l){s.addEventListener("dblclick",l);var m=0,_;function E(I){if(I.detail!==1){_=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var O=fa(I);if(!(O.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!O.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var G=Date.now();G-m<=ta?(_++,_===2&&l(hu(I))):_=1,m=G}}}return s.addEventListener("click",E),{dblclick:l,simDblclick:E}}function ci(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Mr=hi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Lr=hi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),na=Lr==="webkitTransition"||Lr==="OTransition"?Lr+"End":"transitionend";function ia(s){return typeof s=="string"?document.getElementById(s):s}function Ui(s,l){var m=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!m||m==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(s,null);m=_?_[l]:null}return m==="auto"?null:m}function Ne(s,l,m){var _=document.createElement(s);return _.className=l||"",m&&m.appendChild(_),_}function Ge(s){var l=s.parentNode;l&&l.removeChild(s)}function Dr(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function di(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Oi(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function ra(s,l){if(s.classList!==void 0)return s.classList.contains(l);var m=gn(s);return m.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(m)}function we(s,l){if(s.classList!==void 0)for(var m=D(l),_=0,E=m.length;_<E;_++)s.classList.add(m[_]);else if(!ra(s,l)){var I=gn(s);oa(s,(I?I+" ":"")+l)}}function Qe(s,l){s.classList!==void 0?s.classList.remove(l):oa(s,S((" "+gn(s)+" ").replace(" "+l+" "," ")))}function oa(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function gn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function st(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Io(s,l)}function Io(s,l){var m=!1,_="DXImageTransform.Microsoft.Alpha";try{m=s.filters.item(_)}catch{if(l===1)return}l=Math.round(l*100),m?(m.Enabled=l!==100,m.Opacity=l):s.style.filter+=" progid:"+_+"(opacity="+l+")"}function hi(s){for(var l=document.documentElement.style,m=0;m<s.length;m++)if(s[m]in l)return s[m];return!1}function Kn(s,l,m){var _=l||new Z(0,0);s.style[Mr]=(ue.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(m?" scale("+m+")":"")}function _e(s,l){s._leaflet_pos=l,ue.any3d?Kn(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function _n(s){return s._leaflet_pos||new Z(0,0)}var Ln,Dn,sa;if("onselectstart"in document)Ln=function(){he(window,"selectstart",et)},Dn=function(){qe(window,"selectstart",et)};else{var Bi=hi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ln=function(){if(Bi){var s=document.documentElement.style;sa=s[Bi],s[Bi]="none"}},Dn=function(){Bi&&(document.documentElement.style[Bi]=sa,sa=void 0)}}function aa(){he(window,"dragstart",et)}function la(){qe(window,"dragstart",et)}var xo,ua;function fi(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(on(),xo=s,ua=s.style.outlineStyle,s.style.outlineStyle="none",he(window,"keydown",on))}function on(){xo&&(xo.style.outlineStyle=ua,xo=void 0,ua=void 0,qe(window,"keydown",on))}function ca(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ao(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var fu={__proto__:null,TRANSFORM:Mr,TRANSITION:Lr,TRANSITION_END:na,get:ia,getStyle:Ui,create:Ne,remove:Ge,empty:Dr,toFront:di,toBack:Oi,hasClass:ra,addClass:we,removeClass:Qe,setClass:oa,getClass:gn,setOpacity:st,testProp:hi,setTransform:Kn,setPosition:_e,getPosition:_n,get disableTextSelection(){return Ln},get enableTextSelection(){return Dn},disableImageDrag:aa,enableImageDrag:la,preventOutline:fi,restoreOutline:on,getSizedParentNode:ca,getScale:Ao};function he(s,l,m,_){if(l&&typeof l=="object")for(var E in l)da(s,E,l[E],m);else{l=D(l);for(var I=0,O=l.length;I<O;I++)da(s,l[I],m,_)}return this}var yn="_leaflet_events";function qe(s,l,m,_){if(arguments.length===1)pu(s),delete s[yn];else if(l&&typeof l=="object")for(var E in l)ha(s,E,l[E],m);else if(l=D(l),arguments.length===2)pu(s,function(G){return z(l,G)!==-1});else for(var I=0,O=l.length;I<O;I++)ha(s,l[I],m,_);return this}function pu(s,l){for(var m in s[yn]){var _=m.split(/\d/)[0];(!l||l(_))&&ha(s,_,null,null,m)}}var vn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function da(s,l,m,_){var E=l+d(m)+(_?"_"+d(_):"");if(s[yn]&&s[yn][E])return this;var I=function(G){return m.call(_||s,G||window.event)},O=I;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?I=uu(s,l,I):ue.touch&&l==="dblclick"?I=kr(s,I):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(vn[l]||l,I,ue.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(I=function(G){G=G||window.event,pa(s,G)&&O(G)},s.addEventListener(vn[l],I,!1)):s.addEventListener(l,O,!1):s.attachEvent("on"+l,I),s[yn]=s[yn]||{},s[yn][E]=I}function ha(s,l,m,_,E){E=E||l+d(m)+(_?"_"+d(_):"");var I=s[yn]&&s[yn][E];if(!I)return this;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?cu(s,l,I):ue.touch&&l==="dblclick"?ci(s,I):"removeEventListener"in s?s.removeEventListener(vn[l]||l,I,!1):s.detachEvent("on"+l,I),s[yn][E]=null}function Tn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function zi(s){return da(s,"wheel",Tn),this}function qi(s){return he(s,"mousedown touchstart dblclick contextmenu",Tn),s._leaflet_disable_click=!0,this}function et(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function sn(s){return et(s),Tn(s),this}function fa(s){if(s.composedPath)return s.composedPath();for(var l=[],m=s.target;m;)l.push(m),m=m.parentNode;return l}function Po(s,l){if(!l)return new Z(s.clientX,s.clientY);var m=Ao(l),_=m.boundingClientRect;return new Z((s.clientX-_.left)/m.x-l.clientLeft,(s.clientY-_.top)/m.y-l.clientTop)}var Xe=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mu(s){return ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Xe:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function pa(s,l){var m=l.relatedTarget;if(!m)return!0;try{for(;m&&m!==s;)m=m.parentNode}catch{return!1}return m!==s}var gu={__proto__:null,on:he,off:qe,stopPropagation:Tn,disableScrollPropagation:zi,disableClickPropagation:qi,preventDefault:et,stop:sn,getPropagationPath:fa,getMousePosition:Po,getWheelDelta:mu,isExternalTarget:pa,addListener:he,removeListener:qe},ma=xe.extend({run:function(s,l,m,_){this.stop(),this._el=s,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=_n(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,m=this._duration*1e3;l<m?this._runFrame(this._easeOut(l/m),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var m=this._startPos.add(this._offset.multiplyBy(s));l&&m._round(),_e(this._el,m),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ae=xe.extend({options:{crs:Cr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ve(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Lr&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),he(this._proxy,na,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,m){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ve(s),l,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=r({animate:m.animate},m.zoom),m.pan=r({animate:m.animate,duration:m.duration},m.pan));var _=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,m.zoom):this._tryAnimatedPan(s,m.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,m.pan&&m.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,m){var _=this.getZoomScale(l),E=this.getSize().divideBy(2),I=s instanceof Z?s:this.latLngToContainerPoint(s),O=I.subtract(E).multiplyBy(1-1/_),G=this.containerPointToLatLng(E.add(O));return this.setView(G,l,{zoom:m})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Ue(s);var m=te(l.paddingTopLeft||l.padding||[0,0]),_=te(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(s,!1,m.add(_));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:s.getCenter(),zoom:E};var I=_.subtract(m).divideBy(2),O=this.project(s.getSouthWest(),E),G=this.project(s.getNorthEast(),E),$=this.unproject(O.add(G).divideBy(2).add(I),E);return{center:$,zoom:E}},fitBounds:function(s,l){if(s=Ue(s),!s.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(s,l);return this.setView(m.center,m.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=te(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ma,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,m,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,m){if(m=m||{},m.animate===!1||!ue.any3d)return this.setView(s,l,m);this._stop();var _=this.project(this.getCenter()),E=this.project(s),I=this.getSize(),O=this._zoom;s=ve(s),l=l===void 0?O:l;var G=Math.max(I.x,I.y),$=G*this.getZoomScale(O,l),X=E.distanceTo(_)||1,oe=1.42,fe=oe*oe;function Ie(ft){var Mu=ft?-1:1,uS=ft?$:G,cS=$*$-G*G+Mu*fe*fe*X*X,dS=2*uS*fe*X,Qd=cS/dS,vg=Math.sqrt(Qd*Qd+1)-Qd,hS=vg<1e-9?-18:Math.log(vg);return hS}function Gt(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function Ct(ft){return(Math.exp(ft)+Math.exp(-ft))/2}function wn(ft){return Gt(ft)/Ct(ft)}var Yt=Ie(0);function zo(ft){return G*(Ct(Yt)/Ct(Yt+oe*ft))}function oS(ft){return G*(Ct(Yt)*wn(Yt+oe*ft)-Gt(Yt))/fe}function sS(ft){return 1-Math.pow(1-ft,1.5)}var aS=Date.now(),_g=(Ie(1)-Yt)/oe,lS=m.duration?1e3*m.duration:1e3*_g*.8;function yg(){var ft=(Date.now()-aS)/lS,Mu=sS(ft)*_g;ft<=1?(this._flyToFrame=B(yg,this),this._move(this.unproject(_.add(E.subtract(_).multiplyBy(oS(Mu)/X)),O),this.getScaleZoom(G/zo(Mu),O),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),yg.call(this),this},flyToBounds:function(s,l){var m=this._getBoundsCenterZoom(s,l);return this.flyTo(m.center,m.zoom,l)},setMaxBounds:function(s){return s=Ue(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var m=this.getCenter(),_=this._limitCenter(m,this._zoom,Ue(s));return m.equals(_)||this.panTo(_,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var m=te(l.paddingTopLeft||l.padding||[0,0]),_=te(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),I=this.project(s),O=this.getPixelBounds(),G=Ce([O.min.add(m),O.max.subtract(_)]),$=G.getSize();if(!G.contains(I)){this._enforcingBounds=!0;var X=I.subtract(G.getCenter()),oe=G.extend(I).getSize().subtract($);E.x+=X.x<0?-oe.x:oe.x,E.y+=X.y<0?-oe.y:oe.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),_=l.divideBy(2).round(),E=m.divideBy(2).round(),I=_.subtract(E);return!I.x&&!I.y?this:(s.animate&&s.pan?this.panBy(I):(s.pan&&this._rawPanBy(I),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),m=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,m,s):navigator.geolocation.getCurrentPosition(l,m,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,m=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,m=s.coords.longitude,_=new Se(l,m),E=_.toBounds(s.coords.accuracy*2),I=this._locateOptions;if(I.setView){var O=this.getBoundsZoom(E);this.setView(_,I.maxZoom?Math.min(O,I.maxZoom):O)}var G={latlng:_,bounds:E,timestamp:s.timestamp};for(var $ in s.coords)typeof s.coords[$]=="number"&&(G[$]=s.coords[$]);this.fire("locationfound",G)}},addHandler:function(s,l){if(!l)return this;var m=this[s]=new l(this);return this._handlers.push(m),this.options[s]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ge(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ge(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var m="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),_=Ne("div",m,l||this._mapPane);return s&&(this._panes[s]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),m=this.unproject(s.getTopRight());return new Re(l,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,m){s=Ue(s),m=te(m||[0,0]);var _=this.getZoom()||0,E=this.getMinZoom(),I=this.getMaxZoom(),O=s.getNorthWest(),G=s.getSouthEast(),$=this.getSize().subtract(m),X=Ce(this.project(G,_),this.project(O,_)).getSize(),oe=ue.any3d?this.options.zoomSnap:1,fe=$.x/X.x,Ie=$.y/X.y,Gt=l?Math.max(fe,Ie):Math.min(fe,Ie);return _=this.getScaleZoom(Gt,_),oe&&(_=Math.round(_/(oe/100))*(oe/100),_=l?Math.ceil(_/oe)*oe:Math.floor(_/oe)*oe),Math.max(E,Math.min(I,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var m=this._getTopLeftPoint(s,l);return new ge(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var m=this.options.crs;return l=l===void 0?this._zoom:l,m.scale(s)/m.scale(l)},getScaleZoom:function(s,l){var m=this.options.crs;l=l===void 0?this._zoom:l;var _=m.zoom(s*m.scale(l));return isNaN(_)?1/0:_},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ve(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(te(s),l)},layerPointToLatLng:function(s){var l=te(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ve(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ve(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ue(s))},distance:function(s,l){return this.options.crs.distance(ve(s),ve(l))},containerPointToLayerPoint:function(s){return te(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return te(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(te(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ve(s)))},mouseEventToContainerPoint:function(s){return Po(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=ia(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");he(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,we(s,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ui(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(s.markerPane,"leaflet-zoom-hide"),we(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,m){_e(this._mapPane,new Z(0,0));var _=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,m)._move(s,l)._moveEnd(E),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,m,_){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),_?m&&m.pinch&&this.fire("zoom",m):((E||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){_e(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?qe:he;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var m=[],_,E=l==="mouseout"||l==="mouseover",I=s.target||s.srcElement,O=!1;I;){if(_=this._targets[d(I)],_&&(l==="click"||l==="preclick")&&this._draggableMoved(_)){O=!0;break}if(_&&_.listens(l,!0)&&(E&&!pa(I,s)||(m.push(_),E))||I===this._container)break;I=I.parentNode}return!m.length&&!O&&!E&&this.listens(l,!0)&&(m=[this]),m},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var m=s.type;m==="mousedown"&&fi(l),this._fireDOMEvent(s,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,m){if(s.type==="click"){var _=r({},s);_.type="preclick",this._fireDOMEvent(_,_.type,m)}var E=this._findEventTargets(s,l);if(m){for(var I=[],O=0;O<m.length;O++)m[O].listens(l,!0)&&I.push(m[O]);E=I.concat(E)}if(E.length){l==="contextmenu"&&et(s);var G=E[0],$={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var X=G.getLatLng&&(!G._radius||G._radius<=10);$.containerPoint=X?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(s),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=X?G.getLatLng():this.layerPointToLatLng($.layerPoint)}for(O=0;O<E.length;O++)if(E[O].fire(l,$,!0),$.originalEvent._stopped||E[O].options.bubblingMouseEvents===!1&&z(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return _n(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var m=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var m=this.getSize()._divideBy(2);return this.project(s,l)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return this.project(s,l)._subtract(_)},_latLngBoundsToNewLayerBounds:function(s,l,m){var _=this._getNewPixelOrigin(m,l);return Ce([this.project(s.getSouthWest(),l)._subtract(_),this.project(s.getNorthWest(),l)._subtract(_),this.project(s.getSouthEast(),l)._subtract(_),this.project(s.getNorthEast(),l)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,m){if(!m)return s;var _=this.project(s,l),E=this.getSize().divideBy(2),I=new ge(_.subtract(E),_.add(E)),O=this._getBoundsOffset(I,m,l);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?s:this.unproject(_.add(O),l)},_limitOffset:function(s,l){if(!l)return s;var m=this.getPixelBounds(),_=new ge(m.min.add(s),m.max.add(s));return s.add(this._getBoundsOffset(_,l))},_getBoundsOffset:function(s,l,m){var _=Ce(this.project(l.getNorthEast(),m),this.project(l.getSouthWest(),m)),E=_.min.subtract(s.min),I=_.max.subtract(s.max),O=this._rebound(E.x,-I.x),G=this._rebound(E.y,-I.y);return new Z(O,G)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),m=this.getMaxZoom(),_=ue.any3d?this.options.zoomSnap:1;return _&&(s=Math.round(s/_)*_),Math.max(l,Math.min(m,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var m=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var m=Mr,_=this._proxy.style[m];Kn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),_===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ge(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Kn(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(l),E=this._getCenterOffset(s)._divideBy(1-1/_);return m.animate!==!0&&!this.getSize().contains(E)?!1:(B(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,m,_){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ro(s,l){return new Ae(s,l)}var Zt=Q.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),m=this.getPosition(),_=s._controlCorners[m];return we(l,"leaflet-control"),m.indexOf("bottom")!==-1?_.insertBefore(l,_.firstChild):_.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ge(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ht=function(s){return new Zt(s)};Ae.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",m=this._controlContainer=Ne("div",l+"control-container",this._container);function _(E,I){var O=l+E+" "+l+I;s[E+I]=Ne("div",O,m)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ge(this._controlCorners[s]);Ge(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ga=Zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,m,_){return m<_?-1:_<m?1:0}},initialize:function(s,l,m){b(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in s)this._addLayer(s[_],_);for(_ in l)this._addLayer(l[_],_,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Zt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Qe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ne("div",s),m=this.options.collapsed;l.setAttribute("aria-haspopup",!0),qi(l),zi(l);var _=this._section=Ne("section",s+"-list");m&&(this._map.on("click",this.collapse,this),he(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Ne("a",s+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),he(E,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){et(I),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Ne("div",s+"-base",_),this._separator=Ne("div",s+"-separator",_),this._overlaysList=Ne("div",s+"-overlays",_),l.appendChild(_)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,m){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:m}),this.options.sortLayers&&this._layers.sort(a(function(_,E){return this.options.sortFunction(_.layer,E.layer,_.name,E.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Dr(this._baseLayersList),Dr(this._overlaysList),this._layerControlInputs=[];var s,l,m,_,E=0;for(m=0;m<this._layers.length;m++)_=this._layers[m],this._addItem(_),l=l||_.overlay,s=s||!_.overlay,E+=_.overlay?0:1;return this.options.hideSingleBase&&(s=s&&E>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),m=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;m&&this._map.fire(m,l)},_createRadioElement:function(s,l){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=m,_.firstChild},_addItem:function(s){var l=document.createElement("label"),m=this._map.hasLayer(s.layer),_;s.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=m):_=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(_),_.layerId=d(s.layer),he(_,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+s.name;var I=document.createElement("span");l.appendChild(I),I.appendChild(_),I.appendChild(E);var O=s.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,m,_=[],E=[];this._handlingClick=!0;for(var I=s.length-1;I>=0;I--)l=s[I],m=this._getLayer(l.layerId).layer,l.checked?_.push(m):l.checked||E.push(m);for(I=0;I<E.length;I++)this._map.hasLayer(E[I])&&this._map.removeLayer(E[I]);for(I=0;I<_.length;I++)this._map.hasLayer(_[I])||this._map.addLayer(_[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,m,_=this._map.getZoom(),E=s.length-1;E>=0;E--)l=s[E],m=this._getLayer(l.layerId).layer,l.disabled=m.options.minZoom!==void 0&&_<m.options.minZoom||m.options.maxZoom!==void 0&&_>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,he(s,"click",et),this.expand();var l=this;setTimeout(function(){qe(s,"click",et),l._preventClick=!1})}}),Wd=function(s,l,m){return new ga(s,l,m)},pi=Zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",m=Ne("div",l+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,l+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,l+"-out",m,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,m,_,E){var I=Ne("a",m,_);return I.innerHTML=s,I.href="#",I.title=l,I.setAttribute("role","button"),I.setAttribute("aria-label",l),qi(I),he(I,"click",sn),he(I,"click",E,this),he(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Qe(this._zoomInButton,l),Qe(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(we(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(we(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ae.mergeOptions({zoomControl:!0}),Ae.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new pi,this.addControl(this.zoomControl))});var _u=function(s){return new pi(s)},No=Zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",m=Ne("div",l),_=this.options;return this._addScales(_,l+"-line",m),s.on(_.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),m},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,m){s.metric&&(this._mScale=Ne("div",l,m)),s.imperial&&(this._iScale=Ne("div",l,m))},_update:function(){var s=this._map,l=s.getSize().y/2,m=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(m)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),m=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,m,l/s)},_updateImperial:function(s){var l=s*3.2808399,m,_,E;l>5280?(m=l/5280,_=this._getRoundNum(m),this._updateScale(this._iScale,_+" mi",_/m)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(s,l,m){s.style.width=Math.round(this.options.maxWidth*m)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),m=s/l;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,l*m}}),ko=function(s){return new No(s)},yu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Hi=Zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?yu+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),qi(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var m=[];this.options.prefix&&m.push(this.options.prefix),s.length&&m.push(s.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Ae.mergeOptions({attributionControl:!0}),Ae.addInitHook(function(){this.options.attributionControl&&new Hi().addTo(this)});var $d=function(s){return new Hi(s)};Zt.Layers=ga,Zt.Zoom=pi,Zt.Scale=No,Zt.Attribution=Hi,Ht.layers=Wd,Ht.zoom=_u,Ht.scale=ko,Ht.attribution=$d;var an=Q.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});an.addTo=function(s,l){return s.addHandler(l,this),this};var br={Events:de},_a=ue.touch?"touchstart mousedown":"mousedown",bn=xe.extend({options:{clickTolerance:3},initialize:function(s,l,m,_){b(this,_),this._element=s,this._dragStartTarget=l||s,this._preventOutline=m},enable:function(){this._enabled||(he(this._dragStartTarget,_a,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bn._dragging===this&&this.finishDrag(!0),qe(this._dragStartTarget,_a,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ra(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){bn._dragging===this&&this.finishDrag();return}if(!(bn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(bn._dragging=this,this._preventOutline&&fi(this._element),aa(),Ln(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,m=ca(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=_n(this._element),this._parentScale=Ao(m);var _=s.type==="mousedown";he(document,_?"mousemove":"touchmove",this._onMove,this),he(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,m=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,et(s),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),_e(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Qe(document.body,"leaflet-dragging"),this._lastTarget&&(Qe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),qe(document,"mousemove touchmove",this._onMove,this),qe(document,"mouseup touchend touchcancel",this._onUp,this),la(),Dn();var l=this._moved&&this._moving;this._moving=!1,bn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Mo(s,l,m){var _,E=[1,4,2,8],I,O,G,$,X,oe,fe,Ie;for(I=0,oe=s.length;I<oe;I++)s[I]._code=Jn(s[I],l);for(G=0;G<4;G++){for(fe=E[G],_=[],I=0,oe=s.length,O=oe-1;I<oe;O=I++)$=s[I],X=s[O],$._code&fe?X._code&fe||(Ie=wt(X,$,fe,l,m),Ie._code=Jn(Ie,l),_.push(Ie)):(X._code&fe&&(Ie=wt(X,$,fe,l,m),Ie._code=Jn(Ie,l),_.push(Ie)),_.push($));s=_}return s}function Lo(s,l){var m,_,E,I,O,G,$,X,oe;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=ve([0,0]),Ie=Ue(s),Gt=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Gt<1700&&(fe=Do(s));var Ct=s.length,wn=[];for(m=0;m<Ct;m++){var Yt=ve(s[m]);wn.push(l.project(ve([Yt.lat-fe.lat,Yt.lng-fe.lng])))}for(G=$=X=0,m=0,_=Ct-1;m<Ct;_=m++)E=wn[m],I=wn[_],O=E.y*I.x-I.y*E.x,$+=(E.x+I.x)*O,X+=(E.y+I.y)*O,G+=O*3;G===0?oe=wn[0]:oe=[$/G,X/G];var zo=l.unproject(te(oe));return ve([zo.lat+fe.lat,zo.lng+fe.lng])}function Do(s){for(var l=0,m=0,_=0,E=0;E<s.length;E++){var I=ve(s[E]);l+=I.lat,m+=I.lng,_++}return ve([l/_,m/_])}var bo={__proto__:null,clipPolygon:Mo,polygonCenter:Lo,centroid:Do};function ya(s,l){if(!l||!s.length)return s.slice();var m=l*l;return s=Tu(s,m),s=vu(s,m),s}function va(s,l,m){return Math.sqrt(En(s,l,m,!0))}function mi(s,l,m){return En(s,l,m)}function vu(s,l){var m=s.length,_=typeof Uint8Array<"u"?Uint8Array:Array,E=new _(m);E[0]=E[m-1]=1,Vo(s,E,l,0,m-1);var I,O=[];for(I=0;I<m;I++)E[I]&&O.push(s[I]);return O}function Vo(s,l,m,_,E){var I=0,O,G,$;for(G=_+1;G<=E-1;G++)$=En(s[G],s[_],s[E],!0),$>I&&(O=G,I=$);I>m&&(l[O]=1,Vo(s,l,m,_,O),Vo(s,l,m,O,E))}function Tu(s,l){for(var m=[s[0]],_=1,E=0,I=s.length;_<I;_++)Eu(s[_],s[E])>l&&(m.push(s[_]),E=_);return E<I-1&&m.push(s[I-1]),m}var Ta;function Vr(s,l,m,_,E){var I=_?Ta:Jn(s,m),O=Jn(l,m),G,$,X;for(Ta=O;;){if(!(I|O))return[s,l];if(I&O)return!1;G=I||O,$=wt(s,l,G,m,E),X=Jn($,m),G===I?(s=$,I=X):(l=$,O=X)}}function wt(s,l,m,_,E){var I=l.x-s.x,O=l.y-s.y,G=_.min,$=_.max,X,oe;return m&8?(X=s.x+I*($.y-s.y)/O,oe=$.y):m&4?(X=s.x+I*(G.y-s.y)/O,oe=G.y):m&2?(X=$.x,oe=s.y+O*($.x-s.x)/I):m&1&&(X=G.x,oe=s.y+O*(G.x-s.x)/I),new Z(X,oe,E)}function Jn(s,l){var m=0;return s.x<l.min.x?m|=1:s.x>l.max.x&&(m|=2),s.y<l.min.y?m|=4:s.y>l.max.y&&(m|=8),m}function Eu(s,l){var m=l.x-s.x,_=l.y-s.y;return m*m+_*_}function En(s,l,m,_){var E=l.x,I=l.y,O=m.x-E,G=m.y-I,$=O*O+G*G,X;return $>0&&(X=((s.x-E)*O+(s.y-I)*G)/$,X>1?(E=m.x,I=m.y):X>0&&(E+=O*X,I+=G*X)),O=s.x-E,G=s.y-I,_?O*O+G*G:new Z(E,I)}function h(s){return!R(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function T(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(s)}function w(s,l){var m,_,E,I,O,G,$,X;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var oe=ve([0,0]),fe=Ue(s),Ie=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Ie<1700&&(oe=Do(s));var Gt=s.length,Ct=[];for(m=0;m<Gt;m++){var wn=ve(s[m]);Ct.push(l.project(ve([wn.lat-oe.lat,wn.lng-oe.lng])))}for(m=0,_=0;m<Gt-1;m++)_+=Ct[m].distanceTo(Ct[m+1])/2;if(_===0)X=Ct[0];else for(m=0,I=0;m<Gt-1;m++)if(O=Ct[m],G=Ct[m+1],E=O.distanceTo(G),I+=E,I>_){$=(I-_)/E,X=[G.x-$*(G.x-O.x),G.y-$*(G.y-O.y)];break}var Yt=l.unproject(te(X));return ve([Yt.lat+oe.lat,Yt.lng+oe.lng])}var P={__proto__:null,simplify:ya,pointToSegmentDistance:va,closestPointOnSegment:mi,clipSegment:Vr,_getEdgeIntersection:wt,_getBitCode:Jn,_sqClosestPointOnSegment:En,isFlat:h,_flat:T,polylineCenter:w},H={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new Se(s.y,s.x)},bounds:new ge([-180,-90],[180,90])},K={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ge([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,m=this.R,_=s.lat*l,E=this.R_MINOR/m,I=Math.sqrt(1-E*E),O=I*Math.sin(_),G=Math.tan(Math.PI/4-_/2)/Math.pow((1-O)/(1+O),I/2);return _=-m*Math.log(Math.max(G,1e-10)),new Z(s.lng*l*m,_)},unproject:function(s){for(var l=180/Math.PI,m=this.R,_=this.R_MINOR/m,E=Math.sqrt(1-_*_),I=Math.exp(-s.y/m),O=Math.PI/2-2*Math.atan(I),G=0,$=.1,X;G<15&&Math.abs($)>1e-7;G++)X=E*Math.sin(O),X=Math.pow((1-X)/(1+X),E/2),$=Math.PI/2-2*Math.atan(I*X)-O,O+=$;return new Se(O*l,s.x*l/m)}},ne={__proto__:null,LonLat:H,Mercator:K,SphericalMercator:bi},Oe=r({},$n,{code:"EPSG:3395",projection:K,transformation:function(){var s=.5/(Math.PI*K.R);return ai(s,.5,-s,.5)}()}),ht=r({},$n,{code:"EPSG:4326",projection:H,transformation:ai(1/180,1,-1/180,.5)}),Me=r({},_t,{projection:H,transformation:ai(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var m=l.lng-s.lng,_=l.lat-s.lat;return Math.sqrt(m*m+_*_)},infinite:!0});_t.Earth=$n,_t.EPSG3395=Oe,_t.EPSG3857=Cr,_t.EPSG900913=Hs,_t.EPSG4326=ht,_t.Simple=Me;var He=xe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var m=this.getEvents();l.on(m,this),this.once("remove",function(){l.off(m,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ae.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},_addLayers:function(s){s=s?R(s)?s:[s]:[];for(var l=0,m=s.length;l<m;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,m=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var E=this._zoomBoundLayers[_].options;s=E.minZoom===void 0?s:Math.min(s,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var tt=He.extend({initialize:function(s,l){b(this,l),this._layers={};var m,_;if(s)for(m=0,_=s.length;m<_;m++)this.addLayer(s[m])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),m,_;for(m in this._layers)_=this._layers[m],_[s]&&_[s].apply(_,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var m in this._layers)s.call(l,this._layers[m]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),Gi=function(s,l){return new tt(s,l)},lt=tt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),tt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),tt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Re;for(var l in this._layers){var m=this._layers[l];s.extend(m.getBounds?m.getBounds():m.getLatLng())}return s}}),Fo=function(s,l){return new lt(s,l)},Zn=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var m=this._getIconUrl(s);if(!m){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(m,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(_,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(s,l){var m=this.options,_=m[l+"Size"];typeof _=="number"&&(_=[_,_]);var E=te(_),I=te(l==="shadow"&&m.shadowAnchor||m.iconAnchor||E&&E.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(m.className||""),I&&(s.style.marginLeft=-I.x+"px",s.style.marginTop=-I.y+"px"),E&&(s.style.width=E.x+"px",s.style.height=E.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function BC(s){return new Zn(s)}var Ea=Zn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ea.imagePath!="string"&&(Ea.imagePath=this._detectIconPath()),(this.options.imagePath||Ea.imagePath)+Zn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(m,_,E){var I=_.exec(m);return I&&I[E]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ne("div","leaflet-default-icon-path",document.body),l=Ui(s,"background-image")||Ui(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Xm=an.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new bn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,m=l._map,_=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,I=_n(l._icon),O=m.getPixelBounds(),G=m.getPixelOrigin(),$=Ce(O.min._subtract(G).add(E),O.max._subtract(G).subtract(E));if(!$.contains(I)){var X=te((Math.max($.max.x,I.x)-$.max.x)/(O.max.x-$.max.x)-(Math.min($.min.x,I.x)-$.min.x)/(O.min.x-$.min.x),(Math.max($.max.y,I.y)-$.max.y)/(O.max.y-$.max.y)-(Math.min($.min.y,I.y)-$.min.y)/(O.min.y-$.min.y)).multiplyBy(_);m.panBy(X,{animate:!1}),this._draggable._newPos._add(X),this._draggable._startPos._add(X),_e(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=B(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,m=l._shadow,_=_n(l._icon),E=l._map.layerPointToLatLng(_);m&&_e(m,_),l._latlng=E,s.latlng=E,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),wu=He.extend({options:{icon:new Ea,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=ve(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ve(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=s.icon.createIcon(this._icon),_=!1;m!==this._icon&&(this._icon&&this._removeIcon(),_=!0,s.title&&(m.title=s.title),m.tagName==="IMG"&&(m.alt=s.alt||"")),we(m,l),s.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(m,"focus",this._panOnFocus,this);var E=s.icon.createShadow(this._shadow),I=!1;E!==this._shadow&&(this._removeShadow(),I=!0),E&&(we(E,l),E.alt=""),this._shadow=E,s.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&I&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qe(this._icon,"focus",this._panOnFocus,this),Ge(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ge(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&_e(this._icon,s),this._shadow&&_e(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xm)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xm(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&st(this._icon,s),this._shadow&&st(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,m=l.iconSize?te(l.iconSize):te(0,0),_=l.iconAnchor?te(l.iconAnchor):te(0,0);s.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:m.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function zC(s,l){return new wu(s,l)}var Wi=He.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Cu=Wi.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=ve(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ve(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Wi.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,m=this._clickTolerance(),_=[s+m,l+m];this._pxBounds=new ge(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qC(s,l){return new Cu(s,l)}var Kd=Cu.extend({initialize:function(s,l,m){if(typeof l=="number"&&(l=r({},m,{radius:l})),b(this,l),this._latlng=ve(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Re(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Wi.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,m=this._map,_=m.options.crs;if(_.distance===$n.distance){var E=Math.PI/180,I=this._mRadius/$n.R/E,O=m.project([l+I,s]),G=m.project([l-I,s]),$=O.add(G).divideBy(2),X=m.unproject($).lat,oe=Math.acos((Math.cos(I*E)-Math.sin(l*E)*Math.sin(X*E))/(Math.cos(l*E)*Math.cos(X*E)))/E;(isNaN(oe)||oe===0)&&(oe=I/Math.cos(Math.PI/180*l)),this._point=$.subtract(m.getPixelOrigin()),this._radius=isNaN(oe)?0:$.x-m.project([X,s-oe]).x,this._radiusY=$.y-O.y}else{var fe=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(fe).x}this._updateBounds()}});function HC(s,l,m){return new Kd(s,l,m)}var gi=Wi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,m=null,_=En,E,I,O=0,G=this._parts.length;O<G;O++)for(var $=this._parts[O],X=1,oe=$.length;X<oe;X++){E=$[X-1],I=$[X];var fe=_(s,E,I,!0);fe<l&&(l=fe,m=_(s,E,I))}return m&&(m.distance=Math.sqrt(l)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ve(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Re,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],m=h(s),_=0,E=s.length;_<E;_++)m?(l[_]=ve(s[_]),this._bounds.extend(l[_])):l[_]=this._convertLatLngs(s[_]);return l},_project:function(){var s=new ge;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new ge([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,m){var _=s[0]instanceof Se,E=s.length,I,O;if(_){for(O=[],I=0;I<E;I++)O[I]=this._map.latLngToLayerPoint(s[I]),m.extend(O[I]);l.push(O)}else for(I=0;I<E;I++)this._projectLatlngs(s[I],l,m)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,m,_,E,I,O,G,$;for(m=0,E=0,I=this._rings.length;m<I;m++)for($=this._rings[m],_=0,O=$.length;_<O-1;_++)G=Vr($[_],$[_+1],s,_,!0),G&&(l[E]=l[E]||[],l[E].push(G[0]),(G[1]!==$[_+1]||_===O-2)&&(l[E].push(G[1]),E++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,m=0,_=s.length;m<_;m++)s[m]=ya(s[m],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var m,_,E,I,O,G,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(m=0,I=this._parts.length;m<I;m++)for(G=this._parts[m],_=0,O=G.length,E=O-1;_<O;E=_++)if(!(!l&&_===0)&&va(s,G[E],G[_])<=$)return!0;return!1}});function GC(s,l){return new gi(s,l)}gi._flat=T;var Uo=gi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=gi.prototype._convertLatLngs.call(this,s),m=l.length;return m>=2&&l[0]instanceof Se&&l[0].equals(l[m-1])&&l.pop(),l},_setLatLngs:function(s){gi.prototype._setLatLngs.call(this,s),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,m=new Z(l,l);if(s=new ge(s.min.subtract(m),s.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,E=this._rings.length,I;_<E;_++)I=Mo(this._rings[_],s,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,m,_,E,I,O,G,$,X;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(I=0,$=this._parts.length;I<$;I++)for(m=this._parts[I],O=0,X=m.length,G=X-1;O<X;G=O++)_=m[O],E=m[G],_.y>s.y!=E.y>s.y&&s.x<(E.x-_.x)*(s.y-_.y)/(E.y-_.y)+_.x&&(l=!l);return l||gi.prototype._containsPoint.call(this,s,!0)}});function WC(s,l){return new Uo(s,l)}var _i=lt.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=R(s)?s:s.features,m,_,E;if(l){for(m=0,_=l.length;m<_;m++)E=l[m],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var I=this.options;if(I.filter&&!I.filter(s))return this;var O=Su(s,I);return O?(O.feature=Au(s),O.defaultOptions=O.options,this.resetStyle(O),I.onEachFeature&&I.onEachFeature(s,O),this.addLayer(O)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Su(s,l){var m=s.type==="Feature"?s.geometry:s,_=m?m.coordinates:null,E=[],I=l&&l.pointToLayer,O=l&&l.coordsToLatLng||Jd,G,$,X,oe;if(!_&&!m)return null;switch(m.type){case"Point":return G=O(_),jm(I,s,G,l);case"MultiPoint":for(X=0,oe=_.length;X<oe;X++)G=O(_[X]),E.push(jm(I,s,G,l));return new lt(E);case"LineString":case"MultiLineString":return $=Iu(_,m.type==="LineString"?0:1,O),new gi($,l);case"Polygon":case"MultiPolygon":return $=Iu(_,m.type==="Polygon"?1:2,O),new Uo($,l);case"GeometryCollection":for(X=0,oe=m.geometries.length;X<oe;X++){var fe=Su({geometry:m.geometries[X],type:"Feature",properties:s.properties},l);fe&&E.push(fe)}return new lt(E);case"FeatureCollection":for(X=0,oe=m.features.length;X<oe;X++){var Ie=Su(m.features[X],l);Ie&&E.push(Ie)}return new lt(E);default:throw new Error("Invalid GeoJSON object.")}}function jm(s,l,m,_){return s?s(l,m):new wu(m,_&&_.markersInheritOptions&&_)}function Jd(s){return new Se(s[1],s[0],s[2])}function Iu(s,l,m){for(var _=[],E=0,I=s.length,O;E<I;E++)O=l?Iu(s[E],l-1,m):(m||Jd)(s[E]),_.push(O);return _}function Zd(s,l){return s=ve(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function xu(s,l,m,_){for(var E=[],I=0,O=s.length;I<O;I++)E.push(l?xu(s[I],h(s[I])?0:l-1,m,_):Zd(s[I],_));return!l&&m&&E.length>0&&E.push(E[0].slice()),E}function Oo(s,l){return s.feature?r({},s.feature,{geometry:l}):Au(l)}function Au(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Yd={toGeoJSON:function(s){return Oo(this,{type:"Point",coordinates:Zd(this.getLatLng(),s)})}};wu.include(Yd),Kd.include(Yd),Cu.include(Yd),gi.include({toGeoJSON:function(s){var l=!h(this._latlngs),m=xu(this._latlngs,l?1:0,!1,s);return Oo(this,{type:(l?"Multi":"")+"LineString",coordinates:m})}}),Uo.include({toGeoJSON:function(s){var l=!h(this._latlngs),m=l&&!h(this._latlngs[0]),_=xu(this._latlngs,m?2:l?1:0,!0,s);return l||(_=[_]),Oo(this,{type:(m?"Multi":"")+"Polygon",coordinates:_})}}),tt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(m){l.push(m.toGeoJSON(s).geometry.coordinates)}),Oo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var m=l==="GeometryCollection",_=[];return this.eachLayer(function(E){if(E.toGeoJSON){var I=E.toGeoJSON(s);if(m)_.push(I.geometry);else{var O=Au(I);O.type==="FeatureCollection"?_.push.apply(_,O.features):_.push(O)}}}),m?Oo(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function eg(s,l){return new _i(s,l)}var $C=eg,Pu=He.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,m){this._url=s,this._bounds=Ue(l),b(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ge(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&di(this._image),this},bringToBack:function(){return this._map&&Oi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ue(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ne("img");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Kn(this._image,m,l)},_reset:function(){var s=this._image,l=new ge(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=l.getSize();_e(s,l.min),s.style.width=m.x+"px",s.style.height=m.y+"px"},_updateOpacity:function(){st(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),KC=function(s,l,m){return new Pu(s,l,m)},tg=Pu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ne("video");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=a(this.fire,this,"load"),s){for(var m=l.getElementsByTagName("source"),_=[],E=0;E<m.length;E++)_.push(m[E].src);this._url=m.length>0?_:[l.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var O=Ne("source");O.src=this._url[I],l.appendChild(O)}}});function JC(s,l,m){return new tg(s,l,m)}var ng=Pu.extend({_initImage:function(){var s=this._image=this._url;we(s,"leaflet-image-layer"),this._zoomAnimated&&we(s,"leaflet-zoom-animated"),this.options.className&&we(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function ZC(s,l,m){return new ng(s,l,m)}var Yn=He.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Se||R(s))?(this._latlng=ve(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&st(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&st(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(st(this._container,0),this._removeTimeout=setTimeout(a(Ge,void 0,this._container),200)):Ge(this._container),this.options.interactive&&(Qe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ve(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&di(this._container),this},bringToBack:function(){return this._map&&Oi(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof lt){l=null;var m=this._source._layers;for(var _ in m)if(m[_]._map){l=m[_];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=te(this.options.offset),m=this._getAnchor();this._zoomAnimated?_e(this._container,s.add(m)):l=l.add(s).add(m);var _=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=_+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Ae.include({_initOverlay:function(s,l,m,_){var E=l;return E instanceof s||(E=new s(_).setContent(l)),m&&E.setLatLng(m),E}}),He.include({_initOverlay:function(s,l,m,_){var E=m;return E instanceof s?(b(E,_),E._source=this):(E=l&&!_?l:new s(_,this),E.setContent(m)),E}});var Ru=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Yn.prototype.openOn.call(this,s)},onAdd:function(s){Yn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Wi||this._source.on("preclick",Tn))},onRemove:function(s){Yn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Wi||this._source.off("preclick",Tn))},getEvents:function(){var s=Yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ne("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Ne("div",s+"-content-wrapper",l);if(this._contentNode=Ne("div",s+"-content",m),qi(l),zi(this._contentNode),he(l,"contextmenu",Tn),this._tipContainer=Ne("div",s+"-tip-container",l),this._tip=Ne("div",s+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Ne("a",s+"-close-button",l);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',he(_,"click",function(E){et(E),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var m=s.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),l.width=m+1+"px",l.whiteSpace="",l.height="";var _=s.offsetHeight,E=this.options.maxHeight,I="leaflet-popup-scrolled";E&&_>E?(l.height=E+"px",we(s,I)):Qe(s,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),m=this._getAnchor();_e(this._container,l.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Ui(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+l,_=this._containerWidth,E=new Z(this._containerLeft,-m-this._containerBottom);E._add(_n(this._container));var I=s.layerPointToContainerPoint(E),O=te(this.options.autoPanPadding),G=te(this.options.autoPanPaddingTopLeft||O),$=te(this.options.autoPanPaddingBottomRight||O),X=s.getSize(),oe=0,fe=0;I.x+_+$.x>X.x&&(oe=I.x+_-X.x+$.x),I.x-oe-G.x<0&&(oe=I.x-G.x),I.y+m+$.y>X.y&&(fe=I.y+m-X.y+$.y),I.y-fe-G.y<0&&(fe=I.y-G.y),(oe||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([oe,fe]))}},_getAnchor:function(){return te(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),YC=function(s,l){return new Ru(s,l)};Ae.mergeOptions({closePopupOnClick:!0}),Ae.include({openPopup:function(s,l,m){return this._initOverlay(Ru,s,l,m).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),He.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Ru,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof lt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){sn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Wi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Nu=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Yn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Yn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Yn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,m,_=this._map,E=this._container,I=_.latLngToContainerPoint(_.getCenter()),O=_.layerPointToContainerPoint(s),G=this.options.direction,$=E.offsetWidth,X=E.offsetHeight,oe=te(this.options.offset),fe=this._getAnchor();G==="top"?(l=$/2,m=X):G==="bottom"?(l=$/2,m=0):G==="center"?(l=$/2,m=X/2):G==="right"?(l=0,m=X/2):G==="left"?(l=$,m=X/2):O.x<I.x?(G="right",l=0,m=X/2):(G="left",l=$+(oe.x+fe.x)*2,m=X/2),s=s.subtract(te(l,m,!0)).add(oe).add(fe),Qe(E,"leaflet-tooltip-right"),Qe(E,"leaflet-tooltip-left"),Qe(E,"leaflet-tooltip-top"),Qe(E,"leaflet-tooltip-bottom"),we(E,"leaflet-tooltip-"+G),_e(E,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&st(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return te(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),QC=function(s,l){return new Nu(s,l)};Ae.include({openTooltip:function(s,l,m){return this._initOverlay(Nu,s,l,m).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),He.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nu,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[l](m),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof lt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(he(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),he(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,m,_;this._tooltip.options.sticky&&s.originalEvent&&(m=this._map.mouseEventToContainerPoint(s.originalEvent),_=this._map.containerPointToLayerPoint(m),l=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(l)}});var ig=Zn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),m=this.options;if(m.html instanceof Element?(Dr(l),l.appendChild(m.html)):l.innerHTML=m.html!==!1?m.html:"",m.bgPos){var _=te(m.bgPos);l.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function XC(s){return new ig(s)}Zn.Default=Ea;var wa=He.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ge(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Oi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,m=-s(-1/0,1/0),_=0,E=l.length,I;_<E;_++)I=l[_].style.zIndex,l[_]!==this._container&&I&&(m=s(m,+I));isFinite(m)&&(this.options.zIndex=m+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){st(this._container,this.options.opacity);var s=+new Date,l=!1,m=!1;for(var _ in this._tiles){var E=this._tiles[_];if(!(!E.current||!E.loaded)){var I=Math.min(1,(s-E.loaded)/200);st(E.el,I),I<1?l=!0:(E.active?m=!0:this._onOpaqueTile(E),E.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===s?(this._levels[m].el.style.zIndex=l-Math.abs(s-m),this._onUpdateLevel(m)):(Ge(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var _=this._levels[s],E=this._map;return _||(_=this._levels[s]={},_.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=l,_.origin=E.project(E.unproject(E.getPixelOrigin()),s).round(),_.zoom=s,this._setZoomTransform(_,E.getCenter(),E.getZoom()),y(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,l,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var _=l.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ge(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,m,_){var E=Math.floor(s/2),I=Math.floor(l/2),O=m-1,G=new Z(+E,+I);G.z=+O;var $=this._tileCoordsToKey(G),X=this._tiles[$];return X&&X.active?(X.retain=!0,!0):(X&&X.loaded&&(X.retain=!0),O>_?this._retainParent(E,I,O,_):!1)},_retainChildren:function(s,l,m,_){for(var E=2*s;E<2*s+2;E++)for(var I=2*l;I<2*l+2;I++){var O=new Z(E,I);O.z=m+1;var G=this._tileCoordsToKey(O),$=this._tiles[G];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);m+1<_&&this._retainChildren(E,I,m+1,_)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,m,_){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var I=this.options.updateWhenZooming&&E!==this._tileZoom;(!_||I)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(s),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var m in this._levels)this._setZoomTransform(this._levels[m],s,l)},_setZoomTransform:function(s,l,m){var _=this._map.getZoomScale(m,s.zoom),E=s.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(l,m)).round();ue.any3d?Kn(s.el,E,_):_e(s.el,E)},_resetGrid:function(){var s=this._map,l=s.options.crs,m=this._tileSize=this.getTileSize(),_=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],_).x/m.x),Math.ceil(s.project([0,l.wrapLng[1]],_).x/m.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],_).y/m.x),Math.ceil(s.project([l.wrapLat[1],0],_).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,m=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),_=l.getZoomScale(m,this._tileZoom),E=l.project(s,this._tileZoom).floor(),I=l.getSize().divideBy(_*2);return new ge(E.subtract(I),E.add(I))},_update:function(s){var l=this._map;if(l){var m=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(s),E=this._pxBoundsToTileRange(_),I=E.getCenter(),O=[],G=this.options.keepBuffer,$=new ge(E.getBottomLeft().subtract([G,-G]),E.getTopRight().add([G,-G]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var X in this._tiles){var oe=this._tiles[X].coords;(oe.z!==this._tileZoom||!$.contains(new Z(oe.x,oe.y)))&&(this._tiles[X].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(s,m);return}for(var fe=E.min.y;fe<=E.max.y;fe++)for(var Ie=E.min.x;Ie<=E.max.x;Ie++){var Gt=new Z(Ie,fe);if(Gt.z=this._tileZoom,!!this._isValidTile(Gt)){var Ct=this._tiles[this._tileCoordsToKey(Gt)];Ct?Ct.current=!0:O.push(Gt)}}if(O.sort(function(Yt,zo){return Yt.distanceTo(I)-zo.distanceTo(I)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wn=document.createDocumentFragment();for(Ie=0;Ie<O.length;Ie++)this._addTile(O[Ie],wn);this._level.el.appendChild(wn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var m=this._globalTileRange;if(!l.wrapLng&&(s.x<m.min.x||s.x>m.max.x)||!l.wrapLat&&(s.y<m.min.y||s.y>m.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(s);return Ue(this.options.bounds).overlaps(_)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,m=this.getTileSize(),_=s.scaleBy(m),E=_.add(m),I=l.unproject(_,s.z),O=l.unproject(E,s.z);return[I,O]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),m=new Re(l[0],l[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),m=new Z(+l[0],+l[1]);return m.z=+l[2],m},_removeTile:function(s){var l=this._tiles[s];l&&(Ge(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){we(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=y,s.onmousemove=y,ue.ielt9&&this.options.opacity<1&&st(s,this.options.opacity)},_addTile:function(s,l){var m=this._getTilePos(s),_=this._tileCoordsToKey(s),E=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(E),this.createTile.length<2&&B(a(this._tileReady,this,s,null,E)),_e(E,m),this._tiles[_]={el:E,coords:s,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:s})},_tileReady:function(s,l,m){l&&this.fire("tileerror",{error:l,tile:m,coords:s});var _=this._tileCoordsToKey(s);m=this._tiles[_],m&&(m.loaded=+new Date,this._map._fadeAnimated?(st(m.el,0),U(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),l||(we(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ge(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function jC(s){return new wa(s)}var Bo=wa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&ue.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var m=document.createElement("img");return he(m,"load",a(this._tileOnLoad,this,l,m)),he(m,"error",a(this._tileOnError,this,l,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(s),m},getTileUrl:function(s){var l={r:ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=m),l["-y"]=m}return x(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ue.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,m){var _=this.options.errorTileUrl;_&&l.getAttribute("src")!==_&&(l.src=_),s(m,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,m=this.options.zoomReverse,_=this.options.zoomOffset;return m&&(s=l-s),s+_},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=y,l.onerror=y,!l.complete)){l.src=W;var m=this._tiles[s].coords;Ge(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:m})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",W),wa.prototype._removeTile.call(this,s)},_tileReady:function(s,l,m){if(!(!this._map||m&&m.getAttribute("src")===W))return wa.prototype._tileReady.call(this,s,l,m)}});function rg(s,l){return new Bo(s,l)}var og=Bo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var m=r({},this.defaultWmsParams);for(var _ in l)_ in this.options||(m[_]=l[_]);l=b(this,l);var E=l.detectRetina&&ue.retina?2:1,I=this.getTileSize();m.width=I.x*E,m.height=I.y*E,this.wmsParams=m},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Bo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),m=this._crs,_=Ce(m.project(l[0]),m.project(l[1])),E=_.min,I=_.max,O=(this._wmsVersion>=1.3&&this._crs===ht?[E.y,E.x,I.y,I.x]:[E.x,E.y,I.x,I.y]).join(","),G=Bo.prototype.getTileUrl.call(this,s);return G+q(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function eS(s,l){return new og(s,l)}Bo.WMS=og,rg.wms=eS;var yi=He.extend({options:{padding:.1},initialize:function(s){b(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var m=this._map.getZoomScale(l,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),I=_.multiplyBy(-m).add(E).subtract(this._map._getNewPixelOrigin(s,l));ue.any3d?Kn(this._container,I,m):_e(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),m=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ge(m,m.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sg=yi.extend({options:{tolerance:0},getEvents:function(){var s=yi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){yi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");he(s,"mousemove",this._onMouseMove,this),he(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),he(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Ge(this._container),qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var s=this._bounds,l=this._container,m=s.getSize(),_=ue.retina?2:1;_e(l,s.min),l.width=_*m.x,l.height=_*m.y,l.style.width=m.x+"px",l.style.height=m.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){yi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,m=l.next,_=l.prev;m?m.prev=_:this._drawLast=_,_?_.next=m:this._drawFirst=m,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),m=[],_,E;for(E=0;E<l.length;E++){if(_=Number(l[E]),isNaN(_))return;m.push(_)}s.options._dashArray=m}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ge,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var m=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)s=_.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var m,_,E,I,O=s._parts,G=O.length,$=this._ctx;if(G){for($.beginPath(),m=0;m<G;m++){for(_=0,E=O[m].length;_<E;_++)I=O[m][_],$[_?"lineTo":"moveTo"](I.x,I.y);l&&$.closePath()}this._fillStroke($,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,m=this._ctx,_=Math.max(Math.round(s._radius),1),E=(Math.max(Math.round(s._radiusY),1)||_)/_;E!==1&&(m.save(),m.scale(1,E)),m.beginPath(),m.arc(l.x,l.y/E,_,0,Math.PI*2,!1),E!==1&&m.restore(),this._fillStroke(m,s)}},_fillStroke:function(s,l){var m=l.options;m.fill&&(s.globalAlpha=m.fillOpacity,s.fillStyle=m.fillColor||m.color,s.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=m.opacity,s.lineWidth=m.weight,s.strokeStyle=m.color,s.lineCap=m.lineCap,s.lineJoin=m.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),m,_,E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(m))&&(_=m);this._fireEvent(_?[_]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Qe(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var m,_,E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(l)&&(_=m);_!==this._hoveredLayer&&(this._handleMouseOut(s),_&&(we(this._container,"leaflet-interactive"),this._fireEvent([_],s,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,m){this._map._fireDOMEvent(l,m||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(m)m.prev=_;else return;_?_.next=m:m&&(this._drawFirst=m),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var m=l.next,_=l.prev;if(_)_.next=m;else return;m?m.prev=_:_&&(this._drawLast=_),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function ag(s){return ue.canvas?new sg(s):null}var Ca=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),tS={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(yi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Ca("shape");we(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Ca("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Ge(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,m=s._fill,_=s.options,E=s._container;E.stroked=!!_.stroke,E.filled=!!_.fill,_.stroke?(l||(l=s._stroke=Ca("stroke")),E.appendChild(l),l.weight=_.weight+"px",l.color=_.color,l.opacity=_.opacity,_.dashArray?l.dashStyle=R(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=_.lineCap.replace("butt","flat"),l.joinstyle=_.lineJoin):l&&(E.removeChild(l),s._stroke=null),_.fill?(m||(m=s._fill=Ca("fill")),E.appendChild(m),m.color=_.fillColor||_.color,m.opacity=_.fillOpacity):m&&(E.removeChild(m),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),m=Math.round(s._radius),_=Math.round(s._radiusY||m);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+m+","+_+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){di(s._container)},_bringToBack:function(s){Oi(s._container)}},ku=ue.vml?Ca:co,Sa=yi.extend({_initContainer:function(){this._container=ku("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ku("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ge(this._container),qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,m.setAttribute("width",l.x),m.setAttribute("height",l.y)),_e(m,s.min),m.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=ku("path");s.options.className&&we(l,s.options.className),s.options.interactive&&we(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ge(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,m=s.options;l&&(m.stroke?(l.setAttribute("stroke",m.color),l.setAttribute("stroke-opacity",m.opacity),l.setAttribute("stroke-width",m.weight),l.setAttribute("stroke-linecap",m.lineCap),l.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?l.setAttribute("stroke-dasharray",m.dashArray):l.removeAttribute("stroke-dasharray"),m.dashOffset?l.setAttribute("stroke-dashoffset",m.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),m.fill?(l.setAttribute("fill",m.fillColor||m.color),l.setAttribute("fill-opacity",m.fillOpacity),l.setAttribute("fill-rule",m.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Gs(s._parts,l))},_updateCircle:function(s){var l=s._point,m=Math.max(Math.round(s._radius),1),_=Math.max(Math.round(s._radiusY),1)||m,E="a"+m+","+_+" 0 1,0 ",I=s._empty()?"M0 0":"M"+(l.x-m)+","+l.y+E+m*2+",0 "+E+-m*2+",0 ";this._setPath(s,I)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){di(s._path)},_bringToBack:function(s){Oi(s._path)}});ue.vml&&Sa.include(tS);function lg(s){return ue.svg||ue.vml?new Sa(s):null}Ae.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&ag(s)||lg(s)}});var ug=Uo.extend({initialize:function(s,l){Uo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ue(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function nS(s,l){return new ug(s,l)}Sa.create=ku,Sa.pointsToPath=Gs,_i.geometryToLayer=Su,_i.coordsToLatLng=Jd,_i.coordsToLatLngs=Iu,_i.latLngToCoords=Zd,_i.latLngsToCoords=xu,_i.getFeature=Oo,_i.asFeature=Au,Ae.mergeOptions({boxZoom:!0});var cg=an.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ge(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ln(),aa(),this._startPoint=this._map.mouseEventToContainerPoint(s),he(document,{contextmenu:sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ge(this._point,this._startPoint),m=l.getSize();_e(this._box,l.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Ge(this._box),Qe(this._container,"leaflet-crosshair")),Dn(),la(),qe(document,{contextmenu:sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ae.addInitHook("addHandler","boxZoom",cg),Ae.mergeOptions({doubleClickZoom:!0});var dg=an.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,m=l.getZoom(),_=l.options.zoomDelta,E=s.originalEvent.shiftKey?m-_:m+_;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(s.containerPoint,E)}});Ae.addInitHook("addHandler","doubleClickZoom",dg),Ae.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hg=an.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new bn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qe(this._map._container,"leaflet-grab"),Qe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ue(this._map.options.maxBounds);this._offsetLimit=Ce(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),m=this._initialWorldOffset,_=this._draggable._newPos.x,E=(_-l+m)%s+l-m,I=(_+l+m)%s-l-m,O=Math.abs(E+m)<Math.abs(I+m)?E:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(s){var l=this._map,m=l.options,_=!m.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),_)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,O=m.easeLinearity,G=E.multiplyBy(O/I),$=G.distanceTo([0,0]),X=Math.min(m.inertiaMaxSpeed,$),oe=G.multiplyBy(X/$),fe=X/(m.inertiaDeceleration*O),Ie=oe.multiplyBy(-fe/2).round();!Ie.x&&!Ie.y?l.fire("moveend"):(Ie=l._limitOffset(Ie,l.options.maxBounds),B(function(){l.panBy(Ie,{duration:fe,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});Ae.addInitHook("addHandler","dragging",hg),Ae.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fg=an.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),he(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,m=s.scrollTop||l.scrollTop,_=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(_,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},m=this.keyCodes,_,E;for(_=0,E=m.left.length;_<E;_++)l[m.left[_]]=[-1*s,0];for(_=0,E=m.right.length;_<E;_++)l[m.right[_]]=[s,0];for(_=0,E=m.down.length;_<E;_++)l[m.down[_]]=[0,s];for(_=0,E=m.up.length;_<E;_++)l[m.up[_]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},m=this.keyCodes,_,E;for(_=0,E=m.zoomIn.length;_<E;_++)l[m.zoomIn[_]]=s;for(_=0,E=m.zoomOut.length;_<E;_++)l[m.zoomOut[_]]=-s},_addHooks:function(){he(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,m=this._map,_;if(l in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(_=this._panKeys[l],s.shiftKey&&(_=te(_).multiplyBy(3)),m.options.maxBounds&&(_=m._limitOffset(te(_),m.options.maxBounds)),m.options.worldCopyJump){var E=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(_)));m.panTo(E)}else m.panBy(_)}else if(l in this._zoomKeys)m.setZoom(m.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;sn(s)}}});Ae.addInitHook("addHandler","keyboard",fg),Ae.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pg=an.extend({addHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=mu(s),m=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var _=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),_),sn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),m=this._map.options.zoomSnap||0;s._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,I=m?Math.ceil(E/m)*m:E,O=s._limitZoom(l+(this._delta>0?I:-I))-l;this._delta=0,this._startTime=null,O&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+O):s.setZoomAround(this._lastMousePos,l+O))}});Ae.addInitHook("addHandler","scrollWheelZoom",pg);var iS=600;Ae.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var mg=an.extend({addHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(he(document,"touchend",et),he(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),iS),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){qe(document,"touchend",et),qe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),qe(document,"touchend touchcancel contextmenu",this._cancel,this),qe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var m=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});m._simulated=!0,l.target.dispatchEvent(m)}});Ae.addInitHook("addHandler","tapHold",mg),Ae.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var gg=an.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qe(this._map._container,"leaflet-touch-zoom"),qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(m.add(_)._divideBy(2))),this._startDist=m.distanceTo(_),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),et(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,m=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]),E=m.distanceTo(_)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var I=m._add(_)._divideBy(2)._subtract(this._centerPoint);if(E===1&&I.x===0&&I.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var O=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(O,this,!0),et(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),qe(document,"touchmove",this._onTouchMove,this),qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ae.addInitHook("addHandler","touchZoom",gg),Ae.BoxZoom=cg,Ae.DoubleClickZoom=dg,Ae.Drag=hg,Ae.Keyboard=fg,Ae.ScrollWheelZoom=pg,Ae.TapHold=mg,Ae.TouchZoom=gg,n.Bounds=ge,n.Browser=ue,n.CRS=_t,n.Canvas=sg,n.Circle=Kd,n.CircleMarker=Cu,n.Class=Q,n.Control=Zt,n.DivIcon=ig,n.DivOverlay=Yn,n.DomEvent=gu,n.DomUtil=fu,n.Draggable=bn,n.Evented=xe,n.FeatureGroup=lt,n.GeoJSON=_i,n.GridLayer=wa,n.Handler=an,n.Icon=Zn,n.ImageOverlay=Pu,n.LatLng=Se,n.LatLngBounds=Re,n.Layer=He,n.LayerGroup=tt,n.LineUtil=P,n.Map=Ae,n.Marker=wu,n.Mixin=br,n.Path=Wi,n.Point=Z,n.PolyUtil=bo,n.Polygon=Uo,n.Polyline=gi,n.Popup=Ru,n.PosAnimation=ma,n.Projection=ne,n.Rectangle=ug,n.Renderer=yi,n.SVG=Sa,n.SVGOverlay=ng,n.TileLayer=Bo,n.Tooltip=Nu,n.Transformation=Vi,n.Util=V,n.VideoOverlay=tg,n.bind=a,n.bounds=Ce,n.canvas=ag,n.circle=HC,n.circleMarker=qC,n.control=Ht,n.divIcon=XC,n.extend=r,n.featureGroup=Fo,n.geoJSON=eg,n.geoJson=$C,n.gridLayer=jC,n.icon=BC,n.imageOverlay=KC,n.latLng=ve,n.latLngBounds=Ue,n.layerGroup=Gi,n.map=Ro,n.marker=zC,n.point=te,n.polygon=WC,n.polyline=GC,n.popup=YC,n.rectangle=nS,n.setOptions=b,n.stamp=d,n.svg=lg,n.svgOverlay=ZC,n.tileLayer=rg,n.tooltip=QC,n.transformation=ai,n.version=i,n.videoOverlay=JC;var rS=window.L;n.noConflict=function(){return window.L=rS,this},window.L=n})})(op,op.exports);var uo=op.exports;const bl=r0(uo);function Yl(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Hd(t,e){return e==null?function(i,r){const o=ie.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=ie.useRef();o.current||(o.current=t(i,r));const a=ie.useRef(i),{instance:u}=o.current;return ie.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function VC(t,e){ie.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function FC(t){return function(n){const i=zd(),r=t(qd(n,i),i);return MC(i.map,n.attribution),Qm(r.current,n.eventHandlers),VC(r.current,i),r}}function QV(t,e){const n=ie.useRef();ie.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function XV(t){return function(n){const i=zd(),r=t(qd(n,i),i);return Qm(r.current,n.eventHandlers),VC(r.current,i),QV(r.current,n),r}}function jV(t,e){const n=Hd(t,e),i=FC(n);return bC(i)}function eF(t,e){const n=Hd(t),i=YV(n,e);return JV(i)}function UC(t,e){const n=Hd(t,e),i=XV(n);return bC(i)}function tF(t,e){const n=Hd(t,e),i=FC(n);return ZV(i)}function nF(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function iF(){return zd().map}const rF=UC(function({center:e,children:n,...i},r){const o=new uo.Circle(e,i);return Yl(o,Ym(r,{overlayContainer:o}))},WV);function sp(){return sp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sp.apply(this,arguments)}function oF({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:d,zoom:p,...g},y){const[v]=ie.useState({className:r,id:o,style:u}),[S,D]=ie.useState(null);ie.useImperativeHandle(y,()=>(S==null?void 0:S.map)??null,[S]);const b=ie.useCallback(A=>{if(A!==null&&S===null){const x=new uo.Map(A,g);n!=null&&p!=null?x.setView(n,p):t!=null&&x.fitBounds(t,e),d!=null&&x.whenReady(d),D(KV(x))}},[]);ie.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const q=S?gs.createElement(DC,{value:S},i):a??null;return gs.createElement("div",sp({},v,{ref:b}),q)}const sF=ie.forwardRef(oF),Dh=jV(function({position:e,...n},i){const r=new uo.Marker(e,n);return Yl(r,Ym(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),nc=UC(function({positions:e,...n},i){const r=new uo.Polyline(e,n);return Yl(r,Ym(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),ba=eF(function(e,n){const i=new uo.Popup(e,n.overlayContainer);return Yl(i,n)},function(e,n,{position:i},r){ie.useEffect(function(){const{instance:a}=e;function u(p){p.popup===a&&(a.update(),r(!0))}function d(p){p.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:d}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var g;n.map.off({popupopen:u,popupclose:d}),(g=n.overlayContainer)==null||g.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),aF=tF(function({url:e,...n},i){const r=new uo.TileLayer(e,qd(n,i));return Yl(r,i)},function(e,n,i){nF(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});try{delete bl.Icon.Default.prototype._getIconUrl,bl.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})}catch(t){console.warn("Leaflet icon fix warning:",t)}const lF=(t,e)=>bl.divIcon({className:"custom-div-icon",html:`<div style="background-color: ${e?"#22d3ee":"#374151"}; color: ${e?"#000":"#fff"}; width: 24px; height: 24px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);">${t}</div>`,iconSize:[24,24],iconAnchor:[12,12]}),uF=bl.divIcon({className:"pulsing-user-marker",html:`
      <div class="relative w-8 h-8 flex items-center justify-center">
        <div class="absolute w-full h-full bg-blue-500 rounded-full opacity-30 animate-ping"></div>
        <div class="relative w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-lg"></div>
      </div>
    `,iconSize:[32,32],iconAnchor:[16,16]}),cF=bl.divIcon({className:"bg-transparent",html:'<div style="color: #facc15; filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));"><svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg></div>',iconSize:[28,28],iconAnchor:[14,28]}),Cn=(t,e)=>{const n=Number(t),i=Number(e);return!isNaN(n)&&!isNaN(i)&&n!==0&&i!==0},dF=({userLocation:t,firstLoad:e})=>{const n=iF();return ie.useEffect(()=>{e&&Cn(t[0],t[1])&&n.flyTo(t,16,{animate:!0,duration:2})},[e,t,n]),null},hF=({onClick:t})=>C.jsx("button",{onClick:t,className:"absolute bottom-6 right-6 z-[1000] bg-white p-3 rounded-full shadow-lg text-slate-700 hover:text-blue-600 hover:bg-slate-50 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500",title:"My Location","aria-label":"Center map on my location",children:C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),fF=({userLocation:t,userLocationAccuracy:e,steps:n=[],landmarks:i=[],traffic:r=[],currentStepIndex:o=0,itineraryLocations:a=[],itineraryLines:u=[],highlightedItineraryIndex:d=null})=>{var b,q;const[p,g]=gs.useState(null),[y,v]=gs.useState(!0);ie.useEffect(()=>{if(y&&Cn(t[0],t[1])){const A=setTimeout(()=>v(!1),3e3);return()=>clearTimeout(A)}},[t,y]);const S=((q=(b=n[o])==null?void 0:b.path)==null?void 0:q.filter(A=>Cn(A.lat,A.lng)).map(A=>[A.lat,A.lng]))||[],D=()=>{p&&Cn(t[0],t[1])&&p.flyTo(t,18,{animate:!0})};return C.jsxs("div",{className:"h-[400px] w-full rounded-lg overflow-hidden border border-gray-700 shadow-lg relative z-0",children:[C.jsxs(sF,{center:Cn(t[0],t[1])?t:[20.4795,85.8778],zoom:16,style:{height:"100%",width:"100%"},className:"z-0",ref:g,children:[C.jsx(aF,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),C.jsx(dF,{userLocation:t,firstLoad:y}),Cn(t[0],t[1])&&C.jsxs(C.Fragment,{children:[C.jsx(Dh,{position:t,icon:uF,children:C.jsx(ba,{children:"You are here"})}),e&&C.jsx(rF,{center:t,radius:e,pathOptions:{color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.1,weight:1,opacity:.3}})]}),n.map((A,x)=>{var z;const R=((z=A.path)==null?void 0:z.filter(W=>Cn(W.lat,W.lng)).map(W=>[W.lat,W.lng]))||[];return R.length<2?null:C.jsx(nc,{positions:R,pathOptions:{color:"#6b7280",weight:4,opacity:.5}},`bg-${x}`)}),r.map((A,x)=>{var W;const R=((W=A.path)==null?void 0:W.filter(J=>Cn(J.lat,J.lng)).map(J=>[J.lat,J.lng]))||[];if(R.length<2)return null;const z=A.level==="heavy"?"#ef4444":A.level==="moderate"?"#eab308":"#22c55e";return C.jsx(nc,{positions:R,pathOptions:{color:z,weight:6,opacity:.7},children:C.jsxs(ba,{children:[A.description," (",A.level," traffic)"]})},`traffic-${x}`)}),S.length>1&&C.jsx(nc,{positions:S,pathOptions:{color:"#06b6d4",weight:6,opacity:.9}}),i.map((A,x)=>{var R,z;return Cn((R=A.position)==null?void 0:R.lat,(z=A.position)==null?void 0:z.lng)?C.jsx(Dh,{position:[A.position.lat,A.position.lng],icon:cF,children:C.jsx(ba,{children:A.name})},`lm-${x}`):null}),u.map((A,x)=>{var R,z,W,J;return!Cn((R=A.start)==null?void 0:R.lat,(z=A.start)==null?void 0:z.lng)||!Cn((W=A.end)==null?void 0:W.lat,(J=A.end)==null?void 0:J.lng)?null:C.jsx(nc,{positions:[[A.start.lat,A.start.lng],[A.end.lat,A.end.lng]],pathOptions:{color:"#3b82f6",weight:3,dashArray:"10, 10",opacity:.8},children:C.jsxs(ba,{children:[C.jsx("strong",{children:A.name}),C.jsx("br",{}),A.transport," (",A.travelTime,")"]})},`line-${x}`)}),a.map((A,x)=>{if(!Cn(A.lat,A.lng))return null;const R=d===x;return C.jsx(Dh,{position:[A.lat,A.lng],icon:lF(A.sequence||x+1,R),zIndexOffset:R?1e3:0,children:C.jsxs(ba,{children:[C.jsxs("strong",{children:[A.sequence,". ",A.name]}),C.jsx("br",{}),A.time," - ",A.description]})},`loc-${x}`)})]}),C.jsx(hF,{onClick:D})]})},n0=({chunks:t})=>{if(!t||t.length===0)return null;const e=t.filter(n=>{var i,r;return((i=n.web)==null?void 0:i.uri)||((r=n.maps)==null?void 0:r.uri)});return C.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[C.jsxs("h4",{className:"font-semibold text-slate-700 flex items-center gap-2 text-sm uppercase tracking-wide",children:[C.jsx(Wx,{})," Sources:"]}),C.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm text-slate-600",children:e.map((n,i)=>{const r=n.web||n.maps;return r?C.jsx("li",{children:C.jsx("a",{href:r.uri,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline hover:text-blue-800",children:r.title||"Source link"})},i):null})})]})},i0=({onClick:t,disabled:e,children:n})=>C.jsx("button",{onClick:t,disabled:e,className:"bg-white border border-slate-300 hover:bg-slate-50 disabled:bg-slate-100 disabled:text-slate-400 disabled:cursor-not-allowed text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center justify-center transition-colors shadow-sm",children:n}),pF=({location:t,manualLocation:e,language:n})=>{const[i,r]=ie.useState("route"),[o,a]=ie.useState(""),[u,d]=ie.useState(""),[p,g]=ie.useState(""),[y,v]=ie.useState(!1),[S,D]=ie.useState(null),[b,q]=ie.useState(null),[A,x]=ie.useState(0),[R,z]=ie.useState(null),[W,J]=ie.useState([]),k=oo[n],N=[{key:"emergency",label:k.quickDestEmergency,value:"Emergency Department / Casualty"},{key:"opd",label:k.quickDestOPD,value:"OPD Registration"},{key:"blood",label:k.quickDestBloodBank,value:"Blood Bank"},{key:"gate",label:k.quickDestMainGate,value:"Main Gate"}];ie.useEffect(()=>{sessionStorage.getItem("scb_emergency_mode")==="true"&&(a("Emergency Department / Casualty"),sessionStorage.removeItem("scb_emergency_mode"))},[]),ie.useEffect(()=>{try{const Q=localStorage.getItem("scb_navi_saved_routes");Q&&J(JSON.parse(Q))}catch(Q){console.error("Failed to load saved routes:",Q)}},[]);const M=()=>{if(!S)return;const Q=i==="route"?`Route to ${o}`:`Day Plan - ${new Date().toLocaleDateString()}`,pe=window.prompt("Enter a name for this plan:",Q);if(pe){const xe=[{id:Date.now().toString(),name:pe,timestamp:Date.now(),mode:i,result:S,destination:i==="route"?o:void 0,notes:i==="route"?u:void 0,dayPlanPrompt:i==="dayPlan"?p:void 0},...W];J(xe),localStorage.setItem("scb_navi_saved_routes",JSON.stringify(xe)),alert("Plan saved successfully!")}},F=(Q,pe)=>{if(pe.stopPropagation(),window.confirm("Are you sure you want to delete this saved plan?")){const de=W.filter(xe=>xe.id!==Q);J(de),localStorage.setItem("scb_navi_saved_routes",JSON.stringify(de))}},B=Q=>{r(Q.mode),D(Q.result),Q.mode==="route"?(a(Q.destination||""),d(Q.notes||"")):g(Q.dayPlanPrompt||""),x(0),z(null),window.scrollTo({top:0,behavior:"smooth"})},U=async Q=>{Q.preventDefault(),q(null),D(null),v(!0),x(0),z(null);const pe=e||(t.latitude&&t.longitude?"My Current Location":"SCB Medical College Main Gate");try{if(i==="route"){if(!o.trim()){q("Please enter a destination."),v(!1);return}const de=await JM(pe,o,u,t.latitude&&t.longitude?{latitude:t.latitude,longitude:t.longitude}:null,n);D({...de,locations:[],lines:[],summaryText:""})}else{if(!p.trim()){q("Please describe your day."),v(!1);return}const de=await KM(p,n);D({text:"",groundingChunks:[],steps:[],landmarks:[],trafficSegments:[],...de})}}catch(de){q("Failed to generate plan. Please try again."),console.error(de)}finally{v(!1)}},V=t.latitude&&t.longitude?[t.latitude,t.longitude]:[20.4795,85.8778];return C.jsxs("div",{className:"animate-fadeIn max-w-2xl mx-auto",children:[C.jsxs("div",{className:"flex justify-center mb-6 space-x-2 bg-slate-200 p-1 rounded-full w-fit mx-auto",children:[C.jsx("button",{onClick:()=>{r("route"),D(null)},className:`px-5 py-2 rounded-full font-bold text-sm transition-all ${i==="route"?"bg-white text-blue-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:k.navMode}),C.jsx("button",{onClick:()=>{r("dayPlan"),D(null)},className:`px-5 py-2 rounded-full font-bold text-sm transition-all ${i==="dayPlan"?"bg-white text-blue-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:k.dayMode})]}),C.jsxs("div",{className:"text-center mb-6",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:i==="route"?k.campusNavTitle:k.itineraryTitle}),C.jsx("p",{className:"text-slate-500 mt-1",children:i==="route"?k.navSub:k.daySub})]}),!S&&C.jsxs(C.Fragment,{children:[C.jsxs("form",{onSubmit:U,className:"space-y-4 transition-all duration-500 bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[i==="route"?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:N.map(Q=>C.jsx("button",{type:"button",onClick:()=>a(Q.value),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all border ${o===Q.value?Q.key==="emergency"?"bg-red-100 text-red-700 border-red-300":"bg-blue-100 text-blue-700 border-blue-300":Q.key==="emergency"?"bg-red-50 text-red-600 border-red-100 hover:bg-red-100":"bg-slate-100 text-slate-600 border-slate-200 hover:bg-slate-200"}`,children:Q.label},Q.key))}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"destination",className:"block text-sm font-semibold text-slate-700 mb-1",children:k.destLabel}),C.jsx("input",{type:"text",id:"destination",value:o,onChange:Q=>a(Q.target.value),placeholder:k.destPlace,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-slate-400"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"notes",className:"block text-sm font-semibold text-slate-700 mb-1",children:k.notesLabel}),C.jsx("textarea",{id:"notes",value:u,onChange:Q=>d(Q.target.value),placeholder:k.notesPlace,rows:3,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-slate-400"})]})]}):C.jsxs("div",{children:[C.jsx("label",{htmlFor:"dayPlan",className:"block text-sm font-semibold text-slate-700 mb-1",children:k.dayPromptLabel}),C.jsx("textarea",{id:"dayPlan",value:p,onChange:Q=>g(Q.target.value),placeholder:k.dayPromptPlace,rows:5,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-slate-400"})]}),b&&C.jsx("p",{className:"text-red-600 bg-red-50 p-3 rounded-lg text-sm border border-red-100",children:b}),C.jsx("button",{type:"submit",disabled:y,className:"w-full bg-blue-700 hover:bg-blue-800 text-white font-bold py-3.5 px-4 rounded-xl flex items-center justify-center transition-all shadow-md hover:shadow-lg disabled:bg-slate-300 disabled:shadow-none",children:y?C.jsx(EE,{}):C.jsxs(C.Fragment,{children:[C.jsx(wE,{})," ",C.jsx("span",{className:"ml-2",children:i==="route"?k.findPath:k.genPlan})]})})]}),W.length>0&&!y&&C.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200",children:[C.jsxs("h3",{className:"text-lg font-bold text-slate-700 mb-4 flex items-center gap-2",children:[C.jsx(jx,{})," ",k.savedPlans]}),C.jsx("div",{className:"space-y-3",children:W.map(Q=>C.jsxs("div",{onClick:()=>B(Q),className:"bg-white border border-slate-200 rounded-xl p-4 flex justify-between items-center cursor-pointer transition-all hover:shadow-md hover:border-blue-300 group",children:[C.jsxs("div",{children:[C.jsx("div",{className:"font-bold text-slate-800",children:Q.name}),C.jsxs("div",{className:"text-xs text-slate-500 flex gap-2 mt-1",children:[C.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-slate-600 font-medium capitalize",children:Q.mode==="route"?"Navigation":"Itinerary"}),C.jsx("span",{children:new Date(Q.timestamp).toLocaleDateString()})]})]}),C.jsx("button",{onClick:pe=>F(Q.id,pe),className:"p-2 text-slate-400 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100",title:"Delete",children:C.jsx(Xx,{})})]},Q.id))})]})]}),y&&C.jsxs("div",{className:"text-center mt-8 p-6 bg-white border border-slate-200 rounded-xl shadow-sm",children:[C.jsx("p",{className:"font-bold text-slate-800",children:k.analyzing}),C.jsx("p",{className:"text-sm text-slate-500 mt-2",children:k.connecting})]}),S&&C.jsxs("div",{className:"mt-6 animate-fadeIn space-y-4",children:[C.jsx(fF,{userLocation:V,userLocationAccuracy:t.accuracy,steps:S.steps,landmarks:S.landmarks,traffic:S.trafficSegments,currentStepIndex:A,itineraryLocations:S.locations,itineraryLines:S.lines,highlightedItineraryIndex:R}),i==="route"&&S.steps.length>0&&C.jsxs("div",{className:"p-5 bg-white border border-slate-200 shadow-md rounded-xl text-center relative z-10",children:[C.jsxs("p",{className:"font-bold text-sm uppercase tracking-wide text-blue-600 mb-1",children:[k.step," ",A+1," / ",S.steps.length]}),C.jsx("p",{className:"text-slate-800 text-xl font-medium leading-relaxed",children:S.steps[A].description}),C.jsxs("div",{className:"flex justify-between mt-6",children:[C.jsxs(i0,{onClick:()=>x(Q=>Math.max(0,Q-1)),disabled:A===0,children:[C.jsx($x,{}),C.jsx("span",{className:"ml-2",children:k.prev})]}),C.jsxs(i0,{onClick:()=>x(Q=>Math.min(S.steps.length-1,Q+1)),disabled:A===S.steps.length-1,children:[C.jsx("span",{className:"mr-2",children:k.next}),C.jsx(Kx,{})]})]})]}),i==="dayPlan"&&S.locations.length>0&&C.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm p-6",children:[C.jsx("h3",{className:"text-xl font-bold text-blue-800 border-b border-slate-100 pb-3 mb-4",children:k.yourItinerary}),C.jsxs("div",{className:"space-y-0 relative",children:[C.jsx("div",{className:"absolute left-4 top-4 bottom-4 w-0.5 bg-slate-200"}),S.locations.map((Q,pe)=>C.jsxs("div",{onClick:()=>z(pe),className:`relative pl-10 py-3 cursor-pointer transition-all rounded-r-lg ${R===pe?"bg-blue-50 border-l-4 border-blue-500 -ml-[2px]":"hover:bg-slate-50"}`,children:[C.jsx("div",{className:`absolute left-2.5 top-5 w-3 h-3 rounded-full border-2 border-white shadow-sm z-10 ${R===pe?"bg-blue-600 scale-125":"bg-slate-400"}`}),C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:Q.name}),C.jsx("p",{className:"text-sm text-slate-500",children:Q.description})]}),C.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[C.jsx("span",{className:"block text-blue-600 font-mono font-bold bg-blue-50 px-2 py-0.5 rounded text-sm",children:Q.time}),C.jsx("span",{className:"block text-xs text-slate-400 mt-1",children:Q.duration})]})]})]},pe))]}),S.summaryText&&C.jsx("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg text-sm text-slate-600 italic border-l-4 border-slate-300",children:S.summaryText})]}),C.jsxs("details",{className:"bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden",children:[C.jsxs("summary",{className:"cursor-pointer p-4 text-slate-700 font-bold bg-slate-50 hover:bg-slate-100 transition-colors flex justify-between items-center",children:[C.jsx("span",{children:i==="route"?k.viewSummary:k.viewPlanText}),C.jsx("span",{className:"text-slate-400 text-xs",children:""})]}),C.jsxs("div",{className:"p-5 border-t border-slate-200",children:[C.jsx("div",{className:"prose prose-slate prose-sm max-w-none",dangerouslySetInnerHTML:{__html:(S.text||S.summaryText).replace(/\n/g,"<br />")}}),C.jsx(n0,{chunks:S.groundingChunks})]})]}),C.jsxs("div",{className:"flex space-x-3 pt-4",children:[C.jsx("button",{onClick:()=>D(null),className:"flex-1 bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 font-bold py-3 px-4 rounded-xl flex items-center justify-center transition-colors shadow-sm",children:i==="route"?k.planNew:k.createNew}),C.jsxs("button",{onClick:M,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-xl flex items-center justify-center transition-colors shadow-md",children:[C.jsx(Qx,{})," ",C.jsx("span",{className:"ml-2",children:k.savePlan})]})]})]}),S&&i==="route"&&S.steps.length===0&&!y&&C.jsxs("div",{className:"mt-8 text-center",children:[C.jsx("p",{className:"text-orange-600 font-medium bg-orange-50 p-2 rounded-lg inline-block",children:"Could not generate an interactive route. Displaying summary instead."}),C.jsxs("div",{className:"mt-4 p-5 bg-white border border-slate-200 shadow-sm rounded-xl text-left",children:[C.jsx("div",{className:"prose prose-slate prose-sm max-w-none",dangerouslySetInnerHTML:{__html:(S.text||S.summaryText||"").replace(/\n/g,"<br />")}}),C.jsx(n0,{chunks:S.groundingChunks})]}),C.jsx("button",{onClick:()=>D(null),className:"mt-6 w-full bg-slate-100 hover:bg-slate-200 text-slate-800 font-bold py-3 px-4 rounded-xl transition-colors",children:"Start Over"})]})]})},mF=({language:t,location:e})=>{const[n,i]=ie.useState([]),[r,o]=ie.useState(""),[a,u]=ie.useState(!1),d=ie.useRef(null),p=ie.useRef(null),g=oo[t];ie.useEffect(()=>{try{d.current=YM(t),i([{sender:"bot",text:g.chatWelcome}])}catch(b){console.error("Failed to start chat:",b),i([{sender:"bot",text:"Error: Could not connect to AI service. Please check your API key configuration."}])}},[t]);const y=()=>{var b;(b=p.current)==null||b.scrollIntoView({behavior:"smooth"})};ie.useEffect(y,[n]);const v=async(b=r)=>{if(!b.trim()||a||!d.current)return;const q={sender:"user",text:b};i(A=>[...A,q]),o(""),u(!0);try{const A=await QM(d.current,b);let x="";i(R=>[...R,{sender:"bot",text:""}]);for await(const R of A)x+=R.text,i(z=>{const W=[...z];return W[W.length-1].text=x,W})}catch(A){const x=A instanceof Error?A.message:"An unknown error occurred.";i(R=>[...R,{sender:"bot",text:`Sorry, something went wrong. ${x}`}])}finally{u(!1)}},S=()=>{if(console.log("Share Location Clicked. Location:",e),e.latitude&&e.longitude){const b=`My current location is Latitude: ${e.latitude}, Longitude: ${e.longitude}.`;v(b)}else alert("Location is not available yet. Please Ensure GPS is enabled and wait a moment.")},D=b=>{b.key==="Enter"&&!a&&v()};return C.jsxs("div",{className:"flex flex-col h-[calc(100vh-150px)] max-h-[70vh] bg-white rounded-2xl shadow-lg border border-slate-200 animate-fadeIn overflow-hidden",children:[C.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4 bg-slate-50",children:[n.map((b,q)=>C.jsxs("div",{className:`flex items-end gap-2 ${b.sender==="user"?"justify-end":"justify-start"}`,children:[b.sender==="bot"&&C.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center mb-1 shadow-sm",children:C.jsx(Zx,{})}),C.jsxs("div",{className:`max-w-[80%] md:max-w-md px-5 py-3 rounded-2xl shadow-sm text-sm leading-relaxed ${b.sender==="user"?"bg-blue-600 text-white rounded-br-none":"bg-white text-slate-800 border border-slate-200 rounded-bl-none"}`,children:[C.jsx("p",{className:"break-words",children:b.text}),a&&b.sender==="bot"&&q===n.length-1&&C.jsxs("div",{className:"typing-indicator mt-1 opacity-70",children:[C.jsx("span",{children:"."}),C.jsx("span",{children:"."}),C.jsx("span",{children:"."})]})]}),b.sender==="user"&&C.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mb-1 shadow-sm",children:C.jsx(CE,{})})]},q)),C.jsx("div",{ref:p})]}),C.jsxs("div",{className:"px-4 py-2 bg-slate-50 border-t border-slate-100 flex gap-2 overflow-x-auto",children:[C.jsx("button",{onClick:()=>v(g.chatSuggest1),disabled:a,className:"flex-shrink-0 px-3 py-1.5 bg-red-50 text-red-600 border border-red-100 rounded-full text-xs font-semibold hover:bg-red-100 transition-colors disabled:opacity-50",children:g.chatSuggest1}),C.jsx("button",{onClick:()=>v(g.chatSuggest2),disabled:a,className:"flex-shrink-0 px-3 py-1.5 bg-blue-50 text-blue-600 border border-blue-100 rounded-full text-xs font-semibold hover:bg-blue-100 transition-colors disabled:opacity-50",children:g.chatSuggest2}),C.jsx("button",{onClick:()=>v(g.chatSuggest3),disabled:a,className:"flex-shrink-0 px-3 py-1.5 bg-slate-100 text-slate-600 border border-slate-200 rounded-full text-xs font-semibold hover:bg-slate-200 transition-colors disabled:opacity-50",children:g.chatSuggest3})]}),C.jsxs("div",{className:"p-4 bg-white border-t border-slate-200 flex items-center gap-3",children:[C.jsx("button",{onClick:S,title:e.latitude?"Share my location":"Waiting for GPS...",disabled:a,className:`transition-colors p-2 rounded-full ${e.latitude?"text-blue-600 hover:bg-blue-50":"text-slate-300 hover:text-slate-400"}`,children:C.jsx(Yx,{})}),C.jsx("input",{type:"text",value:r,onChange:b=>o(b.target.value),onKeyPress:D,placeholder:g.chatInput,className:"flex-grow bg-slate-100 border border-slate-200 text-slate-900 rounded-full py-3 px-5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-sm shadow-inner",disabled:a}),C.jsx("button",{onClick:()=>v(),disabled:a||!r.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 text-white p-3 rounded-full shadow-md transition-all transform hover:scale-105",children:C.jsx(Jx,{})})]}),C.jsx("style",{children:`
        .typing-indicator span {
          display: inline-block;
          animation: bounce 1.2s infinite;
          margin: 0 1px;
        }
        .typing-indicator span:nth-child(2) {
          animation-delay: 0.2s;
        }
        .typing-indicator span:nth-child(3) {
          animation-delay: 0.4s;
        }
        @keyframes bounce {
          0%, 60%, 100% { transform: translateY(0); }
          30% { transform: translateY(-4px); }
        }
      `})]})},gF=({location:t,manualLocation:e,language:n})=>{var B;const[i,r]=ie.useState(!0),[o,a]=ie.useState(null),[u,d]=ie.useState([]),[p,g]=ie.useState(!1),[y,v]=ie.useState(""),[S,D]=ie.useState("All"),[b,q]=ie.useState(!1),[A,x]=ie.useState({temp:32,condition:"Sunny",humidity:65}),[R,z]=ie.useState(!0),W=oo[n];ie.useEffect(()=>{if(!Zi)return;const U=PV(vC(Zi,"reports"),RV("timestamp","desc"),NV(20)),V=FV(U,Q=>{const pe=[];Q.forEach(de=>{var Z;const xe=de.data();pe.push({id:de.id,timestamp:((Z=xe.timestamp)==null?void 0:Z.toMillis())||Date.now(),severity:xe.severity,location:xe.location,description:xe.description,originalText:xe.originalText,reporterName:xe.reporterName,verificationCount:xe.verificationCount||0})}),d(pe)});return()=>V()},[]);const J=async(U,V)=>{if(!Zi)return;const Q=TC(Zi,"reports",U);await bV(Q,{verificationCount:BV(V==="up"?1:-1)})};ie.useEffect(()=>{(async()=>{r(!0);const V=e||(t.latitude&&t.longitude?{latitude:t.latitude,longitude:t.longitude}:null);try{const Q=await ZM(V,n);a(Q)}catch(Q){console.error("Failed to fetch updates",Q)}finally{r(!1)}})()},[t.latitude,t.longitude,e,n]);const k=()=>{if(!o||!o.text)return;if(p){window.speechSynthesis.cancel(),g(!1);return}const U=new SpeechSynthesisUtterance(o.text),V=window.speechSynthesis.getVoices();let Q=null;if(n==="or")Q=V.find(pe=>pe.lang.includes("or")||pe.lang.includes("ori")||pe.name.includes("Odia")||pe.name.includes("Oriya")),Q||(Q=V.find(pe=>pe.lang.includes("hi")||pe.lang.includes("hin")||pe.name.includes("Hindi")||pe.name.includes("Lekha"))),Q||(Q=V.find(pe=>pe.lang.includes("IN")||pe.name.includes("India")));else{const pe=["Samantha","Google UK English Female","Google US English","Karen","Rishi","Moira"];for(const de of pe)if(Q=V.find(xe=>xe.name===de),Q)break;Q||(Q=V.find(de=>de.name.includes("Female")&&de.lang.startsWith("en"))),Q||(Q=V.find(de=>de.lang.startsWith("en")))}Q&&(U.voice=Q),U.rate=.9,U.pitch=1,U.onend=()=>g(!1),window.speechSynthesis.speak(U),g(!0)};ie.useEffect(()=>()=>window.speechSynthesis.cancel(),[]);const N=U=>{const V=Math.floor((Date.now()-U)/6e4);return V<1?W.justNow:V<60?`${V} ${W.minsAgo}`:`${Math.floor(V/60)} ${W.hrsAgo}`},M=u.filter(U=>{const V=U.description.toLowerCase().includes(y.toLowerCase())||U.location.toLowerCase().includes(y.toLowerCase()),Q=S==="All"||U.severity===S.toLowerCase();return V&&Q}),F=((B=o==null?void 0:o.groundingChunks)==null?void 0:B.filter(U=>{var V,Q;return((V=U.web)==null?void 0:V.uri)||((Q=U.maps)==null?void 0:Q.uri)}))||[];return C.jsxs("div",{className:"animate-fadeIn pb-24 max-w-3xl mx-auto space-y-8",children:[C.jsxs("div",{className:"sticky top-0 bg-slate-50/95 backdrop-blur z-20 pt-2 pb-4 px-1",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"Campus Pulse"}),C.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-widest",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]}),C.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1.5 rounded-full shadow-sm border border-slate-200",children:[C.jsx("span",{className:"text-yellow-500",children:C.jsx(oA,{})}),C.jsxs("div",{children:[C.jsxs("p",{className:"text-xs font-bold text-slate-700",children:[A.temp,"C"]}),C.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:A.condition})]})]})]}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Search updates, places, or reports...",value:y,onChange:U=>v(U.target.value),className:"w-full bg-white border border-slate-300 rounded-xl pl-10 pr-4 py-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),C.jsx("div",{className:"absolute left-3 top-3.5 text-slate-400",children:C.jsx(wE,{})})]})]}),C.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl shadow-lg text-white overflow-hidden relative",children:[C.jsx("div",{className:"absolute top-0 right-0 p-32 bg-white opacity-5 rounded-full blur-3xl transform translate-x-10 -translate-y-10 pointer-events-none"}),C.jsxs("div",{className:"p-6 relative z-10",children:[C.jsxs("div",{className:"flex justify-between items-start mb-4",children:[C.jsxs("div",{children:[C.jsx("span",{className:"bg-blue-500/30 text-blue-100 border border-blue-400/30 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider mb-2 inline-block",children:"AI Generated"}),C.jsx("h2",{className:"text-xl font-bold",children:"Daily Briefing"})]}),C.jsx("button",{onClick:k,className:"bg-white/10 hover:bg-white/20 p-3 rounded-full backdrop-blur-sm transition-all border border-white/10",children:p?C.jsx(rA,{}):C.jsx(iA,{})})]}),i?C.jsxs("div",{className:"space-y-3 animate-pulse",children:[C.jsx("div",{className:"h-4 bg-white/20 rounded w-3/4"}),C.jsx("div",{className:"h-4 bg-white/20 rounded w-full"}),C.jsx("div",{className:"h-4 bg-white/20 rounded w-5/6"})]}):o?C.jsxs("div",{className:`prose prose-invert prose-sm max-w-none transition-all duration-500 ${R?"max-h-[500px]":"max-h-24 overflow-hidden relative"}`,children:[C.jsx("div",{className:"whitespace-pre-wrap leading-relaxed opacity-90",children:o.text}),!R&&C.jsx("div",{className:"absolute bottom-0 left-0 w-full h-16 bg-gradient-to-t from-indigo-700 to-transparent"})]}):C.jsx("div",{className:"text-center py-8 opacity-70 italic",children:W.noUpdates}),o&&C.jsx("button",{onClick:()=>z(!R),className:"mt-4 text-xs font-bold uppercase tracking-widest text-blue-200 hover:text-white transition-colors",children:R?"Show Less":"Read Full Briefing"})]}),F.length>0&&C.jsx("div",{className:"bg-black/20 p-4 backdrop-blur-sm flex gap-3 overflow-x-auto",children:F.map((U,V)=>{var Q,pe,de,xe;return C.jsx("a",{href:((Q=U.web)==null?void 0:Q.uri)||((pe=U.maps)==null?void 0:pe.uri),target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 text-xs bg-white/10 hover:bg-white/20 border border-white/10 text-white px-3 py-1.5 rounded-lg transition-all truncate max-w-[120px]",children:((de=U.web)==null?void 0:de.title)||((xe=U.maps)==null?void 0:xe.title)||"Source"},V)})})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-4 px-1",children:"Campus Status"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow relative group",children:[C.jsx("span",{className:"absolute top-5 right-5 w-3 h-3 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),C.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center mb-3",children:""}),C.jsx("h4",{className:"font-bold text-slate-900",children:"OPD Services"}),C.jsx("p",{className:"text-xs text-slate-500 mt-1 font-medium",children:"Open  Closes in 4h 30m"}),C.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex gap-2 opacity-60 group-hover:opacity-100 transition-opacity",children:[C.jsxs("button",{className:"flex-1 text-xs bg-slate-50 hover:bg-slate-100 py-2 rounded-lg font-bold text-slate-600 flex items-center justify-center gap-1",children:[C.jsx(N_,{})," Call"]}),C.jsxs("button",{className:"flex-1 text-xs bg-slate-50 hover:bg-slate-100 py-2 rounded-lg font-bold text-slate-600 flex items-center justify-center gap-1",children:[C.jsx(R_,{})," Map"]})]})]}),C.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-red-100 shadow-sm hover:shadow-md transition-shadow relative group",children:[C.jsx("span",{className:"absolute top-5 right-5 px-2 py-0.5 bg-red-100 text-red-700 text-[10px] font-bold uppercase rounded-full border border-red-200",children:"Critical"}),C.jsx("div",{className:"w-10 h-10 bg-red-50 text-red-600 rounded-xl flex items-center justify-center mb-3",children:""}),C.jsx("h4",{className:"font-bold text-slate-900",children:"Emergency / Casuality"}),C.jsx("p",{className:"text-xs text-slate-500 mt-1 font-medium",children:"24/7 Operational  High Load"}),C.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex gap-2 opacity-60 group-hover:opacity-100 transition-opacity",children:[C.jsxs("button",{className:"flex-1 text-xs bg-red-50 hover:bg-red-100 py-2 rounded-lg font-bold text-red-600 flex items-center justify-center gap-1",children:[C.jsx(N_,{})," SOS"]}),C.jsxs("button",{className:"flex-1 text-xs bg-slate-50 hover:bg-slate-100 py-2 rounded-lg font-bold text-slate-600 flex items-center justify-center gap-1",children:[C.jsx(R_,{})," Route"]})]})]})]})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-end mb-4 px-1",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Community Reports"}),C.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Real-time updates from students & staff"})]}),C.jsx("div",{className:"flex bg-white p-1 rounded-lg border border-slate-200 shadow-sm",children:["All","Heavy","Closure"].map(U=>C.jsx("button",{onClick:()=>D(U),className:`px-3 py-1 rounded-md text-[10px] font-bold transition-all ${S===U?"bg-slate-800 text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:U},U))})]}),!Zi&&C.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 flex items-center gap-3 mb-6",children:[C.jsx(eA,{}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm font-bold text-orange-800",children:"Connection Offline"}),C.jsx("p",{className:"text-xs text-orange-600",children:"Community reports are currently read-only."})]})]}),C.jsx("div",{className:"space-y-4",children:M.length>0?M.map(U=>C.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all",children:C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsxs("div",{className:"flex flex-col items-center gap-1 text-slate-400 bg-slate-50 rounded-lg p-1.5 border border-slate-100",children:[C.jsx("button",{onClick:()=>J(U.id,"up"),className:"hover:text-green-600 transition-colors",children:C.jsx(tA,{})}),C.jsx("span",{className:"text-xs font-bold text-slate-700",children:U.verificationCount||0}),C.jsx("button",{onClick:()=>J(U.id,"down"),className:"hover:text-red-500 transition-colors",children:C.jsx(nA,{})})]}),C.jsxs("div",{className:"flex-1",children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsx("h4",{className:"font-bold text-slate-900 text-sm",children:U.location}),C.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:N(U.timestamp)})]}),C.jsx("p",{className:"text-sm text-slate-600 mt-1 leading-snug",children:U.description}),C.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[C.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded-full border ${U.severity==="heavy"?"bg-red-50 text-red-600 border-red-100":U.severity==="moderate"?"bg-yellow-50 text-yellow-600 border-yellow-100":"bg-green-50 text-green-600 border-green-100"}`,children:U.severity}),C.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400",children:[C.jsx(CE,{})," ",U.reporterName]})]})]})]})},U.id)):C.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-dashed border-slate-300",children:[C.jsx("div",{className:"text-slate-300 mb-2 mx-auto w-fit",children:C.jsx(tm,{})}),C.jsx("p",{className:"text-slate-500 text-sm font-medium",children:y?"No reports match your search":"No reports yet. Be the first!"})]})})]}),C.jsx("button",{onClick:()=>{Zi?q(!0):alert("Database not connected.")},className:"fixed bottom-24 right-5 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg shadow-blue-600/30 flex items-center justify-center hover:bg-blue-700 hover:scale-110 active:scale-95 transition-all z-30",children:C.jsx(sA,{})})]})},ic=({icon:t,title:e,description:n})=>C.jsxs("div",{className:"flex items-start space-x-4",children:[C.jsx("div",{className:"flex-shrink-0 text-blue-600 mt-1",children:t}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-bold text-lg text-slate-800",children:e}),C.jsx("p",{className:"text-slate-600",children:n})]})]}),_F=({onClose:t,language:e})=>{const n=oo[e];return C.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",onClick:t,children:C.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg p-6 md:p-8 space-y-6 max-h-[90vh] overflow-y-auto",onClick:i=>i.stopPropagation(),children:[C.jsxs("div",{className:"text-center",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:n.guideTitle}),C.jsx("p",{className:"text-slate-500 mt-1",children:n.guideSub})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsx(ic,{icon:C.jsx(yE,{}),title:n.guidePlanTitle,description:n.guidePlanDesc}),C.jsx(ic,{icon:C.jsx(vE,{}),title:n.guideUpdatesTitle,description:n.guideUpdatesDesc}),C.jsx(ic,{icon:C.jsx(TE,{}),title:n.guideChatTitle,description:n.guideChatDesc}),C.jsx(ic,{icon:C.jsx(tm,{}),title:n.guideReportTitle,description:n.guideReportDesc})]}),C.jsx("div",{className:"text-center pt-4",children:C.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-xl transition-colors shadow-md",children:n.gotIt})})]})})},yF=({isOpen:t,onClose:e,onSave:n,currentLocation:i})=>{const[r,o]=ie.useState("");if(ie.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=()=>{n(r)};return C.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",onClick:e,children:C.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 space-y-5",onClick:u=>u.stopPropagation(),children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Enter Location Manually"}),C.jsx("p",{className:"text-sm text-slate-500 mt-1",children:'Set your starting point by name (e.g., "Main Market", "Railway Station"). Leave blank to clear and use GPS.'})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"manual-location",className:"sr-only",children:"Manual Location"}),C.jsx("input",{id:"manual-location",type:"text",value:r,onChange:u=>o(u.target.value),placeholder:"e.g., Town Center",className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",autoFocus:!0})]}),C.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[C.jsx("button",{onClick:e,className:"px-5 py-2.5 bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 font-semibold rounded-lg transition-colors",children:"Cancel"}),C.jsx("button",{onClick:a,className:"px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors shadow-sm",children:"Save Location"})]})]})})},vF=()=>{const[t,e]=ie.useState({latitude:null,longitude:null,accuracy:null}),[n,i]=ie.useState(null),[r,o]=ie.useState(!0),a=()=>{if(!navigator.geolocation){i("Geolocation is not supported by your browser."),o(!1);return}navigator.geolocation.getCurrentPosition(u=>{e({latitude:u.coords.latitude,longitude:u.coords.longitude,accuracy:u.coords.accuracy}),o(!1),i(null)},u=>{i(u.message),o(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return ie.useEffect(()=>{a();const u=setInterval(a,5e3);return()=>clearInterval(u)},[]),{location:t,error:n,loading:r}},TF=()=>{const[t,e]=ie.useState("home"),[n,i]=ie.useState(!1),{location:r,error:o,loading:a}=vF(),[u,d]=ie.useState(null),[p,g]=ie.useState(!1),[y,v]=ie.useState(!0),[S,D]=ie.useState("en"),b=oo[S],q=async R=>{const z=R.trim();if(d(z===""?null:z),g(!1),z==="")v(!0);else{const W=await $M(z);v(W)}},A=()=>{switch(t){case"planner":return C.jsx(pF,{location:r,manualLocation:u,language:S});case"chat":return C.jsx(mF,{language:S,location:r});case"updates":return C.jsx(gF,{location:r,manualLocation:u,language:S});case"home":default:return C.jsx(GV,{setView:e,geoStatus:{error:o,loading:a},onShowInstructions:()=>i(!0),manualLocation:u,onEnterLocationManually:()=>g(!0),isScbContext:y,language:S})}},x=({activeView:R,targetView:z,icon:W,label:J})=>C.jsxs("button",{onClick:()=>e(z),className:`flex flex-col items-center justify-center w-full pt-3 pb-2 transition-all duration-200 ${R===z?"text-blue-700 transform scale-105 font-semibold":"text-slate-400 hover:text-slate-600"}`,children:[W,C.jsx("span",{className:"text-[10px] uppercase tracking-wide mt-1",children:J})]});return C.jsxs("div",{className:"h-full w-full bg-slate-50 text-slate-900 font-sans flex flex-col overflow-hidden relative",children:[n&&C.jsx(_F,{onClose:()=>i(!1),language:S}),C.jsx(yF,{isOpen:p,onClose:()=>g(!1),onSave:q,currentLocation:u}),C.jsxs("header",{className:"bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm p-4 text-center z-10 flex justify-between items-center flex-shrink-0",children:[C.jsx("h1",{className:"text-xl font-bold tracking-tight text-blue-800 flex-grow text-center",children:b.appName}),C.jsx("button",{onClick:()=>D(R=>R==="en"?"or":"en"),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-slate-100 hover:bg-slate-200 px-3 py-1.5 rounded-md text-xs font-bold border border-slate-300 text-slate-700 transition-colors shadow-sm",children:S==="en"?"":"English"})]}),C.jsx("main",{className:"flex-grow p-4 md:p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:A()}),C.jsxs("nav",{className:"bg-white border-t border-slate-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] flex justify-around z-10 flex-shrink-0 pb-safe",children:[C.jsx(x,{activeView:t,targetView:"home",icon:C.jsx(Ox,{}),label:b.navHome}),C.jsx(x,{activeView:t,targetView:"planner",icon:C.jsx(Bx,{}),label:b.navPlanner}),C.jsx(x,{activeView:t,targetView:"updates",icon:C.jsx(qx,{}),label:b.navUpdates}),C.jsx(x,{activeView:t,targetView:"chat",icon:C.jsx(zx,{}),label:b.navChat})]})]})},OC=document.getElementById("root");if(!OC)throw new Error("Could not find root element to mount to");const EF=bh.createRoot(OC);EF.render(C.jsx(gs.StrictMode,{children:C.jsx(TF,{})}));
