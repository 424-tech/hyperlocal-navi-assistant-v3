(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var lT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rv={exports:{}},Cc={},Lv={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=Symbol.for("react.element"),uT=Symbol.for("react.portal"),cT=Symbol.for("react.fragment"),hT=Symbol.for("react.strict_mode"),dT=Symbol.for("react.profiler"),fT=Symbol.for("react.provider"),pT=Symbol.for("react.context"),mT=Symbol.for("react.forward_ref"),_T=Symbol.for("react.suspense"),gT=Symbol.for("react.memo"),vT=Symbol.for("react.lazy"),_m=Symbol.iterator;function yT(t){return t===null||typeof t!="object"?null:(t=_m&&t[_m]||t["@@iterator"],typeof t=="function"?t:null)}var kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ov=Object.assign,Dv={};function uo(t,e,n){this.props=t,this.context=e,this.refs=Dv,this.updater=n||kv}uo.prototype.isReactComponent={};uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mv(){}Mv.prototype=uo.prototype;function cf(t,e,n){this.props=t,this.context=e,this.refs=Dv,this.updater=n||kv}var hf=cf.prototype=new Mv;hf.constructor=cf;Ov(hf,uo.prototype);hf.isPureReactComponent=!0;var gm=Array.isArray,bv=Object.prototype.hasOwnProperty,df={current:null},Vv={key:!0,ref:!0,__self:!0,__source:!0};function Uv(t,e,n){var r,s={},a=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(a=""+e.key),e)bv.call(e,r)&&!Vv.hasOwnProperty(r)&&(s[r]=e[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var f=Array(h),_=0;_<h;_++)f[_]=arguments[_+2];s.children=f}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:dl,type:t,key:a,ref:u,props:s,_owner:df.current}}function ET(t,e){return{$$typeof:dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ff(t){return typeof t=="object"&&t!==null&&t.$$typeof===dl}function wT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vm=/\/+/g;function ph(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wT(""+t.key):e.toString(36)}function ku(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case dl:case uT:u=!0}}if(u)return u=t,s=s(u),t=r===""?"."+ph(u,0):r,gm(s)?(n="",t!=null&&(n=t.replace(vm,"$&/")+"/"),ku(s,e,n,"",function(_){return _})):s!=null&&(ff(s)&&(s=ET(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(vm,"$&/")+"/")+t)),e.push(s)),1;if(u=0,r=r===""?".":r+":",gm(t))for(var h=0;h<t.length;h++){a=t[h];var f=r+ph(a,h);u+=ku(a,e,n,f,s)}else if(f=yT(t),typeof f=="function")for(t=f.call(t),h=0;!(a=t.next()).done;)a=a.value,f=r+ph(a,h++),u+=ku(a,e,n,f,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function uu(t,e,n){if(t==null)return t;var r=[],s=0;return ku(t,r,"","",function(a){return e.call(n,a,s++)}),r}function TT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},Ou={transition:null},IT={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Ou,ReactCurrentOwner:df};function Bv(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:uu,forEach:function(t,e,n){uu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return uu(t,function(){e++}),e},toArray:function(t){return uu(t,function(e){return e})||[]},only:function(t){if(!ff(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=uo;Te.Fragment=cT;Te.Profiler=dT;Te.PureComponent=cf;Te.StrictMode=hT;Te.Suspense=_T;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IT;Te.act=Bv;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ov({},t.props),s=t.key,a=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,u=df.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(f in e)bv.call(e,f)&&!Vv.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&h!==void 0?h[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){h=Array(f);for(var _=0;_<f;_++)h[_]=arguments[_+2];r.children=h}return{$$typeof:dl,type:t.type,key:s,ref:a,props:r,_owner:u}};Te.createContext=function(t){return t={$$typeof:pT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fT,_context:t},t.Consumer=t};Te.createElement=Uv;Te.createFactory=function(t){var e=Uv.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:mT,render:t}};Te.isValidElement=ff;Te.lazy=function(t){return{$$typeof:vT,_payload:{_status:-1,_result:t},_init:TT}};Te.memo=function(t,e){return{$$typeof:gT,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Ou.transition;Ou.transition={};try{t()}finally{Ou.transition=e}};Te.unstable_act=Bv;Te.useCallback=function(t,e){return Ft.current.useCallback(t,e)};Te.useContext=function(t){return Ft.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Ft.current.useEffect(t,e)};Te.useId=function(){return Ft.current.useId()};Te.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Ft.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};Te.useRef=function(t){return Ft.current.useRef(t)};Te.useState=function(t){return Ft.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Ft.current.useTransition()};Te.version="18.3.1";Lv.exports=Te;var ee=Lv.exports;const $s=Nv(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT=ee,ST=Symbol.for("react.element"),AT=Symbol.for("react.fragment"),PT=Object.prototype.hasOwnProperty,CT=xT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NT={key:!0,ref:!0,__self:!0,__source:!0};function Fv(t,e,n){var r,s={},a=null,u=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)PT.call(e,r)&&!NT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ST,type:t,key:a,ref:u,props:s,_owner:CT.current}}Cc.Fragment=AT;Cc.jsx=Fv;Cc.jsxs=Fv;Rv.exports=Cc;var v=Rv.exports,Yh={},jv={exports:{}},an={},zv={exports:{}},Hv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ce){var J=W.length;W.push(ce);e:for(;0<J;){var he=J-1>>>1,ve=W[he];if(0<s(ve,ce))W[he]=ce,W[J]=ve,J=he;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ce=W[0],J=W.pop();if(J!==ce){W[0]=J;e:for(var he=0,ve=W.length,Ie=ve>>>1;he<Ie;){var ke=2*(he+1)-1,ye=W[ke],pe=ke+1,dt=W[pe];if(0>s(ye,J))pe<ve&&0>s(dt,ye)?(W[he]=dt,W[pe]=J,he=pe):(W[he]=ye,W[ke]=J,he=ke);else if(pe<ve&&0>s(dt,J))W[he]=dt,W[pe]=J,he=pe;else break e}}return ce}function s(W,ce){var J=W.sortIndex-ce.sortIndex;return J!==0?J:W.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],_=[],y=1,w=null,x=3,C=!1,V=!1,U=!1,G=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(W){for(var ce=n(_);ce!==null;){if(ce.callback===null)r(_);else if(ce.startTime<=W)r(_),ce.sortIndex=ce.expirationTime,e(f,ce);else break;ce=n(_)}}function j(W){if(U=!1,k(W),!V)if(n(f)!==null)V=!0,Le(Z);else{var ce=n(_);ce!==null&&Fe(j,ce.startTime-W)}}function Z(W,ce){V=!1,U&&(U=!1,P(I),I=-1),C=!0;var J=x;try{for(k(ce),w=n(f);w!==null&&(!(w.expirationTime>ce)||W&&!b());){var he=w.callback;if(typeof he=="function"){w.callback=null,x=w.priorityLevel;var ve=he(w.expirationTime<=ce);ce=t.unstable_now(),typeof ve=="function"?w.callback=ve:w===n(f)&&r(f),k(ce)}else r(f);w=n(f)}if(w!==null)var Ie=!0;else{var ke=n(_);ke!==null&&Fe(j,ke.startTime-ce),Ie=!1}return Ie}finally{w=null,x=J,C=!1}}var $=!1,N=null,I=-1,R=5,O=-1;function b(){return!(t.unstable_now()-O<R)}function M(){if(N!==null){var W=t.unstable_now();O=W;var ce=!0;try{ce=N(!0,W)}finally{ce?S():($=!1,N=null)}}else $=!1}var S;if(typeof A=="function")S=function(){A(M)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Oe=oe.port2;oe.port1.onmessage=M,S=function(){Oe.postMessage(null)}}else S=function(){G(M,0)};function Le(W){N=W,$||($=!0,S())}function Fe(W,ce){I=G(function(){W(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){V||C||(V=!0,Le(Z))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(W){switch(x){case 1:case 2:case 3:var ce=3;break;default:ce=x}var J=x;x=ce;try{return W()}finally{x=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ce){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=x;x=W;try{return ce()}finally{x=J}},t.unstable_scheduleCallback=function(W,ce,J){var he=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?he+J:he):J=he,W){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=J+ve,W={id:y++,callback:ce,priorityLevel:W,startTime:J,expirationTime:ve,sortIndex:-1},J>he?(W.sortIndex=J,e(_,W),n(f)===null&&W===n(_)&&(U?(P(I),I=-1):U=!0,Fe(j,J-he))):(W.sortIndex=ve,e(f,W),V||C||(V=!0,Le(Z))),W},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(W){var ce=x;return function(){var J=x;x=ce;try{return W.apply(this,arguments)}finally{x=J}}}})(Hv);zv.exports=Hv;var RT=zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT=ee,on=RT;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gv=new Set,Ma={};function zi(t,e){Ys(t,e),Ys(t+"Capture",e)}function Ys(t,e){for(Ma[t]=e,t=0;t<e.length;t++)Gv.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=Object.prototype.hasOwnProperty,kT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ym={},Em={};function OT(t){return Qh.call(Em,t)?!0:Qh.call(ym,t)?!1:kT.test(t)?Em[t]=!0:(ym[t]=!0,!1)}function DT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MT(t,e,n,r){if(e===null||typeof e>"u"||DT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,s,a,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=u}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var pf=/[\-:]([a-z])/g;function mf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pf,mf);Ct[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pf,mf);Ct[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pf,mf);Ct[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _f(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MT(e,n,s,r)&&(n=null),r||s===null?OT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=LT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cu=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),Ns=Symbol.for("react.fragment"),gf=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),Wv=Symbol.for("react.provider"),Zv=Symbol.for("react.context"),vf=Symbol.for("react.forward_ref"),Xh=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),yf=Symbol.for("react.memo"),br=Symbol.for("react.lazy"),Kv=Symbol.for("react.offscreen"),wm=Symbol.iterator;function na(t){return t===null||typeof t!="object"?null:(t=wm&&t[wm]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,mh;function fa(t){if(mh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mh=e&&e[1]||""}return`
`+mh+t}var _h=!1;function gh(t,e){if(!t||_h)return"";_h=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(_){var r=_}Reflect.construct(t,[],e)}else{try{e.call()}catch(_){r=_}t.call(e.prototype)}else{try{throw Error()}catch(_){r=_}t()}}catch(_){if(_&&r&&typeof _.stack=="string"){for(var s=_.stack.split(`
`),a=r.stack.split(`
`),u=s.length-1,h=a.length-1;1<=u&&0<=h&&s[u]!==a[h];)h--;for(;1<=u&&0<=h;u--,h--)if(s[u]!==a[h]){if(u!==1||h!==1)do if(u--,h--,0>h||s[u]!==a[h]){var f=`
`+s[u].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=u&&0<=h);break}}}finally{_h=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fa(t):""}function bT(t){switch(t.tag){case 5:return fa(t.type);case 16:return fa("Lazy");case 13:return fa("Suspense");case 19:return fa("SuspenseList");case 0:case 2:case 15:return t=gh(t.type,!1),t;case 11:return t=gh(t.type.render,!1),t;case 1:return t=gh(t.type,!0),t;default:return""}}function td(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ns:return"Fragment";case Cs:return"Portal";case Jh:return"Profiler";case gf:return"StrictMode";case Xh:return"Suspense";case ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zv:return(t.displayName||"Context")+".Consumer";case Wv:return(t._context.displayName||"Context")+".Provider";case vf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yf:return e=t.displayName||null,e!==null?e:td(t.type)||"Memo";case br:e=t._payload,t=t._init;try{return td(t(e))}catch{}}return null}function VT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return td(e);case 8:return e===gf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ei(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UT(t){var e=qv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(u){r=""+u,a.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hu(t){t._valueTracker||(t._valueTracker=UT(t))}function $v(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nd(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ei(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yv(t,e){e=e.checked,e!=null&&_f(t,"checked",e,!1)}function rd(t,e){Yv(t,e);var n=ei(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?id(t,e.type,n):e.hasOwnProperty("defaultValue")&&id(t,e.type,ei(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Im(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function id(t,e,n){(e!=="number"||$u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pa=Array.isArray;function Fs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ei(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(pa(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ei(n)}}function Qv(t,e){var n=ei(e.value),r=ei(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var du,Xv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(du=du||document.createElement("div"),du.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=du.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BT=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(t){BT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wa[e]=wa[t]})});function ey(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wa.hasOwnProperty(t)&&wa[t]?(""+e).trim():e+"px"}function ty(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ey(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var FT=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ad(t,e){if(e){if(FT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function ld(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=null;function Ef(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cd=null,js=null,zs=null;function Am(t){if(t=ml(t)){if(typeof cd!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Oc(e),cd(t.stateNode,t.type,e))}}function ny(t){js?zs?zs.push(t):zs=[t]:js=t}function ry(){if(js){var t=js,e=zs;if(zs=js=null,Am(t),e)for(t=0;t<e.length;t++)Am(e[t])}}function iy(t,e){return t(e)}function sy(){}var vh=!1;function oy(t,e,n){if(vh)return t(e,n);vh=!0;try{return iy(t,e,n)}finally{vh=!1,(js!==null||zs!==null)&&(sy(),ry())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var r=Oc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var hd=!1;if(_r)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){hd=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{hd=!1}function jT(t,e,n,r,s,a,u,h,f){var _=Array.prototype.slice.call(arguments,3);try{e.apply(n,_)}catch(y){this.onError(y)}}var Ta=!1,Yu=null,Qu=!1,dd=null,zT={onError:function(t){Ta=!0,Yu=t}};function HT(t,e,n,r,s,a,u,h,f){Ta=!1,Yu=null,jT.apply(zT,arguments)}function GT(t,e,n,r,s,a,u,h,f){if(HT.apply(this,arguments),Ta){if(Ta){var _=Yu;Ta=!1,Yu=null}else throw Error(Q(198));Qu||(Qu=!0,dd=_)}}function Hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ay(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pm(t){if(Hi(t)!==t)throw Error(Q(188))}function WT(t){var e=t.alternate;if(!e){if(e=Hi(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Pm(s),t;if(a===r)return Pm(s),e;a=a.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=a;else{for(var u=!1,h=s.child;h;){if(h===n){u=!0,n=s,r=a;break}if(h===r){u=!0,r=s,n=a;break}h=h.sibling}if(!u){for(h=a.child;h;){if(h===n){u=!0,n=a,r=s;break}if(h===r){u=!0,r=a,n=s;break}h=h.sibling}if(!u)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function ly(t){return t=WT(t),t!==null?uy(t):null}function uy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uy(t);if(e!==null)return e;t=t.sibling}return null}var cy=on.unstable_scheduleCallback,Cm=on.unstable_cancelCallback,ZT=on.unstable_shouldYield,KT=on.unstable_requestPaint,it=on.unstable_now,qT=on.unstable_getCurrentPriorityLevel,wf=on.unstable_ImmediatePriority,hy=on.unstable_UserBlockingPriority,Ju=on.unstable_NormalPriority,$T=on.unstable_LowPriority,dy=on.unstable_IdlePriority,Nc=null,Zn=null;function YT(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Nc,t,void 0,(t.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:XT,QT=Math.log,JT=Math.LN2;function XT(t){return t>>>=0,t===0?32:31-(QT(t)/JT|0)|0}var fu=64,pu=4194304;function ma(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,u=n&268435455;if(u!==0){var h=u&~s;h!==0?r=ma(h):(a&=u,a!==0&&(r=ma(a)))}else u=n&~s,u!==0?r=ma(u):a!==0&&(r=ma(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Dn(e),s=1<<n,r|=t[n],e&=~s;return r}function eI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var u=31-Dn(a),h=1<<u,f=s[u];f===-1?(!(h&n)||h&r)&&(s[u]=eI(h,e)):f<=e&&(t.expiredLanes|=h),a&=~h}}function fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fy(){var t=fu;return fu<<=1,!(fu&4194240)&&(fu=64),t}function yh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dn(e),t[e]=n}function nI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Dn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function Tf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Dn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Me=0;function py(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var my,If,_y,gy,vy,pd=!1,mu=[],Gr=null,Wr=null,Zr=null,Ua=new Map,Ba=new Map,Br=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nm(t,e){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(e.pointerId)}}function ia(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=ml(e),e!==null&&If(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function iI(t,e,n,r,s){switch(e){case"focusin":return Gr=ia(Gr,t,e,n,r,s),!0;case"dragenter":return Wr=ia(Wr,t,e,n,r,s),!0;case"mouseover":return Zr=ia(Zr,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Ua.set(a,ia(Ua.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Ba.set(a,ia(Ba.get(a)||null,t,e,n,r,s)),!0}return!1}function yy(t){var e=Ai(t.target);if(e!==null){var n=Hi(e);if(n!==null){if(e=n.tag,e===13){if(e=ay(n),e!==null){t.blockedOn=e,vy(t.priority,function(){_y(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ud=r,n.target.dispatchEvent(r),ud=null}else return e=ml(n),e!==null&&If(e),t.blockedOn=n,!1;e.shift()}return!0}function Rm(t,e,n){Du(t)&&n.delete(e)}function sI(){pd=!1,Gr!==null&&Du(Gr)&&(Gr=null),Wr!==null&&Du(Wr)&&(Wr=null),Zr!==null&&Du(Zr)&&(Zr=null),Ua.forEach(Rm),Ba.forEach(Rm)}function sa(t,e){t.blockedOn===e&&(t.blockedOn=null,pd||(pd=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,sI)))}function Fa(t){function e(s){return sa(s,t)}if(0<mu.length){sa(mu[0],t);for(var n=1;n<mu.length;n++){var r=mu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gr!==null&&sa(Gr,t),Wr!==null&&sa(Wr,t),Zr!==null&&sa(Zr,t),Ua.forEach(e),Ba.forEach(e),n=0;n<Br.length;n++)r=Br[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Br.length&&(n=Br[0],n.blockedOn===null);)yy(n),n.blockedOn===null&&Br.shift()}var Hs=Ir.ReactCurrentBatchConfig,ec=!0;function oI(t,e,n,r){var s=Me,a=Hs.transition;Hs.transition=null;try{Me=1,xf(t,e,n,r)}finally{Me=s,Hs.transition=a}}function aI(t,e,n,r){var s=Me,a=Hs.transition;Hs.transition=null;try{Me=4,xf(t,e,n,r)}finally{Me=s,Hs.transition=a}}function xf(t,e,n,r){if(ec){var s=md(t,e,n,r);if(s===null)Nh(t,e,r,tc,n),Nm(t,r);else if(iI(s,t,e,n,r))r.stopPropagation();else if(Nm(t,r),e&4&&-1<rI.indexOf(t)){for(;s!==null;){var a=ml(s);if(a!==null&&my(a),a=md(t,e,n,r),a===null&&Nh(t,e,r,tc,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Nh(t,e,r,null,n)}}var tc=null;function md(t,e,n,r){if(tc=null,t=Ef(r),t=Ai(t),t!==null)if(e=Hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ay(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tc=t,null}function Ey(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qT()){case wf:return 1;case hy:return 4;case Ju:case $T:return 16;case dy:return 536870912;default:return 16}default:return 16}}var jr=null,Sf=null,Mu=null;function wy(){if(Mu)return Mu;var t,e=Sf,n=e.length,r,s="value"in jr?jr.value:jr.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var u=n-t;for(r=1;r<=u&&e[n-r]===s[a-r];r++);return Mu=s.slice(t,1<r?1-r:void 0)}function bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _u(){return!0}function Lm(){return!1}function ln(t){function e(n,r,s,a,u){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?_u:Lm,this.isPropagationStopped=Lm,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_u)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_u)},persist:function(){},isPersistent:_u}),e}var co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Af=ln(co),pl=Je({},co,{view:0,detail:0}),lI=ln(pl),Eh,wh,oa,Rc=Je({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(Eh=t.screenX-oa.screenX,wh=t.screenY-oa.screenY):wh=Eh=0,oa=t),Eh)},movementY:function(t){return"movementY"in t?t.movementY:wh}}),km=ln(Rc),uI=Je({},Rc,{dataTransfer:0}),cI=ln(uI),hI=Je({},pl,{relatedTarget:0}),Th=ln(hI),dI=Je({},co,{animationName:0,elapsedTime:0,pseudoElement:0}),fI=ln(dI),pI=Je({},co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mI=ln(pI),_I=Je({},co,{data:0}),Om=ln(_I),gI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yI[t])?!!e[t]:!1}function Pf(){return EI}var wI=Je({},pl,{key:function(t){if(t.key){var e=gI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pf,charCode:function(t){return t.type==="keypress"?bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TI=ln(wI),II=Je({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dm=ln(II),xI=Je({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pf}),SI=ln(xI),AI=Je({},co,{propertyName:0,elapsedTime:0,pseudoElement:0}),PI=ln(AI),CI=Je({},Rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NI=ln(CI),RI=[9,13,27,32],Cf=_r&&"CompositionEvent"in window,Ia=null;_r&&"documentMode"in document&&(Ia=document.documentMode);var LI=_r&&"TextEvent"in window&&!Ia,Ty=_r&&(!Cf||Ia&&8<Ia&&11>=Ia),Mm=" ",bm=!1;function Iy(t,e){switch(t){case"keyup":return RI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rs=!1;function kI(t,e){switch(t){case"compositionend":return xy(e);case"keypress":return e.which!==32?null:(bm=!0,Mm);case"textInput":return t=e.data,t===Mm&&bm?null:t;default:return null}}function OI(t,e){if(Rs)return t==="compositionend"||!Cf&&Iy(t,e)?(t=wy(),Mu=Sf=jr=null,Rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ty&&e.locale!=="ko"?null:e.data;default:return null}}var DI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DI[t.type]:e==="textarea"}function Sy(t,e,n,r){ny(r),e=nc(e,"onChange"),0<e.length&&(n=new Af("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xa=null,ja=null;function MI(t){by(t,0)}function Lc(t){var e=Os(t);if($v(e))return t}function bI(t,e){if(t==="change")return e}var Ay=!1;if(_r){var Ih;if(_r){var xh="oninput"in document;if(!xh){var Um=document.createElement("div");Um.setAttribute("oninput","return;"),xh=typeof Um.oninput=="function"}Ih=xh}else Ih=!1;Ay=Ih&&(!document.documentMode||9<document.documentMode)}function Bm(){xa&&(xa.detachEvent("onpropertychange",Py),ja=xa=null)}function Py(t){if(t.propertyName==="value"&&Lc(ja)){var e=[];Sy(e,ja,t,Ef(t)),oy(MI,e)}}function VI(t,e,n){t==="focusin"?(Bm(),xa=e,ja=n,xa.attachEvent("onpropertychange",Py)):t==="focusout"&&Bm()}function UI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lc(ja)}function BI(t,e){if(t==="click")return Lc(e)}function FI(t,e){if(t==="input"||t==="change")return Lc(e)}function jI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:jI;function za(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qh.call(e,s)||!bn(t[s],e[s]))return!1}return!0}function Fm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jm(t,e){var n=Fm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fm(n)}}function Cy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ny(){for(var t=window,e=$u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$u(t.document)}return e}function Nf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zI(t){var e=Ny(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cy(n.ownerDocument.documentElement,n)){if(r!==null&&Nf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=jm(n,a);var u=jm(n,r);s&&u&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HI=_r&&"documentMode"in document&&11>=document.documentMode,Ls=null,_d=null,Sa=null,gd=!1;function zm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gd||Ls==null||Ls!==$u(r)||(r=Ls,"selectionStart"in r&&Nf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sa&&za(Sa,r)||(Sa=r,r=nc(_d,"onSelect"),0<r.length&&(e=new Af("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ls)))}function gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},Sh={},Ry={};_r&&(Ry=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function kc(t){if(Sh[t])return Sh[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ry)return Sh[t]=e[n];return t}var Ly=kc("animationend"),ky=kc("animationiteration"),Oy=kc("animationstart"),Dy=kc("transitionend"),My=new Map,Hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(t,e){My.set(t,e),zi(e,[t])}for(var Ah=0;Ah<Hm.length;Ah++){var Ph=Hm[Ah],GI=Ph.toLowerCase(),WI=Ph[0].toUpperCase()+Ph.slice(1);si(GI,"on"+WI)}si(Ly,"onAnimationEnd");si(ky,"onAnimationIteration");si(Oy,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(Dy,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZI=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function Gm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GT(r,e,void 0,t),t.currentTarget=null}function by(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var u=r.length-1;0<=u;u--){var h=r[u],f=h.instance,_=h.currentTarget;if(h=h.listener,f!==a&&s.isPropagationStopped())break e;Gm(s,h,_),a=f}else for(u=0;u<r.length;u++){if(h=r[u],f=h.instance,_=h.currentTarget,h=h.listener,f!==a&&s.isPropagationStopped())break e;Gm(s,h,_),a=f}}}if(Qu)throw t=dd,Qu=!1,dd=null,t}function ze(t,e){var n=e[Td];n===void 0&&(n=e[Td]=new Set);var r=t+"__bubble";n.has(r)||(Vy(e,t,2,!1),n.add(r))}function Ch(t,e,n){var r=0;e&&(r|=4),Vy(n,t,r,e)}var vu="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[vu]){t[vu]=!0,Gv.forEach(function(n){n!=="selectionchange"&&(ZI.has(n)||Ch(n,!1,t),Ch(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vu]||(e[vu]=!0,Ch("selectionchange",!1,e))}}function Vy(t,e,n,r){switch(Ey(e)){case 1:var s=oI;break;case 4:s=aI;break;default:s=xf}n=s.bind(null,e,n,t),s=void 0,!hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Nh(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(u===4)for(u=r.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;u=u.return}for(;h!==null;){if(u=Ai(h),u===null)return;if(f=u.tag,f===5||f===6){r=a=u;continue e}h=h.parentNode}}r=r.return}oy(function(){var _=a,y=Ef(n),w=[];e:{var x=My.get(t);if(x!==void 0){var C=Af,V=t;switch(t){case"keypress":if(bu(n)===0)break e;case"keydown":case"keyup":C=TI;break;case"focusin":V="focus",C=Th;break;case"focusout":V="blur",C=Th;break;case"beforeblur":case"afterblur":C=Th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=cI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=SI;break;case Ly:case ky:case Oy:C=fI;break;case Dy:C=PI;break;case"scroll":C=lI;break;case"wheel":C=NI;break;case"copy":case"cut":case"paste":C=mI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Dm}var U=(e&4)!==0,G=!U&&t==="scroll",P=U?x!==null?x+"Capture":null:x;U=[];for(var A=_,k;A!==null;){k=A;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,P!==null&&(j=Va(A,P),j!=null&&U.push(Ga(A,j,k)))),G)break;A=A.return}0<U.length&&(x=new C(x,V,null,n,y),w.push({event:x,listeners:U}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",x&&n!==ud&&(V=n.relatedTarget||n.fromElement)&&(Ai(V)||V[gr]))break e;if((C||x)&&(x=y.window===y?y:(x=y.ownerDocument)?x.defaultView||x.parentWindow:window,C?(V=n.relatedTarget||n.toElement,C=_,V=V?Ai(V):null,V!==null&&(G=Hi(V),V!==G||V.tag!==5&&V.tag!==6)&&(V=null)):(C=null,V=_),C!==V)){if(U=km,j="onMouseLeave",P="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(U=Dm,j="onPointerLeave",P="onPointerEnter",A="pointer"),G=C==null?x:Os(C),k=V==null?x:Os(V),x=new U(j,A+"leave",C,n,y),x.target=G,x.relatedTarget=k,j=null,Ai(y)===_&&(U=new U(P,A+"enter",V,n,y),U.target=k,U.relatedTarget=G,j=U),G=j,C&&V)t:{for(U=C,P=V,A=0,k=U;k;k=xs(k))A++;for(k=0,j=P;j;j=xs(j))k++;for(;0<A-k;)U=xs(U),A--;for(;0<k-A;)P=xs(P),k--;for(;A--;){if(U===P||P!==null&&U===P.alternate)break t;U=xs(U),P=xs(P)}U=null}else U=null;C!==null&&Wm(w,x,C,U,!1),V!==null&&G!==null&&Wm(w,G,V,U,!0)}}e:{if(x=_?Os(_):window,C=x.nodeName&&x.nodeName.toLowerCase(),C==="select"||C==="input"&&x.type==="file")var Z=bI;else if(Vm(x))if(Ay)Z=FI;else{Z=UI;var $=VI}else(C=x.nodeName)&&C.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(Z=BI);if(Z&&(Z=Z(t,_))){Sy(w,Z,n,y);break e}$&&$(t,x,_),t==="focusout"&&($=x._wrapperState)&&$.controlled&&x.type==="number"&&id(x,"number",x.value)}switch($=_?Os(_):window,t){case"focusin":(Vm($)||$.contentEditable==="true")&&(Ls=$,_d=_,Sa=null);break;case"focusout":Sa=_d=Ls=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,zm(w,n,y);break;case"selectionchange":if(HI)break;case"keydown":case"keyup":zm(w,n,y)}var N;if(Cf)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Rs?Iy(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Ty&&n.locale!=="ko"&&(Rs||I!=="onCompositionStart"?I==="onCompositionEnd"&&Rs&&(N=wy()):(jr=y,Sf="value"in jr?jr.value:jr.textContent,Rs=!0)),$=nc(_,I),0<$.length&&(I=new Om(I,t,null,n,y),w.push({event:I,listeners:$}),N?I.data=N:(N=xy(n),N!==null&&(I.data=N)))),(N=LI?kI(t,n):OI(t,n))&&(_=nc(_,"onBeforeInput"),0<_.length&&(y=new Om("onBeforeInput","beforeinput",null,n,y),w.push({event:y,listeners:_}),y.data=N))}by(w,e)})}function Ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Va(t,n),a!=null&&r.unshift(Ga(t,a,s)),a=Va(t,e),a!=null&&r.push(Ga(t,a,s))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wm(t,e,n,r,s){for(var a=e._reactName,u=[];n!==null&&n!==r;){var h=n,f=h.alternate,_=h.stateNode;if(f!==null&&f===r)break;h.tag===5&&_!==null&&(h=_,s?(f=Va(n,a),f!=null&&u.unshift(Ga(n,f,h))):s||(f=Va(n,a),f!=null&&u.push(Ga(n,f,h)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var KI=/\r\n?/g,qI=/\u0000|\uFFFD/g;function Zm(t){return(typeof t=="string"?t:""+t).replace(KI,`
`).replace(qI,"")}function yu(t,e,n){if(e=Zm(e),Zm(t)!==e&&n)throw Error(Q(425))}function rc(){}var vd=null,yd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,$I=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,YI=typeof queueMicrotask=="function"?queueMicrotask:typeof Km<"u"?function(t){return Km.resolve(null).then(t).catch(QI)}:wd;function QI(t){setTimeout(function(){throw t})}function Rh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fa(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ho,Wa="__reactProps$"+ho,gr="__reactContainer$"+ho,Td="__reactEvents$"+ho,JI="__reactListeners$"+ho,XI="__reactHandles$"+ho;function Ai(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gr]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qm(t);t!==null;){if(n=t[Wn])return n;t=qm(t)}return e}t=n,n=t.parentNode}return null}function ml(t){return t=t[Wn]||t[gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Oc(t){return t[Wa]||null}var Id=[],Ds=-1;function oi(t){return{current:t}}function Ge(t){0>Ds||(t.current=Id[Ds],Id[Ds]=null,Ds--)}function je(t,e){Ds++,Id[Ds]=t.current,t.current=e}var ti={},Mt=oi(ti),qt=oi(!1),Di=ti;function Qs(t,e){var n=t.type.contextTypes;if(!n)return ti;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $t(t){return t=t.childContextTypes,t!=null}function ic(){Ge(qt),Ge(Mt)}function $m(t,e,n){if(Mt.current!==ti)throw Error(Q(168));je(Mt,e),je(qt,n)}function Uy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,VT(t)||"Unknown",s));return Je({},n,r)}function sc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ti,Di=Mt.current,je(Mt,t),je(qt,qt.current),!0}function Ym(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=Uy(t,e,Di),r.__reactInternalMemoizedMergedChildContext=t,Ge(qt),Ge(Mt),je(Mt,t)):Ge(qt),je(qt,n)}var dr=null,Dc=!1,Lh=!1;function By(t){dr===null?dr=[t]:dr.push(t)}function ex(t){Dc=!0,By(t)}function ai(){if(!Lh&&dr!==null){Lh=!0;var t=0,e=Me;try{var n=dr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dr=null,Dc=!1}catch(s){throw dr!==null&&(dr=dr.slice(t+1)),cy(wf,ai),s}finally{Me=e,Lh=!1}}return null}var Ms=[],bs=0,oc=null,ac=0,vn=[],yn=0,Mi=null,fr=1,pr="";function xi(t,e){Ms[bs++]=ac,Ms[bs++]=oc,oc=t,ac=e}function Fy(t,e,n){vn[yn++]=fr,vn[yn++]=pr,vn[yn++]=Mi,Mi=t;var r=fr;t=pr;var s=32-Dn(r)-1;r&=~(1<<s),n+=1;var a=32-Dn(e)+s;if(30<a){var u=s-s%5;a=(r&(1<<u)-1).toString(32),r>>=u,s-=u,fr=1<<32-Dn(e)+s|n<<s|r,pr=a+t}else fr=1<<a|n<<s|r,pr=t}function Rf(t){t.return!==null&&(xi(t,1),Fy(t,1,0))}function Lf(t){for(;t===oc;)oc=Ms[--bs],Ms[bs]=null,ac=Ms[--bs],Ms[bs]=null;for(;t===Mi;)Mi=vn[--yn],vn[yn]=null,pr=vn[--yn],vn[yn]=null,fr=vn[--yn],vn[yn]=null}var sn=null,nn=null,Ke=!1,kn=null;function jy(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sn=t,nn=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sn=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mi!==null?{id:fr,overflow:pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sn=t,nn=null,!0):!1;default:return!1}}function xd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sd(t){if(Ke){var e=nn;if(e){var n=e;if(!Qm(t,e)){if(xd(t))throw Error(Q(418));e=Kr(n.nextSibling);var r=sn;e&&Qm(t,e)?jy(r,n):(t.flags=t.flags&-4097|2,Ke=!1,sn=t)}}else{if(xd(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ke=!1,sn=t}}}function Jm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function Eu(t){if(t!==sn)return!1;if(!Ke)return Jm(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=nn)){if(xd(t))throw zy(),Error(Q(418));for(;e;)jy(t,e),e=Kr(e.nextSibling)}if(Jm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nn=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=sn?Kr(t.stateNode.nextSibling):null;return!0}function zy(){for(var t=nn;t;)t=Kr(t.nextSibling)}function Js(){nn=sn=null,Ke=!1}function kf(t){kn===null?kn=[t]:kn.push(t)}var tx=Ir.ReactCurrentBatchConfig;function aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(u){var h=s.refs;u===null?delete h[a]:h[a]=u},e._stringRef=a,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function wu(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xm(t){var e=t._init;return e(t._payload)}function Hy(t){function e(P,A){if(t){var k=P.deletions;k===null?(P.deletions=[A],P.flags|=16):k.push(A)}}function n(P,A){if(!t)return null;for(;A!==null;)e(P,A),A=A.sibling;return null}function r(P,A){for(P=new Map;A!==null;)A.key!==null?P.set(A.key,A):P.set(A.index,A),A=A.sibling;return P}function s(P,A){return P=Qr(P,A),P.index=0,P.sibling=null,P}function a(P,A,k){return P.index=k,t?(k=P.alternate,k!==null?(k=k.index,k<A?(P.flags|=2,A):k):(P.flags|=2,A)):(P.flags|=1048576,A)}function u(P){return t&&P.alternate===null&&(P.flags|=2),P}function h(P,A,k,j){return A===null||A.tag!==6?(A=Uh(k,P.mode,j),A.return=P,A):(A=s(A,k),A.return=P,A)}function f(P,A,k,j){var Z=k.type;return Z===Ns?y(P,A,k.props.children,j,k.key):A!==null&&(A.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===br&&Xm(Z)===A.type)?(j=s(A,k.props),j.ref=aa(P,A,k),j.return=P,j):(j=Hu(k.type,k.key,k.props,null,P.mode,j),j.ref=aa(P,A,k),j.return=P,j)}function _(P,A,k,j){return A===null||A.tag!==4||A.stateNode.containerInfo!==k.containerInfo||A.stateNode.implementation!==k.implementation?(A=Bh(k,P.mode,j),A.return=P,A):(A=s(A,k.children||[]),A.return=P,A)}function y(P,A,k,j,Z){return A===null||A.tag!==7?(A=Li(k,P.mode,j,Z),A.return=P,A):(A=s(A,k),A.return=P,A)}function w(P,A,k){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Uh(""+A,P.mode,k),A.return=P,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case cu:return k=Hu(A.type,A.key,A.props,null,P.mode,k),k.ref=aa(P,null,A),k.return=P,k;case Cs:return A=Bh(A,P.mode,k),A.return=P,A;case br:var j=A._init;return w(P,j(A._payload),k)}if(pa(A)||na(A))return A=Li(A,P.mode,k,null),A.return=P,A;wu(P,A)}return null}function x(P,A,k,j){var Z=A!==null?A.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return Z!==null?null:h(P,A,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case cu:return k.key===Z?f(P,A,k,j):null;case Cs:return k.key===Z?_(P,A,k,j):null;case br:return Z=k._init,x(P,A,Z(k._payload),j)}if(pa(k)||na(k))return Z!==null?null:y(P,A,k,j,null);wu(P,k)}return null}function C(P,A,k,j,Z){if(typeof j=="string"&&j!==""||typeof j=="number")return P=P.get(k)||null,h(A,P,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case cu:return P=P.get(j.key===null?k:j.key)||null,f(A,P,j,Z);case Cs:return P=P.get(j.key===null?k:j.key)||null,_(A,P,j,Z);case br:var $=j._init;return C(P,A,k,$(j._payload),Z)}if(pa(j)||na(j))return P=P.get(k)||null,y(A,P,j,Z,null);wu(A,j)}return null}function V(P,A,k,j){for(var Z=null,$=null,N=A,I=A=0,R=null;N!==null&&I<k.length;I++){N.index>I?(R=N,N=null):R=N.sibling;var O=x(P,N,k[I],j);if(O===null){N===null&&(N=R);break}t&&N&&O.alternate===null&&e(P,N),A=a(O,A,I),$===null?Z=O:$.sibling=O,$=O,N=R}if(I===k.length)return n(P,N),Ke&&xi(P,I),Z;if(N===null){for(;I<k.length;I++)N=w(P,k[I],j),N!==null&&(A=a(N,A,I),$===null?Z=N:$.sibling=N,$=N);return Ke&&xi(P,I),Z}for(N=r(P,N);I<k.length;I++)R=C(N,P,I,k[I],j),R!==null&&(t&&R.alternate!==null&&N.delete(R.key===null?I:R.key),A=a(R,A,I),$===null?Z=R:$.sibling=R,$=R);return t&&N.forEach(function(b){return e(P,b)}),Ke&&xi(P,I),Z}function U(P,A,k,j){var Z=na(k);if(typeof Z!="function")throw Error(Q(150));if(k=Z.call(k),k==null)throw Error(Q(151));for(var $=Z=null,N=A,I=A=0,R=null,O=k.next();N!==null&&!O.done;I++,O=k.next()){N.index>I?(R=N,N=null):R=N.sibling;var b=x(P,N,O.value,j);if(b===null){N===null&&(N=R);break}t&&N&&b.alternate===null&&e(P,N),A=a(b,A,I),$===null?Z=b:$.sibling=b,$=b,N=R}if(O.done)return n(P,N),Ke&&xi(P,I),Z;if(N===null){for(;!O.done;I++,O=k.next())O=w(P,O.value,j),O!==null&&(A=a(O,A,I),$===null?Z=O:$.sibling=O,$=O);return Ke&&xi(P,I),Z}for(N=r(P,N);!O.done;I++,O=k.next())O=C(N,P,I,O.value,j),O!==null&&(t&&O.alternate!==null&&N.delete(O.key===null?I:O.key),A=a(O,A,I),$===null?Z=O:$.sibling=O,$=O);return t&&N.forEach(function(M){return e(P,M)}),Ke&&xi(P,I),Z}function G(P,A,k,j){if(typeof k=="object"&&k!==null&&k.type===Ns&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case cu:e:{for(var Z=k.key,$=A;$!==null;){if($.key===Z){if(Z=k.type,Z===Ns){if($.tag===7){n(P,$.sibling),A=s($,k.props.children),A.return=P,P=A;break e}}else if($.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===br&&Xm(Z)===$.type){n(P,$.sibling),A=s($,k.props),A.ref=aa(P,$,k),A.return=P,P=A;break e}n(P,$);break}else e(P,$);$=$.sibling}k.type===Ns?(A=Li(k.props.children,P.mode,j,k.key),A.return=P,P=A):(j=Hu(k.type,k.key,k.props,null,P.mode,j),j.ref=aa(P,A,k),j.return=P,P=j)}return u(P);case Cs:e:{for($=k.key;A!==null;){if(A.key===$)if(A.tag===4&&A.stateNode.containerInfo===k.containerInfo&&A.stateNode.implementation===k.implementation){n(P,A.sibling),A=s(A,k.children||[]),A.return=P,P=A;break e}else{n(P,A);break}else e(P,A);A=A.sibling}A=Bh(k,P.mode,j),A.return=P,P=A}return u(P);case br:return $=k._init,G(P,A,$(k._payload),j)}if(pa(k))return V(P,A,k,j);if(na(k))return U(P,A,k,j);wu(P,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,A!==null&&A.tag===6?(n(P,A.sibling),A=s(A,k),A.return=P,P=A):(n(P,A),A=Uh(k,P.mode,j),A.return=P,P=A),u(P)):n(P,A)}return G}var Xs=Hy(!0),Gy=Hy(!1),lc=oi(null),uc=null,Vs=null,Of=null;function Df(){Of=Vs=uc=null}function Mf(t){var e=lc.current;Ge(lc),t._currentValue=e}function Ad(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gs(t,e){uc=t,Of=Vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(Of!==t)if(t={context:t,memoizedValue:e,next:null},Vs===null){if(uc===null)throw Error(Q(308));Vs=t,uc.dependencies={lanes:0,firstContext:t}}else Vs=Vs.next=t;return e}var Pi=null;function bf(t){Pi===null?Pi=[t]:Pi.push(t)}function Wy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bf(e)):(n.next=s.next,s.next=n),e.interleaved=n,vr(t,r)}function vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vr=!1;function Vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vr(t,n)}return s=r.interleaved,s===null?(e.next=e,bf(r)):(e.next=s.next,s.next=e),r.interleaved=e,vr(t,n)}function Vu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tf(t,n)}}function e_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cc(t,e,n,r){var s=t.updateQueue;Vr=!1;var a=s.firstBaseUpdate,u=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var f=h,_=f.next;f.next=null,u===null?a=_:u.next=_,u=f;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==u&&(h===null?y.firstBaseUpdate=_:h.next=_,y.lastBaseUpdate=f))}if(a!==null){var w=s.baseState;u=0,y=_=f=null,h=a;do{var x=h.lane,C=h.eventTime;if((r&x)===x){y!==null&&(y=y.next={eventTime:C,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var V=t,U=h;switch(x=e,C=n,U.tag){case 1:if(V=U.payload,typeof V=="function"){w=V.call(C,w,x);break e}w=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=U.payload,x=typeof V=="function"?V.call(C,w,x):V,x==null)break e;w=Je({},w,x);break e;case 2:Vr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[h]:x.push(h))}else C={eventTime:C,lane:x,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(_=y=C,f=w):y=y.next=C,u|=x;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;x=h,h=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(y===null&&(f=w),s.baseState=f,s.firstBaseUpdate=_,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do u|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Vi|=u,t.lanes=u,t.memoizedState=w}}function t_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var _l={},Kn=oi(_l),Za=oi(_l),Ka=oi(_l);function Ci(t){if(t===_l)throw Error(Q(174));return t}function Uf(t,e){switch(je(Ka,e),je(Za,t),je(Kn,_l),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=od(e,t)}Ge(Kn),je(Kn,e)}function eo(){Ge(Kn),Ge(Za),Ge(Ka)}function Ky(t){Ci(Ka.current);var e=Ci(Kn.current),n=od(e,t.type);e!==n&&(je(Za,t),je(Kn,n))}function Bf(t){Za.current===t&&(Ge(Kn),Ge(Za))}var Ye=oi(0);function hc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kh=[];function Ff(){for(var t=0;t<kh.length;t++)kh[t]._workInProgressVersionPrimary=null;kh.length=0}var Uu=Ir.ReactCurrentDispatcher,Oh=Ir.ReactCurrentBatchConfig,bi=0,Qe=null,ft=null,Et=null,dc=!1,Aa=!1,qa=0,nx=0;function Rt(){throw Error(Q(321))}function jf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function zf(t,e,n,r,s,a){if(bi=a,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uu.current=t===null||t.memoizedState===null?ox:ax,t=n(r,s),Aa){a=0;do{if(Aa=!1,qa=0,25<=a)throw Error(Q(301));a+=1,Et=ft=null,e.updateQueue=null,Uu.current=lx,t=n(r,s)}while(Aa)}if(Uu.current=fc,e=ft!==null&&ft.next!==null,bi=0,Et=ft=Qe=null,dc=!1,e)throw Error(Q(300));return t}function Hf(){var t=qa!==0;return qa=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Qe.memoizedState=Et=t:Et=Et.next=t,Et}function In(){if(ft===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=Et===null?Qe.memoizedState:Et.next;if(e!==null)Et=e,ft=t;else{if(t===null)throw Error(Q(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Et===null?Qe.memoizedState=Et=t:Et=Et.next=t}return Et}function $a(t,e){return typeof e=="function"?e(t):e}function Dh(t){var e=In(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=ft,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var u=s.next;s.next=a.next,a.next=u}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var h=u=null,f=null,_=a;do{var y=_.lane;if((bi&y)===y)f!==null&&(f=f.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),r=_.hasEagerState?_.eagerState:t(r,_.action);else{var w={lane:y,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};f===null?(h=f=w,u=r):f=f.next=w,Qe.lanes|=y,Vi|=y}_=_.next}while(_!==null&&_!==a);f===null?u=r:f.next=h,bn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=u,e.baseQueue=f,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Qe.lanes|=a,Vi|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mh(t){var e=In(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do a=t(a,u.action),u=u.next;while(u!==s);bn(a,e.memoizedState)||(Kt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function qy(){}function $y(t,e){var n=Qe,r=In(),s=e(),a=!bn(r.memoizedState,s);if(a&&(r.memoizedState=s,Kt=!0),r=r.queue,Gf(Jy.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Ya(9,Qy.bind(null,n,r,s,e),void 0,null),wt===null)throw Error(Q(349));bi&30||Yy(n,e,s)}return s}function Yy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qy(t,e,n,r){e.value=n,e.getSnapshot=r,Xy(e)&&e0(t)}function Jy(t,e,n){return n(function(){Xy(e)&&e0(t)})}function Xy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function e0(t){var e=vr(t,1);e!==null&&Mn(e,t,1,-1)}function n_(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=sx.bind(null,Qe,t),[e.memoizedState,t]}function Ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t0(){return In().memoizedState}function Bu(t,e,n,r){var s=Gn();Qe.flags|=t,s.memoizedState=Ya(1|e,n,void 0,r===void 0?null:r)}function Mc(t,e,n,r){var s=In();r=r===void 0?null:r;var a=void 0;if(ft!==null){var u=ft.memoizedState;if(a=u.destroy,r!==null&&jf(r,u.deps)){s.memoizedState=Ya(e,n,a,r);return}}Qe.flags|=t,s.memoizedState=Ya(1|e,n,a,r)}function r_(t,e){return Bu(8390656,8,t,e)}function Gf(t,e){return Mc(2048,8,t,e)}function n0(t,e){return Mc(4,2,t,e)}function r0(t,e){return Mc(4,4,t,e)}function i0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s0(t,e,n){return n=n!=null?n.concat([t]):null,Mc(4,4,i0.bind(null,e,t),n)}function Wf(){}function o0(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function a0(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function l0(t,e,n){return bi&21?(bn(n,e)||(n=fy(),Qe.lanes|=n,Vi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function rx(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Oh.transition;Oh.transition={};try{t(!1),e()}finally{Me=n,Oh.transition=r}}function u0(){return In().memoizedState}function ix(t,e,n){var r=Yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},c0(t))h0(e,n);else if(n=Wy(t,e,n,r),n!==null){var s=Bt();Mn(n,t,r,s),d0(n,e,r)}}function sx(t,e,n){var r=Yr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(c0(t))h0(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var u=e.lastRenderedState,h=a(u,n);if(s.hasEagerState=!0,s.eagerState=h,bn(h,u)){var f=e.interleaved;f===null?(s.next=s,bf(e)):(s.next=f.next,f.next=s),e.interleaved=s;return}}catch{}finally{}n=Wy(t,e,s,r),n!==null&&(s=Bt(),Mn(n,t,r,s),d0(n,e,r))}}function c0(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function h0(t,e){Aa=dc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function d0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tf(t,n)}}var fc={readContext:Tn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},ox={readContext:Tn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:r_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bu(4194308,4,i0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bu(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ix.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:n_,useDebugValue:Wf,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=n_(!1),e=t[0];return t=rx.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,s=Gn();if(Ke){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),wt===null)throw Error(Q(349));bi&30||Yy(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,r_(Jy.bind(null,r,a,t),[t]),r.flags|=2048,Ya(9,Qy.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Gn(),e=wt.identifierPrefix;if(Ke){var n=pr,r=fr;n=(r&~(1<<32-Dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ax={readContext:Tn,useCallback:o0,useContext:Tn,useEffect:Gf,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:a0,useReducer:Dh,useRef:t0,useState:function(){return Dh($a)},useDebugValue:Wf,useDeferredValue:function(t){var e=In();return l0(e,ft.memoizedState,t)},useTransition:function(){var t=Dh($a)[0],e=In().memoizedState;return[t,e]},useMutableSource:qy,useSyncExternalStore:$y,useId:u0,unstable_isNewReconciler:!1},lx={readContext:Tn,useCallback:o0,useContext:Tn,useEffect:Gf,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:a0,useReducer:Mh,useRef:t0,useState:function(){return Mh($a)},useDebugValue:Wf,useDeferredValue:function(t){var e=In();return ft===null?e.memoizedState=t:l0(e,ft.memoizedState,t)},useTransition:function(){var t=Mh($a)[0],e=In().memoizedState;return[t,e]},useMutableSource:qy,useSyncExternalStore:$y,useId:u0,unstable_isNewReconciler:!1};function Rn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Pd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bc={isMounted:function(t){return(t=t._reactInternals)?Hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),s=Yr(t),a=mr(r,s);a.payload=e,n!=null&&(a.callback=n),e=qr(t,a,s),e!==null&&(Mn(e,t,s,r),Vu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),s=Yr(t),a=mr(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=qr(t,a,s),e!==null&&(Mn(e,t,s,r),Vu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=Yr(t),s=mr(n,r);s.tag=2,e!=null&&(s.callback=e),e=qr(t,s,r),e!==null&&(Mn(e,t,r,n),Vu(e,t,r))}};function i_(t,e,n,r,s,a,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,u):e.prototype&&e.prototype.isPureReactComponent?!za(n,r)||!za(s,a):!0}function f0(t,e,n){var r=!1,s=ti,a=e.contextType;return typeof a=="object"&&a!==null?a=Tn(a):(s=$t(e)?Di:Mt.current,r=e.contextTypes,a=(r=r!=null)?Qs(t,s):ti),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function s_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bc.enqueueReplaceState(e,e.state,null)}function Cd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vf(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Tn(a):(a=$t(e)?Di:Mt.current,s.context=Qs(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Pd(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bc.enqueueReplaceState(s,s.state,null),cc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,e){try{var n="",r=e;do n+=bT(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function bh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ux=typeof WeakMap=="function"?WeakMap:Map;function p0(t,e,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mc||(mc=!0,Bd=r),Nd(t,e)},n}function m0(t,e,n){n=mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nd(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Nd(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function o_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ux;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ix.bind(null,t,e,n),e.then(t,t))}function a_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mr(-1,1),e.tag=2,qr(n,e,1))),n.lanes|=1),t)}var cx=Ir.ReactCurrentOwner,Kt=!1;function Ut(t,e,n,r){e.child=t===null?Gy(e,null,n,r):Xs(e,t.child,n,r)}function u_(t,e,n,r,s){n=n.render;var a=e.ref;return Gs(e,s),r=zf(t,e,n,r,a,s),n=Hf(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,yr(t,e,s)):(Ke&&n&&Rf(e),e.flags|=1,Ut(t,e,r,s),e.child)}function c_(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Xf(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,_0(t,e,a,r,s)):(t=Hu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:za,n(u,r)&&t.ref===e.ref)return yr(t,e,s)}return e.flags|=1,t=Qr(a,r),t.ref=e.ref,t.return=e,e.child=t}function _0(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(za(a,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,yr(t,e,s)}return Rd(t,e,n,r,s)}function g0(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Bs,tn),tn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Bs,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,je(Bs,tn),tn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,je(Bs,tn),tn|=r;return Ut(t,e,s,n),e.child}function v0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rd(t,e,n,r,s){var a=$t(n)?Di:Mt.current;return a=Qs(e,a),Gs(e,s),n=zf(t,e,n,r,a,s),r=Hf(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,yr(t,e,s)):(Ke&&r&&Rf(e),e.flags|=1,Ut(t,e,n,s),e.child)}function h_(t,e,n,r,s){if($t(n)){var a=!0;sc(e)}else a=!1;if(Gs(e,s),e.stateNode===null)Fu(t,e),f0(e,n,r),Cd(e,n,r,s),r=!0;else if(t===null){var u=e.stateNode,h=e.memoizedProps;u.props=h;var f=u.context,_=n.contextType;typeof _=="object"&&_!==null?_=Tn(_):(_=$t(n)?Di:Mt.current,_=Qs(e,_));var y=n.getDerivedStateFromProps,w=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function";w||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||f!==_)&&s_(e,u,r,_),Vr=!1;var x=e.memoizedState;u.state=x,cc(e,r,u,s),f=e.memoizedState,h!==r||x!==f||qt.current||Vr?(typeof y=="function"&&(Pd(e,n,y,r),f=e.memoizedState),(h=Vr||i_(e,n,h,r,x,f,_))?(w||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),u.props=r,u.state=f,u.context=_,r=h):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{u=e.stateNode,Zy(t,e),h=e.memoizedProps,_=e.type===e.elementType?h:Rn(e.type,h),u.props=_,w=e.pendingProps,x=u.context,f=n.contextType,typeof f=="object"&&f!==null?f=Tn(f):(f=$t(n)?Di:Mt.current,f=Qs(e,f));var C=n.getDerivedStateFromProps;(y=typeof C=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==w||x!==f)&&s_(e,u,r,f),Vr=!1,x=e.memoizedState,u.state=x,cc(e,r,u,s);var V=e.memoizedState;h!==w||x!==V||qt.current||Vr?(typeof C=="function"&&(Pd(e,n,C,r),V=e.memoizedState),(_=Vr||i_(e,n,_,r,x,V,f)||!1)?(y||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,V,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,V,f)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=V),u.props=r,u.state=V,u.context=f,r=_):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return Ld(t,e,n,r,a,s)}function Ld(t,e,n,r,s,a){v0(t,e);var u=(e.flags&128)!==0;if(!r&&!u)return s&&Ym(e,n,!1),yr(t,e,a);r=e.stateNode,cx.current=e;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&u?(e.child=Xs(e,t.child,null,a),e.child=Xs(e,null,h,a)):Ut(t,e,h,a),e.memoizedState=r.state,s&&Ym(e,n,!0),e.child}function y0(t){var e=t.stateNode;e.pendingContext?$m(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$m(t,e.context,!1),Uf(t,e.containerInfo)}function d_(t,e,n,r,s){return Js(),kf(s),e.flags|=256,Ut(t,e,n,r),e.child}var kd={dehydrated:null,treeContext:null,retryLane:0};function Od(t){return{baseLanes:t,cachePool:null,transitions:null}}function E0(t,e,n){var r=e.pendingProps,s=Ye.current,a=!1,u=(e.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(Ye,s&1),t===null)return Sd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=r.children,t=r.fallback,a?(r=e.mode,a=e.child,u={mode:"hidden",children:u},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=Bc(u,r,0,null),t=Li(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Od(n),e.memoizedState=kd,t):Zf(e,u));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return hx(t,e,u,r,h,s,n);if(a){a=r.fallback,u=e.mode,s=t.child,h=s.sibling;var f={mode:"hidden",children:r.children};return!(u&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=Qr(s,f),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?a=Qr(h,a):(a=Li(a,u,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,u=t.child.memoizedState,u=u===null?Od(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=t.childLanes&~n,e.memoizedState=kd,r}return a=t.child,t=a.sibling,r=Qr(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zf(t,e){return e=Bc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tu(t,e,n,r){return r!==null&&kf(r),Xs(e,t.child,null,n),t=Zf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hx(t,e,n,r,s,a,u){if(n)return e.flags&256?(e.flags&=-257,r=bh(Error(Q(422))),Tu(t,e,u,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Bc({mode:"visible",children:r.children},s,0,null),a=Li(a,s,u,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Xs(e,t.child,null,u),e.child.memoizedState=Od(u),e.memoizedState=kd,a);if(!(e.mode&1))return Tu(t,e,u,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,a=Error(Q(419)),r=bh(a,r,void 0),Tu(t,e,u,r)}if(h=(u&t.childLanes)!==0,Kt||h){if(r=wt,r!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|u)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,vr(t,s),Mn(r,t,s,-1))}return Jf(),r=bh(Error(Q(421))),Tu(t,e,u,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xx.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,nn=Kr(s.nextSibling),sn=e,Ke=!0,kn=null,t!==null&&(vn[yn++]=fr,vn[yn++]=pr,vn[yn++]=Mi,fr=t.id,pr=t.overflow,Mi=e),e=Zf(e,r.children),e.flags|=4096,e)}function f_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ad(t.return,e,n)}function Vh(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function w0(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Ut(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f_(t,n,e);else if(t.tag===19)f_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vh(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vh(e,!0,n,null,a);break;case"together":Vh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dx(t,e,n){switch(e.tag){case 3:y0(e),Js();break;case 5:Ky(e);break;case 1:$t(e.type)&&sc(e);break;case 4:Uf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;je(lc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?E0(t,e,n):(je(Ye,Ye.current&1),t=yr(t,e,n),t!==null?t.sibling:null);je(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return w0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,g0(t,e,n)}return yr(t,e,n)}var T0,Dd,I0,x0;T0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dd=function(){};I0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ci(Kn.current);var a=null;switch(n){case"input":s=nd(t,s),r=nd(t,r),a=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),a=[];break;case"textarea":s=sd(t,s),r=sd(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rc)}ad(n,r);var u;n=null;for(_ in s)if(!r.hasOwnProperty(_)&&s.hasOwnProperty(_)&&s[_]!=null)if(_==="style"){var h=s[_];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(Ma.hasOwnProperty(_)?a||(a=[]):(a=a||[]).push(_,null));for(_ in r){var f=r[_];if(h=s!=null?s[_]:void 0,r.hasOwnProperty(_)&&f!==h&&(f!=null||h!=null))if(_==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(a||(a=[]),a.push(_,n)),n=f;else _==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(a=a||[]).push(_,f)):_==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(_,""+f):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(Ma.hasOwnProperty(_)?(f!=null&&_==="onScroll"&&ze("scroll",t),a||h===f||(a=[])):(a=a||[]).push(_,f))}n&&(a=a||[]).push("style",n);var _=a;(e.updateQueue=_)&&(e.flags|=4)}};x0=function(t,e,n,r){n!==r&&(e.flags|=4)};function la(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fx(t,e,n){var r=e.pendingProps;switch(Lf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return $t(e.type)&&ic(),Lt(e),null;case 3:return r=e.stateNode,eo(),Ge(qt),Ge(Mt),Ff(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(zd(kn),kn=null))),Dd(t,e),Lt(e),null;case 5:Bf(e);var s=Ci(Ka.current);if(n=e.type,t!==null&&e.stateNode!=null)I0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Lt(e),null}if(t=Ci(Kn.current),Eu(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Wn]=e,r[Wa]=a,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<_a.length;s++)ze(_a[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":Tm(r,a),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ze("invalid",r);break;case"textarea":xm(r,a),ze("invalid",r)}ad(n,a),s=null;for(var u in a)if(a.hasOwnProperty(u)){var h=a[u];u==="children"?typeof h=="string"?r.textContent!==h&&(a.suppressHydrationWarning!==!0&&yu(r.textContent,h,t),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(a.suppressHydrationWarning!==!0&&yu(r.textContent,h,t),s=["children",""+h]):Ma.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&ze("scroll",r)}switch(n){case"input":hu(r),Im(r,a,!0);break;case"textarea":hu(r),Sm(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=rc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),n==="select"&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[Wn]=e,t[Wa]=r,T0(t,e,!1,!1),e.stateNode=t;e:{switch(u=ld(n,r),n){case"dialog":ze("cancel",t),ze("close",t),s=r;break;case"iframe":case"object":case"embed":ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<_a.length;s++)ze(_a[s],t);s=r;break;case"source":ze("error",t),s=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=r;break;case"details":ze("toggle",t),s=r;break;case"input":Tm(t,r),s=nd(t,r),ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),ze("invalid",t);break;case"textarea":xm(t,r),s=sd(t,r),ze("invalid",t);break;default:s=r}ad(n,s),h=s;for(a in h)if(h.hasOwnProperty(a)){var f=h[a];a==="style"?ty(t,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Xv(t,f)):a==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&ba(t,f):typeof f=="number"&&ba(t,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ma.hasOwnProperty(a)?f!=null&&a==="onScroll"&&ze("scroll",t):f!=null&&_f(t,a,f,u))}switch(n){case"input":hu(t),Im(t,r,!1);break;case"textarea":hu(t),Sm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ei(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Fs(t,!!r.multiple,a,!1):r.defaultValue!=null&&Fs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)x0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Ci(Ka.current),Ci(Kn.current),Eu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(a=r.nodeValue!==n)&&(t=sn,t!==null))switch(t.tag){case 3:yu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yu(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return Lt(e),null;case 13:if(Ge(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&nn!==null&&e.mode&1&&!(e.flags&128))zy(),Js(),e.flags|=98560,a=!1;else if(a=Eu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Q(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Q(317));a[Wn]=e}else Js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),a=!1}else kn!==null&&(zd(kn),kn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?pt===0&&(pt=3):Jf())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return eo(),Dd(t,e),t===null&&Ha(e.stateNode.containerInfo),Lt(e),null;case 10:return Mf(e.type._context),Lt(e),null;case 17:return $t(e.type)&&ic(),Lt(e),null;case 19:if(Ge(Ye),a=e.memoizedState,a===null)return Lt(e),null;if(r=(e.flags&128)!==0,u=a.rendering,u===null)if(r)la(a,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=hc(t),u!==null){for(e.flags|=128,la(a,!1),r=u.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,t=u.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ye,Ye.current&1|2),e.child}t=t.sibling}a.tail!==null&&it()>no&&(e.flags|=128,r=!0,la(a,!1),e.lanes=4194304)}else{if(!r)if(t=hc(u),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),la(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!Ke)return Lt(e),null}else 2*it()-a.renderingStartTime>no&&n!==1073741824&&(e.flags|=128,r=!0,la(a,!1),e.lanes=4194304);a.isBackwards?(u.sibling=e.child,e.child=u):(n=a.last,n!==null?n.sibling=u:e.child=u,a.last=u)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=it(),e.sibling=null,n=Ye.current,je(Ye,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Qf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function px(t,e){switch(Lf(e),e.tag){case 1:return $t(e.type)&&ic(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return eo(),Ge(qt),Ge(Mt),Ff(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bf(e),null;case 13:if(Ge(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Ye),null;case 4:return eo(),null;case 10:return Mf(e.type._context),null;case 22:case 23:return Qf(),null;case 24:return null;default:return null}}var Iu=!1,Ot=!1,mx=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function Md(t,e,n){try{n()}catch(r){tt(t,e,r)}}var p_=!1;function _x(t,e){if(vd=ec,t=Ny(),Nf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var u=0,h=-1,f=-1,_=0,y=0,w=t,x=null;t:for(;;){for(var C;w!==n||s!==0&&w.nodeType!==3||(h=u+s),w!==a||r!==0&&w.nodeType!==3||(f=u+r),w.nodeType===3&&(u+=w.nodeValue.length),(C=w.firstChild)!==null;)x=w,w=C;for(;;){if(w===t)break t;if(x===n&&++_===s&&(h=u),x===a&&++y===r&&(f=u),(C=w.nextSibling)!==null)break;w=x,x=w.parentNode}w=C}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:t,selectionRange:n},ec=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var U=V.memoizedProps,G=V.memoizedState,P=e.stateNode,A=P.getSnapshotBeforeUpdate(e.elementType===e.type?U:Rn(e.type,U),G);P.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(j){tt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return V=p_,p_=!1,V}function Pa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Md(e,n,a)}s=s.next}while(s!==r)}}function Vc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function S0(t){var e=t.alternate;e!==null&&(t.alternate=null,S0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[Wa],delete e[Td],delete e[JI],delete e[XI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function A0(t){return t.tag===5||t.tag===3||t.tag===4}function m_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||A0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rc));else if(r!==4&&(t=t.child,t!==null))for(Vd(t,e,n),t=t.sibling;t!==null;)Vd(t,e,n),t=t.sibling}function Ud(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ud(t,e,n),t=t.sibling;t!==null;)Ud(t,e,n),t=t.sibling}var It=null,Ln=!1;function Mr(t,e,n){for(n=n.child;n!==null;)P0(t,e,n),n=n.sibling}function P0(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Nc,n)}catch{}switch(n.tag){case 5:Ot||Us(n,e);case 6:var r=It,s=Ln;It=null,Mr(t,e,n),It=r,Ln=s,It!==null&&(Ln?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Ln?(t=It,n=n.stateNode,t.nodeType===8?Rh(t.parentNode,n):t.nodeType===1&&Rh(t,n),Fa(t)):Rh(It,n.stateNode));break;case 4:r=It,s=Ln,It=n.stateNode.containerInfo,Ln=!0,Mr(t,e,n),It=r,Ln=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&Md(n,e,u),s=s.next}while(s!==r)}Mr(t,e,n);break;case 1:if(!Ot&&(Us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){tt(n,e,h)}Mr(t,e,n);break;case 21:Mr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Mr(t,e,n),Ot=r):Mr(t,e,n);break;default:Mr(t,e,n)}}function __(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mx),e.forEach(function(r){var s=Sx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,u=e,h=u;e:for(;h!==null;){switch(h.tag){case 5:It=h.stateNode,Ln=!1;break e;case 3:It=h.stateNode.containerInfo,Ln=!0;break e;case 4:It=h.stateNode.containerInfo,Ln=!0;break e}h=h.return}if(It===null)throw Error(Q(160));P0(a,u,s),It=null,Ln=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(_){tt(s,e,_)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C0(e,t),e=e.sibling}function C0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),Hn(t),r&4){try{Pa(3,t,t.return),Vc(3,t)}catch(U){tt(t,t.return,U)}try{Pa(5,t,t.return)}catch(U){tt(t,t.return,U)}}break;case 1:Nn(e,t),Hn(t),r&512&&n!==null&&Us(n,n.return);break;case 5:if(Nn(e,t),Hn(t),r&512&&n!==null&&Us(n,n.return),t.flags&32){var s=t.stateNode;try{ba(s,"")}catch(U){tt(t,t.return,U)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,u=n!==null?n.memoizedProps:a,h=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{h==="input"&&a.type==="radio"&&a.name!=null&&Yv(s,a),ld(h,u);var _=ld(h,a);for(u=0;u<f.length;u+=2){var y=f[u],w=f[u+1];y==="style"?ty(s,w):y==="dangerouslySetInnerHTML"?Xv(s,w):y==="children"?ba(s,w):_f(s,y,w,_)}switch(h){case"input":rd(s,a);break;case"textarea":Qv(s,a);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var C=a.value;C!=null?Fs(s,!!a.multiple,C,!1):x!==!!a.multiple&&(a.defaultValue!=null?Fs(s,!!a.multiple,a.defaultValue,!0):Fs(s,!!a.multiple,a.multiple?[]:"",!1))}s[Wa]=a}catch(U){tt(t,t.return,U)}}break;case 6:if(Nn(e,t),Hn(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(U){tt(t,t.return,U)}}break;case 3:if(Nn(e,t),Hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(U){tt(t,t.return,U)}break;case 4:Nn(e,t),Hn(t);break;case 13:Nn(e,t),Hn(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||($f=it())),r&4&&__(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(_=Ot)||y,Nn(e,t),Ot=_):Nn(e,t),Hn(t),r&8192){if(_=t.memoizedState!==null,(t.stateNode.isHidden=_)&&!y&&t.mode&1)for(ne=t,y=t.child;y!==null;){for(w=ne=y;ne!==null;){switch(x=ne,C=x.child,x.tag){case 0:case 11:case 14:case 15:Pa(4,x,x.return);break;case 1:Us(x,x.return);var V=x.stateNode;if(typeof V.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(U){tt(r,n,U)}}break;case 5:Us(x,x.return);break;case 22:if(x.memoizedState!==null){v_(w);continue}}C!==null?(C.return=x,ne=C):v_(w)}y=y.sibling}e:for(y=null,w=t;;){if(w.tag===5){if(y===null){y=w;try{s=w.stateNode,_?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(h=w.stateNode,f=w.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=ey("display",u))}catch(U){tt(t,t.return,U)}}}else if(w.tag===6){if(y===null)try{w.stateNode.nodeValue=_?"":w.memoizedProps}catch(U){tt(t,t.return,U)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;y===w&&(y=null),w=w.return}y===w&&(y=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Nn(e,t),Hn(t),r&4&&__(t);break;case 21:break;default:Nn(e,t),Hn(t)}}function Hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(A0(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ba(s,""),r.flags&=-33);var a=m_(t);Ud(t,a,s);break;case 3:case 4:var u=r.stateNode.containerInfo,h=m_(t);Vd(t,h,u);break;default:throw Error(Q(161))}}catch(f){tt(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gx(t,e,n){ne=t,N0(t)}function N0(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var s=ne,a=s.child;if(s.tag===22&&r){var u=s.memoizedState!==null||Iu;if(!u){var h=s.alternate,f=h!==null&&h.memoizedState!==null||Ot;h=Iu;var _=Ot;if(Iu=u,(Ot=f)&&!_)for(ne=s;ne!==null;)u=ne,f=u.child,u.tag===22&&u.memoizedState!==null?y_(s):f!==null?(f.return=u,ne=f):y_(s);for(;a!==null;)ne=a,N0(a),a=a.sibling;ne=s,Iu=h,Ot=_}g_(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ne=a):g_(t)}}function g_(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Vc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Rn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&t_(e,a,r);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}t_(e,u,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var _=e.alternate;if(_!==null){var y=_.memoizedState;if(y!==null){var w=y.dehydrated;w!==null&&Fa(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Ot||e.flags&512&&bd(e)}catch(x){tt(e,e.return,x)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function v_(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function y_(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vc(4,e)}catch(f){tt(e,n,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(f){tt(e,s,f)}}var a=e.return;try{bd(e)}catch(f){tt(e,a,f)}break;case 5:var u=e.return;try{bd(e)}catch(f){tt(e,u,f)}}}catch(f){tt(e,e.return,f)}if(e===t){ne=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ne=h;break}ne=e.return}}var vx=Math.ceil,pc=Ir.ReactCurrentDispatcher,Kf=Ir.ReactCurrentOwner,wn=Ir.ReactCurrentBatchConfig,Ne=0,wt=null,ct=null,At=0,tn=0,Bs=oi(0),pt=0,Qa=null,Vi=0,Uc=0,qf=0,Ca=null,Wt=null,$f=0,no=1/0,hr=null,mc=!1,Bd=null,$r=null,xu=!1,zr=null,_c=0,Na=0,Fd=null,ju=-1,zu=0;function Bt(){return Ne&6?it():ju!==-1?ju:ju=it()}function Yr(t){return t.mode&1?Ne&2&&At!==0?At&-At:tx.transition!==null?(zu===0&&(zu=fy()),zu):(t=Me,t!==0||(t=window.event,t=t===void 0?16:Ey(t.type)),t):1}function Mn(t,e,n,r){if(50<Na)throw Na=0,Fd=null,Error(Q(185));fl(t,n,r),(!(Ne&2)||t!==wt)&&(t===wt&&(!(Ne&2)&&(Uc|=n),pt===4&&Fr(t,At)),Yt(t,r),n===1&&Ne===0&&!(e.mode&1)&&(no=it()+500,Dc&&ai()))}function Yt(t,e){var n=t.callbackNode;tI(t,e);var r=Xu(t,t===wt?At:0);if(r===0)n!==null&&Cm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cm(n),e===1)t.tag===0?ex(E_.bind(null,t)):By(E_.bind(null,t)),YI(function(){!(Ne&6)&&ai()}),n=null;else{switch(py(r)){case 1:n=wf;break;case 4:n=hy;break;case 16:n=Ju;break;case 536870912:n=dy;break;default:n=Ju}n=V0(n,R0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R0(t,e){if(ju=-1,zu=0,Ne&6)throw Error(Q(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var r=Xu(t,t===wt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gc(t,r);else{e=r;var s=Ne;Ne|=2;var a=k0();(wt!==t||At!==e)&&(hr=null,no=it()+500,Ri(t,e));do try{wx();break}catch(h){L0(t,h)}while(!0);Df(),pc.current=a,Ne=s,ct!==null?e=0:(wt=null,At=0,e=pt)}if(e!==0){if(e===2&&(s=fd(t),s!==0&&(r=s,e=jd(t,s))),e===1)throw n=Qa,Ri(t,0),Fr(t,r),Yt(t,it()),n;if(e===6)Fr(t,r);else{if(s=t.current.alternate,!(r&30)&&!yx(s)&&(e=gc(t,r),e===2&&(a=fd(t),a!==0&&(r=a,e=jd(t,a))),e===1))throw n=Qa,Ri(t,0),Fr(t,r),Yt(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Si(t,Wt,hr);break;case 3:if(Fr(t,r),(r&130023424)===r&&(e=$f+500-it(),10<e)){if(Xu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wd(Si.bind(null,t,Wt,hr),e);break}Si(t,Wt,hr);break;case 4:if(Fr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var u=31-Dn(r);a=1<<u,u=e[u],u>s&&(s=u),r&=~a}if(r=s,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vx(r/1960))-r,10<r){t.timeoutHandle=wd(Si.bind(null,t,Wt,hr),r);break}Si(t,Wt,hr);break;case 5:Si(t,Wt,hr);break;default:throw Error(Q(329))}}}return Yt(t,it()),t.callbackNode===n?R0.bind(null,t):null}function jd(t,e){var n=Ca;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=gc(t,e),t!==2&&(e=Wt,Wt=n,e!==null&&zd(e)),t}function zd(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function yx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!bn(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fr(t,e){for(e&=~qf,e&=~Uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dn(e),r=1<<n;t[n]=-1,e&=~r}}function E_(t){if(Ne&6)throw Error(Q(327));Ws();var e=Xu(t,0);if(!(e&1))return Yt(t,it()),null;var n=gc(t,e);if(t.tag!==0&&n===2){var r=fd(t);r!==0&&(e=r,n=jd(t,r))}if(n===1)throw n=Qa,Ri(t,0),Fr(t,e),Yt(t,it()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Si(t,Wt,hr),Yt(t,it()),null}function Yf(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(no=it()+500,Dc&&ai())}}function Ui(t){zr!==null&&zr.tag===0&&!(Ne&6)&&Ws();var e=Ne;Ne|=1;var n=wn.transition,r=Me;try{if(wn.transition=null,Me=1,t)return t()}finally{Me=r,wn.transition=n,Ne=e,!(Ne&6)&&ai()}}function Qf(){tn=Bs.current,Ge(Bs)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$I(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(Lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ic();break;case 3:eo(),Ge(qt),Ge(Mt),Ff();break;case 5:Bf(r);break;case 4:eo();break;case 13:Ge(Ye);break;case 19:Ge(Ye);break;case 10:Mf(r.type._context);break;case 22:case 23:Qf()}n=n.return}if(wt=t,ct=t=Qr(t.current,null),At=tn=e,pt=0,Qa=null,qf=Uc=Vi=0,Wt=Ca=null,Pi!==null){for(e=0;e<Pi.length;e++)if(n=Pi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var u=a.next;a.next=s,r.next=u}n.pending=r}Pi=null}return t}function L0(t,e){do{var n=ct;try{if(Df(),Uu.current=fc,dc){for(var r=Qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dc=!1}if(bi=0,Et=ft=Qe=null,Aa=!1,qa=0,Kf.current=null,n===null||n.return===null){pt=1,Qa=e,ct=null;break}e:{var a=t,u=n.return,h=n,f=e;if(e=At,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var _=f,y=h,w=y.tag;if(!(y.mode&1)&&(w===0||w===11||w===15)){var x=y.alternate;x?(y.updateQueue=x.updateQueue,y.memoizedState=x.memoizedState,y.lanes=x.lanes):(y.updateQueue=null,y.memoizedState=null)}var C=a_(u);if(C!==null){C.flags&=-257,l_(C,u,h,a,e),C.mode&1&&o_(a,_,e),e=C,f=_;var V=e.updateQueue;if(V===null){var U=new Set;U.add(f),e.updateQueue=U}else V.add(f);break e}else{if(!(e&1)){o_(a,_,e),Jf();break e}f=Error(Q(426))}}else if(Ke&&h.mode&1){var G=a_(u);if(G!==null){!(G.flags&65536)&&(G.flags|=256),l_(G,u,h,a,e),kf(to(f,h));break e}}a=f=to(f,h),pt!==4&&(pt=2),Ca===null?Ca=[a]:Ca.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var P=p0(a,f,e);e_(a,P);break e;case 1:h=f;var A=a.type,k=a.stateNode;if(!(a.flags&128)&&(typeof A.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&($r===null||!$r.has(k)))){a.flags|=65536,e&=-e,a.lanes|=e;var j=m0(a,h,e);e_(a,j);break e}}a=a.return}while(a!==null)}D0(n)}catch(Z){e=Z,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function k0(){var t=pc.current;return pc.current=fc,t===null?fc:t}function Jf(){(pt===0||pt===3||pt===2)&&(pt=4),wt===null||!(Vi&268435455)&&!(Uc&268435455)||Fr(wt,At)}function gc(t,e){var n=Ne;Ne|=2;var r=k0();(wt!==t||At!==e)&&(hr=null,Ri(t,e));do try{Ex();break}catch(s){L0(t,s)}while(!0);if(Df(),Ne=n,pc.current=r,ct!==null)throw Error(Q(261));return wt=null,At=0,pt}function Ex(){for(;ct!==null;)O0(ct)}function wx(){for(;ct!==null&&!ZT();)O0(ct)}function O0(t){var e=b0(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?D0(t):ct=e,Kf.current=null}function D0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=px(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ct=null;return}}else if(n=fx(n,e,tn),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);pt===0&&(pt=5)}function Si(t,e,n){var r=Me,s=wn.transition;try{wn.transition=null,Me=1,Tx(t,e,n,r)}finally{wn.transition=s,Me=r}return null}function Tx(t,e,n,r){do Ws();while(zr!==null);if(Ne&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(nI(t,a),t===wt&&(ct=wt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xu||(xu=!0,V0(Ju,function(){return Ws(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=wn.transition,wn.transition=null;var u=Me;Me=1;var h=Ne;Ne|=4,Kf.current=null,_x(t,n),C0(n,t),zI(yd),ec=!!vd,yd=vd=null,t.current=n,gx(n),KT(),Ne=h,Me=u,wn.transition=a}else t.current=n;if(xu&&(xu=!1,zr=t,_c=s),a=t.pendingLanes,a===0&&($r=null),YT(n.stateNode),Yt(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mc)throw mc=!1,t=Bd,Bd=null,t;return _c&1&&t.tag!==0&&Ws(),a=t.pendingLanes,a&1?t===Fd?Na++:(Na=0,Fd=t):Na=0,ai(),null}function Ws(){if(zr!==null){var t=py(_c),e=wn.transition,n=Me;try{if(wn.transition=null,Me=16>t?16:t,zr===null)var r=!1;else{if(t=zr,zr=null,_c=0,Ne&6)throw Error(Q(331));var s=Ne;for(Ne|=4,ne=t.current;ne!==null;){var a=ne,u=a.child;if(ne.flags&16){var h=a.deletions;if(h!==null){for(var f=0;f<h.length;f++){var _=h[f];for(ne=_;ne!==null;){var y=ne;switch(y.tag){case 0:case 11:case 15:Pa(8,y,a)}var w=y.child;if(w!==null)w.return=y,ne=w;else for(;ne!==null;){y=ne;var x=y.sibling,C=y.return;if(S0(y),y===_){ne=null;break}if(x!==null){x.return=C,ne=x;break}ne=C}}}var V=a.alternate;if(V!==null){var U=V.child;if(U!==null){V.child=null;do{var G=U.sibling;U.sibling=null,U=G}while(U!==null)}}ne=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,ne=u;else e:for(;ne!==null;){if(a=ne,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Pa(9,a,a.return)}var P=a.sibling;if(P!==null){P.return=a.return,ne=P;break e}ne=a.return}}var A=t.current;for(ne=A;ne!==null;){u=ne;var k=u.child;if(u.subtreeFlags&2064&&k!==null)k.return=u,ne=k;else e:for(u=A;ne!==null;){if(h=ne,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Vc(9,h)}}catch(Z){tt(h,h.return,Z)}if(h===u){ne=null;break e}var j=h.sibling;if(j!==null){j.return=h.return,ne=j;break e}ne=h.return}}if(Ne=s,ai(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Nc,t)}catch{}r=!0}return r}finally{Me=n,wn.transition=e}}return!1}function w_(t,e,n){e=to(n,e),e=p0(t,e,1),t=qr(t,e,1),e=Bt(),t!==null&&(fl(t,1,e),Yt(t,e))}function tt(t,e,n){if(t.tag===3)w_(t,t,n);else for(;e!==null;){if(e.tag===3){w_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=to(n,t),t=m0(e,t,1),e=qr(e,t,1),t=Bt(),e!==null&&(fl(e,1,t),Yt(e,t));break}}e=e.return}}function Ix(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(At&n)===n&&(pt===4||pt===3&&(At&130023424)===At&&500>it()-$f?Ri(t,0):qf|=n),Yt(t,e)}function M0(t,e){e===0&&(t.mode&1?(e=pu,pu<<=1,!(pu&130023424)&&(pu=4194304)):e=1);var n=Bt();t=vr(t,e),t!==null&&(fl(t,e,n),Yt(t,n))}function xx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),M0(t,n)}function Sx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),M0(t,n)}var b0;b0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,dx(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Ke&&e.flags&1048576&&Fy(e,ac,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fu(t,e),t=e.pendingProps;var s=Qs(e,Mt.current);Gs(e,n),s=zf(null,e,r,t,s,n);var a=Hf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(a=!0,sc(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vf(e),s.updater=bc,e.stateNode=s,s._reactInternals=e,Cd(e,r,t,n),e=Ld(null,e,r,!0,a,n)):(e.tag=0,Ke&&a&&Rf(e),Ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Px(r),t=Rn(r,t),s){case 0:e=Rd(null,e,r,t,n);break e;case 1:e=h_(null,e,r,t,n);break e;case 11:e=u_(null,e,r,t,n);break e;case 14:e=c_(null,e,r,Rn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rn(r,s),Rd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rn(r,s),h_(t,e,r,s,n);case 3:e:{if(y0(e),t===null)throw Error(Q(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Zy(t,e),cc(e,r,null,n);var u=e.memoizedState;if(r=u.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=to(Error(Q(423)),e),e=d_(t,e,r,n,s);break e}else if(r!==s){s=to(Error(Q(424)),e),e=d_(t,e,r,n,s);break e}else for(nn=Kr(e.stateNode.containerInfo.firstChild),sn=e,Ke=!0,kn=null,n=Gy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Js(),r===s){e=yr(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return Ky(e),t===null&&Sd(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,u=s.children,Ed(r,s)?u=null:a!==null&&Ed(r,a)&&(e.flags|=32),v0(t,e),Ut(t,e,u,n),e.child;case 6:return t===null&&Sd(e),null;case 13:return E0(t,e,n);case 4:return Uf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rn(r,s),u_(t,e,r,s,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,u=s.value,je(lc,r._currentValue),r._currentValue=u,a!==null)if(bn(a.value,u)){if(a.children===s.children&&!qt.current){e=yr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var h=a.dependencies;if(h!==null){u=a.child;for(var f=h.firstContext;f!==null;){if(f.context===r){if(a.tag===1){f=mr(-1,n&-n),f.tag=2;var _=a.updateQueue;if(_!==null){_=_.shared;var y=_.pending;y===null?f.next=f:(f.next=y.next,y.next=f),_.pending=f}}a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),Ad(a.return,n,e),h.lanes|=n;break}f=f.next}}else if(a.tag===10)u=a.type===e.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(Q(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),Ad(u,n,e),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===e){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}Ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Gs(e,n),s=Tn(s),r=r(s),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,s=Rn(r,e.pendingProps),s=Rn(r.type,s),c_(t,e,r,s,n);case 15:return _0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rn(r,s),Fu(t,e),e.tag=1,$t(r)?(t=!0,sc(e)):t=!1,Gs(e,n),f0(e,r,s),Cd(e,r,s,n),Ld(null,e,r,!0,t,n);case 19:return w0(t,e,n);case 22:return g0(t,e,n)}throw Error(Q(156,e.tag))};function V0(t,e){return cy(t,e)}function Ax(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new Ax(t,e,n,r)}function Xf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Px(t){if(typeof t=="function")return Xf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vf)return 11;if(t===yf)return 14}return 2}function Qr(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hu(t,e,n,r,s,a){var u=2;if(r=t,typeof t=="function")Xf(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case Ns:return Li(n.children,s,a,e);case gf:u=8,s|=8;break;case Jh:return t=En(12,n,e,s|2),t.elementType=Jh,t.lanes=a,t;case Xh:return t=En(13,n,e,s),t.elementType=Xh,t.lanes=a,t;case ed:return t=En(19,n,e,s),t.elementType=ed,t.lanes=a,t;case Kv:return Bc(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wv:u=10;break e;case Zv:u=9;break e;case vf:u=11;break e;case yf:u=14;break e;case br:u=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=En(u,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Li(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function Bc(t,e,n,r){return t=En(22,t,r,e),t.elementType=Kv,t.lanes=n,t.stateNode={isHidden:!1},t}function Uh(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Bh(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Cx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yh(0),this.expirationTimes=yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ep(t,e,n,r,s,a,u,h,f){return t=new Cx(t,e,n,h,f),e===1?(e=1,a===!0&&(e|=8)):e=0,a=En(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vf(a),t}function Nx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function U0(t){if(!t)return ti;t=t._reactInternals;e:{if(Hi(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if($t(n))return Uy(t,n,e)}return e}function B0(t,e,n,r,s,a,u,h,f){return t=ep(n,r,!0,t,s,a,u,h,f),t.context=U0(null),n=t.current,r=Bt(),s=Yr(n),a=mr(r,s),a.callback=e??null,qr(n,a,s),t.current.lanes=s,fl(t,s,r),Yt(t,r),t}function Fc(t,e,n,r){var s=e.current,a=Bt(),u=Yr(s);return n=U0(n),e.context===null?e.context=n:e.pendingContext=n,e=mr(a,u),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qr(s,e,u),t!==null&&(Mn(t,s,u,a),Vu(t,s,u)),u}function vc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function T_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tp(t,e){T_(t,e),(t=t.alternate)&&T_(t,e)}function Rx(){return null}var F0=typeof reportError=="function"?reportError:function(t){console.error(t)};function np(t){this._internalRoot=t}jc.prototype.render=np.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Fc(t,e,null,null)};jc.prototype.unmount=np.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ui(function(){Fc(null,t,null,null)}),e[gr]=null}};function jc(t){this._internalRoot=t}jc.prototype.unstable_scheduleHydration=function(t){if(t){var e=gy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Br.length&&e!==0&&e<Br[n].priority;n++);Br.splice(n,0,t),n===0&&yy(t)}};function rp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I_(){}function Lx(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var _=vc(u);a.call(_)}}var u=B0(e,r,t,0,null,!1,!1,"",I_);return t._reactRootContainer=u,t[gr]=u.current,Ha(t.nodeType===8?t.parentNode:t),Ui(),u}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var _=vc(f);h.call(_)}}var f=ep(t,0,!1,null,null,!1,!1,"",I_);return t._reactRootContainer=f,t[gr]=f.current,Ha(t.nodeType===8?t.parentNode:t),Ui(function(){Fc(e,f,n,r)}),f}function Hc(t,e,n,r,s){var a=n._reactRootContainer;if(a){var u=a;if(typeof s=="function"){var h=s;s=function(){var f=vc(u);h.call(f)}}Fc(e,u,t,s)}else u=Lx(n,e,t,s,r);return vc(u)}my=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ma(e.pendingLanes);n!==0&&(Tf(e,n|1),Yt(e,it()),!(Ne&6)&&(no=it()+500,ai()))}break;case 13:Ui(function(){var r=vr(t,1);if(r!==null){var s=Bt();Mn(r,t,1,s)}}),tp(t,1)}};If=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var n=Bt();Mn(e,t,134217728,n)}tp(t,134217728)}};_y=function(t){if(t.tag===13){var e=Yr(t),n=vr(t,e);if(n!==null){var r=Bt();Mn(n,t,e,r)}tp(t,e)}};gy=function(){return Me};vy=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};cd=function(t,e,n){switch(e){case"input":if(rd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Oc(r);if(!s)throw Error(Q(90));$v(r),rd(r,s)}}}break;case"textarea":Qv(t,n);break;case"select":e=n.value,e!=null&&Fs(t,!!n.multiple,e,!1)}};iy=Yf;sy=Ui;var kx={usingClientEntryPoint:!1,Events:[ml,Os,Oc,ny,ry,Yf]},ua={findFiberByHostInstance:Ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ox={bundleType:ua.bundleType,version:ua.version,rendererPackageName:ua.rendererPackageName,rendererConfig:ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ly(t),t===null?null:t.stateNode},findFiberByHostInstance:ua.findFiberByHostInstance||Rx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{Nc=Su.inject(Ox),Zn=Su}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kx;an.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rp(e))throw Error(Q(200));return Nx(t,e,null,n)};an.createRoot=function(t,e){if(!rp(t))throw Error(Q(299));var n=!1,r="",s=F0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ep(t,1,!1,null,null,n,!1,r,s),t[gr]=e.current,Ha(t.nodeType===8?t.parentNode:t),new np(e)};an.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=ly(e),t=t===null?null:t.stateNode,t};an.flushSync=function(t){return Ui(t)};an.hydrate=function(t,e,n){if(!zc(e))throw Error(Q(200));return Hc(null,t,e,!0,n)};an.hydrateRoot=function(t,e,n){if(!rp(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",u=F0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=B0(e,null,t,1,n??null,s,!1,a,u),t[gr]=e.current,Ha(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new jc(e)};an.render=function(t,e,n){if(!zc(e))throw Error(Q(200));return Hc(null,t,e,!1,n)};an.unmountComponentAtNode=function(t){if(!zc(t))throw Error(Q(40));return t._reactRootContainer?(Ui(function(){Hc(null,null,t,!1,function(){t._reactRootContainer=null,t[gr]=null})}),!0):!1};an.unstable_batchedUpdates=Yf;an.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zc(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Hc(t,e,n,!1,r)};an.version="18.3.1-next-f1338f8080-20240426";function j0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j0)}catch(t){console.error(t)}}j0(),jv.exports=an;var z0=jv.exports,x_=z0;Yh.createRoot=x_.createRoot,Yh.hydrateRoot=x_.hydrateRoot;const Gc={className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2},Dx=()=>v.jsx("svg",{...Gc,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Mx=()=>v.jsx("svg",{...Gc,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),bx=()=>v.jsx("svg",{...Gc,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Vx=()=>v.jsx("svg",{...Gc,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),H0=()=>v.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 13v-6l6 3m-6-3l6-3"})}),G0=()=>v.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3h2m-4 13h2"})}),W0=()=>v.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h2m6-4v2m-6-2v2"})}),ip=()=>v.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Ux=()=>v.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 2.21-1.79 4-4 4-1.742 0-3.223-.835-3.772-2M12 18v.01"})}),Bx=()=>v.jsxs("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Z0=()=>v.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),K0=()=>v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Fx=()=>v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),jx=()=>v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),zx=()=>v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),Hx=()=>v.jsx("svg",{className:"w-6 h-6 transform rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),Gx=()=>v.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M3 9h2m14 0h2M3 15h2m14 0h2M10 21h4c1.105 0 2-.895 2-2v-2H8v2c0 1.105.895 2 2 2z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 9V7a2 2 0 012-2h10a2 2 0 012 2v2"})]}),q0=()=>v.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Wx=()=>v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),Zx=()=>v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Kx=()=>v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),qx=()=>v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),$x=()=>v.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),Yx=()=>v.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0-.714.211-1.412.608-2.006L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})}),Qx=()=>v.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M8 5v14l11-7z"})}),Jx=()=>v.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),Xx=()=>v.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),S_=()=>v.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),A_=()=>v.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),eS=()=>v.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),fo={en:{appName:"Hyperlocal Navi-Assistant",welcome:"Welcome to My Amazing App",welcomeSub:"Your AI companion for navigating tricky local roads. What would you like to do?",gettingLocation:"Getting your location...",manualLocationSet:"Location manually set to:",planRouteTitle:"Plan Smart Route",planRouteDesc:"Get the best path with AI-powered 'thinking mode'.",planRouteDescScb:"For SCB Campus navigation only",localUpdatesTitle:"Local Updates",localUpdatesDesc:"Check for real-time traffic and event news.",chatTitle:"Ask Assistant",chatDesc:"Chat with Gemini for any questions you have.",setLocationTitle:"Set Location Manually",setLocationDesc:"Override GPS and set your starting point.",reportTitle:"Report Traffic",reportDesc:"Help the community by reporting an issue.",navHome:"Home",navPlanner:"Planner",navUpdates:"Updates",navChat:"Chat",navMode:"Navigation (A to B)",dayMode:"Day Planner",campusNavTitle:"Campus Navigator",itineraryTitle:"AI Itinerary Planner",navSub:"Get interactive, step-by-step directions inside the campus.",daySub:'Plan a full day: "Visiting OPD, then blood bank, then lunch".',destLabel:"Where do you want to go?",destPlace:"e.g., Cardiology Department, Main Gate",notesLabel:"Any preferences?",notesPlace:"e.g., Avoid stairs, need wheelchair access...",dayPromptLabel:"Describe your plan:",dayPromptPlace:"e.g., I need to visit the Eye Dept at 10am, then grab lunch at 1pm, and meet a doctor at Surgery Dept at 3pm.",findPath:"Find Best Path",genPlan:"Generate Itinerary",analyzing:"Analyzing Routes...",connecting:"Gemini is connecting...",step:"Step",prev:"Previous",next:"Next",viewSummary:"View Route Summary & Sources",viewPlanText:"View Itinerary Details",planNew:"Plan New Route",createNew:"Create New Plan",savePlan:"Save Plan",savedPlans:"Saved Plans",yourItinerary:"Your Day Plan",chatWelcome:"Hello! I know the SCB campus inside out. Ask me anything!",chatInput:"Type your question...",updatesHeader:"Daily Campus Briefing",updatesSub:"Real-time checks for SCB Medical College",fetchingUpdates:"Gathering latest reports from local authorities...",noUpdates:"No major incidents reported by authorities.",yourReports:"Community Reports",noUserReports:"No active user reports.",statusTraffic:"Traffic Flow",statusOPD:"OPD Crowds",statusGate:"Main Gate",statusNormal:"Normal",statusBusy:"Busy",statusCritical:"Jammed",readAloud:"Listen to Briefing",stopReading:"Stop Audio",wisdomHeader:"Standard Campus Info",wisdomSub:"General guidelines for patients",wisdomOPD:"OPD Registration: 8:00 AM - 12:00 PM (Mon-Sat). Come early to avoid queues.",wisdomEmergency:"Emergency / Casualty is open 24/7. Use the dedicated Red Lane for ambulances.",wisdomParking:"Patient parking is available near the Playground area. Do not park on main roads.",reportHeader:"Report an Issue",reportLocation:"Location",reportLocationPlace:"e.g., Near Main Gate",reportSeverity:"Severity",sevLight:"Light Traffic",sevModerate:"Moderate Traffic",sevHeavy:"Heavy Traffic / Jam",sevAccident:"Accident / Hazard",sevClosure:"Road Closed",reportDescLabel:"Description",reportDescPlace:"e.g., Stuck for 10 mins, ambulance blocked.",cancel:"Cancel",submitReport:"Submit Report",processingReport:"AI is processing...",reportSuccess:"Report Live!",verifiedBy:"Verified by",users:"users",justNow:"Just now",minsAgo:"mins ago",hrsAgo:"hrs ago"},or:{appName:" -",welcome:"!",welcomeSub:"     AI  |    ?",gettingLocation:"   ...",manualLocationSet:"  :",planRouteTitle:"  ",planRouteDesc:"AI     |",planRouteDescScb:" SCB  ",localUpdatesTitle:" ",localUpdatesDesc:"      |",chatTitle:" ",chatDesc:"Gemini    |",setLocationTitle:" ",setLocationDesc:"      |",reportTitle:"  ",reportDesc:"      |",navHome:"",navPlanner:"",navUpdates:"",navChat:"",navMode:" (  )",dayMode:" ",campusNavTitle:" ",itineraryTitle:"AI  ",navSub:"     |",daySub:"    |",destLabel:"   ?",destPlace:",  ,  ",notesLabel:"    ?",notesPlace:",  ,   ...",dayPromptLabel:"   :",dayPromptPlace:":     ,   ,      |",findPath:" ",genPlan:"  ",analyzing:"  ...",connecting:"Gemini   ...",step:"",prev:"",next:"",viewSummary:" ",viewPlanText:"  ",planNew:"  ",createNew:"  ",savePlan:"  ",savedPlans:"  ",yourItinerary:"  ",chatWelcome:"!  SCB     |    !",chatInput:"  ...",updatesHeader:"  ",updatesSub:"SCB    - ",fetchingUpdates:"     ...",noUpdates:"     |",yourReports:" ",noUserReports:"    |",statusTraffic:" ",statusOPD:"OPD ",statusGate:" ",statusNormal:"",statusBusy:"",statusCritical:" ",readAloud:" ",stopReading:" ",wisdomHeader:" ",wisdomSub:"   ",wisdomOPD:"OPD :     (-) |     |",wisdomEmergency:"     |       |",wisdomParking:"      |      |",reportHeader:" ",reportLocation:"",reportLocationPlace:",   ",reportSeverity:"",sevLight:" ",sevModerate:" ",sevHeavy:"  / ",sevAccident:" / ",sevClosure:" ",reportDescLabel:"",reportDescPlace:":     ,   |",cancel:" ",submitReport:" ",processingReport:"AI  ...",reportSuccess:"  !",verifiedBy:" ",users:"",justNow:"",minsAgo:" ",hrsAgo:" "}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var P_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(P_||(P_={}));var C_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(C_||(C_={}));var N_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(N_||(N_={}));var ut;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ut||(ut={}));var R_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(R_||(R_={}));var L_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(L_||(L_={}));var k_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(k_||(k_={}));var O_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(O_||(O_={}));var D_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(D_||(D_={}));var M_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(M_||(M_={}));var b_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(b_||(b_={}));var V_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(V_||(V_={}));var U_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(U_||(U_={}));var B_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(B_||(B_={}));var F_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(F_||(F_={}));var j_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(j_||(j_={}));var z_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(z_||(z_={}));var H_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(H_||(H_={}));var G_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(G_||(G_={}));var W_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(W_||(W_={}));var Z_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Z_||(Z_={}));var K_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(K_||(K_={}));var q_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(q_||(q_={}));var $_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($_||($_={}));var Y_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Y_||(Y_={}));var Q_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Q_||(Q_={}));var J_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(J_||(J_={}));var X_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(X_||(X_={}));var eg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eg||(eg={}));var tg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tg||(tg={}));var ng;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ng||(ng={}));var rg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(rg||(rg={}));var ig;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ig||(ig={}));var sg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(sg||(sg={}));var og;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(og||(og={}));var ag;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ag||(ag={}));var lg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lg||(lg={}));var ug;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ug||(ug={}));var cg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(cg||(cg={}));var hg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(hg||(hg={}));var dg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(dg||(dg={}));var fg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(fg||(fg={}));var pg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(pg||(pg={}));var mg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(mg||(mg={}));var _g;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(_g||(_g={}));var gg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(gg||(gg={}));var vg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vg||(vg={}));var yg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(yg||(yg={}));var Eg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Eg||(Eg={}));var wg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(wg||(wg={}));var Tg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Tg||(Tg={}));var Ig;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ig||(Ig={}));var xg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xg||(xg={}));var Sg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Sg||(Sg={}));var Ag;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ag||(Ag={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pg;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Pg||(Pg={}));const Ra=t=>typeof t=="number"&&!isNaN(t),On=t=>typeof t=="string",$0=t=>Array.isArray(t),Ja=t=>t&&Ra(t.lat)&&Ra(t.lng),tS=t=>t&&On(t.description)&&$0(t.path)&&t.path.every(Ja),nS=t=>t&&On(t.name)&&Ja(t.position),rS=t=>t&&$0(t.path)&&t.path.every(Ja)&&On(t.level)&&["light","moderate","heavy"].includes(t.level)&&On(t.description),iS=t=>t&&On(t.name)&&On(t.description)&&Ra(t.lat)&&Ra(t.lng)&&(t.time===void 0||On(t.time))&&(t.duration===void 0||On(t.duration))&&(t.sequence===void 0||Ra(t.sequence)),sS=t=>t&&On(t.name)&&Ja(t.start)&&Ja(t.end)&&(t.transport===void 0||On(t.transport))&&(t.travelTime===void 0||On(t.travelTime)),po=()=>{throw new Error("API Key is missing. Please set API_KEY in your .env file or deployment settings.")},oS={name:"location",parameters:{type:ut.OBJECT,description:"Geographic coordinates of a location on the SCB Medical College Campus.",properties:{name:{type:ut.STRING,description:"Name of the location."},description:{type:ut.STRING,description:"Description of activity at this location."},lat:{type:ut.NUMBER,description:"Latitude of the location."},lng:{type:ut.NUMBER,description:"Longitude of the location."},time:{type:ut.STRING,description:'Time of day to visit (e.g., "09:00").'},duration:{type:ut.STRING,description:'Duration of stay (e.g., "45 minutes").'},sequence:{type:ut.NUMBER,description:"Order in the day itinerary (1 = first stop)."}},required:["name","description","lat","lng"]}},aS={name:"line",parameters:{type:ut.OBJECT,description:"Connection between two locations.",properties:{name:{type:ut.STRING,description:"Name of the route segment."},start:{type:ut.OBJECT,properties:{lat:{type:ut.NUMBER},lng:{type:ut.NUMBER}}},end:{type:ut.OBJECT,properties:{lat:{type:ut.NUMBER},lng:{type:ut.NUMBER}}},transport:{type:ut.STRING,description:"Mode of transport (Walking, Wheelchair, etc.)."},travelTime:{type:ut.STRING,description:"Estimated travel time."}},required:["name","start","end"]}},gl=t=>{let e="";if(t.candidates&&t.candidates.length>0&&t.candidates[0].content&&t.candidates[0].content.parts)for(const n of t.candidates[0].content.parts)n.text&&(e+=n.text);return e},lS=async t=>{try{const e=po(),n=`Based on your knowledge, is the location "${t}" part of, or inside, the SCB Medical College & Hospital campus in Cuttack, India? Answer with a single word: "yes" or "no".`,r=await e.models.generateContent({model:"gemini-2.5-flash",contents:n});return gl(r).trim().toLowerCase().includes("yes")}catch(e){return console.error("Error checking location context:",e),!0}},uS=async(t,e="en")=>{var n,r,s,a;try{const u=po(),f=`
      You are an expert Day Planner for the SCB Medical College & Hospital Campus in Cuttack.
      Your goal is to create a logical, sequential day plan for a user visiting the campus (e.g., for treatment, visiting a student, or medical formalities).
      
      ${e==="or"?"IMPORTANT: Provide all names, descriptions, and summaries in Odia (Oriya) language. The user speaks Odia.":""}

      **Constraints:**
      1. All coordinates MUST be strictly within the campus bounds: Latitude ~20.478 to 20.486, Longitude ~85.872 to 85.883.
      2. If the user asks for something outside the campus, politely explain you only cover the campus area.
      3. Use the 'location' tool to mark stops with times and sequence numbers.
      4. Use the 'line' tool to connect these stops.
      5. Create a realistic schedule (walking times, waiting times at OPDs).
    `,_=await u.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{systemInstruction:f,temperature:.5,tools:[{functionDeclarations:[oS,aS]}]}}),y=[],w=[];if(_.functionCalls)for(const C of _.functionCalls){const V=C.args;if(V){if(C.name==="location"){const U={name:V.name,description:V.description,lat:Number(V.lat),lng:Number(V.lng),time:V.time,duration:V.duration,sequence:Number(V.sequence)};iS(U)&&y.push(U)}else if(C.name==="line"){const U={name:V.name,start:{lat:Number((n=V.start)==null?void 0:n.lat),lng:Number((r=V.start)==null?void 0:r.lng)},end:{lat:Number((s=V.end)==null?void 0:s.lat),lng:Number((a=V.end)==null?void 0:a.lng)},transport:V.transport,travelTime:V.travelTime};sS(U)&&w.push(U)}}}const x=gl(_);return y.sort((C,V)=>(C.sequence||0)-(V.sequence||0)),{locations:y,lines:w,summaryText:x}}catch(u){throw console.error("Error generating itinerary:",u),u}},cS=async(t,e,n,r,s="en")=>{var a,u,h;try{const f=po(),y=`
      You are a hyperlocal navigation expert for the SCB Medical College campus in Cuttack, India. Your primary function is to provide detailed, step-by-step navigation *within this campus*.
      A user needs directions from "${t}" to "${e}".
      
      ${s==="or"?"IMPORTANT: Provide all step descriptions, landmarks names, traffic descriptions, and the final summary in Odia (Oriya) language. The user speaks Odia.":""}

      **IMPORTANT CONTEXT CHECK:**
      1.  **If the route is within the SCB campus:** Proceed to generate a detailed, interactive route plan. The user will be viewing a specific digital map of the campus, so your directions must be precise and reference landmarks visible on that map. The JSON output is critical.
      2.  **If the start or destination is clearly outside the SCB campus (e.g., "Bhubaneswar Airport", another city, etc.):** You MUST respond differently. First, state clearly that your expertise is limited to the SCB campus and you cannot provide an interactive map for their requested route. Then, provide general, high-level text-based directions for their query. In this specific case, the JSON object you generate MUST have empty arrays for "steps", "landmarks", and "traffic".

      The user has provided these notes: "${n}".
      Current user location is approximately latitude: ${r==null?void 0:r.latitude}, longitude: ${r==null?void 0:r.longitude}.
      
      **JSON Object Specification (ONLY FOR ON-CAMPUS ROUTES):**
      The JSON object MUST be in a fenced code block and have the following structure. If the route is off-campus, this object must contain empty arrays as specified above.
      {
        "steps": [
          {
            "description": "A short, clear instruction for this step. e.g., 'Walk from the main gate towards the Department of Surgery.'",
            "path": [{"lat": 20.481, "lng": 85.876}, {"lat": 20.482, "lng": 85.877}]
          }
        ],
        "landmarks": [
          {
            "name": "A key landmark mentioned in the steps. e.g., 'Department of Surgery SCB'",
            "position": {"lat": 20.482, "lng": 85.877}
          }
        ],
        "traffic": [
          {
            "level": "moderate",
            "description": "Reason for congestion. e.g., 'Crowded near OPD building.'",
            "path": [{"lat": 20.482, "lng": 85.877}, {"lat": 20.4825, "lng": 85.8775}]
          }
        ]
      }

      **GUIDELINES (ONLY FOR ON-CAMPUS ROUTES):**
      1.  **Steps**: Break the route into small, logical steps. Each step must have a clear 'description' and a 'path' with an array of coordinates. The path for one step should connect to the next.
      2.  **Landmarks**: Identify key landmarks (e.g., 'Department of Surgery SCB', 'Overhead Water Tank', 'College of Nursing') and provide their precise coordinates in the 'landmarks' array. This is crucial for plotting them on the map.
      3.  **Coordinates**: All coordinates MUST fall within the approximate bounds of the SCB campus (latitude ~20.478 to 20.486, longitude ~85.872 to 85.883).
      4.  **Traffic**: Use your knowledge and tools to identify potential areas of congestion (e.g., near the main entrance, outpatient departments) and add them to the 'traffic' array.
      
      After the JSON block, provide a summary of the route in Markdown. For off-campus routes, this summary will be your main response.
    `,w=await f.models.generateContent({model:"gemini-2.5-pro",contents:y,config:{thinkingConfig:{thinkingBudget:16384},tools:[{googleSearch:{}},{googleMaps:{}}],toolConfig:r?{retrievalConfig:{latLng:{latitude:r.latitude,longitude:r.longitude}}}:void 0}}),x=gl(w);let C=[],V=[],U=[],G=x;const P=/```json\s*([\s\S]*?)\s*```/,A=x.match(P);if(A&&A[1])try{const j=JSON.parse(A[1]);j.steps&&Array.isArray(j.steps)&&(C=j.steps.filter(tS)),j.landmarks&&Array.isArray(j.landmarks)&&(V=j.landmarks.filter(nS)),j.traffic&&Array.isArray(j.traffic)&&(U=j.traffic.filter(rS)),G=x.replace(P,"").trim()}catch(j){console.error("Failed to parse or validate route JSON:",j)}const k=((h=(u=(a=w.candidates)==null?void 0:a[0])==null?void 0:u.groundingMetadata)==null?void 0:h.groundingChunks)||[];return{text:G,groundingChunks:k,steps:C,landmarks:V,trafficSegments:U}}catch(f){return console.error("Error planning route:",f),{text:"Sorry, I couldn't plan a route. Check your API Key.",groundingChunks:[],steps:[],landmarks:[],trafficSegments:[]}}},hS=async(t,e="en")=>{var n,r,s;try{const a=po();let u="";typeof t=="string"&&t.trim()!==""?u=`in the area around "${t}"`:typeof t=="object"&&(t!=null&&t.latitude)&&t.longitude?u=`around latitude: ${t.latitude}, longitude: ${t.longitude}`:u="in the general Cuttack area";const f=`
            You are a kind, empathetic, and authoritative Hospital Guide for SCB Medical College, Cuttack.
            A patient or their relative is looking for the "Daily Situation Report" to navigate the campus.

            **YOUR TASK:**
            Search Google for the VERY LATEST updates (last 24 hours) from:
            1. Commissionerate Police Cuttack-Bhubaneswar (Traffic updates)
            2. Cuttack Municipal Corporation (CMC) or Collector Cuttack (Road works/Closures)
            3. SCB Medical College Official Notices (Hospital admin news)
            4. Local news (Weather, Strikes/Bandhs)
            
            ${e==="or"?"OUTPUT MUST BE IN ODIA (ORIYA) SCRIPT.":""}

            **TONE:** 
            Kind, Clear, and Explanatory. Like a helpful volunteer speaking to a worried patient.
            Avoid "police jargon" or dry lists. Explain *what it means* for the patient.

            **STRUCTURE OF RESPONSE:**
            1. **Headline:** A 3-5 word summary of the current status (e.g., "Normal Traffic Flow Today" or "Heavy Rain Alert").
            2. **The Situation Report:** Write 2-3 sentences summarizing the key events. If there is a traffic diversion, explain *where* to go instead. 
            
            **CRITICAL RULES:**
            *   **NO FAKE NEWS:** If you find NO recent updates, state clearly: "We have checked with local authorities and there are no major incidents reported at this time."
            *   **NO BULLET POINTS:** Write in natural, comforting sentences.
            *   **INTEGRITY:** If you mention a specific road closure or event, ensure it is based on a real recent source.
        `,_=await a.models.generateContent({model:"gemini-2.5-flash",contents:f,config:{tools:[{googleSearch:{}}]}}),y=gl(_)||"No major alerts.",w=((s=(r=(n=_.candidates)==null?void 0:n[0])==null?void 0:r.groundingMetadata)==null?void 0:s.groundingChunks)||[];return{text:y,groundingChunks:w}}catch(a){return console.error("Error fetching local updates:",a),{text:"Could not fetch local updates. Check connection.",groundingChunks:[]}}};let Fh=null,Cg="en";const dS=(t="en")=>{const e=po();if(!Fh||Cg!==t){Cg=t;const n=t==="or"?"You MUST reply in Odia (Oriya) language.":"";Fh=e.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:`You are a helpful assistant for the Hyperlocal Navi-Assistant app. Answer questions about navigation, local places, or general topics concisely. ${n}`}})}return Fh},fS=async(t,e)=>{try{return await t.sendMessageStream({message:e})}catch(n){throw console.error("Error sending message to chat:",n),new Error("Failed to get a response from the assistant. Check API Key.")}},pS=async(t,e)=>{try{const n=po(),s=`
            A user has submitted a traffic report: "${t}".
            Rewrite this to be ultra-concise (under 10 words) for a dashboard ticker. 
            Do not add new facts.
            ${e==="or"?"The output MUST be in Odia (Oriya) language.":"The output MUST be in English."}
        `,a=await n.models.generateContent({model:"gemini-2.5-flash",contents:s});return gl(a).trim()}catch(n){return console.error("Error enhancing report:",n),t}};var Ng={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],u=t[n++],h=t[n++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],u=s+1<t.length,h=u?t[s+1]:0,f=s+2<t.length,_=f?t[s+2]:0,y=a>>2,w=(a&3)<<4|h>>4;let x=(h&15)<<2|_>>6,C=_&63;f||(C=64,u||(x=64)),r.push(n[y],n[w],n[x],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const _=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||h==null||_==null||w==null)throw new _S;const x=a<<2|h>>4;if(r.push(x),_!==64){const C=h<<4&240|_>>2;if(r.push(C),w!==64){const V=_<<6&192|w;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _S extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gS=function(t){const e=Y0(t);return Q0.encodeByteArray(e,!0)},J0=function(t){return gS(t).replace(/\./g,"")},vS=function(t){try{return Q0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=()=>yS().__FIREBASE_DEFAULTS__,wS=()=>{if(typeof process>"u"||typeof Ng>"u")return;const t=Ng.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vS(t[1]);return e&&JSON.parse(e)},IS=()=>{try{return ES()||wS()||TS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SS(){var t;const e=(t=IS())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AS(){return!SS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PS(){try{return typeof indexedDB=="object"}catch{return!1}}function CS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="FirebaseError";class mo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NS,Object.setPrototypeOf(this,mo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,X0.prototype.create)}}class X0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?RS(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new mo(s,h,r)}}function RS(t,e){return t.replace(LS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const LS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t){return t&&t._delegate?t._delegate:t}class yc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const kS={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},OS=Ce.INFO,DS={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},MS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=DS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eE{constructor(e){this.name=e,this._logLevel=OS,this._logHandler=MS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const bS=(t,e)=>e.some(n=>t instanceof n);let Rg,Lg;function VS(){return Rg||(Rg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function US(){return Lg||(Lg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tE=new WeakMap,Hd=new WeakMap,nE=new WeakMap,jh=new WeakMap,sp=new WeakMap;function BS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(Jr(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&tE.set(n,t)}).catch(()=>{}),sp.set(e,t),e}function FS(t){if(Hd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Hd.set(t,e)}let Gd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jS(t){Gd=t(Gd)}function zS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zh(this),e,...n);return nE.set(r,e.sort?e.sort():[e]),Jr(r)}:US().includes(t)?function(...e){return t.apply(zh(this),e),Jr(tE.get(this))}:function(...e){return Jr(t.apply(zh(this),e))}}function HS(t){return typeof t=="function"?zS(t):(t instanceof IDBTransaction&&FS(t),bS(t,VS())?new Proxy(t,Gd):t)}function Jr(t){if(t instanceof IDBRequest)return BS(t);if(jh.has(t))return jh.get(t);const e=HS(t);return e!==t&&(jh.set(t,e),sp.set(e,t)),e}const zh=t=>sp.get(t);function GS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(t,e),h=Jr(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Jr(u.result),f.oldVersion,f.newVersion,Jr(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",_=>s(_.oldVersion,_.newVersion,_))}).catch(()=>{}),h}const WS=["get","getKey","getAll","getAllKeys","count"],ZS=["put","add","delete","clear"],Hh=new Map;function kg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hh.get(e))return Hh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ZS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||WS.includes(n)))return;const a=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let _=f.store;return r&&(_=_.index(h.shift())),(await Promise.all([_[n](...h),s&&f.done]))[0]};return Hh.set(e,a),a}jS(t=>({...t,get:(e,n,r)=>kg(e,n)||t.get(e,n,r),has:(e,n)=>!!kg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",Og="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new eE("@firebase/app"),$S="@firebase/app-compat",YS="@firebase/analytics-compat",QS="@firebase/analytics",JS="@firebase/app-check-compat",XS="@firebase/app-check",eA="@firebase/auth",tA="@firebase/auth-compat",nA="@firebase/database",rA="@firebase/data-connect",iA="@firebase/database-compat",sA="@firebase/functions",oA="@firebase/functions-compat",aA="@firebase/installations",lA="@firebase/installations-compat",uA="@firebase/messaging",cA="@firebase/messaging-compat",hA="@firebase/performance",dA="@firebase/performance-compat",fA="@firebase/remote-config",pA="@firebase/remote-config-compat",mA="@firebase/storage",_A="@firebase/storage-compat",gA="@firebase/firestore",vA="@firebase/vertexai-preview",yA="@firebase/firestore-compat",EA="firebase",wA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={[Wd]:"fire-core",[$S]:"fire-core-compat",[QS]:"fire-analytics",[YS]:"fire-analytics-compat",[XS]:"fire-app-check",[JS]:"fire-app-check-compat",[eA]:"fire-auth",[tA]:"fire-auth-compat",[nA]:"fire-rtdb",[rA]:"fire-data-connect",[iA]:"fire-rtdb-compat",[sA]:"fire-fn",[oA]:"fire-fn-compat",[aA]:"fire-iid",[lA]:"fire-iid-compat",[uA]:"fire-fcm",[cA]:"fire-fcm-compat",[hA]:"fire-perf",[dA]:"fire-perf-compat",[fA]:"fire-rc",[pA]:"fire-rc-compat",[mA]:"fire-gcs",[_A]:"fire-gcs-compat",[gA]:"fire-fst",[yA]:"fire-fst-compat",[vA]:"fire-vertex","fire-js":"fire-js",[EA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Map,xA=new Map,Dg=new Map;function Mg(t,e){try{t.container.addComponent(e)}catch(n){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ec(t){const e=t.name;if(Dg.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;Dg.set(e,t);for(const n of IA.values())Mg(n,t);for(const n of xA.values())Mg(n,t);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},op=new X0("app","Firebase",SA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=wA;function Zs(t,e,n){var r;let s=(r=TA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(h.join(" "));return}Ec(new yc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebase-heartbeat-database",CA=1,Xa="firebase-heartbeat-store";let Gh=null;function rE(){return Gh||(Gh=GS(PA,CA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw op.create("idb-open",{originalErrorMessage:t.message})})),Gh}async function NA(t){try{const n=(await rE()).transaction(Xa),r=await n.objectStore(Xa).get(iE(t));return await n.done,r}catch(e){if(e instanceof mo)Er.warn(e.message);else{const n=op.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(n.message)}}}async function bg(t,e){try{const r=(await rE()).transaction(Xa,"readwrite");await r.objectStore(Xa).put(e,iE(t)),await r.done}catch(n){if(n instanceof mo)Er.warn(n.message);else{const r=op.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Er.warn(r.message)}}}function iE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=1024,LA=30*24*60*60*1e3;class kA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Vg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=LA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vg(),{heartbeatsToSend:r,unsentEntries:s}=OA(this._heartbeatsCache.heartbeats),a=J0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Er.warn(n),""}}}function Vg(){return new Date().toISOString().substring(0,10)}function OA(t,e=RA){const n=[];let r=t.slice();for(const s of t){const a=n.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),Ug(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ug(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PS()?CS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return bg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return bg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ug(t){return J0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){Ec(new yc("platform-logger",e=>new KS(e),"PRIVATE")),Ec(new yc("heartbeat",e=>new kA(e),"PRIVATE")),Zs(Wd,Og,t),Zs(Wd,Og,"esm2017"),Zs("fire-js","")}MA("");var bA="firebase",VA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(bA,VA,"app");var Bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,sE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function R(){}R.prototype=I.prototype,N.D=I.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(O,b,M){for(var S=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)S[oe-2]=arguments[oe];return I.prototype[b].apply(O,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,I,R){R||(R=0);var O=Array(16);if(typeof I=="string")for(var b=0;16>b;++b)O[b]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(b=0;16>b;++b)O[b]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=N.g[0],R=N.g[1],b=N.g[2];var M=N.g[3],S=I+(M^R&(b^M))+O[0]+3614090360&4294967295;I=R+(S<<7&4294967295|S>>>25),S=M+(b^I&(R^b))+O[1]+3905402710&4294967295,M=I+(S<<12&4294967295|S>>>20),S=b+(R^M&(I^R))+O[2]+606105819&4294967295,b=M+(S<<17&4294967295|S>>>15),S=R+(I^b&(M^I))+O[3]+3250441966&4294967295,R=b+(S<<22&4294967295|S>>>10),S=I+(M^R&(b^M))+O[4]+4118548399&4294967295,I=R+(S<<7&4294967295|S>>>25),S=M+(b^I&(R^b))+O[5]+1200080426&4294967295,M=I+(S<<12&4294967295|S>>>20),S=b+(R^M&(I^R))+O[6]+2821735955&4294967295,b=M+(S<<17&4294967295|S>>>15),S=R+(I^b&(M^I))+O[7]+4249261313&4294967295,R=b+(S<<22&4294967295|S>>>10),S=I+(M^R&(b^M))+O[8]+1770035416&4294967295,I=R+(S<<7&4294967295|S>>>25),S=M+(b^I&(R^b))+O[9]+2336552879&4294967295,M=I+(S<<12&4294967295|S>>>20),S=b+(R^M&(I^R))+O[10]+4294925233&4294967295,b=M+(S<<17&4294967295|S>>>15),S=R+(I^b&(M^I))+O[11]+2304563134&4294967295,R=b+(S<<22&4294967295|S>>>10),S=I+(M^R&(b^M))+O[12]+1804603682&4294967295,I=R+(S<<7&4294967295|S>>>25),S=M+(b^I&(R^b))+O[13]+4254626195&4294967295,M=I+(S<<12&4294967295|S>>>20),S=b+(R^M&(I^R))+O[14]+2792965006&4294967295,b=M+(S<<17&4294967295|S>>>15),S=R+(I^b&(M^I))+O[15]+1236535329&4294967295,R=b+(S<<22&4294967295|S>>>10),S=I+(b^M&(R^b))+O[1]+4129170786&4294967295,I=R+(S<<5&4294967295|S>>>27),S=M+(R^b&(I^R))+O[6]+3225465664&4294967295,M=I+(S<<9&4294967295|S>>>23),S=b+(I^R&(M^I))+O[11]+643717713&4294967295,b=M+(S<<14&4294967295|S>>>18),S=R+(M^I&(b^M))+O[0]+3921069994&4294967295,R=b+(S<<20&4294967295|S>>>12),S=I+(b^M&(R^b))+O[5]+3593408605&4294967295,I=R+(S<<5&4294967295|S>>>27),S=M+(R^b&(I^R))+O[10]+38016083&4294967295,M=I+(S<<9&4294967295|S>>>23),S=b+(I^R&(M^I))+O[15]+3634488961&4294967295,b=M+(S<<14&4294967295|S>>>18),S=R+(M^I&(b^M))+O[4]+3889429448&4294967295,R=b+(S<<20&4294967295|S>>>12),S=I+(b^M&(R^b))+O[9]+568446438&4294967295,I=R+(S<<5&4294967295|S>>>27),S=M+(R^b&(I^R))+O[14]+3275163606&4294967295,M=I+(S<<9&4294967295|S>>>23),S=b+(I^R&(M^I))+O[3]+4107603335&4294967295,b=M+(S<<14&4294967295|S>>>18),S=R+(M^I&(b^M))+O[8]+1163531501&4294967295,R=b+(S<<20&4294967295|S>>>12),S=I+(b^M&(R^b))+O[13]+2850285829&4294967295,I=R+(S<<5&4294967295|S>>>27),S=M+(R^b&(I^R))+O[2]+4243563512&4294967295,M=I+(S<<9&4294967295|S>>>23),S=b+(I^R&(M^I))+O[7]+1735328473&4294967295,b=M+(S<<14&4294967295|S>>>18),S=R+(M^I&(b^M))+O[12]+2368359562&4294967295,R=b+(S<<20&4294967295|S>>>12),S=I+(R^b^M)+O[5]+4294588738&4294967295,I=R+(S<<4&4294967295|S>>>28),S=M+(I^R^b)+O[8]+2272392833&4294967295,M=I+(S<<11&4294967295|S>>>21),S=b+(M^I^R)+O[11]+1839030562&4294967295,b=M+(S<<16&4294967295|S>>>16),S=R+(b^M^I)+O[14]+4259657740&4294967295,R=b+(S<<23&4294967295|S>>>9),S=I+(R^b^M)+O[1]+2763975236&4294967295,I=R+(S<<4&4294967295|S>>>28),S=M+(I^R^b)+O[4]+1272893353&4294967295,M=I+(S<<11&4294967295|S>>>21),S=b+(M^I^R)+O[7]+4139469664&4294967295,b=M+(S<<16&4294967295|S>>>16),S=R+(b^M^I)+O[10]+3200236656&4294967295,R=b+(S<<23&4294967295|S>>>9),S=I+(R^b^M)+O[13]+681279174&4294967295,I=R+(S<<4&4294967295|S>>>28),S=M+(I^R^b)+O[0]+3936430074&4294967295,M=I+(S<<11&4294967295|S>>>21),S=b+(M^I^R)+O[3]+3572445317&4294967295,b=M+(S<<16&4294967295|S>>>16),S=R+(b^M^I)+O[6]+76029189&4294967295,R=b+(S<<23&4294967295|S>>>9),S=I+(R^b^M)+O[9]+3654602809&4294967295,I=R+(S<<4&4294967295|S>>>28),S=M+(I^R^b)+O[12]+3873151461&4294967295,M=I+(S<<11&4294967295|S>>>21),S=b+(M^I^R)+O[15]+530742520&4294967295,b=M+(S<<16&4294967295|S>>>16),S=R+(b^M^I)+O[2]+3299628645&4294967295,R=b+(S<<23&4294967295|S>>>9),S=I+(b^(R|~M))+O[0]+4096336452&4294967295,I=R+(S<<6&4294967295|S>>>26),S=M+(R^(I|~b))+O[7]+1126891415&4294967295,M=I+(S<<10&4294967295|S>>>22),S=b+(I^(M|~R))+O[14]+2878612391&4294967295,b=M+(S<<15&4294967295|S>>>17),S=R+(M^(b|~I))+O[5]+4237533241&4294967295,R=b+(S<<21&4294967295|S>>>11),S=I+(b^(R|~M))+O[12]+1700485571&4294967295,I=R+(S<<6&4294967295|S>>>26),S=M+(R^(I|~b))+O[3]+2399980690&4294967295,M=I+(S<<10&4294967295|S>>>22),S=b+(I^(M|~R))+O[10]+4293915773&4294967295,b=M+(S<<15&4294967295|S>>>17),S=R+(M^(b|~I))+O[1]+2240044497&4294967295,R=b+(S<<21&4294967295|S>>>11),S=I+(b^(R|~M))+O[8]+1873313359&4294967295,I=R+(S<<6&4294967295|S>>>26),S=M+(R^(I|~b))+O[15]+4264355552&4294967295,M=I+(S<<10&4294967295|S>>>22),S=b+(I^(M|~R))+O[6]+2734768916&4294967295,b=M+(S<<15&4294967295|S>>>17),S=R+(M^(b|~I))+O[13]+1309151649&4294967295,R=b+(S<<21&4294967295|S>>>11),S=I+(b^(R|~M))+O[4]+4149444226&4294967295,I=R+(S<<6&4294967295|S>>>26),S=M+(R^(I|~b))+O[11]+3174756917&4294967295,M=I+(S<<10&4294967295|S>>>22),S=b+(I^(M|~R))+O[2]+718787259&4294967295,b=M+(S<<15&4294967295|S>>>17),S=R+(M^(b|~I))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(b+(S<<21&4294967295|S>>>11))&4294967295,N.g[2]=N.g[2]+b&4294967295,N.g[3]=N.g[3]+M&4294967295}r.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var R=I-this.blockSize,O=this.B,b=this.h,M=0;M<I;){if(b==0)for(;M<=R;)s(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<I;)if(O[b++]=N.charCodeAt(M++),b==this.blockSize){s(this,O),b=0;break}}else for(;M<I;)if(O[b++]=N[M++],b==this.blockSize){s(this,O),b=0;break}}this.h=b,this.o+=I},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var R=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=R&255,R/=256;for(this.u(N),N=Array(16),I=R=0;4>I;++I)for(var O=0;32>O;O+=8)N[R++]=this.g[I]>>>O&255;return N};function a(N,I){var R=h;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=I(N)}function u(N,I){this.h=I;for(var R=[],O=!0,b=N.length-1;0<=b;b--){var M=N[b]|0;O&&M==I||(R[b]=M,O=!1)}this.g=R}var h={};function f(N){return-128<=N&&128>N?a(N,function(I){return new u([I|0],0>I?-1:0)}):new u([N|0],0>N?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return G(_(-N));for(var I=[],R=1,O=0;N>=R;O++)I[O]=N/R|0,R*=4294967296;return new u(I,0)}function y(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return G(y(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(I,8)),O=w,b=0;b<N.length;b+=8){var M=Math.min(8,N.length-b),S=parseInt(N.substring(b,b+M),I);8>M?(M=_(Math.pow(I,M)),O=O.j(M).add(_(S))):(O=O.j(R),O=O.add(_(S)))}return O}var w=f(0),x=f(1),C=f(16777216);t=u.prototype,t.m=function(){if(U(this))return-G(this).m();for(var N=0,I=1,R=0;R<this.g.length;R++){var O=this.i(R);N+=(0<=O?O:4294967296+O)*I,I*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(V(this))return"0";if(U(this))return"-"+G(this).toString(N);for(var I=_(Math.pow(N,6)),R=this,O="";;){var b=j(R,I).g;R=P(R,b.j(I));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=b,V(R))return M+O;for(;6>M.length;)M="0"+M;O=M+O}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function V(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function U(N){return N.h==-1}t.l=function(N){return N=P(this,N),U(N)?-1:V(N)?0:1};function G(N){for(var I=N.g.length,R=[],O=0;O<I;O++)R[O]=~N.g[O];return new u(R,~N.h).add(x)}t.abs=function(){return U(this)?G(this):this},t.add=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],O=0,b=0;b<=I;b++){var M=O+(this.i(b)&65535)+(N.i(b)&65535),S=(M>>>16)+(this.i(b)>>>16)+(N.i(b)>>>16);O=S>>>16,M&=65535,S&=65535,R[b]=S<<16|M}return new u(R,R[R.length-1]&-2147483648?-1:0)};function P(N,I){return N.add(G(I))}t.j=function(N){if(V(this)||V(N))return w;if(U(this))return U(N)?G(this).j(G(N)):G(G(this).j(N));if(U(N))return G(this.j(G(N)));if(0>this.l(C)&&0>N.l(C))return _(this.m()*N.m());for(var I=this.g.length+N.g.length,R=[],O=0;O<2*I;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var b=0;b<N.g.length;b++){var M=this.i(O)>>>16,S=this.i(O)&65535,oe=N.i(b)>>>16,Oe=N.i(b)&65535;R[2*O+2*b]+=S*Oe,A(R,2*O+2*b),R[2*O+2*b+1]+=M*Oe,A(R,2*O+2*b+1),R[2*O+2*b+1]+=S*oe,A(R,2*O+2*b+1),R[2*O+2*b+2]+=M*oe,A(R,2*O+2*b+2)}for(O=0;O<I;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=I;O<2*I;O++)R[O]=0;return new u(R,0)};function A(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function k(N,I){this.g=N,this.h=I}function j(N,I){if(V(I))throw Error("division by zero");if(V(N))return new k(w,w);if(U(N))return I=j(G(N),I),new k(G(I.g),G(I.h));if(U(I))return I=j(N,G(I)),new k(G(I.g),I.h);if(30<N.g.length){if(U(N)||U(I))throw Error("slowDivide_ only works with positive integers.");for(var R=x,O=I;0>=O.l(N);)R=Z(R),O=Z(O);var b=$(R,1),M=$(O,1);for(O=$(O,2),R=$(R,2);!V(O);){var S=M.add(O);0>=S.l(N)&&(b=b.add(R),M=S),O=$(O,1),R=$(R,1)}return I=P(N,b.j(I)),new k(b,I)}for(b=w;0<=N.l(I);){for(R=Math.max(1,Math.floor(N.m()/I.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),M=_(R),S=M.j(I);U(S)||0<S.l(N);)R-=O,M=_(R),S=M.j(I);V(M)&&(M=x),b=b.add(M),N=P(N,S)}return new k(b,N)}t.A=function(N){return j(this,N).h},t.and=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)&N.i(O);return new u(R,this.h&N.h)},t.or=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)|N.i(O);return new u(R,this.h|N.h)},t.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)^N.i(O);return new u(R,this.h^N.h)};function Z(N){for(var I=N.g.length+1,R=[],O=0;O<I;O++)R[O]=N.i(O)<<1|N.i(O-1)>>>31;return new u(R,N.h)}function $(N,I){var R=I>>5;I%=32;for(var O=N.g.length-R,b=[],M=0;M<O;M++)b[M]=0<I?N.i(M+R)>>>I|N.i(M+R+1)<<32-I:N.i(M+R);return new u(b,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=_,u.fromString=y,ki=u}).apply(typeof Bg<"u"?Bg:typeof self<"u"?self:typeof window<"u"?window:{});var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oE,ga,aE,Gu,Zd,lE,uE,cE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,g){return l==Array.prototype||l==Object.prototype||(l[p]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Au=="object"&&Au];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,p){if(p)e:{var g=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var B=l[T];if(!(B in g))break e;g=g[B]}l=l[l.length-1],T=g[l],p=p(T),p!=T&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}function a(l,p){l instanceof String&&(l+="");var g=0,T=!1,B={next:function(){if(!T&&g<l.length){var H=g++;return{value:p(H,l[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(l){return l||function(){return a(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function _(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function y(l,p,g){return l.call.apply(l.bind,arguments)}function w(l,p,g){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,T),l.apply(p,B)}}return function(){return l.apply(p,arguments)}}function x(l,p,g){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:w,x.apply(null,arguments)}function C(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function V(l,p){function g(){}g.prototype=p.prototype,l.aa=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(T,B,H){for(var X=Array(arguments.length-2),De=2;De<arguments.length;De++)X[De-2]=arguments[De];return p.prototype[B].apply(T,X)}}function U(l){const p=l.length;if(0<p){const g=Array(p);for(let T=0;T<p;T++)g[T]=l[T];return g}return[]}function G(l,p){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(f(T)){const B=l.length||0,H=T.length||0;l.length=B+H;for(let X=0;X<H;X++)l[B+X]=T[X]}else l.push(T)}}class P{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function A(l){return/^[\s\xa0]*$/.test(l)}function k(){var l=h.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var Z=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function $(l,p,g){for(const T in l)p.call(g,l[T],T,l)}function N(l,p){for(const g in l)p.call(void 0,l[g],g,l)}function I(l){const p={};for(const g in l)p[g]=l[g];return p}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(l,p){let g,T;for(let B=1;B<arguments.length;B++){T=arguments[B];for(g in T)l[g]=T[g];for(let H=0;H<R.length;H++)g=R[H],Object.prototype.hasOwnProperty.call(T,g)&&(l[g]=T[g])}}function b(l){var p=1;l=l.split(":");const g=[];for(;0<p&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function M(l){h.setTimeout(()=>{throw l},0)}function S(){var l=ce;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class oe{constructor(){this.h=this.g=null}add(p,g){const T=Oe.get();T.set(p,g),this.h?this.h.next=T:this.g=T,this.h=T}}var Oe=new P(()=>new Le,l=>l.reset());class Le{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,W=!1,ce=new oe,J=()=>{const l=h.Promise.resolve(void 0);Fe=()=>{l.then(he)}};var he=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){M(g)}var p=Oe;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}W=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};h.addEventListener("test",g,p),h.removeEventListener("test",g,p)}catch{}return l}();function ye(l,p){if(Ie.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(Z){e:{try{j(p.nodeName);var B=!0;break e}catch{}B=!1}B||(p=null)}}else g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:pe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ye.aa.h.call(this)}}V(ye,Ie);var pe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),Un=0;function Pl(l,p,g,T,B){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!T,this.ha=B,this.key=++Un,this.da=this.fa=!1}function xr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Sr(l){this.src=l,this.g={},this.h=0}Sr.prototype.add=function(l,p,g,T,B){var H=l.toString();l=this.g[H],l||(l=this.g[H]=[],this.h++);var X=ci(l,p,T,B);return-1<X?(p=l[X],g||(p.fa=!1)):(p=new Pl(p,this.src,H,!!T,B),p.fa=g,l.push(p)),p};function Xn(l,p){var g=p.type;if(g in l.g){var T=l.g[g],B=Array.prototype.indexOf.call(T,p,void 0),H;(H=0<=B)&&Array.prototype.splice.call(T,B,1),H&&(xr(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function ci(l,p,g,T){for(var B=0;B<l.length;++B){var H=l[B];if(!H.da&&H.listener==p&&H.capture==!!g&&H.ha==T)return B}return-1}var Eo="closure_lm_"+(1e6*Math.random()|0),Ki={};function wo(l,p,g,T,B){if(Array.isArray(p)){for(var H=0;H<p.length;H++)wo(l,p[H],g,T,B);return null}return g=Rl(g),l&&l[dt]?l.K(p,g,_(T)?!!T.capture:!1,B):To(l,p,g,!1,T,B)}function To(l,p,g,T,B,H){if(!p)throw Error("Invalid event type");var X=_(B)?!!B.capture:!!B,De=Qi(l);if(De||(l[Eo]=De=new Sr(l)),g=De.add(p,g,T,X,H),g.proxy)return g;if(T=qi(),g.proxy=T,T.src=l,T.listener=g,l.addEventListener)ke||(B=X),B===void 0&&(B=!1),l.addEventListener(p.toString(),T,B);else if(l.attachEvent)l.attachEvent(Yi(p.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function qi(){function l(g){return p.call(l.src,l.listener,g)}const p=Nl;return l}function Cl(l,p,g,T,B){if(Array.isArray(p))for(var H=0;H<p.length;H++)Cl(l,p[H],g,T,B);else T=_(T)?!!T.capture:!!T,g=Rl(g),l&&l[dt]?(l=l.i,p=String(p).toString(),p in l.g&&(H=l.g[p],g=ci(H,g,T,B),-1<g&&(xr(H[g]),Array.prototype.splice.call(H,g,1),H.length==0&&(delete l.g[p],l.h--)))):l&&(l=Qi(l))&&(p=l.g[p.toString()],l=-1,p&&(l=ci(p,g,T,B)),(g=-1<l?p[l]:null)&&$i(g))}function $i(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[dt])Xn(p.i,l);else{var g=l.type,T=l.proxy;p.removeEventListener?p.removeEventListener(g,T,l.capture):p.detachEvent?p.detachEvent(Yi(g),T):p.addListener&&p.removeListener&&p.removeListener(T),(g=Qi(p))?(Xn(g,l),g.h==0&&(g.src=null,p[Eo]=null)):xr(l)}}}function Yi(l){return l in Ki?Ki[l]:Ki[l]="on"+l}function Nl(l,p){if(l.da)l=!0;else{p=new ye(p,this);var g=l.listener,T=l.ha||l.src;l.fa&&$i(l),l=g.call(T,p)}return l}function Qi(l){return l=l[Eo],l instanceof Sr?l:null}var Io="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rl(l){return typeof l=="function"?l:(l[Io]||(l[Io]=function(p){return l.handleEvent(p)}),l[Io])}function st(){ve.call(this),this.i=new Sr(this),this.M=this,this.F=null}V(st,ve),st.prototype[dt]=!0,st.prototype.removeEventListener=function(l,p,g,T){Cl(this,l,p,g,T)};function _t(l,p){var g,T=l.F;if(T)for(g=[];T;T=T.F)g.push(T);if(l=l.M,T=p.type||p,typeof p=="string")p=new Ie(p,l);else if(p instanceof Ie)p.target=p.target||l;else{var B=p;p=new Ie(T,l),O(p,B)}if(B=!0,g)for(var H=g.length-1;0<=H;H--){var X=p.g=g[H];B=hi(X,T,!0,p)&&B}if(X=p.g=l,B=hi(X,T,!0,p)&&B,B=hi(X,T,!1,p)&&B,g)for(H=0;H<g.length;H++)X=p.g=g[H],B=hi(X,T,!1,p)&&B}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var g=l.g[p],T=0;T<g.length;T++)xr(g[T]);delete l.g[p],l.h--}}this.F=null},st.prototype.K=function(l,p,g,T){return this.i.add(String(l),p,!1,g,T)},st.prototype.L=function(l,p,g,T){return this.i.add(String(l),p,!0,g,T)};function hi(l,p,g,T){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var B=!0,H=0;H<p.length;++H){var X=p[H];if(X&&!X.da&&X.capture==g){var De=X.listener,ot=X.ha||X.src;X.fa&&Xn(l.i,X),B=De.call(ot,T)!==!1&&B}}return B&&!T.defaultPrevented}function Ll(l,p,g){if(typeof l=="function")g&&(l=x(l,g));else if(l&&typeof l.handleEvent=="function")l=x(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(l,p||0)}function xo(l){l.g=Ll(()=>{l.g=null,l.i&&(l.i=!1,xo(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class kl extends ve{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:xo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(l){ve.call(this),this.h=l,this.g={}}V(di,ve);var So=[];function Ji(l){$(l.g,function(p,g){this.g.hasOwnProperty(g)&&$i(p)},l),l.g={}}di.prototype.N=function(){di.aa.N.call(this),Ji(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xi=h.JSON.stringify,oh=h.JSON.parse,fi=class{stringify(l){return h.JSON.stringify(l,void 0)}parse(l){return h.JSON.parse(l,void 0)}};function Ao(){}Ao.prototype.h=null;function Ol(l){return l.h||(l.h=l.i())}function Po(){}var Ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function es(){Ie.call(this,"d")}V(es,Ie);function Co(){Ie.call(this,"c")}V(Co,Ie);var er={},Dl=null;function ts(){return Dl=Dl||new st}er.La="serverreachability";function Ml(l){Ie.call(this,er.La,l)}V(Ml,Ie);function pi(l){const p=ts();_t(p,new Ml(p))}er.STAT_EVENT="statevent";function ns(l,p){Ie.call(this,er.STAT_EVENT,l),this.stat=p}V(ns,Ie);function Tt(l){const p=ts();_t(p,new ns(p,l))}er.Ma="timingevent";function bl(l,p){Ie.call(this,er.Ma,l),this.size=p}V(bl,Ie);function mi(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){l()},p)}function _i(){this.g=!0}_i.prototype.xa=function(){this.g=!1};function un(l,p,g,T,B,H){l.info(function(){if(l.g)if(H)for(var X="",De=H.split("&"),ot=0;ot<De.length;ot++){var Ae=De[ot].split("=");if(1<Ae.length){var Ue=Ae[0];Ae=Ae[1];var $e=Ue.split("_");X=2<=$e.length&&$e[1]=="type"?X+(Ue+"="+Ae+"&"):X+(Ue+"=redacted&")}}else X=null;else X=H;return"XMLHTTP REQ ("+T+") [attempt "+B+"]: "+p+`
`+g+`
`+X})}function se(l,p,g,T,B,H,X){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+B+"]: "+p+`
`+g+`
`+H+" "+X})}function tr(l,p,g,T){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ul(l,g)+(T?" "+T:"")})}function Vl(l,p){l.info(function(){return"TIMEOUT: "+p})}_i.prototype.info=function(){};function Ul(l,p){if(!l.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var T=g[l];if(!(2>T.length)){var B=T[1];if(Array.isArray(B)&&!(1>B.length)){var H=B[0];if(H!="noop"&&H!="stop"&&H!="close")for(var X=1;X<B.length;X++)B[X]=""}}}}return Xi(g)}catch{return p}}var gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},is;function xn(){}V(xn,Ao),xn.prototype.g=function(){return new XMLHttpRequest},xn.prototype.i=function(){return{}},is=new xn;function Sn(l,p,g,T){this.j=l,this.i=p,this.l=g,this.R=T||1,this.U=new di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bl}function Bl(){this.i=null,this.g="",this.h=!1}var Fl={},No={};function Ro(l,p,g){l.L=1,l.v=hn(et(p)),l.m=g,l.P=!0,Lo(l,null)}function Lo(l,p){l.F=Date.now(),os(l),l.A=et(l.v);var g=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Hl(g.i,"t",T),l.C=0,g=l.j.J,l.h=new Bl,l.g=Yl(l.j,g?p:null,!l.m),0<l.O&&(l.M=new kl(x(l.Y,l,l.g),l.O)),p=l.U,g=l.g,T=l.ca;var B="readystatechange";Array.isArray(B)||(B&&(So[0]=B.toString()),B=So);for(var H=0;H<B.length;H++){var X=wo(g,B[H],T||p.handleEvent,!1,p.h||p);if(!X)break;p.g[X.key]=X}p=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),pi(),un(l.i,l.u,l.A,l.l,l.R,l.m)}Sn.prototype.ca=function(l){l=l.target;const p=this.M;p&&bt(l)==3?p.j():this.Y(l)},Sn.prototype.Y=function(l){try{if(l==this.g)e:{const $e=bt(this.g);var p=this.g.Ba();const Or=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||Ko(this.g)))){this.J||$e!=4||p==7||(p==8||0>=Or?pi(3):pi(2)),ko(this);var g=this.g.Z();this.X=g;t:if(jl(this)){var T=Ko(this.g);l="";var B=T.length,H=bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),vi(this);var X="";break t}this.h.i=new h.TextDecoder}for(p=0;p<B;p++)this.h.h=!0,l+=this.h.i.decode(T[p],{stream:!(H&&p==B-1)});T.length=0,this.h.g+=l,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=g==200,se(this.i,this.u,this.A,this.l,this.R,$e,g),this.o){if(this.T&&!this.K){t:{if(this.g){var De,ot=this.g;if((De=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(De)){var Ae=De;break t}}Ae=null}if(g=Ae)tr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yi(this,g);else{this.o=!1,this.s=3,Tt(12),nr(this),vi(this);break e}}if(this.P){g=!0;let nt;for(;!this.J&&this.C<X.length;)if(nt=ss(this,X),nt==No){$e==4&&(this.s=4,Tt(14),g=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==Fl){this.s=4,Tt(15),tr(this.i,this.l,X,"[Invalid Chunk]"),g=!1;break}else tr(this.i,this.l,nt,null),yi(this,nt);if(jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||X.length!=0||this.h.h||(this.s=1,Tt(16),g=!1),this.o=this.o&&g,!g)tr(this.i,this.l,X,"[Invalid Chunked Response]"),nr(this),vi(this);else if(0<X.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),ms(Ue),Ue.M=!0,Tt(11))}}else tr(this.i,this.l,X,null),yi(this,X);$e==4&&nr(this),this.o&&!this.J&&($e==4?$o(this.j,this):(this.o=!1,os(this)))}else ah(this.g),g==400&&0<X.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),nr(this),vi(this)}}}catch{}finally{}};function jl(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ss(l,p){var g=l.C,T=p.indexOf(`
`,g);return T==-1?No:(g=Number(p.substring(g,T)),isNaN(g)?Fl:(T+=1,T+g>p.length?No:(p=p.slice(T,T+g),l.C=T+g,p)))}Sn.prototype.cancel=function(){this.J=!0,nr(this)};function os(l){l.S=Date.now()+l.I,zl(l,l.I)}function zl(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=mi(x(l.ba,l),p)}function ko(l){l.B&&(h.clearTimeout(l.B),l.B=null)}Sn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Vl(this.i,this.A),this.L!=2&&(pi(),Tt(17)),nr(this),this.s=2,vi(this)):zl(this,this.S-l)};function vi(l){l.j.G==0||l.J||$o(l.j,l)}function nr(l){ko(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Ji(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function yi(l,p){try{var g=l.j;if(g.G!=0&&(g.g==l||xe(g.h,l))){if(!l.K&&xe(g.h,l)&&g.G==3){try{var T=g.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var B=T;if(B[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)gs(g),fs(g);else break e;ps(g),Tt(18)}}else g.za=B[1],0<g.za-g.T&&37500>B[2]&&g.F&&g.v==0&&!g.C&&(g.C=mi(x(g.Za,g),6e3));if(1>=Pr(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ar(g,11)}else if((l.K||g.g==l)&&gs(g),!A(p))for(B=g.Da.g.parse(p),p=0;p<B.length;p++){let Ae=B[p];if(g.T=Ae[0],Ae=Ae[1],g.G==2)if(Ae[0]=="c"){g.K=Ae[1],g.ia=Ae[2];const Ue=Ae[3];Ue!=null&&(g.la=Ue,g.j.info("VER="+g.la));const $e=Ae[4];$e!=null&&(g.Aa=$e,g.j.info("SVER="+g.Aa));const Or=Ae[5];Or!=null&&typeof Or=="number"&&0<Or&&(T=1.5*Or,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const nt=l.g;if(nt){const ys=nt.g?nt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var H=T.h;H.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Be(H,H.h),H.h=null))}if(T.D){const jn=nt.g?nt.g.getResponseHeader("X-HTTP-Session-Id"):null;jn&&(T.ya=jn,de(T.I,T.D,jn))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var X=l;if(T.qa=vs(T,T.J?T.ia:null,T.W),X.K){wi(T.h,X);var De=X,ot=T.L;ot&&(De.I=ot),De.B&&(ko(De),os(De)),T.g=X}else Cn(T);0<g.i.length&&kr(g)}else Ae[0]!="stop"&&Ae[0]!="close"||ar(g,7);else g.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?ar(g,7):ds(g):Ae[0]!="noop"&&g.l&&g.l.ta(Ae),g.v=0)}}pi(4)}catch{}}var Ei=class{constructor(l,p){this.g=l,this.map=p}};function Oo(l){this.l=l||10,h.PerformanceNavigationTiming?(l=h.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Do(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Pr(l){return l.h?1:l.g?l.g.size:0}function xe(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Be(l,p){l.g?l.g.add(p):l.h=p}function wi(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Oo.prototype.cancel=function(){if(this.i=rr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function rr(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const g of l.g.values())p=p.concat(g.D);return p}return U(l.i)}function Cr(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(f(l)){for(var p=[],g=l.length,T=0;T<g;T++)p.push(l[T]);return p}p=[],g=0;for(T in l)p[g++]=l[T];return p}function Mo(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(f(l)||typeof l=="string"){var p=[];l=l.length;for(var g=0;g<l;g++)p.push(g);return p}p=[],g=0;for(const T in l)p[g++]=T;return p}}}function ge(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(f(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var g=Mo(l),T=Cr(l),B=T.length,H=0;H<B;H++)p.call(void 0,T[H],g&&g[H],l)}var We=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bo(l,p){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var T=l[g].indexOf("="),B=null;if(0<=T){var H=l[g].substring(0,T);B=l[g].substring(T+1)}else H=l[g];p(H,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function cn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof cn){this.h=l.h,as(this,l.j),this.o=l.o,this.g=l.g,ir(this,l.s),this.l=l.l;var p=l.i,g=new sr;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Bn(this,g),this.m=l.m}else l&&(p=String(l).match(We))?(this.h=!1,as(this,p[1]||"",!0),this.o=An(p[2]||""),this.g=An(p[3]||"",!0),ir(this,p[4]),this.l=An(p[5]||"",!0),Bn(this,p[6]||"",!0),this.m=An(p[7]||"")):(this.h=!1,this.i=new sr(null,this.h))}cn.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Pn(p,Nr,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Pn(p,Nr,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Pn(g,g.charAt(0)=="/"?Bo:Uo,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Pn(g,Fo)),l.join("")};function et(l){return new cn(l)}function as(l,p,g){l.j=g?An(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function ir(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Bn(l,p,g){p instanceof sr?(l.i=p,dn(l.i,l.h)):(g||(p=Pn(p,ls)),l.i=new sr(p,l.h))}function de(l,p,g){l.i.set(p,g)}function hn(l){return de(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function An(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Pn(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,Vo),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Vo(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Nr=/[#\/\?@]/g,Uo=/[#\?:]/g,Bo=/[#\?]/g,ls=/[#\?@]/g,Fo=/#/g;function sr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Jt(l){l.g||(l.g=new Map,l.h=0,l.i&&bo(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=sr.prototype,t.add=function(l,p){Jt(this),this.i=null,l=le(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function jo(l,p){Jt(l),p=le(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function us(l,p){return Jt(l),p=le(l,p),l.g.has(p)}t.forEach=function(l,p){Jt(this),this.g.forEach(function(g,T){g.forEach(function(B){l.call(p,B,T,this)},this)},this)},t.na=function(){Jt(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let T=0;T<p.length;T++){const B=l[T];for(let H=0;H<B.length;H++)g.push(p[T])}return g},t.V=function(l){Jt(this);let p=[];if(typeof l=="string")us(this,l)&&(p=p.concat(this.g.get(le(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)p=p.concat(l[g])}return p},t.set=function(l,p){return Jt(this),this.i=null,l=le(this,l),us(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Hl(l,p,g){jo(l,p),0<g.length&&(l.i=null,l.g.set(le(l,p),U(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var T=p[g];const H=encodeURIComponent(String(T)),X=this.V(T);for(T=0;T<X.length;T++){var B=H;X[T]!==""&&(B+="="+encodeURIComponent(String(X[T]))),l.push(B)}}return this.i=l.join("&")};function le(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function dn(l,p){p&&!l.j&&(Jt(l),l.i=null,l.g.forEach(function(g,T){var B=T.toLowerCase();T!=B&&(jo(this,T),Hl(this,B,g))},l)),l.j=p}function Ve(l,p){const g=new _i;if(h.Image){const T=new Image;T.onload=C(fn,g,"TestLoadImage: loaded",!0,p,T),T.onerror=C(fn,g,"TestLoadImage: error",!1,p,T),T.onabort=C(fn,g,"TestLoadImage: abort",!1,p,T),T.ontimeout=C(fn,g,"TestLoadImage: timeout",!1,p,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else p(!1)}function Gl(l,p){const g=new _i,T=new AbortController,B=setTimeout(()=>{T.abort(),fn(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:T.signal}).then(H=>{clearTimeout(B),H.ok?fn(g,"TestPingServer: ok",!0,p):fn(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),fn(g,"TestPingServer: error",!1,p)})}function fn(l,p,g,T,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),T(g)}catch{}}function zo(){this.g=new fi}function Ho(l,p,g){const T=g||"";try{ge(l,function(B,H){let X=B;_(B)&&(X=Xi(B)),p.push(T+H+"="+encodeURIComponent(X))})}catch(B){throw p.push(T+"type="+encodeURIComponent("_badmap")),B}}function pn(l){this.l=l.Ub||null,this.j=l.eb||!1}V(pn,Ao),pn.prototype.g=function(){return new Rr(this.l,this.j)},pn.prototype.i=function(l){return function(){return l}}({});function Rr(l,p){st.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Rr,st),t=Rr.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Xt(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qe(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Xt(this)),this.g&&(this.readyState=3,Xt(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lr(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lr(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?qe(this):Xt(this),this.readyState==3&&Lr(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,qe(this))},t.Qa=function(l){this.g&&(this.response=l,qe(this))},t.ga=function(){this.g&&qe(this)};function qe(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Xt(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function Xt(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Go(l){let p="";return $(l,function(g,T){p+=T,p+=":",p+=g,p+=`\r
`}),p}function cs(l,p,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=Go(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):de(l,p,g))}function Ze(l){st.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Ze,st);var Wl=/^https?$/i,Wo=["POST","PUT"];t=Ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():is.g(),this.v=this.o?Ol(this.o):Ol(is),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(H){Zl(this,H);return}if(l=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var B in T)g.set(B,T[B]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())g.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(H=>H.toLowerCase()=="content-type"),B=h.FormData&&l instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Wo,p,void 0))||T||B||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,X]of g)this.g.setRequestHeader(H,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zt(this),this.u=!0,this.g.send(l),this.u=!1}catch(H){Zl(this,H)}};function Zl(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,Zo(l),hs(l)}function Zo(l){l.A||(l.A=!0,_t(l,"complete"),_t(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_t(this,"complete"),_t(this,"abort"),hs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hs(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?we(this):this.bb())},t.bb=function(){we(this)};function we(l){if(l.h&&typeof u<"u"&&(!l.v[1]||bt(l)!=4||l.Z()!=2)){if(l.u&&bt(l)==4)Ll(l.Ea,0,l);else if(_t(l,"readystatechange"),bt(l)==4){l.h=!1;try{const X=l.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var T;if(T=X===0){var B=String(l.D).match(We)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),T=!Wl.test(B?B.toLowerCase():"")}g=T}if(g)_t(l,"complete"),_t(l,"success");else{l.m=6;try{var H=2<bt(l)?l.g.statusText:""}catch{H=""}l.l=H+" ["+l.Z()+"]",Zo(l)}}finally{hs(l)}}}}function hs(l,p){if(l.g){zt(l);const g=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||_t(l,"ready");try{g.onreadystatechange=T}catch{}}}function zt(l){l.I&&(h.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function bt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<bt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),oh(p)}};function Ko(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ah(l){const p={};l=(l.g&&2<=bt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(A(l[T]))continue;var g=b(l[T]);const B=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const H=p[B]||[];p[B]=H,H.push(g)}N(p,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function or(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function Kl(l){this.Aa=0,this.i=[],this.j=new _i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=or("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=or("baseRetryDelayMs",5e3,l),this.cb=or("retryDelaySeedMs",1e4,l),this.Wa=or("forwardChannelMaxRetries",2,l),this.wa=or("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Oo(l&&l.concurrentRequestLimit),this.Da=new zo,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Kl.prototype,t.la=8,t.G=1,t.connect=function(l,p,g,T){Tt(0),this.W=l,this.H=p||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=vs(this,null,this.W),kr(this)};function ds(l){if(ql(l),l.G==3){var p=l.U++,g=et(l.I);if(de(g,"SID",l.K),de(g,"RID",p),de(g,"TYPE","terminate"),Ti(l,g),p=new Sn(l,l.j,p),p.L=2,p.v=hn(et(g)),g=!1,h.navigator&&h.navigator.sendBeacon)try{g=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&h.Image&&(new Image().src=p.v,g=!0),g||(p.g=Yl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),os(p)}$l(l)}function fs(l){l.g&&(ms(l),l.g.cancel(),l.g=null)}function ql(l){fs(l),l.u&&(h.clearTimeout(l.u),l.u=null),gs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&h.clearTimeout(l.s),l.s=null)}function kr(l){if(!Do(l.h)&&!l.s){l.s=!0;var p=l.Ga;Fe||J(),W||(Fe(),W=!0),ce.add(p,l),l.B=0}}function lh(l,p){return Pr(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=mi(x(l.Ga,l,p),Yo(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const B=new Sn(this,this.j,l);let H=this.o;if(this.S&&(H?(H=I(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(B.H=H,H=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=qo(this,B,p),g=et(this.I),de(g,"RID",l),de(g,"CVER",22),this.D&&de(g,"X-HTTP-Session-Id",this.D),Ti(this,g),H&&(this.O?p="headers="+encodeURIComponent(String(Go(H)))+"&"+p:this.m&&cs(g,this.m,H)),Be(this.h,B),this.Ua&&de(g,"TYPE","init"),this.P?(de(g,"$req",p),de(g,"SID","null"),B.T=!0,Ro(B,g,null)):Ro(B,g,p),this.G=2}}else this.G==3&&(l?en(this,l):this.i.length==0||Do(this.h)||en(this))};function en(l,p){var g;p?g=p.l:g=l.U++;const T=et(l.I);de(T,"SID",l.K),de(T,"RID",g),de(T,"AID",l.T),Ti(l,T),l.m&&l.o&&cs(T,l.m,l.o),g=new Sn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),p&&(l.i=p.D.concat(l.i)),p=qo(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Be(l.h,g),Ro(g,T,p)}function Ti(l,p){l.H&&$(l.H,function(g,T){de(p,T,g)}),l.l&&ge({},function(g,T){de(p,T,g)})}function qo(l,p,g){g=Math.min(l.i.length,g);var T=l.l?x(l.l.Na,l.l,l):null;e:{var B=l.i;let H=-1;for(;;){const X=["count="+g];H==-1?0<g?(H=B[0].g,X.push("ofs="+H)):H=0:X.push("ofs="+H);let De=!0;for(let ot=0;ot<g;ot++){let Ae=B[ot].g;const Ue=B[ot].map;if(Ae-=H,0>Ae)H=Math.max(0,B[ot].g-100),De=!1;else try{Ho(Ue,X,"req"+Ae+"_")}catch{T&&T(Ue)}}if(De){T=X.join("&");break e}}}return l=l.i.splice(0,g),p.D=l,T}function Cn(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;Fe||J(),W||(Fe(),W=!0),ce.add(p,l),l.v=0}}function ps(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=mi(x(l.Fa,l),Yo(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,_s(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=mi(x(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),fs(this),_s(this))};function ms(l){l.A!=null&&(h.clearTimeout(l.A),l.A=null)}function _s(l){l.g=new Sn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=et(l.qa);de(p,"RID","rpc"),de(p,"SID",l.K),de(p,"AID",l.T),de(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&de(p,"TO",l.ja),de(p,"TYPE","xmlhttp"),Ti(l,p),l.m&&l.o&&cs(p,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=hn(et(p)),g.m=null,g.P=!0,Lo(g,l)}t.Za=function(){this.C!=null&&(this.C=null,fs(this),ps(this),Tt(19))};function gs(l){l.C!=null&&(h.clearTimeout(l.C),l.C=null)}function $o(l,p){var g=null;if(l.g==p){gs(l),ms(l),l.g=null;var T=2}else if(xe(l.h,p))g=p.D,wi(l.h,p),T=1;else return;if(l.G!=0){if(p.o)if(T==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var B=l.B;T=ts(),_t(T,new bl(T,g)),kr(l)}else Cn(l);else if(B=p.s,B==3||B==0&&0<p.X||!(T==1&&lh(l,p)||T==2&&ps(l)))switch(g&&0<g.length&&(p=l.h,p.i=p.i.concat(g)),B){case 1:ar(l,5);break;case 4:ar(l,10);break;case 3:ar(l,6);break;default:ar(l,2)}}}function Yo(l,p){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*p}function ar(l,p){if(l.j.info("Error code "+p),p==2){var g=x(l.fb,l),T=l.Xa;const B=!T;T=new cn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||as(T,"https"),hn(T),B?Ve(T.toString(),g):Gl(T.toString(),g)}else Tt(2);l.G=0,l.l&&l.l.sa(p),$l(l),ql(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function $l(l){if(l.G=0,l.ka=[],l.l){const p=rr(l.h);(p.length!=0||l.i.length!=0)&&(G(l.ka,p),G(l.ka,l.i),l.h.i.length=0,U(l.i),l.i.length=0),l.l.ra()}}function vs(l,p,g){var T=g instanceof cn?et(g):new cn(g);if(T.g!="")p&&(T.g=p+"."+T.g),ir(T,T.s);else{var B=h.location;T=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;var H=new cn(null);T&&as(H,T),p&&(H.g=p),B&&ir(H,B),g&&(H.l=g),T=H}return g=l.D,p=l.ya,g&&p&&de(T,g,p),de(T,"VER",l.la),Ti(l,T),T}function Yl(l,p,g){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new Ze(new pn({eb:g})):new Ze(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qo(){}t=Qo.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ii(){}Ii.prototype.g=function(l,p){return new gt(l,p)};function gt(l,p){st.call(this),this.g=new Kl(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!A(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new mn(this)}V(gt,st),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){ds(this.g)},gt.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Xi(l),l=g);p.i.push(new Ei(p.Ya++,l)),p.G==3&&kr(p)},gt.prototype.N=function(){this.g.l=null,delete this.j,ds(this.g),delete this.g,gt.aa.N.call(this)};function Fn(l){es.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}V(Fn,es);function Ql(){Co.call(this),this.status=1}V(Ql,Co);function mn(l){this.g=l}V(mn,Qo),mn.prototype.ua=function(){_t(this.g,"a")},mn.prototype.ta=function(l){_t(this.g,new Fn(l))},mn.prototype.sa=function(l){_t(this.g,new Ql)},mn.prototype.ra=function(){_t(this.g,"b")},Ii.prototype.createWebChannel=Ii.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,cE=function(){return new Ii},uE=function(){return ts()},lE=er,Zd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,Gu=gi,rs.COMPLETE="complete",aE=rs,Po.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",st.prototype.listen=st.prototype.K,ga=Po,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,oE=Ze}).apply(typeof Au<"u"?Au:typeof self<"u"?self:typeof window<"u"?window:{});const Fg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new eE("@firebase/firestore");function ca(){return Bi.logLevel}function ie(t,...e){if(Bi.logLevel<=Ce.DEBUG){const n=e.map(ap);Bi.debug(`Firestore (${_o}): ${t}`,...n)}}function wr(t,...e){if(Bi.logLevel<=Ce.ERROR){const n=e.map(ap);Bi.error(`Firestore (${_o}): ${t}`,...n)}}function el(t,...e){if(Bi.logLevel<=Ce.WARN){const n=e.map(ap);Bi.warn(`Firestore (${_o}): ${t}`,...n)}}function ap(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: `+t;throw wr(e),new Error(e)}function be(t,e){t||fe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends mo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class FA{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Oi,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Oi)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string"),new UA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new Gt(e)}}class jA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new jA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){be(this.o===void 0);const r=a=>{a.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ie("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new HA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=WA(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function ro(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new mt(0,0))}static max(){return new me(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),u=n.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends tl{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new He(n)}static emptyPath(){return new He([])}}const ZA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends tl{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return ZA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new re(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new re(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new re(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(He.fromString(e))}static fromName(e){return new ae(He.fromString(e).popFirst(5))}static empty(){return new ae(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new He(e.slice()))}}function KA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new ni(s,ae.empty(),e)}function qA(t){return new ni(t.readTime,t.key,-1)}class ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ni(me.min(),ae.empty(),-1)}static max(){return new ni(me.max(),ae.empty(),-1)}}function $A(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==YA)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,r)=>{n(e)})}static reject(e){return new Y((n,r)=>{r(e)})}static waitFor(e){return new Y((n,r)=>{let s=0,a=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++a,u&&a===s&&n()},f=>r(f))}),u=!0,a===s&&n()})}static or(e){let n=Y.resolve(!1);for(const r of e)n=n.next(s=>s?Y.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new Y((r,s)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const _=f;n(e[_]).next(y=>{u[_]=y,++h,h===a&&r(u)},y=>s(y))}})}static doWhile(e,n){return new Y((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function JA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lp.oe=-1;function Wc(t){return t==null}function wc(t){return t===0&&1/t==-1/0}function XA(t){return typeof t=="number"&&Number.isInteger(t)&&!wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??xt.RED,this.left=s??xt.EMPTY,this.right=a??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new xt(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,s,a){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zg(this.data.getIterator())}getIteratorFrom(e){return new zg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class zg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new rn([])}unionWith(e){let n=new Pt(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new fE("Invalid base64 string: "+a):a}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const eP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(be(!!t),typeof t=="string"){let e=0;const n=eP.exec(t);if(be(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fi(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cp(t){const e=t.mapValue.fields.__previous_value__;return up(e)?cp(e):e}function nl(t){const e=ri(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r,s,a,u,h,f,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=_}}class rl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu={mapValue:{}};function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?up(t)?4:rP(t)?9007199254740991:nP(t)?10:11:fe()}function Jn(t,e){if(t===e)return!0;const n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nl(t).isEqual(nl(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=ri(s.timestampValue),h=ri(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Fi(s.bytesValue).isEqual(Fi(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return rt(s.geoPointValue.latitude)===rt(a.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return rt(s.integerValue)===rt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=rt(s.doubleValue),h=rt(a.doubleValue);return u===h?wc(u)===wc(h):isNaN(u)&&isNaN(h)}return!1}(t,e);case 9:return ro(t.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(jg(u)!==jg(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Jn(u[f],h[f])))return!1;return!0}(t,e);default:return fe()}}function il(t,e){return(t.values||[]).find(n=>Jn(n,e))!==void 0}function io(t,e){if(t===e)return 0;const n=ji(t),r=ji(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(a,u){const h=rt(a.integerValue||a.doubleValue),f=rt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return Hg(t.timestampValue,e.timestampValue);case 4:return Hg(nl(t),nl(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(a,u){const h=Fi(a),f=Fi(u);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),f=u.split("/");for(let _=0;_<h.length&&_<f.length;_++){const y=Re(h[_],f[_]);if(y!==0)return y}return Re(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,u){const h=Re(rt(a.latitude),rt(u.latitude));return h!==0?h:Re(rt(a.longitude),rt(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gg(t.arrayValue,e.arrayValue);case 10:return function(a,u){var h,f,_,y;const w=a.fields||{},x=u.fields||{},C=(h=w.value)===null||h===void 0?void 0:h.arrayValue,V=(f=x.value)===null||f===void 0?void 0:f.arrayValue,U=Re(((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0,((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0);return U!==0?U:Gg(C,V)}(t.mapValue,e.mapValue);case 11:return function(a,u){if(a===Cu.mapValue&&u===Cu.mapValue)return 0;if(a===Cu.mapValue)return 1;if(u===Cu.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),_=u.fields||{},y=Object.keys(_);f.sort(),y.sort();for(let w=0;w<f.length&&w<y.length;++w){const x=Re(f[w],y[w]);if(x!==0)return x;const C=io(h[f[w]],_[y[w]]);if(C!==0)return C}return Re(f.length,y.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Hg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=ri(t),r=ri(e),s=Re(n.seconds,r.seconds);return s!==0?s:Re(n.nanos,r.nanos)}function Gg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=io(n[s],r[s]);if(a)return a}return Re(n.length,r.length)}function so(t){return Kd(t)}function Kd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Kd(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Kd(n.fields[u])}`;return s+"}"}(t.mapValue):fe()}function Wg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qd(t){return!!t&&"integerValue"in t}function hp(t){return!!t&&"arrayValue"in t}function Zg(t){return!!t&&"nullValue"in t}function Kg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wu(t){return!!t&&"mapValue"in t}function nP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function La(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=La(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=La(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=La(n)}setAll(e){let n=St.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=h.popLast()}u?r[h.lastSegment()]=La(u):s.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gi(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Zt(La(this.value))}}function pE(t){const e=[];return Gi(t.fields,(n,r)=>{const s=new St([n]);if(Wu(r)){const a=pE(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,a,u,h){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Dt(e,0,me.min(),me.min(),me.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,me.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,me.min(),me.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,me.min(),me.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.position=e,this.inclusive=n}}function qg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],u=t.position[s];if(a.field.isKeyField()?r=ae.comparator(ae.fromName(u.referenceValue),n.key):r=io(u,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function $g(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n="asc"){this.field=e,this.dir=n}}function iP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{}class ht extends mE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oP(e,n,r):n==="array-contains"?new uP(e,r):n==="in"?new cP(e,r):n==="not-in"?new hP(e,r):n==="array-contains-any"?new dP(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aP(e,r):new lP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(io(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends mE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vn(e,n)}matches(e){return _E(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _E(t){return t.op==="and"}function gE(t){return sP(t)&&_E(t)}function sP(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function $d(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+so(t.value);if(gE(t))return t.filters.map(e=>$d(e)).join(",");{const e=t.filters.map(n=>$d(n)).join(",");return`${t.op}(${e})`}}function vE(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&Jn(r.value,s.value)}(t,e):t instanceof Vn?function(r,s){return s instanceof Vn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,u,h)=>a&&vE(u,s.filters[h]),!0):!1}(t,e):void fe()}function yE(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`}(t):t instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(yE).join(" ,")+"}"}(t):"Filter"}class oP extends ht{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class aP extends ht{constructor(e,n){super(e,"in",n),this.keys=EE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lP extends ht{constructor(e,n){super(e,"not-in",n),this.keys=EE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function EE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class uP extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hp(n)&&il(n.arrayValue,this.value)}}class cP extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&il(this.value.arrayValue,n)}}class hP extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!il(this.value.arrayValue,n)}}class dP extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function Yg(t,e=null,n=[],r=[],s=null,a=null,u=null){return new fP(t,e,n,r,s,a,u)}function dp(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$d(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>so(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>so(r)).join(",")),e.ue=n}return e.ue}function fp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$g(t.startAt,e.startAt)&&$g(t.endAt,e.endAt)}function Yd(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function pP(t,e,n,r,s,a,u,h){return new go(t,e,n,r,s,a,u,h)}function pp(t){return new go(t)}function Qg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wE(t){return t.collectionGroup!==null}function ka(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Pt(St.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(_=>{_.isInequality()&&(h=h.add(_.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new sl(a,r))}),n.has(St.keyField().canonicalString())||e.ce.push(new sl(St.keyField(),r))}return e.ce}function qn(t){const e=_e(t);return e.le||(e.le=mP(e,ka(t))),e.le}function mP(t,e){if(t.limitType==="F")return Yg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new sl(s.field,a)});const n=t.endAt?new Tc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tc(t.startAt.position,t.startAt.inclusive):null;return Yg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qd(t,e){const n=t.filters.concat([e]);return new go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ic(t,e,n){return new go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zc(t,e){return fp(qn(t),qn(e))&&t.limitType===e.limitType}function TE(t){return`${dp(qn(t))}|lt:${t.limitType}`}function Ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yE(s)).join(", ")}]`),Wc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>so(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>so(s)).join(",")),`Target(${r})`}(qn(t))}; limitType=${t.limitType})`}function Kc(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ae.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of ka(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(u,h,f){const _=qg(u,h,f);return u.inclusive?_<=0:_<0}(r.startAt,ka(r),s)||r.endAt&&!function(u,h,f){const _=qg(u,h,f);return u.inclusive?_>=0:_>0}(r.endAt,ka(r),s))}(t,e)}function _P(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IE(t){return(e,n)=>{let r=!1;for(const s of ka(t)){const a=gP(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function gP(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(a,u,h){const f=u.data.field(a),_=h.data.field(a);return f!==null&&_!==null?io(f,_):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return dE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=new Xe(ae.comparator);function Tr(){return vP}const xE=new Xe(ae.comparator);function va(...t){let e=xE;for(const n of t)e=e.insert(n.key,n);return e}function SE(t){let e=xE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ni(){return Oa()}function AE(){return Oa()}function Oa(){return new vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const yP=new Xe(ae.comparator),EP=new Pt(ae.comparator);function Se(...t){let e=EP;for(const n of t)e=e.add(n);return e}const wP=new Pt(Re);function TP(){return wP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function PE(t){return{integerValue:""+t}}function CE(t,e){return XA(e)?PE(e):mp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function IP(t,e,n){return t instanceof ol?function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&up(a)&&(a=cp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(n,e):t instanceof al?RE(t,e):t instanceof ll?LE(t,e):function(s,a){const u=NE(s,a),h=Jg(u)+Jg(s.Pe);return qd(u)&&qd(s.Pe)?PE(h):mp(s.serializer,h)}(t,e)}function xP(t,e,n){return t instanceof al?RE(t,e):t instanceof ll?LE(t,e):n}function NE(t,e){return t instanceof ul?function(r){return qd(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class ol extends qc{}class al extends qc{constructor(e){super(),this.elements=e}}function RE(t,e){const n=kE(e);for(const r of t.elements)n.some(s=>Jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ll extends qc{constructor(e){super(),this.elements=e}}function LE(t,e){let n=kE(e);for(const r of t.elements)n=n.filter(s=>!Jn(s,r));return{arrayValue:{values:n}}}class ul extends qc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jg(t){return rt(t.integerValue||t.doubleValue)}function kE(t){return hp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n){this.field=e,this.transform=n}}function SP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof al&&s instanceof al||r instanceof ll&&s instanceof ll?ro(r.elements,s.elements,Jn):r instanceof ul&&s instanceof ul?Jn(r.Pe,s.Pe):r instanceof ol&&s instanceof ol}(t.transform,e.transform)}class AP{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $c{}function DE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bE(t.key,$n.none()):new El(t.key,t.data,$n.none());{const n=t.data,r=Zt.empty();let s=new Pt(St.comparator);for(let a of e.fields)if(!s.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new li(t.key,r,new rn(s.toArray()),$n.none())}}function PP(t,e,n){t instanceof El?function(s,a,u){const h=s.value.clone(),f=ev(s.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(t,e,n):t instanceof li?function(s,a,u){if(!Zu(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=ev(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(ME(s)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(t,e,n):function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n,r){return t instanceof El?function(a,u,h,f){if(!Zu(a.precondition,u))return h;const _=a.value.clone(),y=tv(a.fieldTransforms,f,u);return _.setAll(y),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(t,e,n,r):t instanceof li?function(a,u,h,f){if(!Zu(a.precondition,u))return h;const _=tv(a.fieldTransforms,f,u),y=u.data;return y.setAll(ME(a)),y.setAll(_),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(t,e,n,r):function(a,u,h){return Zu(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(t,e,n)}function CP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=NE(r.transform,s||null);a!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,a))}return n||null}function Xg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ro(r,s,(a,u)=>SP(a,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class El extends $c{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class li extends $c{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ME(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ev(t,e,n){const r=new Map;be(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,xP(u,h,n[s]))}return r}function tv(t,e,n){const r=new Map;for(const s of t){const a=s.transform,u=n.data.field(s.field);r.set(s.field,IP(a,u,e))}return r}class bE extends $c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NP extends $c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&PP(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AE();return this.mutations.forEach(s=>{const a=e.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=n.has(s.key)?null:h;const f=DE(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(n,r)=>Xg(n,r))&&ro(this.baseMutations,e.baseMutations,(n,r)=>Xg(n,r))}}class _p{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){be(e.mutations.length===r.length);let s=function(){return yP}();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new _p(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Pe;function OP(t){switch(t){default:return fe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function VE(t){if(t===void 0)return wr("GRPC error has no .code"),K.UNKNOWN;switch(t){case lt.OK:return K.OK;case lt.CANCELLED:return K.CANCELLED;case lt.UNKNOWN:return K.UNKNOWN;case lt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case lt.INTERNAL:return K.INTERNAL;case lt.UNAVAILABLE:return K.UNAVAILABLE;case lt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case lt.NOT_FOUND:return K.NOT_FOUND;case lt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case lt.ABORTED:return K.ABORTED;case lt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case lt.DATA_LOSS:return K.DATA_LOSS;default:return fe()}}(Pe=lt||(lt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new ki([4294967295,4294967295],0);function nv(t){const e=DP().encode(t),n=new sE;return n.update(e),new Uint8Array(n.digest())}function rv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ki([n,r],0),new ki([s,a],0)]}class gp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ya(`Invalid padding: ${n}`);if(r<0)throw new ya(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ya(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ya(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ki.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ki.fromNumber(r)));return s.compare(MP)===1&&(s=new ki([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=nv(e),[r,s]=rv(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);if(!this.de(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new gp(a,s,n);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ie===0)return;const n=nv(e),[r,s]=rv(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yc(me.min(),s,new Xe(Re),Tr(),Se())}}class wl{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wl(r,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class UE{constructor(e,n){this.targetId=e,this.me=n}}class BE{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class iv{constructor(){this.fe=0,this.ge=ov(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),r=Se();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:fe()}}),new wl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ov()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tr(),this.qe=sv(),this.Qe=new Xe(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(Yd(a))if(r===0){const u=new ae(a.path);this.Ue(n,u,Dt.newNoDocument(u,me.min()))}else be(r===1);else{const u=this.Ye(n);if(u!==r){const h=this.Ze(e),f=h?this.Xe(h,e,u):1;if(f!==0){this.je(n);const _=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,_)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let u,h;try{u=Fi(r).toUint8Array()}catch(f){if(f instanceof fE)return el("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new gp(u,s,a)}catch(f){return el(f instanceof ya?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,u)=>{const h=this.Je(u);if(h){if(a.current&&Yd(h.target)){const f=new ae(h.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,Dt.newNoDocument(f,e))}a.be&&(n.set(u,a.ve()),a.Ce())}});let r=Se();this.qe.forEach((a,u)=>{let h=!0;u.forEachWhile(f=>{const _=this.Je(f);return!_||_.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const s=new Yc(e,n,this.Qe,this.ke,r);return this.ke=Tr(),this.qe=sv(),this.Qe=new Xe(Re),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new iv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Pt(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sv(){return new Xe(ae.comparator)}function ov(){return new Xe(ae.comparator)}const VP={asc:"ASCENDING",desc:"DESCENDING"},UP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BP={and:"AND",or:"OR"};class FP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jd(t,e){return t.useProto3Json||Wc(e)?e:{value:e}}function xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jP(t,e){return xc(t,e.toTimestamp())}function Yn(t){return be(!!t),me.fromTimestamp(function(n){const r=ri(n);return new mt(r.seconds,r.nanos)}(t))}function vp(t,e){return Xd(t,e).canonicalString()}function Xd(t,e){const n=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jE(t){const e=He.fromString(t);return be(ZE(e)),e}function ef(t,e){return vp(t.databaseId,e.path)}function Wh(t,e){const n=jE(e);if(n.get(1)!==t.databaseId.projectId)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(HE(n))}function zE(t,e){return vp(t.databaseId,e)}function zP(t){const e=jE(t);return e.length===4?He.emptyPath():HE(e)}function tf(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HE(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function av(t,e,n){return{name:ef(t,e),fields:n.value.mapValue.fields}}function HP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(_,y){return _.useProto3Json?(be(y===void 0||typeof y=="string"),Nt.fromBase64String(y||"")):(be(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Nt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(_){const y=_.code===void 0?K.UNKNOWN:VE(_.code);return new re(y,_.message||"")}(u);n=new BE(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wh(t,r.document.name),a=Yn(r.document.updateTime),u=r.document.createTime?Yn(r.document.createTime):me.min(),h=new Zt({mapValue:{fields:r.document.fields}}),f=Dt.newFoundDocument(s,a,u,h),_=r.targetIds||[],y=r.removedTargetIds||[];n=new Ku(_,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wh(t,r.document),a=r.readTime?Yn(r.readTime):me.min(),u=Dt.newNoDocument(s,a),h=r.removedTargetIds||[];n=new Ku([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wh(t,r.document),a=r.removedTargetIds||[];n=new Ku([],a,s,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new kP(s,a),h=r.targetId;n=new UE(h,u)}}return n}function GP(t,e){let n;if(e instanceof El)n={update:av(t,e.key,e.value)};else if(e instanceof bE)n={delete:ef(t,e.key)};else if(e instanceof li)n={update:av(t,e.key,e.data),updateMask:XP(e.fieldMask)};else{if(!(e instanceof NP))return fe();n={verify:ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const h=u.transform;if(h instanceof ol)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof al)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ll)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ul)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:jP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:fe()}(t,e.precondition)),n}function WP(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(s,a){let u=s.updateTime?Yn(s.updateTime):Yn(a);return u.isEqual(me.min())&&(u=Yn(a)),new AP(u,s.transformResults||[])}(n,e))):[]}function ZP(t,e){return{documents:[zE(t,e.path)]}}function KP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zE(t,s);const a=function(_){if(_.length!==0)return WE(Vn.create(_,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const u=function(_){if(_.length!==0)return _.map(y=>function(x){return{field:As(x.field),direction:YP(x.dir)}}(y))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=Jd(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{_t:n,parent:s}}function qP(t){let e=zP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){be(r===1);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];n.where&&(a=function(w){const x=GE(w);return x instanceof Vn&&gE(x)?x.getFilters():[x]}(n.where));let u=[];n.orderBy&&(u=function(w){return w.map(x=>function(V){return new sl(Ps(V.field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(x))}(n.orderBy));let h=null;n.limit&&(h=function(w){let x;return x=typeof w=="object"?w.value:w,Wc(x)?null:x}(n.limit));let f=null;n.startAt&&(f=function(w){const x=!!w.before,C=w.values||[];return new Tc(C,x)}(n.startAt));let _=null;return n.endAt&&(_=function(w){const x=!w.before,C=w.values||[];return new Tc(C,x)}(n.endAt)),pP(e,s,u,a,h,"F",f,_)}function $P(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ps(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ps(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ps(n.unaryFilter.field);return ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ps(n.unaryFilter.field);return ht.create(u,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Ps(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(r=>GE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function YP(t){return VP[t]}function QP(t){return UP[t]}function JP(t){return BP[t]}function As(t){return{fieldPath:t.canonicalString()}}function Ps(t){return St.fromServerFormat(t.fieldPath)}function WE(t){return t instanceof ht?function(n){if(n.op==="=="){if(Kg(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(Zg(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kg(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(Zg(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:QP(n.op),value:n.value}}}(t):t instanceof Vn?function(n){const r=n.getFilters().map(s=>WE(s));return r.length===1?r[0]:{compositeFilter:{op:JP(n.op),filters:r}}}(t):fe()}function XP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r,s,a=me.min(),u=me.min(),h=Nt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.ct=e}}function t1(t){const e=qP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ic(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.un=new r1}addToCollectionParentIndex(e,n){return this.un.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(ni.min())}updateCollectionGroup(e,n,r){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class r1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Pt(He.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new oo(0)}static kn(){return new oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Da(r.mutation,s,rn.empty(),mt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Se()){const s=Ni();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let u=va();return a.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=Ni();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Se()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((u,h)=>{n.set(u,h)})})}computeViews(e,n,r,s){let a=Tr();const u=Oa(),h=function(){return Oa()}();return n.forEach((f,_)=>{const y=r.get(_.key);s.has(_.key)&&(y===void 0||y.mutation instanceof li)?a=a.insert(_.key,_):y!==void 0?(u.set(_.key,y.mutation.getFieldMask()),Da(y.mutation,_,y.mutation.getFieldMask(),mt.now())):u.set(_.key,rn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((_,y)=>u.set(_,y)),n.forEach((_,y)=>{var w;return h.set(_,new s1(y,(w=u.get(_))!==null&&w!==void 0?w:null))}),h))}recalculateAndSaveOverlays(e,n){const r=Oa();let s=new Xe((u,h)=>u-h),a=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const h of u)h.keys().forEach(f=>{const _=n.get(f);if(_===null)return;let y=r.get(f)||rn.empty();y=h.applyToLocalView(_,y),r.set(f,y);const w=(s.get(h.batchId)||Se()).add(f);s=s.insert(h.batchId,w)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),_=f.key,y=f.value,w=AE();y.forEach(x=>{if(!a.has(x)){const C=DE(n.get(x),r.get(x));C!==null&&w.set(x,C),a=a.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,w))}return Y.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(u){return ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Y.resolve(Ni());let h=-1,f=a;return u.next(_=>Y.forEach(_,(y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(y)?Y.resolve():this.remoteDocumentCache.getEntry(e,y).next(x=>{f=f.insert(y,x)}))).next(()=>this.populateOverlays(e,_,a)).next(()=>this.computeViews(e,f,_,Se())).next(y=>({batchId:h,changes:SE(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=va();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let u=va();return this.indexManager.getCollectionParents(e,a).next(h=>Y.forEach(h,f=>{const _=function(w,x){return new go(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,_,r,s).next(y=>{y.forEach((w,x)=>{u=u.insert(w,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(u=>{a.forEach((f,_)=>{const y=_.getKey();u.get(y)===null&&(u=u.insert(y,Dt.newInvalidDocument(y)))});let h=va();return u.forEach((f,_)=>{const y=a.get(f);y!==void 0&&Da(y.mutation,_,rn.empty(),mt.now()),Kc(n,_)&&(h=h.insert(f,_))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Y.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Yn(s.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:t1(s.bundledQuery),readTime:Yn(s.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.overlays=new Xe(ae.comparator),this.Ir=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ni();return Y.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),Y.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),Y.resolve()}getOverlaysForCollection(e,n,r){const s=Ni(),a=n.length+1,u=new ae(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,_=f.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return Y.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Xe((_,y)=>_-y);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let y=a.get(_.largestBatchId);y===null&&(y=Ni(),a=a.insert(_.largestBatchId,y)),y.set(_.getKey(),_)}}const h=Ni(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,y)=>h.set(_,y)),!(h.size()>=s)););return Y.resolve(h)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new LP(n,r));let a=this.Ir.get(n);a===void 0&&(a=Se(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.Tr=new Pt(yt.Er),this.dr=new Pt(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new He([])),r=new yt(n,e),s=new yt(n,e+1),a=[];return this.dr.forEachInRange([r,s],u=>{this.Vr(u),a.push(u.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new He([])),r=new yt(n,e),s=new yt(n,e+1);let a=Se();return this.dr.forEachInRange([r,s],u=>{a=a.add(u.key)}),a}containsKey(e){const n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Pt(yt.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new RP(a,n,r,s);this.mutationQueue.push(u);for(const h of s)this.br=this.br.add(new yt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Y.resolve(u)}lookupMutationBatch(e,n){return Y.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return Y.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],u=>{const h=this.Dr(u.wr);a.push(h)}),Y.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(Re);return n.forEach(s=>{const a=new yt(s,0),u=new yt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],h=>{r=r.add(h.wr)})}),Y.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ae.isDocumentKey(a)||(a=a.child(""));const u=new yt(new ae(a),0);let h=new Pt(Re);return this.br.forEachWhile(f=>{const _=f.key.path;return!!r.isPrefixOf(_)&&(_.length===s&&(h=h.add(f.wr)),!0)},u),Y.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Y.forEach(n.mutations,s=>{const a=new yt(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new yt(n,0),s=this.br.firstAfterOrEqual(r);return Y.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.Mr=e,this.docs=function(){return new Xe(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,u=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Tr();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Dt.newInvalidDocument(s))}),Y.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Tr();const u=n.path,h=new ae(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:_,value:{document:y}}=f.getNext();if(!u.isPrefixOf(_.path))break;_.path.length>u.length+1||$A(qA(y),r)<=0||(s.has(y.key)||Kc(n,y))&&(a=a.insert(y.key,y.mutableCopy()))}return Y.resolve(a)}getAllFromCollectionGroup(e,n,r,s){fe()}Or(e,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new d1(this)}getSize(e){return Y.resolve(this.size)}}class d1 extends i1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),Y.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.persistence=e,this.Nr=new vo(n=>dp(n),fp),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yp,this.targetCount=0,this.kr=oo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new oo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Kn(n),Y.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Y.waitFor(a).next(()=>s)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Y.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Y.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(u=>{a.push(s.markPotentiallyOrphaned(e,u))}),Y.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Y.resolve(r)}containsKey(e,n){return Y.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lp(0),this.Kr=!1,this.Kr=!0,this.$r=new u1,this.referenceDelegate=e(this),this.Ur=new f1(this),this.indexManager=new n1,this.remoteDocumentCache=function(s){return new h1(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new e1(n),this.Gr=new a1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new l1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new c1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new m1(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return Y.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class m1 extends QA{constructor(e){super(),this.currentSequenceNumber=e}}class Ep{constructor(e){this.persistence=e,this.Jr=new yp,this.Yr=null}static Zr(e){return new Ep(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Y.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,r=>{const s=ae.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Y.or([()=>Y.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Se(),s=Se();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new wp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return AS()?8:JA(xS())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new _1;return this.Xi(e,n,u).next(h=>{if(a.result=h,this.zi)return this.es(e,n,u,h.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ca()<=Ce.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(ca()<=Ce.DEBUG&&ie("QueryEngine","Query:",Ss(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ca()<=Ce.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):Y.resolve())}Yi(e,n){if(Qg(n))return Y.resolve(null);let r=qn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ic(n,null,"F"),r=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Se(...a);return this.Ji.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const _=this.ts(n,h);return this.ns(n,_,u,f.readTime)?this.Yi(e,Ic(n,null,"F")):this.rs(e,_,n,f)}))})))}Zi(e,n,r,s){return Qg(n)||s.isEqual(me.min())?Y.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const u=this.ts(n,a);return this.ns(n,u,r,s)?Y.resolve(null):(ca()<=Ce.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ss(n)),this.rs(e,u,n,KA(s,-1)).next(h=>h))})}ts(e,n){let r=new Pt(IE(e));return n.forEach((s,a)=>{Kc(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return ca()<=Ce.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Ss(n)),this.Ji.getDocumentsMatchingQuery(e,n,ni.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Xe(Re),this._s=new vo(a=>dp(a),fp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function y1(t,e,n,r){return new v1(t,e,n,r)}async function KE(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let f=Se();for(const _ of s){u.push(_.batchId);for(const y of _.mutations)f=f.add(y.key)}for(const _ of a){h.push(_.batchId);for(const y of _.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(r,f).next(_=>({hs:_,removedBatchIds:u,addedBatchIds:h}))})})}function E1(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,f,_,y){const w=_.batch,x=w.keys();let C=Y.resolve();return x.forEach(V=>{C=C.next(()=>y.getEntry(f,V)).next(U=>{const G=_.docVersions.get(V);be(G!==null),U.version.compareTo(G)<0&&(w.applyToRemoteDocument(U,_),U.isValidDocument()&&(U.setReadTime(_.commitVersion),y.addEntry(U)))})}),C.next(()=>h.mutationQueue.removeMutationBatch(f,w))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Se();for(let _=0;_<h.mutationResults.length;++_)h.mutationResults[_].transformResults.length>0&&(f=f.add(h.batch.mutations[_].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function qE(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function w1(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];e.targetChanges.forEach((y,w)=>{const x=s.get(w);if(!x)return;h.push(n.Ur.removeMatchingKeys(a,y.removedDocuments,w).next(()=>n.Ur.addMatchingKeys(a,y.addedDocuments,w)));let C=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Nt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):y.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(y.resumeToken,r)),s=s.insert(w,C),function(U,G,P){return U.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(x,C,y)&&h.push(n.Ur.updateTargetData(a,C))});let f=Tr(),_=Se();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,y))}),h.push(T1(a,u,e.documentUpdates).next(y=>{f=y.Ps,_=y.Is})),!r.isEqual(me.min())){const y=n.Ur.getLastRemoteSnapshotVersion(a).next(w=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(y)}return Y.waitFor(h).next(()=>u.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,f,_)).next(()=>f)}).then(a=>(n.os=s,a))}function T1(t,e,n){let r=Se(),s=Se();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let u=Tr();return n.forEach((h,f)=>{const _=a.get(h);f.isFoundDocument()!==_.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(me.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||f.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):ie("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",f.version)}),{Ps:u,Is:s}})}function I1(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function x1(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,Y.resolve(s)):n.Ur.allocateTargetId(r).next(u=>(s=new Hr(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function nf(t,e,n){const r=_e(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!yl(u))throw u;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function lv(t,e,n){const r=_e(t);let s=me.min(),a=Se();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,_,y){const w=_e(f),x=w._s.get(y);return x!==void 0?Y.resolve(w.os.get(x)):w.Ur.getTargetData(_,y)}(r,u,qn(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next(f=>{a=f})}).next(()=>r.ss.getDocumentsMatchingQuery(u,e,n?s:me.min(),n?a:Se())).next(h=>(S1(r,_P(e),h),{documents:h,Ts:a})))}function S1(t,e,n){let r=t.us.get(e)||me.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class uv{constructor(){this.activeTargetIds=TP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A1{constructor(){this.so=new uv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=null;function Zh(){return Nu===null?Nu=function(){return 268435456+Math.round(2147483648*Math.random())}():Nu++,"0x"+Nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class R1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,u){const h=Zh(),f=this.xo(n,r.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${h}:`,f,s);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,a,u),this.No(n,f,_,s).then(y=>(ie("RestConnection",`Received RPC '${n}' ${h}: `,y),y),y=>{throw el("RestConnection",`RPC '${n}' ${h} failed with error: `,y,"url: ",f,"request:",s),y})}Lo(n,r,s,a,u,h){return this.Mo(n,r,s,a,u)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,u)=>n[u]=a),s&&s.headers.forEach((a,u)=>n[u]=a)}xo(n,r){const s=C1[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=Zh();return new Promise((u,h)=>{const f=new oE;f.setWithCredentials(!0),f.listenOnce(aE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Gu.NO_ERROR:const y=f.getResponseJson();ie(kt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case Gu.TIMEOUT:ie(kt,`RPC '${e}' ${a} timed out`),h(new re(K.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const w=f.getStatus();if(ie(kt,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const C=x==null?void 0:x.error;if(C&&C.status&&C.message){const V=function(G){const P=G.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(P)>=0?P:K.UNKNOWN}(C.status);h(new re(V,C.message))}else h(new re(K.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new re(K.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{ie(kt,`RPC '${e}' ${a} completed.`)}});const _=JSON.stringify(s);ie(kt,`RPC '${e}' ${a} sending request:`,s),f.send(n,"POST",_,r,15)})}Bo(e,n,r){const s=Zh(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=cE(),h=uE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(f.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const y=a.join("");ie(kt,`Creating RPC '${e}' stream ${s}: ${y}`,f);const w=u.createWebChannel(y,f);let x=!1,C=!1;const V=new N1({Io:G=>{C?ie(kt,`Not sending because RPC '${e}' stream ${s} is closed:`,G):(x||(ie(kt,`Opening RPC '${e}' stream ${s} transport.`),w.open(),x=!0),ie(kt,`RPC '${e}' stream ${s} sending:`,G),w.send(G))},To:()=>w.close()}),U=(G,P,A)=>{G.listen(P,k=>{try{A(k)}catch(j){setTimeout(()=>{throw j},0)}})};return U(w,ga.EventType.OPEN,()=>{C||(ie(kt,`RPC '${e}' stream ${s} transport opened.`),V.yo())}),U(w,ga.EventType.CLOSE,()=>{C||(C=!0,ie(kt,`RPC '${e}' stream ${s} transport closed`),V.So())}),U(w,ga.EventType.ERROR,G=>{C||(C=!0,el(kt,`RPC '${e}' stream ${s} transport errored:`,G),V.So(new re(K.UNAVAILABLE,"The operation could not be completed")))}),U(w,ga.EventType.MESSAGE,G=>{var P;if(!C){const A=G.data[0];be(!!A);const k=A,j=k.error||((P=k[0])===null||P===void 0?void 0:P.error);if(j){ie(kt,`RPC '${e}' stream ${s} received error:`,j);const Z=j.status;let $=function(R){const O=lt[R];if(O!==void 0)return VE(O)}(Z),N=j.message;$===void 0&&($=K.INTERNAL,N="Unknown error status: "+Z+" with message "+j.message),C=!0,V.So(new re($,N)),w.close()}else ie(kt,`RPC '${e}' stream ${s} received:`,A),V.bo(A)}}),U(h,lE.STAT_EVENT,G=>{G.stat===Zd.PROXY?ie(kt,`RPC '${e}' stream ${s} detected buffering proxy`):G.stat===Zd.NOPROXY&&ie(kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.wo()},0),V}}function Kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t){return new FP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r,s,a,u,h,f){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $E(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new re(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L1 extends YE{constructor(e,n,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=HP(this.serializer,e),r=function(a){if(!("targetChange"in a))return me.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?me.min():u.readTime?Yn(u.readTime):me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=tf(this.serializer),n.addTarget=function(a,u){let h;const f=u.target;if(h=Yd(f)?{documents:ZP(a,f)}:{query:KP(a,f)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=FE(a,u.resumeToken);const _=Jd(a,u.expectedCount);_!==null&&(h.expectedCount=_)}else if(u.snapshotVersion.compareTo(me.min())>0){h.readTime=xc(a,u.snapshotVersion.toTimestamp());const _=Jd(a,u.expectedCount);_!==null&&(h.expectedCount=_)}return h}(this.serializer,e);const r=$P(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=tf(this.serializer),n.removeTarget=e,this.a_(n)}}class k1 extends YE{constructor(e,n,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=WP(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=tf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Mo(e,Xd(n,r),s,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new re(K.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Lo(e,Xd(n,r),s,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new re(K.UNKNOWN,u.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class D1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wr(n),this.D_=!1):ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(u=>{r.enqueueAndForget(async()=>{Wi(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(f){const _=_e(f);_.L_.add(4),await Tl(_),_.q_.set("Unknown"),_.L_.delete(4),await Jc(_)}(this))})}),this.q_=new D1(r,s)}}async function Jc(t){if(Wi(t))for(const e of t.B_)await e(!0)}async function Tl(t){for(const e of t.B_)await e(!1)}function QE(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sp(n)?xp(n):yo(n).r_()&&Ip(n,e))}function Tp(t,e){const n=_e(t),r=yo(n);n.N_.delete(e),r.r_()&&JE(n,e),n.N_.size===0&&(r.r_()?r.o_():Wi(n)&&n.q_.set("Unknown"))}function Ip(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(t).A_(e)}function JE(t,e){t.Q_.xe(e),yo(t).R_(e)}function xp(t){t.Q_=new bP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),yo(t).start(),t.q_.v_()}function Sp(t){return Wi(t)&&!yo(t).n_()&&t.N_.size>0}function Wi(t){return _e(t).L_.size===0}function XE(t){t.Q_=void 0}async function b1(t){t.q_.set("Online")}async function V1(t){t.N_.forEach((e,n)=>{Ip(t,e)})}async function U1(t,e){XE(t),Sp(t)?(t.q_.M_(e),xp(t)):t.q_.set("Unknown")}async function B1(t,e,n){if(t.q_.set("Online"),e instanceof BE&&e.state===2&&e.cause)try{await async function(s,a){const u=a.cause;for(const h of a.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.N_.delete(h),s.Q_.removeTarget(h))}(t,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sc(t,r)}else if(e instanceof Ku?t.Q_.Ke(e):e instanceof UE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const r=await qE(t.localStore);n.compareTo(r)>=0&&await function(a,u){const h=a.Q_.rt(u);return h.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.N_.get(_);y&&a.N_.set(_,y.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,_)=>{const y=a.N_.get(f);if(!y)return;a.N_.set(f,y.withResumeToken(Nt.EMPTY_BYTE_STRING,y.snapshotVersion)),JE(a,f);const w=new Hr(y.target,f,_,y.sequenceNumber);Ip(a,w)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),await Sc(t,r)}}async function Sc(t,e,n){if(!yl(e))throw e;t.L_.add(1),await Tl(t),t.q_.set("Offline"),n||(n=()=>qE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Jc(t)})}function ew(t,e){return e().catch(n=>Sc(t,n,e))}async function Xc(t){const e=_e(t),n=ii(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;F1(e);)try{const s=await I1(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,j1(e,s)}catch(s){await Sc(e,s)}tw(e)&&nw(e)}function F1(t){return Wi(t)&&t.O_.length<10}function j1(t,e){t.O_.push(e);const n=ii(t);n.r_()&&n.V_&&n.m_(e.mutations)}function tw(t){return Wi(t)&&!ii(t).n_()&&t.O_.length>0}function nw(t){ii(t).start()}async function z1(t){ii(t).p_()}async function H1(t){const e=ii(t);for(const n of t.O_)e.m_(n.mutations)}async function G1(t,e,n){const r=t.O_.shift(),s=_p.from(r,e,n);await ew(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xc(t)}async function W1(t,e){e&&ii(t).V_&&await async function(r,s){if(function(u){return OP(u)&&u!==K.ABORTED}(s.code)){const a=r.O_.shift();ii(r).s_(),await ew(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Xc(r)}}(t,e),tw(t)&&nw(t)}async function hv(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const r=Wi(n);n.L_.add(3),await Tl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Jc(n)}async function Z1(t,e){const n=_e(t);e?(n.L_.delete(2),await Jc(n)):e||(n.L_.add(2),await Tl(n),n.q_.set("Unknown"))}function yo(t){return t.K_||(t.K_=function(n,r,s){const a=_e(n);return a.w_(),new L1(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:b1.bind(null,t),Ro:V1.bind(null,t),mo:U1.bind(null,t),d_:B1.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sp(t)?xp(t):t.q_.set("Unknown")):(await t.K_.stop(),XE(t))})),t.K_}function ii(t){return t.U_||(t.U_=function(n,r,s){const a=_e(n);return a.w_(),new k1(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:z1.bind(null,t),mo:W1.bind(null,t),f_:H1.bind(null,t),g_:G1.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Xc(t)):(await t.U_.stop(),t.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const u=Date.now()+r,h=new Ap(e,n,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(t,e){if(wr("AsyncQueue",`${e}: ${t}`),yl(t))return new re(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=va(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Ks(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.W_=new Xe(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ao{constructor(e,n,r,s,a,u,h,f,_){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=_}static fromInitialDocuments(e,n,r,s,a){const u=[];return n.forEach(h=>{u.push({type:0,doc:h})}),new ao(e,n,Ks.emptySet(n),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class q1{constructor(){this.queries=fv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=_e(n),a=s.queries;s.queries=fv(),a.forEach((u,h)=>{for(const f of h.j_)f.onError(r)})})(this,new re(K.ABORTED,"Firestore shutting down"))}}function fv(){return new vo(t=>TE(t),Zc)}async function $1(t,e){const n=_e(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new K1,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const h=Pp(u,`Initialization of query '${Ss(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Cp(n)}async function Y1(t,e){const n=_e(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Q1(t,e){const n=_e(t);let r=!1;for(const s of e){const a=s.query,u=n.queries.get(a);if(u){for(const h of u.j_)h.X_(s)&&(r=!0);u.z_=s}}r&&Cp(n)}function J1(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function Cp(t){t.Y_.forEach(e=>{e.next()})}var rf,pv;(pv=rf||(rf={})).ea="default",pv.Cache="cache";class X1{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.key=e}}class iw{constructor(e){this.key=e}}class eC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=IE(e),this.Ra=new Ks(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new dv,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,_=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,w)=>{const x=s.get(y),C=Kc(this.query,w)?w:null,V=!!x&&this.mutatedKeys.has(x.key),U=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let G=!1;x&&C?x.data.isEqual(C.data)?V!==U&&(r.track({type:3,doc:C}),G=!0):this.ga(x,C)||(r.track({type:2,doc:C}),G=!0,(f&&this.Aa(C,f)>0||_&&this.Aa(C,_)<0)&&(h=!0)):!x&&C?(r.track({type:0,doc:C}),G=!0):x&&!C&&(r.track({type:1,doc:x}),G=!0,(f||_)&&(h=!0)),G&&(C?(u=u.add(C),a=U?a.add(y):a.delete(y)):(u=u.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{Ra:u,fa:r,ns:h,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort((y,w)=>function(C,V){const U=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return U(C)-U(V)}(y.type,w.type)||this.Aa(y.doc,w.doc)),this.pa(r),s=s!=null&&s;const h=n&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,_=f!==this.Ea;return this.Ea=f,u.length!==0||_?{snapshot:new ao(this.query,e.Ra,a,u,e.mutatedKeys,f===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new iw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new rw(r))}),n}ba(e){this.Ta=e.Ts,this.da=Se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nC{constructor(e){this.key=e,this.va=!1}}class rC{constructor(e,n,r,s,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new vo(h=>TE(h),Zc),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(ae.comparator),this.Na=new Map,this.La=new yp,this.Ba={},this.ka=new Map,this.qa=oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iC(t,e,n=!0){const r=cw(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await sw(r,e,n,!0),s}async function sC(t,e){const n=cw(t);await sw(n,e,!0,!1)}async function sw(t,e,n,r){const s=await x1(t.localStore,qn(e)),a=s.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let h;return r&&(h=await oC(t,e,a,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&QE(t.remoteStore,s),h}async function oC(t,e,n,r,s){t.Ka=(w,x,C)=>async function(U,G,P,A){let k=G.view.ma(P);k.ns&&(k=await lv(U.localStore,G.query,!1).then(({documents:N})=>G.view.ma(N,k)));const j=A&&A.targetChanges.get(G.targetId),Z=A&&A.targetMismatches.get(G.targetId)!=null,$=G.view.applyChanges(k,U.isPrimaryClient,j,Z);return _v(U,G.targetId,$.wa),$.snapshot}(t,w,x,C);const a=await lv(t.localStore,e,!0),u=new eC(e,a.Ts),h=u.ma(a.documents),f=wl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),_=u.applyChanges(h,t.isPrimaryClient,f);_v(t,n,_.wa);const y=new tC(e,n,u);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),_.snapshot}async function aC(t,e,n){const r=_e(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(u=>!Zc(u,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await nf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Tp(r.remoteStore,s.targetId),sf(r,s.targetId)}).catch(vl)):(sf(r,s.targetId),await nf(r.localStore,s.targetId,!0))}async function lC(t,e){const n=_e(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tp(n.remoteStore,r.targetId))}async function uC(t,e,n){const r=_C(t);try{const s=await function(u,h){const f=_e(u),_=mt.now(),y=h.reduce((C,V)=>C.add(V.key),Se());let w,x;return f.persistence.runTransaction("Locally write mutations","readwrite",C=>{let V=Tr(),U=Se();return f.cs.getEntries(C,y).next(G=>{V=G,V.forEach((P,A)=>{A.isValidDocument()||(U=U.add(P))})}).next(()=>f.localDocuments.getOverlayedDocuments(C,V)).next(G=>{w=G;const P=[];for(const A of h){const k=CP(A,w.get(A.key).overlayedDocument);k!=null&&P.push(new li(A.key,k,pE(k.value.mapValue),$n.exists(!0)))}return f.mutationQueue.addMutationBatch(C,_,P,h)}).next(G=>{x=G;const P=G.applyToLocalDocumentSet(w,U);return f.documentOverlayCache.saveOverlays(C,G.batchId,P)})}).then(()=>({batchId:x.batchId,changes:SE(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,f){let _=u.Ba[u.currentUser.toKey()];_||(_=new Xe(Re)),_=_.insert(h,f),u.Ba[u.currentUser.toKey()]=_}(r,s.batchId,n),await Il(r,s.changes),await Xc(r.remoteStore)}catch(s){const a=Pp(s,"Failed to persist write");n.reject(a)}}async function ow(t,e){const n=_e(t);try{const r=await w1(n.localStore,e);e.targetChanges.forEach((s,a)=>{const u=n.Na.get(a);u&&(be(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.va=!0:s.modifiedDocuments.size>0?be(u.va):s.removedDocuments.size>0&&(be(u.va),u.va=!1))}),await Il(n,r,e)}catch(r){await vl(r)}}function mv(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,u)=>{const h=u.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const f=_e(u);f.onlineState=h;let _=!1;f.queries.forEach((y,w)=>{for(const x of w.j_)x.Z_(h)&&(_=!0)}),_&&Cp(f)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cC(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let u=new Xe(ae.comparator);u=u.insert(a,Dt.newNoDocument(a,me.min()));const h=Se().add(a),f=new Yc(me.min(),new Map,new Xe(Re),u,h);await ow(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),Np(r)}else await nf(r.localStore,e,!1).then(()=>sf(r,e,n)).catch(vl)}async function hC(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await E1(n.localStore,e);lw(n,r,null),aw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Il(n,s)}catch(s){await vl(s)}}async function dC(t,e,n){const r=_e(t);try{const s=await function(u,h){const f=_e(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let y;return f.mutationQueue.lookupMutationBatch(_,h).next(w=>(be(w!==null),y=w.keys(),f.mutationQueue.removeMutationBatch(_,w))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,y)).next(()=>f.localDocuments.getDocuments(_,y))})}(r.localStore,e);lw(r,e,n),aw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Il(r,s)}catch(s){await vl(s)}}function aw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function lw(t,e,n){const r=_e(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function sf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||uw(t,r)})}function uw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Tp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Np(t))}function _v(t,e,n){for(const r of n)r instanceof rw?(t.La.addReference(r.key,e),fC(t,r)):r instanceof iw?(ie("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||uw(t,r.key)):fe()}function fC(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ie("SyncEngine","New document in limbo: "+n),t.xa.add(r),Np(t))}function Np(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae(He.fromString(e)),r=t.qa.next();t.Na.set(r,new nC(n)),t.Oa=t.Oa.insert(n,r),QE(t.remoteStore,new Hr(qn(pp(n.path)),r,"TargetPurposeLimboResolution",lp.oe))}}async function Il(t,e,n){const r=_e(t),s=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach((h,f)=>{u.push(r.Ka(f,e,n).then(_=>{var y;if((_||n)&&r.isPrimaryClient){const w=_?!_.fromCache:(y=n==null?void 0:n.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(_){s.push(_);const w=wp.Wi(f.targetId,_);a.push(w)}}))}),await Promise.all(u),r.Ca.d_(s),await async function(f,_){const y=_e(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Y.forEach(_,x=>Y.forEach(x.$i,C=>y.persistence.referenceDelegate.addReference(w,x.targetId,C)).next(()=>Y.forEach(x.Ui,C=>y.persistence.referenceDelegate.removeReference(w,x.targetId,C)))))}catch(w){if(!yl(w))throw w;ie("LocalStore","Failed to update sequence numbers: "+w)}for(const w of _){const x=w.targetId;if(!w.fromCache){const C=y.os.get(x),V=C.snapshotVersion,U=C.withLastLimboFreeSnapshotVersion(V);y.os=y.os.insert(x,U)}}}(r.localStore,a))}async function pC(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const r=await KE(n.localStore,e);n.currentUser=e,function(a,u){a.ka.forEach(h=>{h.forEach(f=>{f.reject(new re(K.CANCELLED,u))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Il(n,r.hs)}}function mC(t,e){const n=_e(t),r=n.Na.get(e);if(r&&r.va)return Se().add(r.key);{let s=Se();const a=n.Ma.get(e);if(!a)return s;for(const u of a){const h=n.Fa.get(u);s=s.unionWith(h.view.Va)}return s}}function cw(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ow.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cC.bind(null,e),e.Ca.d_=Q1.bind(null,e.eventManager),e.Ca.$a=J1.bind(null,e.eventManager),e}function _C(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dC.bind(null,e),e}class Ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return y1(this.persistence,new g1,e.initialUser,this.serializer)}Ga(e){return new p1(Ep.Zr,this.serializer)}Wa(e){return new A1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ac.provider={build:()=>new Ac};class of{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pC.bind(null,this.syncEngine),await Z1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new q1}()}createDatastore(e){const n=Qc(e.databaseInfo.databaseId),r=function(a){return new R1(a)}(e.databaseInfo);return function(a,u,h,f){return new O1(a,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,u,h){return new M1(r,s,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,n=>mv(this.syncEngine,n,0),function(){return cv.D()?new cv:new P1}())}createSyncEngine(e,n){return function(s,a,u,h,f,_,y){const w=new rC(s,a,u,h,f,_);return y&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=_e(s);ie("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Tl(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}of.provider={build:()=>new of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Gt.UNAUTHENTICATED,this.clientId=hE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{ie("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ie("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qh(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await KE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yC(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hv(e.remoteStore,s)),t._onlineComponents=e}async function yC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await qh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;el("Error using user provided cache. Falling back to memory cache: "+n),await qh(t,new Ac)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await qh(t,new Ac);return t._offlineComponents}async function hw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await gv(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await gv(t,new of))),t._onlineComponents}function EC(t){return hw(t).then(e=>e.syncEngine)}async function vv(t){const e=await hw(t),n=e.eventManager;return n.onListen=iC.bind(null,e.syncEngine),n.onUnlisten=aC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lC.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e,n){if(!n)throw new re(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wC(t,e,n,r){if(e===!0&&r===!0)throw new re(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ev(t){if(!ae.isDocumentKey(t))throw new re(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wv(t){if(ae.isDocumentKey(t))throw new re(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function qs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eh(t);throw new re(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BA;switch(r.type){case"firstParty":return new zA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=yv.get(n);r&&(ie("ComponentProvider","Removing Datastore"),yv.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class Xr extends ui{constructor(e,n,r){super(e,n,pp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new ae(e))}withConverter(e){return new Xr(this.firestore,e,this._path)}}function pw(t,e,...n){if(t=Qn(t),fw("collection","path",e),t instanceof Rp){const r=He.fromString(e,...n);return wv(r),new Xr(t,null,r)}{if(!(t instanceof Qt||t instanceof Xr))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return wv(r),new Xr(t.firestore,null,r)}}function mw(t,e,...n){if(t=Qn(t),arguments.length===1&&(e=hE.newId()),fw("doc","path",e),t instanceof Rp){const r=He.fromString(e,...n);return Ev(r),new Qt(t,null,new ae(r))}{if(!(t instanceof Qt||t instanceof Xr))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return Ev(r),new Qt(t.firestore,t instanceof Xr?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $E(this,"async_queue_retry"),this.Vu=()=>{const r=Kh();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Kh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Oi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yl(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw wr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ap.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function xv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class cl extends Rp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Iv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iv(e),this._firestoreClient=void 0,await e}}}function _w(t){if(t._terminated)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TC(t),t._firestoreClient}function TC(t){var e,n,r;const s=t._freezeSettings(),a=function(h,f,_,y){return new tP(h,f,_,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,dw(y.experimentalLongPollingOptions),y.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new vC(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lo(Nt.fromBase64String(e))}catch(n){throw new re(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new lo(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=/^__.*__$/;class xC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new El(e,this.data,n,this.fieldTransforms)}}class gw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new li(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Op{constructor(e,n,r,s,a,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vw(this.Cu)&&IC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qc(e)}Qu(e,n,r,s=!1){return new Op({Cu:e,methodName:n,qu:r,path:St.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dp(t){const e=t._freezeSettings(),n=Qc(t._databaseId);return new SC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AC(t,e,n,r,s,a={}){const u=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);Vp("Data must be an object, but it was:",u,r);const h=yw(r,u);let f,_;if(a.merge)f=new rn(u.fieldMask),_=u.fieldTransforms;else if(a.mergeFields){const y=[];for(const w of a.mergeFields){const x=af(e,w,n);if(!u.contains(x))throw new re(K.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);ww(y,x)||y.push(x)}f=new rn(y),_=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,_=u.fieldTransforms;return new xC(new Zt(h),f,_)}class nh extends xl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nh}}class Mp extends xl{_toFieldTransform(e){return new OE(e.path,new ol)}isEqual(e){return e instanceof Mp}}class bp extends xl{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ul(e.serializer,CE(e.serializer,this.$u));return new OE(e.path,n)}isEqual(e){return e instanceof bp&&this.$u===e.$u}}function PC(t,e,n,r){const s=t.Qu(1,e,n);Vp("Data must be an object, but it was:",s,r);const a=[],u=Zt.empty();Gi(r,(f,_)=>{const y=Up(e,f,n);_=Qn(_);const w=s.Nu(y);if(_ instanceof nh)a.push(y);else{const x=Sl(_,w);x!=null&&(a.push(y),u.set(y,x))}});const h=new rn(a);return new gw(u,h,s.fieldTransforms)}function CC(t,e,n,r,s,a){const u=t.Qu(1,e,n),h=[af(e,r,n)],f=[s];if(a.length%2!=0)throw new re(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(af(e,a[x])),f.push(a[x+1]);const _=[],y=Zt.empty();for(let x=h.length-1;x>=0;--x)if(!ww(_,h[x])){const C=h[x];let V=f[x];V=Qn(V);const U=u.Nu(C);if(V instanceof nh)_.push(C);else{const G=Sl(V,U);G!=null&&(_.push(C),y.set(C,G))}}const w=new rn(_);return new gw(y,w,u.fieldTransforms)}function NC(t,e,n,r=!1){return Sl(n,t.Qu(r?4:3,e))}function Sl(t,e){if(Ew(t=Qn(t)))return Vp("Unsupported field value:",e,t),yw(t,e);if(t instanceof xl)return function(r,s){if(!vw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let u=0;for(const h of r){let f=Sl(h,s.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Qn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=mt.fromDate(r);return{timestampValue:xc(s.serializer,a)}}if(r instanceof mt){const a=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xc(s.serializer,a)}}if(r instanceof Lp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lo)return{bytesValue:FE(s.serializer,r._byteString)};if(r instanceof Qt){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:vp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof kp)return function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return mp(h.serializer,f)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${eh(r)}`)}(t,e)}function yw(t,e){const n={};return dE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(t,(r,s)=>{const a=Sl(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function Ew(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof Lp||t instanceof lo||t instanceof Qt||t instanceof xl||t instanceof kp)}function Vp(t,e,n){if(!Ew(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=eh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function af(t,e,n){if((e=Qn(e))instanceof th)return e._internalPath;if(typeof e=="string")return Up(t,e);throw Pc("Field path arguments must be of type string or ",t,!1,void 0,n)}const RC=new RegExp("[~\\*/\\[\\]]");function Up(t,e,n){if(e.search(RC)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new th(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pc(t,e,n,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new re(K.INVALID_ARGUMENT,h+t+f)}function ww(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LC extends Tw{data(){return super.data()}}function Bp(t,e){return typeof e=="string"?Up(t,e):e instanceof th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fp{}class jp extends Fp{}function OC(t,e,...n){let r=[];e instanceof Fp&&r.push(e),r=r.concat(n),function(a){const u=a.filter(f=>f instanceof Hp).length,h=a.filter(f=>f instanceof zp).length;if(u>1||u>0&&h>0)throw new re(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class zp extends jp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zp(e,n,r)}_apply(e){const n=this._parse(e);return Iw(e._query,n),new ui(e.firestore,e.converter,Qd(e._query,n))}_parse(e){const n=Dp(e.firestore);return function(a,u,h,f,_,y,w){let x;if(_.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new re(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Av(w,y);const C=[];for(const V of w)C.push(Sv(f,a,V));x={arrayValue:{values:C}}}else x=Sv(f,a,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Av(w,y),x=NC(h,u,w,y==="in"||y==="not-in");return ht.create(_,y,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Hp extends Fp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let u=s;const h=a.getFlattenedFilters();for(const f of h)Iw(u,f),u=Qd(u,f)}(e._query,n),new ui(e.firestore,e.converter,Qd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gp extends jp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gp(e,n)}_apply(e){const n=function(s,a,u){if(s.startAt!==null)throw new re(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new re(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sl(a,u)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(s,a){const u=s.explicitOrderBy.concat([a]);return new go(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function DC(t,e="asc"){const n=e,r=Bp("orderBy",t);return Gp._create(r,n)}class Wp extends jp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Wp(e,n,r)}_apply(e){return new ui(e.firestore,e.converter,Ic(e._query,this._limit,this._limitType))}}function MC(t){return Wp._create("limit",t,"F")}function Sv(t,e,n){if(typeof(n=Qn(n))=="string"){if(n==="")throw new re(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wE(e)&&n.indexOf("/")!==-1)throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(He.fromString(n));if(!ae.isDocumentKey(r))throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wg(t,new ae(r))}if(n instanceof Qt)return Wg(t,n._key);throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eh(n)}.`)}function Av(t,e){if(!Array.isArray(t)||t.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Iw(t,e){const n=function(s,a){for(const u of s)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bC{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gi(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>rt(u.doubleValue));return new kp(a)}convertGeoPoint(e){return new Lp(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){const n=ri(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);be(ZE(r));const s=new rl(r.get(1),r.get(3)),a=new ae(r.popFirst(5));return s.isEqual(n)||wr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xw extends Tw{constructor(e,n,r,s,a,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qu extends xw{data(e={}){return super.data(e)}}class UC{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ea(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qu(this._firestore,this._userDataWriter,r.key,r,new Ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const f=new qu(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ea(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new qu(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ea(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let _=-1,y=-1;return h.type!==0&&(_=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:BC(h.type),doc:f,oldIndex:_,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function BC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}class Sw extends bC{constructor(e){super(),this.firestore=e}convertBytes(e){return new lo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function FC(t,e,n,...r){t=qs(t,Qt);const s=qs(t.firestore,cl),a=Dp(s);let u;return u=typeof(e=Qn(e))=="string"||e instanceof th?CC(a,"updateDoc",t._key,e,n,r):PC(a,"updateDoc",t._key,e),Aw(s,[u.toMutation(t._key,$n.exists(!0))])}function jC(t,e){const n=qs(t.firestore,cl),r=mw(t),s=VC(t.converter,e);return Aw(n,[AC(Dp(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,$n.exists(!1))]).then(()=>r)}function zC(t,...e){var n,r,s;t=Qn(t);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||xv(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(xv(e[u])){const w=e[u];e[u]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[u+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[u+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let f,_,y;if(t instanceof Qt)_=qs(t.firestore,cl),y=pp(t._key.path),f={next:w=>{e[u]&&e[u](HC(_,t,w))},error:e[u+1],complete:e[u+2]};else{const w=qs(t,ui);_=qs(w.firestore,cl),y=w._query;const x=new Sw(_);f={next:C=>{e[u]&&e[u](new UC(_,x,w,C))},error:e[u+1],complete:e[u+2]},kC(t._query)}return function(x,C,V,U){const G=new gC(U),P=new X1(C,G,V);return x.asyncQueue.enqueueAndForget(async()=>$1(await vv(x),P)),()=>{G.Za(),x.asyncQueue.enqueueAndForget(async()=>Y1(await vv(x),P))}}(_w(_),y,h,f)}function Aw(t,e){return function(r,s){const a=new Oi;return r.asyncQueue.enqueueAndForget(async()=>uC(await EC(r),s,a)),a.promise}(_w(t),e)}function HC(t,e,n){const r=n.docs.get(e._key),s=new Sw(t);return new xw(t,s,e._key,r,new Ea(n.hasPendingWrites,n.fromCache),e.converter)}function GC(){return new Mp("serverTimestamp")}function WC(t){return new bp("increment",t)}(function(e,n=!0){(function(s){_o=s})(AA),Ec(new yc("firestore",(r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new cl(new FA(r.getProvider("auth-internal")),new GA(r.getProvider("app-check-internal")),function(_,y){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new re(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(_.options.projectId,y)}(u,s),u);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Zs(Fg,"4.7.3",e),Zs(Fg,"4.7.3","esm2017")})();let Ur=null;try{console.warn("Firebase API keys are missing. Community features will be disabled.")}catch(t){console.error("Error initializing Firebase:",t)}const ZC=({isOpen:t,onClose:e,language:n})=>{const r=fo[n],[s,a]=ee.useState(""),[u,h]=ee.useState(""),[f,_]=ee.useState("moderate"),[y,w]=ee.useState(!1),[x,C]=ee.useState(!1),[V,U]=ee.useState(null);if(!t)return null;const G=()=>{const A=["Neon","Cyber","Solar","Rapid","Urban","Night","Swift","Metro","Campus"],k=["Scout","Rider","Guide","Pilot","Walker","Ranger","Drifter","Surfer","Navigator"],j=A[Math.floor(Math.random()*A.length)],Z=k[Math.floor(Math.random()*k.length)],$=Math.floor(Math.random()*99)+1;return`${j} ${Z} ${$}`},P=async A=>{A.preventDefault(),w(!0),U(null);try{if(!Ur)throw new Error("Community database is not connected. Please contact admin.");const k=`${u} at ${s}`,j=await pS(k,n);let Z=sessionStorage.getItem("scb_user_alias");Z||(Z=G(),sessionStorage.setItem("scb_user_alias",Z)),await jC(pw(Ur,"reports"),{timestamp:GC(),severity:f,location:s,description:j,originalText:u,reporterName:Z,verificationCount:1}),C(!0),setTimeout(()=>{C(!1),a(""),h(""),_("moderate"),e()},1500)}catch(k){console.error("Failed to submit report",k),U("Could not submit report. Check connection.")}finally{w(!1)}};return v.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",onClick:e,children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 space-y-5",onClick:A=>A.stopPropagation(),children:[v.jsx("h3",{className:"text-xl font-bold text-blue-800 border-b border-slate-100 pb-3",children:r.reportHeader}),x?v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"text-green-500 text-6xl mb-4",children:""}),v.jsx("p",{className:"text-xl font-bold text-slate-800",children:r.reportSuccess})]}):v.jsxs("form",{onSubmit:P,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:r.reportLocation}),v.jsx("input",{type:"text",value:s,onChange:A=>a(A.target.value),placeholder:r.reportLocationPlace,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:r.reportSeverity}),v.jsxs("select",{value:f,onChange:A=>_(A.target.value),className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[v.jsx("option",{value:"light",children:r.sevLight}),v.jsx("option",{value:"moderate",children:r.sevModerate}),v.jsx("option",{value:"heavy",children:r.sevHeavy}),v.jsx("option",{value:"accident",children:r.sevAccident}),v.jsx("option",{value:"closure",children:r.sevClosure})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:r.reportDescLabel}),v.jsx("textarea",{value:u,onChange:A=>h(A.target.value),placeholder:r.reportDescPlace,rows:3,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]}),V&&v.jsx("p",{className:"text-red-500 text-sm bg-red-50 p-2 rounded border border-red-100",children:V}),v.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[v.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 font-semibold rounded-lg transition-colors",disabled:y,children:r.cancel}),v.jsxs("button",{type:"submit",disabled:y,className:"px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors flex items-center shadow-sm",children:[y&&v.jsx(Z0,{}),v.jsx("span",{className:y?"ml-2":"",children:y?r.processingReport:r.submitReport})]})]})]})]})})},ha=({icon:t,title:e,description:n,onClick:r,disabled:s=!1})=>v.jsxs("button",{onClick:r,disabled:s,className:"bg-white border border-slate-200 p-5 rounded-xl shadow-sm flex items-center space-x-4 w-full text-left transition-all duration-200 hover:shadow-md hover:border-blue-300 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none disabled:bg-slate-100",children:[v.jsx("div",{className:`p-3 rounded-full ${s?"bg-slate-200 text-slate-400":"bg-blue-50 text-blue-600"}`,children:t}),v.jsxs("div",{children:[v.jsx("h3",{className:`font-bold text-lg ${s?"text-slate-500":"text-slate-800"}`,children:e}),v.jsx("p",{className:"text-sm text-slate-500 mt-1 leading-snug",children:n})]})]}),KC=({setView:t,geoStatus:e,onShowInstructions:n,manualLocation:r,onEnterLocationManually:s,isScbContext:a,language:u})=>{const h=fo[u],[f,_]=ee.useState(!1);return v.jsxs("div",{className:"animate-fadeIn space-y-6 max-w-lg mx-auto",children:[v.jsx(ZC,{isOpen:f,onClose:()=>_(!1),language:u}),v.jsxs("div",{className:"text-center p-6 bg-white border border-slate-200 rounded-2xl shadow-sm relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-cyan-400"}),v.jsx("button",{onClick:n,className:"absolute top-3 right-3 text-slate-400 hover:text-blue-600 transition-colors p-2","aria-label":"Show instructions",children:v.jsx(Ux,{})}),v.jsx("h2",{className:"text-2xl font-extrabold text-slate-900",children:h.welcome}),v.jsx("p",{className:"text-slate-600 mt-2 font-medium",children:h.welcomeSub}),v.jsxs("div",{className:"mt-4 flex flex-col items-center justify-center text-sm font-medium",children:[e.loading&&!r&&v.jsx("span",{className:"flex items-center text-blue-600 bg-blue-50 px-3 py-1 rounded-full animate-pulse",children:h.gettingLocation}),e.error&&!r&&v.jsx("span",{className:"text-red-600 bg-red-50 px-3 py-1 rounded-full border border-red-100",children:e.error}),r&&v.jsxs("span",{className:"flex items-center text-green-700 bg-green-50 px-3 py-1 rounded-full border border-green-100",children:[v.jsx("span",{className:"mr-1",children:""})," ",h.manualLocationSet," ",v.jsx("strong",{children:r})]})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx(ha,{icon:v.jsx(H0,{}),title:h.planRouteTitle,description:a?h.planRouteDesc:h.planRouteDescScb,onClick:()=>t("planner"),disabled:e.loading&&!r||!a}),v.jsx(ha,{icon:v.jsx(G0,{}),title:h.localUpdatesTitle,description:r&&!a&&u==="en"?`Check for news in ${r}`:h.localUpdatesDesc,onClick:()=>t("updates"),disabled:e.loading&&!r}),v.jsx(ha,{icon:v.jsx(W0,{}),title:h.chatTitle,description:h.chatDesc,onClick:()=>t("chat")}),v.jsx("div",{className:"pt-2 border-t border-slate-200 my-4"}),v.jsx(ha,{icon:v.jsx(Bx,{}),title:h.setLocationTitle,description:h.setLocationDesc,onClick:s}),v.jsx(ha,{icon:v.jsx(ip,{}),title:h.reportTitle,description:h.reportDesc,onClick:()=>_(!0)})]})]})};function Pw(t,e){const n=ee.useRef(e);ee.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function qC(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const $C=1;function YC(t){return Object.freeze({__version:$C,map:t})}function Zp(t,e){return Object.freeze({...t,...e})}const Cw=ee.createContext(null),Nw=Cw.Provider;function rh(){const t=ee.useContext(Cw);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Rw(t){function e(n,r){const{instance:s,context:a}=t(n).current;return ee.useImperativeHandle(r,()=>s),n.children==null?null:$s.createElement(Nw,{value:a},n.children)}return ee.forwardRef(e)}function QC(t){function e(n,r){const[s,a]=ee.useState(!1),{instance:u}=t(n,a).current;ee.useImperativeHandle(r,()=>u),ee.useEffect(function(){s&&u.update()},[u,s,n.children]);const h=u._contentNode;return h?z0.createPortal(n.children,h):null}return ee.forwardRef(e)}function JC(t){function e(n,r){const{instance:s}=t(n).current;return ee.useImperativeHandle(r,()=>s),null}return ee.forwardRef(e)}function Kp(t,e){const n=ee.useRef();ee.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function ih(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function XC(t,e){return function(r,s){const a=rh(),u=t(ih(r,a),a);return Pw(a.map,r.attribution),Kp(u.current,r.eventHandlers),e(u.current,a,r,s),u}}var lf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(lT,function(n){var r="1.9.4";function s(i){var o,c,d,m;for(c=1,d=arguments.length;c<d;c++){m=arguments[c];for(o in m)i[o]=m[o]}return i}var a=Object.create||function(){function i(){}return function(o){return i.prototype=o,new i}}();function u(i,o){var c=Array.prototype.slice;if(i.bind)return i.bind.apply(i,c.call(arguments,1));var d=c.call(arguments,2);return function(){return i.apply(o,d.length?d.concat(c.call(arguments)):arguments)}}var h=0;function f(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function _(i,o,c){var d,m,E,D;return D=function(){d=!1,m&&(E.apply(c,m),m=!1)},E=function(){d?m=arguments:(i.apply(c,arguments),setTimeout(D,o),d=!0)},E}function y(i,o,c){var d=o[1],m=o[0],E=d-m;return i===d&&c?i:((i-m)%E+E)%E+m}function w(){return!1}function x(i,o){if(o===!1)return i;var c=Math.pow(10,o===void 0?6:o);return Math.round(i*c)/c}function C(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function V(i){return C(i).split(/\s+/)}function U(i,o){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var c in o)i.options[c]=o[c];return i.options}function G(i,o,c){var d=[];for(var m in i)d.push(encodeURIComponent(c?m.toUpperCase():m)+"="+encodeURIComponent(i[m]));return(!o||o.indexOf("?")===-1?"?":"&")+d.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function A(i,o){return i.replace(P,function(c,d){var m=o[d];if(m===void 0)throw new Error("No value provided for variable "+c);return typeof m=="function"&&(m=m(o)),m})}var k=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function j(i,o){for(var c=0;c<i.length;c++)if(i[c]===o)return c;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var N=0;function I(i){var o=+new Date,c=Math.max(0,16-(o-N));return N=o+c,window.setTimeout(i,c)}var R=window.requestAnimationFrame||$("RequestAnimationFrame")||I,O=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function b(i,o,c){if(c&&R===I)i.call(o);else return R.call(window,u(i,o))}function M(i){i&&O.call(window,i)}var S={__proto__:null,extend:s,create:a,bind:u,get lastId(){return h},stamp:f,throttle:_,wrapNum:y,falseFn:w,formatNum:x,trim:C,splitWords:V,setOptions:U,getParamString:G,template:A,isArray:k,indexOf:j,emptyImageUrl:Z,requestFn:R,cancelFn:O,requestAnimFrame:b,cancelAnimFrame:M};function oe(){}oe.extend=function(i){var o=function(){U(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,d=a(c);d.constructor=o,o.prototype=d;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return i.statics&&s(o,i.statics),i.includes&&(Oe(i.includes),s.apply(null,[d].concat(i.includes))),s(d,i),delete d.statics,delete d.includes,d.options&&(d.options=c.options?a(c.options):{},s(d.options,i.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,D=d._initHooks.length;E<D;E++)d._initHooks[E].call(this)}},o},oe.include=function(i){var o=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=o,this.mergeOptions(i.options)),this},oe.mergeOptions=function(i){return s(this.prototype.options,i),this},oe.addInitHook=function(i){var o=Array.prototype.slice.call(arguments,1),c=typeof i=="function"?i:function(){this[i].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Oe(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=k(i)?i:[i];for(var o=0;o<i.length;o++)i[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Le={on:function(i,o,c){if(typeof i=="object")for(var d in i)this._on(d,i[d],o);else{i=V(i);for(var m=0,E=i.length;m<E;m++)this._on(i[m],o,c)}return this},off:function(i,o,c){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var d in i)this._off(d,i[d],o);else{i=V(i);for(var m=arguments.length===1,E=0,D=i.length;E<D;E++)m?this._off(i[E]):this._off(i[E],o,c)}return this},_on:function(i,o,c,d){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(i,o,c)===!1){c===this&&(c=void 0);var m={fn:o,ctx:c};d&&(m.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(m)}},_off:function(i,o,c){var d,m,E;if(this._events&&(d=this._events[i],!!d)){if(arguments.length===1){if(this._firingCount)for(m=0,E=d.length;m<E;m++)d[m].fn=w;delete this._events[i];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var D=this._listens(i,o,c);if(D!==!1){var F=d[D];this._firingCount&&(F.fn=w,this._events[i]=d=d.slice()),d.splice(D,1)}}},fire:function(i,o,c){if(!this.listens(i,c))return this;var d=s({},o,{type:i,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[i];if(m){this._firingCount=this._firingCount+1||1;for(var E=0,D=m.length;E<D;E++){var F=m[E],z=F.fn;F.once&&this.off(i,z,F.ctx),z.call(F.ctx||this,d)}this._firingCount--}}return c&&this._propagateEvent(d),this},listens:function(i,o,c,d){typeof i!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(d=!!o,m=void 0,c=void 0);var E=this._events&&this._events[i];if(E&&E.length&&this._listens(i,m,c)!==!1)return!0;if(d){for(var D in this._eventParents)if(this._eventParents[D].listens(i,o,c,d))return!0}return!1},_listens:function(i,o,c){if(!this._events)return!1;var d=this._events[i]||[];if(!o)return!!d.length;c===this&&(c=void 0);for(var m=0,E=d.length;m<E;m++)if(d[m].fn===o&&d[m].ctx===c)return m;return!1},once:function(i,o,c){if(typeof i=="object")for(var d in i)this._on(d,i[d],o,!0);else{i=V(i);for(var m=0,E=i.length;m<E;m++)this._on(i[m],o,c,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[f(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[f(i)],this},_propagateEvent:function(i){for(var o in this._eventParents)this._eventParents[o].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};Le.addEventListener=Le.on,Le.removeEventListener=Le.clearAllEventListeners=Le.off,Le.addOneTimeEventListener=Le.once,Le.fireEvent=Le.fire,Le.hasEventListeners=Le.listens;var Fe=oe.extend(Le);function W(i,o,c){this.x=c?Math.round(i):i,this.y=c?Math.round(o):o}var ce=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(i){return this.clone()._add(J(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(J(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new W(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new W(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(i){i=J(i);var o=i.x-this.x,c=i.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(i){return i=J(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=J(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function J(i,o,c){return i instanceof W?i:k(i)?new W(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new W(i.x,i.y):new W(i,o,c)}function he(i,o){if(i)for(var c=o?[i,o]:i,d=0,m=c.length;d<m;d++)this.extend(c[d])}he.prototype={extend:function(i){var o,c;if(!i)return this;if(i instanceof W||typeof i[0]=="number"||"x"in i)o=c=J(i);else if(i=ve(i),o=i.min,c=i.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(i){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var o,c;return typeof i[0]=="number"||i instanceof W?i=J(i):i=ve(i),i instanceof he?(o=i.min,c=i.max):o=c=i,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(i){i=ve(i);var o=this.min,c=this.max,d=i.min,m=i.max,E=m.x>=o.x&&d.x<=c.x,D=m.y>=o.y&&d.y<=c.y;return E&&D},overlaps:function(i){i=ve(i);var o=this.min,c=this.max,d=i.min,m=i.max,E=m.x>o.x&&d.x<c.x,D=m.y>o.y&&d.y<c.y;return E&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var o=this.min,c=this.max,d=Math.abs(o.x-c.x)*i,m=Math.abs(o.y-c.y)*i;return ve(J(o.x-d,o.y-m),J(c.x+d,c.y+m))},equals:function(i){return i?(i=ve(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ve(i,o){return!i||i instanceof he?i:new he(i,o)}function Ie(i,o){if(i)for(var c=o?[i,o]:i,d=0,m=c.length;d<m;d++)this.extend(c[d])}Ie.prototype={extend:function(i){var o=this._southWest,c=this._northEast,d,m;if(i instanceof ye)d=i,m=i;else if(i instanceof Ie){if(d=i._southWest,m=i._northEast,!d||!m)return this}else return i?this.extend(pe(i)||ke(i)):this;return!o&&!c?(this._southWest=new ye(d.lat,d.lng),this._northEast=new ye(m.lat,m.lng)):(o.lat=Math.min(d.lat,o.lat),o.lng=Math.min(d.lng,o.lng),c.lat=Math.max(m.lat,c.lat),c.lng=Math.max(m.lng,c.lng)),this},pad:function(i){var o=this._southWest,c=this._northEast,d=Math.abs(o.lat-c.lat)*i,m=Math.abs(o.lng-c.lng)*i;return new Ie(new ye(o.lat-d,o.lng-m),new ye(c.lat+d,c.lng+m))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof ye||"lat"in i?i=pe(i):i=ke(i);var o=this._southWest,c=this._northEast,d,m;return i instanceof Ie?(d=i.getSouthWest(),m=i.getNorthEast()):d=m=i,d.lat>=o.lat&&m.lat<=c.lat&&d.lng>=o.lng&&m.lng<=c.lng},intersects:function(i){i=ke(i);var o=this._southWest,c=this._northEast,d=i.getSouthWest(),m=i.getNorthEast(),E=m.lat>=o.lat&&d.lat<=c.lat,D=m.lng>=o.lng&&d.lng<=c.lng;return E&&D},overlaps:function(i){i=ke(i);var o=this._southWest,c=this._northEast,d=i.getSouthWest(),m=i.getNorthEast(),E=m.lat>o.lat&&d.lat<c.lat,D=m.lng>o.lng&&d.lng<c.lng;return E&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,o){return i?(i=ke(i),this._southWest.equals(i.getSouthWest(),o)&&this._northEast.equals(i.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(i,o){return i instanceof Ie?i:new Ie(i,o)}function ye(i,o,c){if(isNaN(i)||isNaN(o))throw new Error("Invalid LatLng object: ("+i+", "+o+")");this.lat=+i,this.lng=+o,c!==void 0&&(this.alt=+c)}ye.prototype={equals:function(i,o){if(!i)return!1;i=pe(i);var c=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return c<=(o===void 0?1e-9:o)},toString:function(i){return"LatLng("+x(this.lat,i)+", "+x(this.lng,i)+")"},distanceTo:function(i){return Un.distance(this,pe(i))},wrap:function(){return Un.wrapLatLng(this)},toBounds:function(i){var o=180*i/40075017,c=o/Math.cos(Math.PI/180*this.lat);return ke([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function pe(i,o,c){return i instanceof ye?i:k(i)&&typeof i[0]!="object"?i.length===3?new ye(i[0],i[1],i[2]):i.length===2?new ye(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new ye(i.lat,"lng"in i?i.lng:i.lon,i.alt):o===void 0?null:new ye(i,o,c)}var dt={latLngToPoint:function(i,o){var c=this.projection.project(i),d=this.scale(o);return this.transformation._transform(c,d)},pointToLatLng:function(i,o){var c=this.scale(o),d=this.transformation.untransform(i,c);return this.projection.unproject(d)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(i),d=this.transformation.transform(o.min,c),m=this.transformation.transform(o.max,c);return new he(d,m)},infinite:!1,wrapLatLng:function(i){var o=this.wrapLng?y(i.lng,this.wrapLng,!0):i.lng,c=this.wrapLat?y(i.lat,this.wrapLat,!0):i.lat,d=i.alt;return new ye(c,o,d)},wrapLatLngBounds:function(i){var o=i.getCenter(),c=this.wrapLatLng(o),d=o.lat-c.lat,m=o.lng-c.lng;if(d===0&&m===0)return i;var E=i.getSouthWest(),D=i.getNorthEast(),F=new ye(E.lat-d,E.lng-m),z=new ye(D.lat-d,D.lng-m);return new Ie(F,z)}},Un=s({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(i,o){var c=Math.PI/180,d=i.lat*c,m=o.lat*c,E=Math.sin((o.lat-i.lat)*c/2),D=Math.sin((o.lng-i.lng)*c/2),F=E*E+Math.cos(d)*Math.cos(m)*D*D,z=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F));return this.R*z}}),Pl=6378137,xr={R:Pl,MAX_LATITUDE:85.0511287798,project:function(i){var o=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,i.lat),-c),m=Math.sin(d*o);return new W(this.R*i.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(i){var o=180/Math.PI;return new ye((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*o,i.x*o/this.R)},bounds:function(){var i=Pl*Math.PI;return new he([-i,-i],[i,i])}()};function Sr(i,o,c,d){if(k(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=o,this._c=c,this._d=d}Sr.prototype={transform:function(i,o){return this._transform(i.clone(),o)},_transform:function(i,o){return o=o||1,i.x=o*(this._a*i.x+this._b),i.y=o*(this._c*i.y+this._d),i},untransform:function(i,o){return o=o||1,new W((i.x/o-this._b)/this._a,(i.y/o-this._d)/this._c)}};function Xn(i,o,c,d){return new Sr(i,o,c,d)}var ci=s({},Un,{code:"EPSG:3857",projection:xr,transformation:function(){var i=.5/(Math.PI*xr.R);return Xn(i,.5,-i,.5)}()}),Eo=s({},ci,{code:"EPSG:900913"});function Ki(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function wo(i,o){var c="",d,m,E,D,F,z;for(d=0,E=i.length;d<E;d++){for(F=i[d],m=0,D=F.length;m<D;m++)z=F[m],c+=(m?"L":"M")+z.x+" "+z.y;c+=o?se.svg?"z":"x":""}return c||"M0 0"}var To=document.documentElement.style,qi="ActiveXObject"in window,Cl=qi&&!document.addEventListener,$i="msLaunchUri"in navigator&&!("documentMode"in document),Yi=un("webkit"),Nl=un("android"),Qi=un("android 2")||un("android 3"),Io=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Rl=Nl&&un("Google")&&Io<537&&!("AudioNode"in window),st=!!window.opera,_t=!$i&&un("chrome"),hi=un("gecko")&&!Yi&&!st&&!qi,Ll=!_t&&un("safari"),xo=un("phantom"),kl="OTransition"in To,di=navigator.platform.indexOf("Win")===0,So=qi&&"transition"in To,Ji="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qi,Xi="MozPerspective"in To,oh=!window.L_DISABLE_3D&&(So||Ji||Xi)&&!kl&&!xo,fi=typeof orientation<"u"||un("mobile"),Ao=fi&&Yi,Ol=fi&&Ji,Po=!window.PointerEvent&&window.MSPointerEvent,Ar=!!(window.PointerEvent||Po),es="ontouchstart"in window||!!window.TouchEvent,Co=!window.L_NO_TOUCH&&(es||Ar),er=fi&&st,Dl=fi&&hi,ts=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ml=function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",w,o),window.removeEventListener("testPassiveEventSupport",w,o)}catch{}return i}(),pi=function(){return!!document.createElement("canvas").getContext}(),ns=!!(document.createElementNS&&Ki("svg").createSVGRect),Tt=!!ns&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),bl=!ns&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var o=i.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),mi=navigator.platform.indexOf("Mac")===0,_i=navigator.platform.indexOf("Linux")===0;function un(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var se={ie:qi,ielt9:Cl,edge:$i,webkit:Yi,android:Nl,android23:Qi,androidStock:Rl,opera:st,chrome:_t,gecko:hi,safari:Ll,phantom:xo,opera12:kl,win:di,ie3d:So,webkit3d:Ji,gecko3d:Xi,any3d:oh,mobile:fi,mobileWebkit:Ao,mobileWebkit3d:Ol,msPointer:Po,pointer:Ar,touch:Co,touchNative:es,mobileOpera:er,mobileGecko:Dl,retina:ts,passiveEvents:Ml,canvas:pi,svg:ns,vml:bl,inlineSvg:Tt,mac:mi,linux:_i},tr=se.msPointer?"MSPointerDown":"pointerdown",Vl=se.msPointer?"MSPointerMove":"pointermove",Ul=se.msPointer?"MSPointerUp":"pointerup",gi=se.msPointer?"MSPointerCancel":"pointercancel",rs={touchstart:tr,touchmove:Vl,touchend:Ul,touchcancel:gi},is={touchstart:os,touchmove:ss,touchend:ss,touchcancel:ss},xn={},Sn=!1;function Bl(i,o,c){return o==="touchstart"&&jl(),is[o]?(c=is[o].bind(this,c),i.addEventListener(rs[o],c,!1),c):(console.warn("wrong event specified:",o),w)}function Fl(i,o,c){if(!rs[o]){console.warn("wrong event specified:",o);return}i.removeEventListener(rs[o],c,!1)}function No(i){xn[i.pointerId]=i}function Ro(i){xn[i.pointerId]&&(xn[i.pointerId]=i)}function Lo(i){delete xn[i.pointerId]}function jl(){Sn||(document.addEventListener(tr,No,!0),document.addEventListener(Vl,Ro,!0),document.addEventListener(Ul,Lo,!0),document.addEventListener(gi,Lo,!0),Sn=!0)}function ss(i,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in xn)o.touches.push(xn[c]);o.changedTouches=[o],i(o)}}function os(i,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&qe(o),ss(i,o)}function zl(i){var o={},c,d;for(d in i)c=i[d],o[d]=c&&c.bind?c.bind(i):c;return i=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var ko=200;function vi(i,o){i.addEventListener("dblclick",o);var c=0,d;function m(E){if(E.detail!==1){d=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var D=Go(E);if(!(D.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!D.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var F=Date.now();F-c<=ko?(d++,d===2&&o(zl(E))):d=1,c=F}}}return i.addEventListener("click",m),{dblclick:o,simDblclick:m}}function nr(i,o){i.removeEventListener("dblclick",o.dblclick),i.removeEventListener("click",o.simDblclick)}var yi=ir(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ei=ir(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Oo=Ei==="webkitTransition"||Ei==="OTransition"?Ei+"End":"transitionend";function Do(i){return typeof i=="string"?document.getElementById(i):i}function Pr(i,o){var c=i.style[o]||i.currentStyle&&i.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(i,null);c=d?d[o]:null}return c==="auto"?null:c}function xe(i,o,c){var d=document.createElement(i);return d.className=o||"",c&&c.appendChild(d),d}function Be(i){var o=i.parentNode;o&&o.removeChild(i)}function wi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function rr(i){var o=i.parentNode;o&&o.lastChild!==i&&o.appendChild(i)}function Cr(i){var o=i.parentNode;o&&o.firstChild!==i&&o.insertBefore(i,o.firstChild)}function Mo(i,o){if(i.classList!==void 0)return i.classList.contains(o);var c=cn(i);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function ge(i,o){if(i.classList!==void 0)for(var c=V(o),d=0,m=c.length;d<m;d++)i.classList.add(c[d]);else if(!Mo(i,o)){var E=cn(i);bo(i,(E?E+" ":"")+o)}}function We(i,o){i.classList!==void 0?i.classList.remove(o):bo(i,C((" "+cn(i)+" ").replace(" "+o+" "," ")))}function bo(i,o){i.className.baseVal===void 0?i.className=o:i.className.baseVal=o}function cn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function et(i,o){"opacity"in i.style?i.style.opacity=o:"filter"in i.style&&as(i,o)}function as(i,o){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=i.filters.item(d)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):i.style.filter+=" progid:"+d+"(opacity="+o+")"}function ir(i){for(var o=document.documentElement.style,c=0;c<i.length;c++)if(i[c]in o)return i[c];return!1}function Bn(i,o,c){var d=o||new W(0,0);i.style[yi]=(se.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")}function de(i,o){i._leaflet_pos=o,se.any3d?Bn(i,o):(i.style.left=o.x+"px",i.style.top=o.y+"px")}function hn(i){return i._leaflet_pos||new W(0,0)}var An,Pn,Vo;if("onselectstart"in document)An=function(){le(window,"selectstart",qe)},Pn=function(){Ve(window,"selectstart",qe)};else{var Nr=ir(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);An=function(){if(Nr){var i=document.documentElement.style;Vo=i[Nr],i[Nr]="none"}},Pn=function(){Nr&&(document.documentElement.style[Nr]=Vo,Vo=void 0)}}function Uo(){le(window,"dragstart",qe)}function Bo(){Ve(window,"dragstart",qe)}var ls,Fo;function sr(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Jt(),ls=i,Fo=i.style.outlineStyle,i.style.outlineStyle="none",le(window,"keydown",Jt))}function Jt(){ls&&(ls.style.outlineStyle=Fo,ls=void 0,Fo=void 0,Ve(window,"keydown",Jt))}function jo(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function us(i){var o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}var Hl={__proto__:null,TRANSFORM:yi,TRANSITION:Ei,TRANSITION_END:Oo,get:Do,getStyle:Pr,create:xe,remove:Be,empty:wi,toFront:rr,toBack:Cr,hasClass:Mo,addClass:ge,removeClass:We,setClass:bo,getClass:cn,setOpacity:et,testProp:ir,setTransform:Bn,setPosition:de,getPosition:hn,get disableTextSelection(){return An},get enableTextSelection(){return Pn},disableImageDrag:Uo,enableImageDrag:Bo,preventOutline:sr,restoreOutline:Jt,getSizedParentNode:jo,getScale:us};function le(i,o,c,d){if(o&&typeof o=="object")for(var m in o)zo(i,m,o[m],c);else{o=V(o);for(var E=0,D=o.length;E<D;E++)zo(i,o[E],c,d)}return this}var dn="_leaflet_events";function Ve(i,o,c,d){if(arguments.length===1)Gl(i),delete i[dn];else if(o&&typeof o=="object")for(var m in o)Ho(i,m,o[m],c);else if(o=V(o),arguments.length===2)Gl(i,function(F){return j(o,F)!==-1});else for(var E=0,D=o.length;E<D;E++)Ho(i,o[E],c,d);return this}function Gl(i,o){for(var c in i[dn]){var d=c.split(/\d/)[0];(!o||o(d))&&Ho(i,d,null,null,c)}}var fn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zo(i,o,c,d){var m=o+f(c)+(d?"_"+f(d):"");if(i[dn]&&i[dn][m])return this;var E=function(F){return c.call(d||i,F||window.event)},D=E;!se.touchNative&&se.pointer&&o.indexOf("touch")===0?E=Bl(i,o,E):se.touch&&o==="dblclick"?E=vi(i,E):"addEventListener"in i?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?i.addEventListener(fn[o]||o,E,se.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(E=function(F){F=F||window.event,Wo(i,F)&&D(F)},i.addEventListener(fn[o],E,!1)):i.addEventListener(o,D,!1):i.attachEvent("on"+o,E),i[dn]=i[dn]||{},i[dn][m]=E}function Ho(i,o,c,d,m){m=m||o+f(c)+(d?"_"+f(d):"");var E=i[dn]&&i[dn][m];if(!E)return this;!se.touchNative&&se.pointer&&o.indexOf("touch")===0?Fl(i,o,E):se.touch&&o==="dblclick"?nr(i,E):"removeEventListener"in i?i.removeEventListener(fn[o]||o,E,!1):i.detachEvent("on"+o,E),i[dn][m]=null}function pn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Rr(i){return zo(i,"wheel",pn),this}function Lr(i){return le(i,"mousedown touchstart dblclick contextmenu",pn),i._leaflet_disable_click=!0,this}function qe(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Xt(i){return qe(i),pn(i),this}function Go(i){if(i.composedPath)return i.composedPath();for(var o=[],c=i.target;c;)o.push(c),c=c.parentNode;return o}function cs(i,o){if(!o)return new W(i.clientX,i.clientY);var c=us(o),d=c.boundingClientRect;return new W((i.clientX-d.left)/c.x-o.clientLeft,(i.clientY-d.top)/c.y-o.clientTop)}var Ze=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wl(i){return se.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Ze:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Wo(i,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==i;)c=c.parentNode}catch{return!1}return c!==i}var Zl={__proto__:null,on:le,off:Ve,stopPropagation:pn,disableScrollPropagation:Rr,disableClickPropagation:Lr,preventDefault:qe,stop:Xt,getPropagationPath:Go,getMousePosition:cs,getWheelDelta:Wl,isExternalTarget:Wo,addListener:le,removeListener:Ve},Zo=Fe.extend({run:function(i,o,c,d){this.stop(),this._el=i,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=hn(i),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=b(this._animate,this),this._step()},_step:function(i){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),i):(this._runFrame(1),this._complete())},_runFrame:function(i,o){var c=this._startPos.add(this._offset.multiplyBy(i));o&&c._round(),de(this._el,c),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),we=Fe.extend({options:{crs:ci,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,o){o=U(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(pe(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ei&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,Oo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),i=this._limitCenter(pe(i),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var d=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,o,c.zoom):this._tryAnimatedPan(i,c.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(i,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(i,o){return this._loaded?this.setView(this.getCenter(),i,{zoom:o}):(this._zoom=i,this)},zoomIn:function(i,o){return i=i||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,o)},zoomOut:function(i,o){return i=i||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,o)},setZoomAround:function(i,o,c){var d=this.getZoomScale(o),m=this.getSize().divideBy(2),E=i instanceof W?i:this.latLngToContainerPoint(i),D=E.subtract(m).multiplyBy(1-1/d),F=this.containerPointToLatLng(m.add(D));return this.setView(F,o,{zoom:c})},_getBoundsCenterZoom:function(i,o){o=o||{},i=i.getBounds?i.getBounds():ke(i);var c=J(o.paddingTopLeft||o.padding||[0,0]),d=J(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(i,!1,c.add(d));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:i.getCenter(),zoom:m};var E=d.subtract(c).divideBy(2),D=this.project(i.getSouthWest(),m),F=this.project(i.getNorthEast(),m),z=this.unproject(D.add(F).divideBy(2).add(E),m);return{center:z,zoom:m}},fitBounds:function(i,o){if(i=ke(i),!i.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(i,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,o){return this.setView(i,this._zoom,{pan:o})},panBy:function(i,o){if(i=J(i).round(),o=o||{},!i.x&&!i.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){ge(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,o,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(i,o,c);this._stop();var d=this.project(this.getCenter()),m=this.project(i),E=this.getSize(),D=this._zoom;i=pe(i),o=o===void 0?D:o;var F=Math.max(E.x,E.y),z=F*this.getZoomScale(D,o),q=m.distanceTo(d)||1,te=1.42,ue=te*te;function Ee(at){var lu=at?-1:1,iT=at?z:F,sT=z*z-F*F+lu*ue*ue*q*q,oT=2*iT*ue*q,fh=sT/oT,mm=Math.sqrt(fh*fh+1)-fh,aT=mm<1e-9?-18:Math.log(mm);return aT}function Vt(at){return(Math.exp(at)-Math.exp(-at))/2}function vt(at){return(Math.exp(at)+Math.exp(-at))/2}function _n(at){return Vt(at)/vt(at)}var Ht=Ee(0);function Is(at){return F*(vt(Ht)/vt(Ht+te*at))}function eT(at){return F*(vt(Ht)*_n(Ht+te*at)-Vt(Ht))/ue}function tT(at){return 1-Math.pow(1-at,1.5)}var nT=Date.now(),fm=(Ee(1)-Ht)/te,rT=c.duration?1e3*c.duration:1e3*fm*.8;function pm(){var at=(Date.now()-nT)/rT,lu=tT(at)*fm;at<=1?(this._flyToFrame=b(pm,this),this._move(this.unproject(d.add(m.subtract(d).multiplyBy(eT(lu)/q)),D),this.getScaleZoom(F/Is(lu),D),{flyTo:!0})):this._move(i,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),pm.call(this),this},flyToBounds:function(i,o){var c=this._getBoundsCenterZoom(i,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(i){return i=ke(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var o=this.options.minZoom;return this.options.minZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var o=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,o){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,ke(i));return c.equals(d)||this.panTo(d,o),this._enforcingBounds=!1,this},panInside:function(i,o){o=o||{};var c=J(o.paddingTopLeft||o.padding||[0,0]),d=J(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),E=this.project(i),D=this.getPixelBounds(),F=ve([D.min.add(c),D.max.subtract(d)]),z=F.getSize();if(!F.contains(E)){this._enforcingBounds=!0;var q=E.subtract(F.getCenter()),te=F.extend(E).getSize().subtract(z);m.x+=q.x<0?-te.x:te.x,m.y+=q.y<0?-te.y:te.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=o.divideBy(2).round(),m=c.divideBy(2).round(),E=d.subtract(m);return!E.x&&!E.y?this:(i.animate&&i.pan?this.panBy(E):(i.pan&&this._rawPanBy(E),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=u(this._handleGeolocationResponse,this),c=u(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,i):navigator.geolocation.getCurrentPosition(o,c,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var o=i.code,c=i.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var o=i.coords.latitude,c=i.coords.longitude,d=new ye(o,c),m=d.toBounds(i.coords.accuracy*2),E=this._locateOptions;if(E.setView){var D=this.getBoundsZoom(m);this.setView(d,E.maxZoom?Math.min(D,E.maxZoom):D)}var F={latlng:d,bounds:m,timestamp:i.timestamp};for(var z in i.coords)typeof i.coords[z]=="number"&&(F[z]=i.coords[z]);this.fire("locationfound",F)}},addHandler:function(i,o){if(!o)return this;var c=this[i]=new o(this);return this._handlers.push(c),this.options[i]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Be(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Be(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,o){var c="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),d=xe("div",c,o||this._mapPane);return i&&(this._panes[i]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),o=this.unproject(i.getBottomLeft()),c=this.unproject(i.getTopRight());return new Ie(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,o,c){i=ke(i),c=J(c||[0,0]);var d=this.getZoom()||0,m=this.getMinZoom(),E=this.getMaxZoom(),D=i.getNorthWest(),F=i.getSouthEast(),z=this.getSize().subtract(c),q=ve(this.project(F,d),this.project(D,d)).getSize(),te=se.any3d?this.options.zoomSnap:1,ue=z.x/q.x,Ee=z.y/q.y,Vt=o?Math.max(ue,Ee):Math.min(ue,Ee);return d=this.getScaleZoom(Vt,d),te&&(d=Math.round(d/(te/100))*(te/100),d=o?Math.ceil(d/te)*te:Math.floor(d/te)*te),Math.max(m,Math.min(E,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,o){var c=this._getTopLeftPoint(i,o);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(i)/c.scale(o)},getScaleZoom:function(i,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var d=c.zoom(i*c.scale(o));return isNaN(d)?1/0:d},project:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(pe(i),o)},unproject:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(J(i),o)},layerPointToLatLng:function(i){var o=J(i).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(i){var o=this.project(pe(i))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(pe(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ke(i))},distance:function(i,o){return this.options.crs.distance(pe(i),pe(o))},containerPointToLayerPoint:function(i){return J(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return J(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var o=this.containerPointToLayerPoint(J(i));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(i)))},mouseEventToContainerPoint:function(i){return cs(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var o=this._container=Do(i);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");le(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ge(i,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Pr(i,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),de(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(i.markerPane,"leaflet-zoom-hide"),ge(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,o,c){de(this._mapPane,new W(0,0));var d=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,c)._move(i,o)._moveEnd(m),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(i,o){return i&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(i,o,c,d){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),d?c&&c.pinch&&this.fire("zoom",c):((m||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){de(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[f(this._container)]=this;var o=i?Ve:le;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=b(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,o){for(var c=[],d,m=o==="mouseout"||o==="mouseover",E=i.target||i.srcElement,D=!1;E;){if(d=this._targets[f(E)],d&&(o==="click"||o==="preclick")&&this._draggableMoved(d)){D=!0;break}if(d&&d.listens(o,!0)&&(m&&!Wo(E,i)||(c.push(d),m))||E===this._container)break;E=E.parentNode}return!c.length&&!D&&!m&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var o=i.target||i.srcElement;if(!(!this._loaded||o._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(o))){var c=i.type;c==="mousedown"&&sr(o),this._fireDOMEvent(i,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,o,c){if(i.type==="click"){var d=s({},i);d.type="preclick",this._fireDOMEvent(d,d.type,c)}var m=this._findEventTargets(i,o);if(c){for(var E=[],D=0;D<c.length;D++)c[D].listens(o,!0)&&E.push(c[D]);m=E.concat(m)}if(m.length){o==="contextmenu"&&qe(i);var F=m[0],z={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var q=F.getLatLng&&(!F._radius||F._radius<=10);z.containerPoint=q?this.latLngToContainerPoint(F.getLatLng()):this.mouseEventToContainerPoint(i),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=q?F.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(D=0;D<m.length;D++)if(m[D].fire(o,z,!0),z.originalEvent._stopped||m[D].options.bubblingMouseEvents===!1&&j(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,o=this._handlers.length;i<o;i++)this._handlers[i].disable()},whenReady:function(i,o){return this._loaded?i.call(o||this,{target:this}):this.on("load",i,o),this},_getMapPanePos:function(){return hn(this._mapPane)||new W(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,o){var c=i&&o!==void 0?this._getNewPixelOrigin(i,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,o){var c=this.getSize()._divideBy(2);return this.project(i,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,o,c){var d=this._getNewPixelOrigin(c,o);return this.project(i,o)._subtract(d)},_latLngBoundsToNewLayerBounds:function(i,o,c){var d=this._getNewPixelOrigin(c,o);return ve([this.project(i.getSouthWest(),o)._subtract(d),this.project(i.getNorthWest(),o)._subtract(d),this.project(i.getSouthEast(),o)._subtract(d),this.project(i.getNorthEast(),o)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,o,c){if(!c)return i;var d=this.project(i,o),m=this.getSize().divideBy(2),E=new he(d.subtract(m),d.add(m)),D=this._getBoundsOffset(E,c,o);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?i:this.unproject(d.add(D),o)},_limitOffset:function(i,o){if(!o)return i;var c=this.getPixelBounds(),d=new he(c.min.add(i),c.max.add(i));return i.add(this._getBoundsOffset(d,o))},_getBoundsOffset:function(i,o,c){var d=ve(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),m=d.min.subtract(i.min),E=d.max.subtract(i.max),D=this._rebound(m.x,-E.x),F=this._rebound(m.y,-E.y);return new W(D,F)},_rebound:function(i,o){return i+o>0?Math.round(i-o)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(o))},_limitZoom:function(i){var o=this.getMinZoom(),c=this.getMaxZoom(),d=se.any3d?this.options.zoomSnap:1;return d&&(i=Math.round(i/d)*d),Math.max(o,Math.min(c,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,o){var c=this._getCenterOffset(i)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var i=this._proxy=xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(o){var c=yi,d=this._proxy.style[c];Bn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),d===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Be(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),o=this.getZoom();Bn(this._proxy,this.project(i,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(o),m=this._getCenterOffset(i)._divideBy(1-1/d);return c.animate!==!0&&!this.getSize().contains(m)?!1:(b(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(i,o,!0)},this),!0)},_animateZoom:function(i,o,c,d){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=o,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:o,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function hs(i,o){return new we(i,o)}var zt=oe.extend({options:{position:"topright"},initialize:function(i){U(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var o=this._map;return o&&o.removeControl(this),this.options.position=i,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var o=this._container=this.onAdd(i),c=this.getPosition(),d=i._controlCorners[c];return ge(o,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(o,d.firstChild):d.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Be(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),bt=function(i){return new zt(i)};we.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",c=this._controlContainer=xe("div",o+"control-container",this._container);function d(m,E){var D=o+m+" "+o+E;i[m+E]=xe("div",D,c)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Be(this._controlCorners[i]);Be(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ko=zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,o,c,d){return c<d?-1:d<c?1:0}},initialize:function(i,o,c){U(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in i)this._addLayer(i[d],d);for(d in o)this._addLayer(o[d],d,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return zt.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,o){return this._addLayer(i,o),this._map?this._update():this},addOverlay:function(i,o){return this._addLayer(i,o,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(i));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",o=this._container=xe("div",i),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Lr(o),Rr(o);var d=this._section=xe("section",i+"-list");c&&(this._map.on("click",this.collapse,this),le(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=xe("a",i+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),le(m,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){qe(E),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=xe("div",i+"-base",d),this._separator=xe("div",i+"-separator",d),this._overlaysList=xe("div",i+"-overlays",d),o.appendChild(d)},_getLayer:function(i){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===i)return this._layers[o]},_addLayer:function(i,o,c){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(u(function(d,m){return this.options.sortFunction(d.layer,m.layer,d.name,m.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;wi(this._baseLayersList),wi(this._overlaysList),this._layerControlInputs=[];var i,o,c,d,m=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),o=o||d.overlay,i=i||!d.overlay,m+=d.overlay?0:1;return this.options.hideSingleBase&&(i=i&&m>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=o&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var o=this._getLayer(f(i.target)),c=o.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(i,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(o?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(i){var o=document.createElement("label"),c=this._map.hasLayer(i.layer),d;i.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=c):d=this._createRadioElement("leaflet-base-layers_"+f(this),c),this._layerControlInputs.push(d),d.layerId=f(i.layer),le(d,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+i.name;var E=document.createElement("span");o.appendChild(E),E.appendChild(d),E.appendChild(m);var D=i.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,o,c,d=[],m=[];this._handlingClick=!0;for(var E=i.length-1;E>=0;E--)o=i[E],c=this._getLayer(o.layerId).layer,o.checked?d.push(c):o.checked||m.push(c);for(E=0;E<m.length;E++)this._map.hasLayer(m[E])&&this._map.removeLayer(m[E]);for(E=0;E<d.length;E++)this._map.hasLayer(d[E])||this._map.addLayer(d[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,o,c,d=this._map.getZoom(),m=i.length-1;m>=0;m--)o=i[m],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&d<c.options.minZoom||c.options.maxZoom!==void 0&&d>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,le(i,"click",qe),this.expand();var o=this;setTimeout(function(){Ve(i,"click",qe),o._preventClick=!1})}}),ah=function(i,o,c){return new Ko(i,o,c)},or=zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var o="leaflet-control-zoom",c=xe("div",o+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,o,c,d,m){var E=xe("a",c,d);return E.innerHTML=i,E.href="#",E.title=o,E.setAttribute("role","button"),E.setAttribute("aria-label",o),Lr(E),le(E,"click",Xt),le(E,"click",m,this),le(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var i=this._map,o="leaflet-disabled";We(this._zoomInButton,o),We(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(ge(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(ge(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});we.mergeOptions({zoomControl:!0}),we.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new or,this.addControl(this.zoomControl))});var Kl=function(i){return new or(i)},ds=zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var o="leaflet-control-scale",c=xe("div",o),d=this.options;return this._addScales(d,o+"-line",c),i.on(d.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),c},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,o,c){i.metric&&(this._mScale=xe("div",o,c)),i.imperial&&(this._iScale=xe("div",o,c))},_update:function(){var i=this._map,o=i.getSize().y/2,c=i.distance(i.containerPointToLatLng([0,o]),i.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var o=this._getRoundNum(i),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/i)},_updateImperial:function(i){var o=i*3.2808399,c,d,m;o>5280?(c=o/5280,d=this._getRoundNum(c),this._updateScale(this._iScale,d+" mi",d/c)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(i,o,c){i.style.width=Math.round(this.options.maxWidth*c)+"px",i.innerHTML=o},_getRoundNum:function(i){var o=Math.pow(10,(Math.floor(i)+"").length-1),c=i/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),fs=function(i){return new ds(i)},ql='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',kr=zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?ql+" ":"")+"Leaflet</a>"},initialize:function(i){U(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=xe("div","leaflet-control-attribution"),Lr(this._container);for(var o in i._layers)i._layers[o].getAttribution&&this.addAttribution(i._layers[o].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var o in this._attributions)this._attributions[o]&&i.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),i.length&&c.push(i.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});we.mergeOptions({attributionControl:!0}),we.addInitHook(function(){this.options.attributionControl&&new kr().addTo(this)});var lh=function(i){return new kr(i)};zt.Layers=Ko,zt.Zoom=or,zt.Scale=ds,zt.Attribution=kr,bt.layers=ah,bt.zoom=Kl,bt.scale=fs,bt.attribution=lh;var en=oe.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});en.addTo=function(i,o){return i.addHandler(o,this),this};var Ti={Events:Le},qo=se.touch?"touchstart mousedown":"mousedown",Cn=Fe.extend({options:{clickTolerance:3},initialize:function(i,o,c,d){U(this,d),this._element=i,this._dragStartTarget=o||i,this._preventOutline=c},enable:function(){this._enabled||(le(this._dragStartTarget,qo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Cn._dragging===this&&this.finishDrag(!0),Ve(this._dragStartTarget,qo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Mo(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Cn._dragging===this&&this.finishDrag();return}if(!(Cn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Cn._dragging=this,this._preventOutline&&sr(this._element),Uo(),An(),!this._moving)){this.fire("down");var o=i.touches?i.touches[0]:i,c=jo(this._element);this._startPoint=new W(o.clientX,o.clientY),this._startPos=hn(this._element),this._parentScale=us(c);var d=i.type==="mousedown";le(document,d?"mousemove":"touchmove",this._onMove,this),le(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var o=i.touches&&i.touches.length===1?i.touches[0]:i,c=new W(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,qe(i),this._moved||(this.fire("dragstart"),this._moved=!0,ge(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),de(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ve(document,"mousemove touchmove",this._onMove,this),Ve(document,"mouseup touchend touchcancel",this._onUp,this),Bo(),Pn();var o=this._moved&&this._moving;this._moving=!1,Cn._dragging=!1,o&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function ps(i,o,c){var d,m=[1,4,2,8],E,D,F,z,q,te,ue,Ee;for(E=0,te=i.length;E<te;E++)i[E]._code=Fn(i[E],o);for(F=0;F<4;F++){for(ue=m[F],d=[],E=0,te=i.length,D=te-1;E<te;D=E++)z=i[E],q=i[D],z._code&ue?q._code&ue||(Ee=gt(q,z,ue,o,c),Ee._code=Fn(Ee,o),d.push(Ee)):(q._code&ue&&(Ee=gt(q,z,ue,o,c),Ee._code=Fn(Ee,o),d.push(Ee)),d.push(z));i=d}return i}function ms(i,o){var c,d,m,E,D,F,z,q,te;if(!i||i.length===0)throw new Error("latlngs not passed");l(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ue=pe([0,0]),Ee=ke(i),Vt=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Vt<1700&&(ue=_s(i));var vt=i.length,_n=[];for(c=0;c<vt;c++){var Ht=pe(i[c]);_n.push(o.project(pe([Ht.lat-ue.lat,Ht.lng-ue.lng])))}for(F=z=q=0,c=0,d=vt-1;c<vt;d=c++)m=_n[c],E=_n[d],D=m.y*E.x-E.y*m.x,z+=(m.x+E.x)*D,q+=(m.y+E.y)*D,F+=D*3;F===0?te=_n[0]:te=[z/F,q/F];var Is=o.unproject(J(te));return pe([Is.lat+ue.lat,Is.lng+ue.lng])}function _s(i){for(var o=0,c=0,d=0,m=0;m<i.length;m++){var E=pe(i[m]);o+=E.lat,c+=E.lng,d++}return pe([o/d,c/d])}var gs={__proto__:null,clipPolygon:ps,polygonCenter:ms,centroid:_s};function $o(i,o){if(!o||!i.length)return i.slice();var c=o*o;return i=Yl(i,c),i=$l(i,c),i}function Yo(i,o,c){return Math.sqrt(mn(i,o,c,!0))}function ar(i,o,c){return mn(i,o,c)}function $l(i,o){var c=i.length,d=typeof Uint8Array<"u"?Uint8Array:Array,m=new d(c);m[0]=m[c-1]=1,vs(i,m,o,0,c-1);var E,D=[];for(E=0;E<c;E++)m[E]&&D.push(i[E]);return D}function vs(i,o,c,d,m){var E=0,D,F,z;for(F=d+1;F<=m-1;F++)z=mn(i[F],i[d],i[m],!0),z>E&&(D=F,E=z);E>c&&(o[D]=1,vs(i,o,c,d,D),vs(i,o,c,D,m))}function Yl(i,o){for(var c=[i[0]],d=1,m=0,E=i.length;d<E;d++)Ql(i[d],i[m])>o&&(c.push(i[d]),m=d);return m<E-1&&c.push(i[E-1]),c}var Qo;function Ii(i,o,c,d,m){var E=d?Qo:Fn(i,c),D=Fn(o,c),F,z,q;for(Qo=D;;){if(!(E|D))return[i,o];if(E&D)return!1;F=E||D,z=gt(i,o,F,c,m),q=Fn(z,c),F===E?(i=z,E=q):(o=z,D=q)}}function gt(i,o,c,d,m){var E=o.x-i.x,D=o.y-i.y,F=d.min,z=d.max,q,te;return c&8?(q=i.x+E*(z.y-i.y)/D,te=z.y):c&4?(q=i.x+E*(F.y-i.y)/D,te=F.y):c&2?(q=z.x,te=i.y+D*(z.x-i.x)/E):c&1&&(q=F.x,te=i.y+D*(F.x-i.x)/E),new W(q,te,m)}function Fn(i,o){var c=0;return i.x<o.min.x?c|=1:i.x>o.max.x&&(c|=2),i.y<o.min.y?c|=4:i.y>o.max.y&&(c|=8),c}function Ql(i,o){var c=o.x-i.x,d=o.y-i.y;return c*c+d*d}function mn(i,o,c,d){var m=o.x,E=o.y,D=c.x-m,F=c.y-E,z=D*D+F*F,q;return z>0&&(q=((i.x-m)*D+(i.y-E)*F)/z,q>1?(m=c.x,E=c.y):q>0&&(m+=D*q,E+=F*q)),D=i.x-m,F=i.y-E,d?D*D+F*F:new W(m,E)}function l(i){return!k(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function p(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),l(i)}function g(i,o){var c,d,m,E,D,F,z,q;if(!i||i.length===0)throw new Error("latlngs not passed");l(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var te=pe([0,0]),ue=ke(i),Ee=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());Ee<1700&&(te=_s(i));var Vt=i.length,vt=[];for(c=0;c<Vt;c++){var _n=pe(i[c]);vt.push(o.project(pe([_n.lat-te.lat,_n.lng-te.lng])))}for(c=0,d=0;c<Vt-1;c++)d+=vt[c].distanceTo(vt[c+1])/2;if(d===0)q=vt[0];else for(c=0,E=0;c<Vt-1;c++)if(D=vt[c],F=vt[c+1],m=D.distanceTo(F),E+=m,E>d){z=(E-d)/m,q=[F.x-z*(F.x-D.x),F.y-z*(F.y-D.y)];break}var Ht=o.unproject(J(q));return pe([Ht.lat+te.lat,Ht.lng+te.lng])}var T={__proto__:null,simplify:$o,pointToSegmentDistance:Yo,closestPointOnSegment:ar,clipSegment:Ii,_getEdgeIntersection:gt,_getBitCode:Fn,_sqClosestPointOnSegment:mn,isFlat:l,_flat:p,polylineCenter:g},B={project:function(i){return new W(i.lng,i.lat)},unproject:function(i){return new ye(i.y,i.x)},bounds:new he([-180,-90],[180,90])},H={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var o=Math.PI/180,c=this.R,d=i.lat*o,m=this.R_MINOR/c,E=Math.sqrt(1-m*m),D=E*Math.sin(d),F=Math.tan(Math.PI/4-d/2)/Math.pow((1-D)/(1+D),E/2);return d=-c*Math.log(Math.max(F,1e-10)),new W(i.lng*o*c,d)},unproject:function(i){for(var o=180/Math.PI,c=this.R,d=this.R_MINOR/c,m=Math.sqrt(1-d*d),E=Math.exp(-i.y/c),D=Math.PI/2-2*Math.atan(E),F=0,z=.1,q;F<15&&Math.abs(z)>1e-7;F++)q=m*Math.sin(D),q=Math.pow((1-q)/(1+q),m/2),z=Math.PI/2-2*Math.atan(E*q)-D,D+=z;return new ye(D*o,i.x*o/c)}},X={__proto__:null,LonLat:B,Mercator:H,SphericalMercator:xr},De=s({},Un,{code:"EPSG:3395",projection:H,transformation:function(){var i=.5/(Math.PI*H.R);return Xn(i,.5,-i,.5)}()}),ot=s({},Un,{code:"EPSG:4326",projection:B,transformation:Xn(1/180,1,-1/180,.5)}),Ae=s({},dt,{projection:B,transformation:Xn(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,o){var c=o.lng-i.lng,d=o.lat-i.lat;return Math.sqrt(c*c+d*d)},infinite:!0});dt.Earth=Un,dt.EPSG3395=De,dt.EPSG3857=ci,dt.EPSG900913=Eo,dt.EPSG4326=ot,dt.Simple=Ae;var Ue=Fe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[f(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[f(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var o=i.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});we.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(i);return this._layers[o]?this:(this._layers[o]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var o=f(i);return this._layers[o]?(this._loaded&&i.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return f(i)in this._layers},eachLayer:function(i,o){for(var c in this._layers)i.call(o,this._layers[c]);return this},_addLayers:function(i){i=i?k(i)?i:[i]:[];for(var o=0,c=i.length;o<c;o++)this.addLayer(i[o])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[f(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var o=f(i);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,o=-1/0,c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var m=this._zoomBoundLayers[d].options;i=m.minZoom===void 0?i:Math.min(i,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=i===1/0?void 0:i,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $e=Ue.extend({initialize:function(i,o){U(this,o),this._layers={};var c,d;if(i)for(c=0,d=i.length;c<d;c++)this.addLayer(i[c])},addLayer:function(i){var o=this.getLayerId(i);return this._layers[o]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var o=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(i){var o=typeof i=="number"?i:this.getLayerId(i);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var o=Array.prototype.slice.call(arguments,1),c,d;for(c in this._layers)d=this._layers[c],d[i]&&d[i].apply(d,o);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,o){for(var c in this._layers)i.call(o,this._layers[c]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return f(i)}}),Or=function(i,o){return new $e(i,o)},nt=$e.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),$e.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),$e.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Ie;for(var o in this._layers){var c=this._layers[o];i.extend(c.getBounds?c.getBounds():c.getLatLng())}return i}}),ys=function(i,o){return new nt(i,o)},jn=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){U(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,o){var c=this._getIconUrl(i);if(!c){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(d,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(i,o){var c=this.options,d=c[o+"Size"];typeof d=="number"&&(d=[d,d]);var m=J(d),E=J(o==="shadow"&&c.shadowAnchor||c.iconAnchor||m&&m.divideBy(2,!0));i.className="leaflet-marker-"+o+" "+(c.className||""),E&&(i.style.marginLeft=-E.x+"px",i.style.marginTop=-E.y+"px"),m&&(i.style.width=m.x+"px",i.style.height=m.y+"px")},_createImg:function(i,o){return o=o||document.createElement("img"),o.src=i,o},_getIconUrl:function(i){return se.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Mw(i){return new jn(i)}var Jo=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Jo.imagePath!="string"&&(Jo.imagePath=this._detectIconPath()),(this.options.imagePath||Jo.imagePath)+jn.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var o=function(c,d,m){var E=d.exec(c);return E&&E[m]};return i=o(i,/^url\((['"])?(.+)\1\)$/,2),i&&o(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=xe("div","leaflet-default-icon-path",document.body),o=Pr(i,"background-image")||Pr(i,"backgroundImage");if(document.body.removeChild(i),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),qp=en.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Cn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var o=this._marker,c=o._map,d=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,E=hn(o._icon),D=c.getPixelBounds(),F=c.getPixelOrigin(),z=ve(D.min._subtract(F).add(m),D.max._subtract(F).subtract(m));if(!z.contains(E)){var q=J((Math.max(z.max.x,E.x)-z.max.x)/(D.max.x-z.max.x)-(Math.min(z.min.x,E.x)-z.min.x)/(D.min.x-z.min.x),(Math.max(z.max.y,E.y)-z.max.y)/(D.max.y-z.max.y)-(Math.min(z.min.y,E.y)-z.min.y)/(D.min.y-z.min.y)).multiplyBy(d);c.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),de(o._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=b(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=b(this._adjustPan.bind(this,i)))},_onDrag:function(i){var o=this._marker,c=o._shadow,d=hn(o._icon),m=o._map.layerPointToLatLng(d);c&&de(c,d),o._latlng=m,i.latlng=m,i.oldLatLng=this._oldLatLng,o.fire("move",i).fire("drag",i)},_onDragEnd:function(i){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Jl=Ue.extend({options:{icon:new Jo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,o){U(this,o),this._latlng=pe(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var o=this._latlng;return this._latlng=pe(i),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=i.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,i.title&&(c.title=i.title),c.tagName==="IMG"&&(c.alt=i.alt||"")),ge(c,o),i.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&le(c,"focus",this._panOnFocus,this);var m=i.icon.createShadow(this._shadow),E=!1;m!==this._shadow&&(this._removeShadow(),E=!0),m&&(ge(m,o),m.alt=""),this._shadow=m,i.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&E&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ve(this._icon,"focus",this._panOnFocus,this),Be(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Be(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&de(this._icon,i),this._shadow&&de(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),qp)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new qp(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&et(this._icon,i),this._shadow&&et(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var o=this.options.icon.options,c=o.iconSize?J(o.iconSize):J(0,0),d=o.iconAnchor?J(o.iconAnchor):J(0,0);i.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:c.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function bw(i,o){return new Jl(i,o)}var Dr=Ue.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return U(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xl=Dr.extend({options:{fill:!0,radius:10},initialize:function(i,o){U(this,o),this._latlng=pe(i),this._radius=this.options.radius},setLatLng:function(i){var o=this._latlng;return this._latlng=pe(i),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var o=i&&i.radius||this._radius;return Dr.prototype.setStyle.call(this,i),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,o=this._radiusY||i,c=this._clickTolerance(),d=[i+c,o+c];this._pxBounds=new he(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Vw(i,o){return new Xl(i,o)}var uh=Xl.extend({initialize:function(i,o,c){if(typeof o=="number"&&(o=s({},c,{radius:o})),U(this,o),this._latlng=pe(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Ie(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Dr.prototype.setStyle,_project:function(){var i=this._latlng.lng,o=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===Un.distance){var m=Math.PI/180,E=this._mRadius/Un.R/m,D=c.project([o+E,i]),F=c.project([o-E,i]),z=D.add(F).divideBy(2),q=c.unproject(z).lat,te=Math.acos((Math.cos(E*m)-Math.sin(o*m)*Math.sin(q*m))/(Math.cos(o*m)*Math.cos(q*m)))/m;(isNaN(te)||te===0)&&(te=E/Math.cos(Math.PI/180*o)),this._point=z.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:z.x-c.project([q,i-te]).x,this._radiusY=z.y-D.y}else{var ue=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ue).x}this._updateBounds()}});function Uw(i,o,c){return new uh(i,o,c)}var lr=Dr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,o){U(this,o),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var o=1/0,c=null,d=mn,m,E,D=0,F=this._parts.length;D<F;D++)for(var z=this._parts[D],q=1,te=z.length;q<te;q++){m=z[q-1],E=z[q];var ue=d(i,m,E,!0);ue<o&&(o=ue,c=d(i,m,E))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return g(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,o){return o=o||this._defaultShape(),i=pe(i),o.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Ie,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return l(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var o=[],c=l(i),d=0,m=i.length;d<m;d++)c?(o[d]=pe(i[d]),this._bounds.extend(o[d])):o[d]=this._convertLatLngs(i[d]);return o},_project:function(){var i=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),o=new W(i,i);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(i,o,c){var d=i[0]instanceof ye,m=i.length,E,D;if(d){for(D=[],E=0;E<m;E++)D[E]=this._map.latLngToLayerPoint(i[E]),c.extend(D[E]);o.push(D)}else for(E=0;E<m;E++)this._projectLatlngs(i[E],o,c)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,d,m,E,D,F,z;for(c=0,m=0,E=this._rings.length;c<E;c++)for(z=this._rings[c],d=0,D=z.length;d<D-1;d++)F=Ii(z[d],z[d+1],i,d,!0),F&&(o[m]=o[m]||[],o[m].push(F[0]),(F[1]!==z[d+1]||d===D-2)&&(o[m].push(F[1]),m++))}},_simplifyPoints:function(){for(var i=this._parts,o=this.options.smoothFactor,c=0,d=i.length;c<d;c++)i[c]=$o(i[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,o){var c,d,m,E,D,F,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(c=0,E=this._parts.length;c<E;c++)for(F=this._parts[c],d=0,D=F.length,m=D-1;d<D;m=d++)if(!(!o&&d===0)&&Yo(i,F[m],F[d])<=z)return!0;return!1}});function Bw(i,o){return new lr(i,o)}lr._flat=p;var Es=lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ms(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var o=lr.prototype._convertLatLngs.call(this,i),c=o.length;return c>=2&&o[0]instanceof ye&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(i){lr.prototype._setLatLngs.call(this,i),l(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return l(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,o=this.options.weight,c=new W(o,o);if(i=new he(i.min.subtract(c),i.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,m=this._rings.length,E;d<m;d++)E=ps(this._rings[d],i,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var o=!1,c,d,m,E,D,F,z,q;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(E=0,z=this._parts.length;E<z;E++)for(c=this._parts[E],D=0,q=c.length,F=q-1;D<q;F=D++)d=c[D],m=c[F],d.y>i.y!=m.y>i.y&&i.x<(m.x-d.x)*(i.y-d.y)/(m.y-d.y)+d.x&&(o=!o);return o||lr.prototype._containsPoint.call(this,i,!0)}});function Fw(i,o){return new Es(i,o)}var ur=nt.extend({initialize:function(i,o){U(this,o),this._layers={},i&&this.addData(i)},addData:function(i){var o=k(i)?i:i.features,c,d,m;if(o){for(c=0,d=o.length;c<d;c++)m=o[c],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var E=this.options;if(E.filter&&!E.filter(i))return this;var D=eu(i,E);return D?(D.feature=ru(i),D.defaultOptions=D.options,this.resetStyle(D),E.onEachFeature&&E.onEachFeature(i,D),this.addLayer(D)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(o){this._setLayerStyle(o,i)},this)},_setLayerStyle:function(i,o){i.setStyle&&(typeof o=="function"&&(o=o(i.feature)),i.setStyle(o))}});function eu(i,o){var c=i.type==="Feature"?i.geometry:i,d=c?c.coordinates:null,m=[],E=o&&o.pointToLayer,D=o&&o.coordsToLatLng||ch,F,z,q,te;if(!d&&!c)return null;switch(c.type){case"Point":return F=D(d),$p(E,i,F,o);case"MultiPoint":for(q=0,te=d.length;q<te;q++)F=D(d[q]),m.push($p(E,i,F,o));return new nt(m);case"LineString":case"MultiLineString":return z=tu(d,c.type==="LineString"?0:1,D),new lr(z,o);case"Polygon":case"MultiPolygon":return z=tu(d,c.type==="Polygon"?1:2,D),new Es(z,o);case"GeometryCollection":for(q=0,te=c.geometries.length;q<te;q++){var ue=eu({geometry:c.geometries[q],type:"Feature",properties:i.properties},o);ue&&m.push(ue)}return new nt(m);case"FeatureCollection":for(q=0,te=c.features.length;q<te;q++){var Ee=eu(c.features[q],o);Ee&&m.push(Ee)}return new nt(m);default:throw new Error("Invalid GeoJSON object.")}}function $p(i,o,c,d){return i?i(o,c):new Jl(c,d&&d.markersInheritOptions&&d)}function ch(i){return new ye(i[1],i[0],i[2])}function tu(i,o,c){for(var d=[],m=0,E=i.length,D;m<E;m++)D=o?tu(i[m],o-1,c):(c||ch)(i[m]),d.push(D);return d}function hh(i,o){return i=pe(i),i.alt!==void 0?[x(i.lng,o),x(i.lat,o),x(i.alt,o)]:[x(i.lng,o),x(i.lat,o)]}function nu(i,o,c,d){for(var m=[],E=0,D=i.length;E<D;E++)m.push(o?nu(i[E],l(i[E])?0:o-1,c,d):hh(i[E],d));return!o&&c&&m.length>0&&m.push(m[0].slice()),m}function ws(i,o){return i.feature?s({},i.feature,{geometry:o}):ru(o)}function ru(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var dh={toGeoJSON:function(i){return ws(this,{type:"Point",coordinates:hh(this.getLatLng(),i)})}};Jl.include(dh),uh.include(dh),Xl.include(dh),lr.include({toGeoJSON:function(i){var o=!l(this._latlngs),c=nu(this._latlngs,o?1:0,!1,i);return ws(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),Es.include({toGeoJSON:function(i){var o=!l(this._latlngs),c=o&&!l(this._latlngs[0]),d=nu(this._latlngs,c?2:o?1:0,!0,i);return o||(d=[d]),ws(this,{type:(c?"Multi":"")+"Polygon",coordinates:d})}}),$e.include({toMultiPoint:function(i){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(i).geometry.coordinates)}),ws(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(i){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(i);var c=o==="GeometryCollection",d=[];return this.eachLayer(function(m){if(m.toGeoJSON){var E=m.toGeoJSON(i);if(c)d.push(E.geometry);else{var D=ru(E);D.type==="FeatureCollection"?d.push.apply(d,D.features):d.push(D)}}}),c?ws(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Yp(i,o){return new ur(i,o)}var jw=Yp,iu=Ue.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,o,c){this._url=i,this._bounds=ke(o),U(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Be(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&rr(this._image),this},bringToBack:function(){return this._map&&Cr(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ke(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",o=this._image=i?this._url:xe("img");if(ge(o,"leaflet-image-layer"),this._zoomAnimated&&ge(o,"leaflet-zoom-animated"),this.options.className&&ge(o,this.options.className),o.onselectstart=w,o.onmousemove=w,o.onload=u(this.fire,this,"load"),o.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(i){var o=this._map.getZoomScale(i.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Bn(this._image,c,o)},_reset:function(){var i=this._image,o=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();de(i,o.min),i.style.width=c.x+"px",i.style.height=c.y+"px"},_updateOpacity:function(){et(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),zw=function(i,o,c){return new iu(i,o,c)},Qp=iu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",o=this._image=i?this._url:xe("video");if(ge(o,"leaflet-image-layer"),this._zoomAnimated&&ge(o,"leaflet-zoom-animated"),this.options.className&&ge(o,this.options.className),o.onselectstart=w,o.onmousemove=w,o.onloadeddata=u(this.fire,this,"load"),i){for(var c=o.getElementsByTagName("source"),d=[],m=0;m<c.length;m++)d.push(c[m].src);this._url=c.length>0?d:[o.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var D=xe("source");D.src=this._url[E],o.appendChild(D)}}});function Hw(i,o,c){return new Qp(i,o,c)}var Jp=iu.extend({_initImage:function(){var i=this._image=this._url;ge(i,"leaflet-image-layer"),this._zoomAnimated&&ge(i,"leaflet-zoom-animated"),this.options.className&&ge(i,this.options.className),i.onselectstart=w,i.onmousemove=w}});function Gw(i,o,c){return new Jp(i,o,c)}var zn=Ue.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,o){i&&(i instanceof ye||k(i))?(this._latlng=pe(i),U(this,o)):(U(this,i),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&et(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&et(this._container,1),this.bringToFront(),this.options.interactive&&(ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(et(this._container,0),this._removeTimeout=setTimeout(u(Be,void 0,this._container),200)):Be(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=pe(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rr(this._container),this},bringToBack:function(){return this._map&&Cr(this._container),this},_prepareOpen:function(i){var o=this._source;if(!o._map)return!1;if(o instanceof nt){o=null;var c=this._source._layers;for(var d in c)if(c[d]._map){o=c[d];break}if(!o)return!1;this._source=o}if(!i)if(o.getCenter)i=o.getCenter();else if(o.getLatLng)i=o.getLatLng();else if(o.getBounds)i=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")i.innerHTML=o;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),o=J(this.options.offset),c=this._getAnchor();this._zoomAnimated?de(this._container,i.add(c)):o=o.add(i).add(c);var d=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=d+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});we.include({_initOverlay:function(i,o,c,d){var m=o;return m instanceof i||(m=new i(d).setContent(o)),c&&m.setLatLng(c),m}}),Ue.include({_initOverlay:function(i,o,c,d){var m=c;return m instanceof i?(U(m,d),m._source=this):(m=o&&!d?o:new i(d,this),m.setContent(c)),m}});var su=zn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,zn.prototype.openOn.call(this,i)},onAdd:function(i){zn.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Dr||this._source.on("preclick",pn))},onRemove:function(i){zn.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Dr||this._source.off("preclick",pn))},getEvents:function(){var i=zn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",o=this._container=xe("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=xe("div",i+"-content-wrapper",o);if(this._contentNode=xe("div",i+"-content",c),Lr(o),Rr(this._contentNode),le(o,"contextmenu",pn),this._tipContainer=xe("div",i+"-tip-container",o),this._tip=xe("div",i+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=xe("a",i+"-close-button",o);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',le(d,"click",function(m){qe(m),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,o=i.style;o.width="",o.whiteSpace="nowrap";var c=i.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var d=i.offsetHeight,m=this.options.maxHeight,E="leaflet-popup-scrolled";m&&d>m?(o.height=m+"px",ge(i,E)):We(i,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),c=this._getAnchor();de(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,o=parseInt(Pr(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,d=this._containerWidth,m=new W(this._containerLeft,-c-this._containerBottom);m._add(hn(this._container));var E=i.layerPointToContainerPoint(m),D=J(this.options.autoPanPadding),F=J(this.options.autoPanPaddingTopLeft||D),z=J(this.options.autoPanPaddingBottomRight||D),q=i.getSize(),te=0,ue=0;E.x+d+z.x>q.x&&(te=E.x+d-q.x+z.x),E.x-te-F.x<0&&(te=E.x-F.x),E.y+c+z.y>q.y&&(ue=E.y+c-q.y+z.y),E.y-ue-F.y<0&&(ue=E.y-F.y),(te||ue)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([te,ue]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ww=function(i,o){return new su(i,o)};we.mergeOptions({closePopupOnClick:!0}),we.include({openPopup:function(i,o,c){return this._initOverlay(su,i,o,c).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Ue.include({bindPopup:function(i,o){return this._popup=this._initOverlay(su,this._popup,i,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof nt||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Xt(i);var o=i.layer||i.target;if(this._popup._source===o&&!(o instanceof Dr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=o,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ou=zn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){zn.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){zn.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=zn.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",o=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xe("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var o,c,d=this._map,m=this._container,E=d.latLngToContainerPoint(d.getCenter()),D=d.layerPointToContainerPoint(i),F=this.options.direction,z=m.offsetWidth,q=m.offsetHeight,te=J(this.options.offset),ue=this._getAnchor();F==="top"?(o=z/2,c=q):F==="bottom"?(o=z/2,c=0):F==="center"?(o=z/2,c=q/2):F==="right"?(o=0,c=q/2):F==="left"?(o=z,c=q/2):D.x<E.x?(F="right",o=0,c=q/2):(F="left",o=z+(te.x+ue.x)*2,c=q/2),i=i.subtract(J(o,c,!0)).add(te).add(ue),We(m,"leaflet-tooltip-right"),We(m,"leaflet-tooltip-left"),We(m,"leaflet-tooltip-top"),We(m,"leaflet-tooltip-bottom"),ge(m,"leaflet-tooltip-"+F),de(m,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&et(this._container,i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(o)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Zw=function(i,o){return new ou(i,o)};we.include({openTooltip:function(i,o,c){return this._initOverlay(ou,i,o,c).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Ue.include({bindTooltip:function(i,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ou,this._tooltip,i,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var o=i?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof nt||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&(le(o,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),le(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var o=i.latlng,c,d;this._tooltip.options.sticky&&i.originalEvent&&(c=this._map.mouseEventToContainerPoint(i.originalEvent),d=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(o)}});var Xp=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var o=i&&i.tagName==="DIV"?i:document.createElement("div"),c=this.options;if(c.html instanceof Element?(wi(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var d=J(c.bgPos);o.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Kw(i){return new Xp(i)}jn.Default=Jo;var Xo=Ue.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){U(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Be(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Cr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof W?i:new W(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var o=this.getPane().children,c=-i(-1/0,1/0),d=0,m=o.length,E;d<m;d++)E=o[d].style.zIndex,o[d]!==this._container&&E&&(c=i(c,+E));isFinite(c)&&(this.options.zIndex=c+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){et(this._container,this.options.opacity);var i=+new Date,o=!1,c=!1;for(var d in this._tiles){var m=this._tiles[d];if(!(!m.current||!m.loaded)){var E=Math.min(1,(i-m.loaded)/200);et(m.el,E),E<1?o=!0:(m.active?c=!0:this._onOpaqueTile(m),m.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(M(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,o=this.options.maxZoom;if(i!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===i?(this._levels[c].el.style.zIndex=o-Math.abs(i-c),this._onUpdateLevel(c)):(Be(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var d=this._levels[i],m=this._map;return d||(d=this._levels[i]={},d.el=xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=o,d.origin=m.project(m.unproject(m.getPixelOrigin()),i).round(),d.zoom=i,this._setZoomTransform(d,m.getCenter(),m.getZoom()),w(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var i,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)o=this._tiles[i],o.retain=o.current;for(i in this._tiles)if(o=this._tiles[i],o.current&&!o.active){var d=o.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var o in this._tiles)this._tiles[o].coords.z===i&&this._removeTile(o)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Be(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,o,c,d){var m=Math.floor(i/2),E=Math.floor(o/2),D=c-1,F=new W(+m,+E);F.z=+D;var z=this._tileCoordsToKey(F),q=this._tiles[z];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),D>d?this._retainParent(m,E,D,d):!1)},_retainChildren:function(i,o,c,d){for(var m=2*i;m<2*i+2;m++)for(var E=2*o;E<2*o+2;E++){var D=new W(m,E);D.z=c+1;var F=this._tileCoordsToKey(D),z=this._tiles[F];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);c+1<d&&this._retainChildren(m,E,c+1,d)}},_resetView:function(i){var o=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var o=this.options;return o.minNativeZoom!==void 0&&i<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<i?o.maxNativeZoom:i},_setView:function(i,o,c,d){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var E=this.options.updateWhenZooming&&m!==this._tileZoom;(!d||E)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(i),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(i,o)},_setZoomTransforms:function(i,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],i,o)},_setZoomTransform:function(i,o,c){var d=this._map.getZoomScale(c,i.zoom),m=i.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(o,c)).round();se.any3d?Bn(i.el,m,d):de(i.el,m)},_resetGrid:function(){var i=this._map,o=i.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,o.wrapLng[0]],d).x/c.x),Math.ceil(i.project([0,o.wrapLng[1]],d).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([o.wrapLat[0],0],d).y/c.x),Math.ceil(i.project([o.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),d=o.getZoomScale(c,this._tileZoom),m=o.project(i,this._tileZoom).floor(),E=o.getSize().divideBy(d*2);return new he(m.subtract(E),m.add(E))},_update:function(i){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(i===void 0&&(i=o.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(i),m=this._pxBoundsToTileRange(d),E=m.getCenter(),D=[],F=this.options.keepBuffer,z=new he(m.getBottomLeft().subtract([F,-F]),m.getTopRight().add([F,-F]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var te=this._tiles[q].coords;(te.z!==this._tileZoom||!z.contains(new W(te.x,te.y)))&&(this._tiles[q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(i,c);return}for(var ue=m.min.y;ue<=m.max.y;ue++)for(var Ee=m.min.x;Ee<=m.max.x;Ee++){var Vt=new W(Ee,ue);if(Vt.z=this._tileZoom,!!this._isValidTile(Vt)){var vt=this._tiles[this._tileCoordsToKey(Vt)];vt?vt.current=!0:D.push(Vt)}}if(D.sort(function(Ht,Is){return Ht.distanceTo(E)-Is.distanceTo(E)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _n=document.createDocumentFragment();for(Ee=0;Ee<D.length;Ee++)this._addTile(D[Ee],_n);this._level.el.appendChild(_n)}}}},_isValidTile:function(i){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(i.x<c.min.x||i.x>c.max.x)||!o.wrapLat&&(i.y<c.min.y||i.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(i);return ke(this.options.bounds).overlaps(d)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var o=this._map,c=this.getTileSize(),d=i.scaleBy(c),m=d.add(c),E=o.unproject(d,i.z),D=o.unproject(m,i.z);return[E,D]},_tileCoordsToBounds:function(i){var o=this._tileCoordsToNwSe(i),c=new Ie(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var o=i.split(":"),c=new W(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(i){var o=this._tiles[i];o&&(Be(o.el),delete this._tiles[i],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){ge(i,"leaflet-tile");var o=this.getTileSize();i.style.width=o.x+"px",i.style.height=o.y+"px",i.onselectstart=w,i.onmousemove=w,se.ielt9&&this.options.opacity<1&&et(i,this.options.opacity)},_addTile:function(i,o){var c=this._getTilePos(i),d=this._tileCoordsToKey(i),m=this.createTile(this._wrapCoords(i),u(this._tileReady,this,i));this._initTile(m),this.createTile.length<2&&b(u(this._tileReady,this,i,null,m)),de(m,c),this._tiles[d]={el:m,coords:i,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:i})},_tileReady:function(i,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:i});var d=this._tileCoordsToKey(i);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(et(c.el,0),M(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(ge(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?b(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var o=new W(this._wrapX?y(i.x,this._wrapX):i.x,this._wrapY?y(i.y,this._wrapY):i.y);return o.z=i.z,o},_pxBoundsToTileRange:function(i){var o=this.getTileSize();return new he(i.min.unscaleBy(o).floor(),i.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function qw(i){return new Xo(i)}var Ts=Xo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,o){this._url=i,o=U(this,o),o.detectRetina&&se.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,o){return this._url===i&&o===void 0&&(o=!0),this._url=i,o||this.redraw(),this},createTile:function(i,o){var c=document.createElement("img");return le(c,"load",u(this._tileOnLoad,this,o,c)),le(c,"error",u(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(i),c},getTileUrl:function(i){var o={r:se.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-i.y;this.options.tms&&(o.y=c),o["-y"]=c}return A(this._url,s(o,this.options))},_tileOnLoad:function(i,o){se.ielt9?setTimeout(u(i,this,null,o),0):i(null,o)},_tileOnError:function(i,o,c){var d=this.options.errorTileUrl;d&&o.getAttribute("src")!==d&&(o.src=d),i(c,o)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset;return c&&(i=o-i),i+d},_getSubdomain:function(i){var o=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var i,o;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(o=this._tiles[i].el,o.onload=w,o.onerror=w,!o.complete)){o.src=Z;var c=this._tiles[i].coords;Be(o),delete this._tiles[i],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(i){var o=this._tiles[i];if(o)return o.el.setAttribute("src",Z),Xo.prototype._removeTile.call(this,i)},_tileReady:function(i,o,c){if(!(!this._map||c&&c.getAttribute("src")===Z))return Xo.prototype._tileReady.call(this,i,o,c)}});function em(i,o){return new Ts(i,o)}var tm=Ts.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,o){this._url=i;var c=s({},this.defaultWmsParams);for(var d in o)d in this.options||(c[d]=o[d]);o=U(this,o);var m=o.detectRetina&&se.retina?2:1,E=this.getTileSize();c.width=E.x*m,c.height=E.y*m,this.wmsParams=c},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Ts.prototype.onAdd.call(this,i)},getTileUrl:function(i){var o=this._tileCoordsToNwSe(i),c=this._crs,d=ve(c.project(o[0]),c.project(o[1])),m=d.min,E=d.max,D=(this._wmsVersion>=1.3&&this._crs===ot?[m.y,m.x,E.y,E.x]:[m.x,m.y,E.x,E.y]).join(","),F=Ts.prototype.getTileUrl.call(this,i);return F+G(this.wmsParams,F,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(i,o){return s(this.wmsParams,i),o||this.redraw(),this}});function $w(i,o){return new tm(i,o)}Ts.WMS=tm,em.wms=$w;var cr=Ue.extend({options:{padding:.1},initialize:function(i){U(this,i),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,o){var c=this._map.getZoomScale(o,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),E=d.multiplyBy(-c).add(m).subtract(this._map._getNewPixelOrigin(i,o));se.any3d?Bn(this._container,E,c):de(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-i)).round();this._bounds=new he(c,c.add(o.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),nm=cr.extend({options:{tolerance:0},getEvents:function(){var i=cr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");le(i,"mousemove",this._onMouseMove,this),le(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,Be(this._container),Ve(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var o in this._layers)i=this._layers[o],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cr.prototype._update.call(this);var i=this._bounds,o=this._container,c=i.getSize(),d=se.retina?2:1;de(o,i.min),o.width=d*c.x,o.height=d*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){cr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[f(i)]=i;var o=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var o=i._order,c=o.next,d=o.prev;c?c.prev=d:this._drawLast=d,d?d.next=c:this._drawFirst=c,delete i._order,delete this._layers[f(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var o=i.options.dashArray.split(/[, ]+/),c=[],d,m;for(m=0;m<o.length;m++){if(d=Number(o[m]),isNaN(d))return;c.push(d)}i.options._dashArray=c}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||b(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var o=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(i._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(i._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var o=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)i=d.layer,(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,o){if(this._drawing){var c,d,m,E,D=i._parts,F=D.length,z=this._ctx;if(F){for(z.beginPath(),c=0;c<F;c++){for(d=0,m=D[c].length;d<m;d++)E=D[c][d],z[d?"lineTo":"moveTo"](E.x,E.y);o&&z.closePath()}this._fillStroke(z,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var o=i._point,c=this._ctx,d=Math.max(Math.round(i._radius),1),m=(Math.max(Math.round(i._radiusY),1)||d)/d;m!==1&&(c.save(),c.scale(1,m)),c.beginPath(),c.arc(o.x,o.y/m,d,0,Math.PI*2,!1),m!==1&&c.restore(),this._fillStroke(c,i)}},_fillStroke:function(i,o){var c=o.options;c.fill&&(i.globalAlpha=c.fillOpacity,i.fillStyle=c.fillColor||c.color,i.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=c.opacity,i.lineWidth=c.weight,i.strokeStyle=c.color,i.lineCap=c.lineCap,i.lineJoin=c.lineJoin,i.stroke())},_onClick:function(i){for(var o=this._map.mouseEventToLayerPoint(i),c,d,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(o)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(c))&&(d=c);this._fireEvent(d?[d]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,o)}},_handleMouseOut:function(i){var o=this._hoveredLayer;o&&(We(this._container,"leaflet-interactive"),this._fireEvent([o],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,o){if(!this._mouseHoverThrottled){for(var c,d,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(o)&&(d=c);d!==this._hoveredLayer&&(this._handleMouseOut(i),d&&(ge(this._container,"leaflet-interactive"),this._fireEvent([d],i,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,o,c){this._map._fireDOMEvent(o,c||o.type,i)},_bringToFront:function(i){var o=i._order;if(o){var c=o.next,d=o.prev;if(c)c.prev=d;else return;d?d.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(i)}},_bringToBack:function(i){var o=i._order;if(o){var c=o.next,d=o.prev;if(d)d.next=c;else return;c?c.prev=d:d&&(this._drawLast=d),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(i)}}});function rm(i){return se.canvas?new nm(i):null}var ea=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Yw={_initContainer:function(){this._container=xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var o=i._container=ea("shape");ge(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",i._path=ea("path"),o.appendChild(i._path),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){var o=i._container;this._container.appendChild(o),i.options.interactive&&i.addInteractiveTarget(o)},_removePath:function(i){var o=i._container;Be(o),i.removeInteractiveTarget(o),delete this._layers[f(i)]},_updateStyle:function(i){var o=i._stroke,c=i._fill,d=i.options,m=i._container;m.stroked=!!d.stroke,m.filled=!!d.fill,d.stroke?(o||(o=i._stroke=ea("stroke")),m.appendChild(o),o.weight=d.weight+"px",o.color=d.color,o.opacity=d.opacity,d.dashArray?o.dashStyle=k(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=d.lineCap.replace("butt","flat"),o.joinstyle=d.lineJoin):o&&(m.removeChild(o),i._stroke=null),d.fill?(c||(c=i._fill=ea("fill")),m.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(m.removeChild(c),i._fill=null)},_updateCircle:function(i){var o=i._point.round(),c=Math.round(i._radius),d=Math.round(i._radiusY||c);this._setPath(i,i._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+d+" 0,"+65535*360)},_setPath:function(i,o){i._path.v=o},_bringToFront:function(i){rr(i._container)},_bringToBack:function(i){Cr(i._container)}},au=se.vml?ea:Ki,ta=cr.extend({_initContainer:function(){this._container=au("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=au("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Be(this._container),Ve(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cr.prototype._update.call(this);var i=this._bounds,o=i.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),de(c,i.min),c.setAttribute("viewBox",[i.min.x,i.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(i){var o=i._path=au("path");i.options.className&&ge(o,i.options.className),i.options.interactive&&ge(o,"leaflet-interactive"),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Be(i._path),i.removeInteractiveTarget(i._path),delete this._layers[f(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var o=i._path,c=i.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(i,o){this._setPath(i,wo(i._parts,o))},_updateCircle:function(i){var o=i._point,c=Math.max(Math.round(i._radius),1),d=Math.max(Math.round(i._radiusY),1)||c,m="a"+c+","+d+" 0 1,0 ",E=i._empty()?"M0 0":"M"+(o.x-c)+","+o.y+m+c*2+",0 "+m+-c*2+",0 ";this._setPath(i,E)},_setPath:function(i,o){i._path.setAttribute("d",o)},_bringToFront:function(i){rr(i._path)},_bringToBack:function(i){Cr(i._path)}});se.vml&&ta.include(Yw);function im(i){return se.svg||se.vml?new ta(i):null}we.include({getRenderer:function(i){var o=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var o=this._paneRenderers[i];return o===void 0&&(o=this._createRenderer({pane:i}),this._paneRenderers[i]=o),o},_createRenderer:function(i){return this.options.preferCanvas&&rm(i)||im(i)}});var sm=Es.extend({initialize:function(i,o){Es.prototype.initialize.call(this,this._boundsToLatLngs(i),o)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ke(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Qw(i,o){return new sm(i,o)}ta.create=au,ta.pointsToPath=wo,ur.geometryToLayer=eu,ur.coordsToLatLng=ch,ur.coordsToLatLngs=tu,ur.latLngToCoords=hh,ur.latLngsToCoords=nu,ur.getFeature=ws,ur.asFeature=ru,we.mergeOptions({boxZoom:!0});var om=en.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ve(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Be(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),An(),Uo(),this._startPoint=this._map.mouseEventToContainerPoint(i),le(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=xe("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var o=new he(this._point,this._startPoint),c=o.getSize();de(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Be(this._box),We(this._container,"leaflet-crosshair")),Pn(),Bo(),Ve(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var o=new Ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});we.addInitHook("addHandler","boxZoom",om),we.mergeOptions({doubleClickZoom:!0});var am=en.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var o=this._map,c=o.getZoom(),d=o.options.zoomDelta,m=i.originalEvent.shiftKey?c-d:c+d;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(i.containerPoint,m)}});we.addInitHook("addHandler","doubleClickZoom",am),we.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var lm=en.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Cn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ke(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,o){return i-(i-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;i.x<o.min.x&&(i.x=this._viscousLimit(i.x,o.min.x)),i.y<o.min.y&&(i.y=this._viscousLimit(i.y,o.min.y)),i.x>o.max.x&&(i.x=this._viscousLimit(i.x,o.max.x)),i.y>o.max.y&&(i.y=this._viscousLimit(i.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,o=Math.round(i/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,m=(d-o+c)%i+o-c,E=(d+o+c)%i-o-c,D=Math.abs(m+c)<Math.abs(E+c)?m:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(i){var o=this._map,c=o.options,d=!c.inertia||i.noInertia||this._times.length<2;if(o.fire("dragend",i),d)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,D=c.easeLinearity,F=m.multiplyBy(D/E),z=F.distanceTo([0,0]),q=Math.min(c.inertiaMaxSpeed,z),te=F.multiplyBy(q/z),ue=q/(c.inertiaDeceleration*D),Ee=te.multiplyBy(-ue/2).round();!Ee.x&&!Ee.y?o.fire("moveend"):(Ee=o._limitOffset(Ee,o.options.maxBounds),b(function(){o.panBy(Ee,{duration:ue,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});we.addInitHook("addHandler","dragging",lm),we.mergeOptions({keyboard:!0,keyboardPanDelta:80});var um=en.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),le(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ve(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,o=document.documentElement,c=i.scrollTop||o.scrollTop,d=i.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(d,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var o=this._panKeys={},c=this.keyCodes,d,m;for(d=0,m=c.left.length;d<m;d++)o[c.left[d]]=[-1*i,0];for(d=0,m=c.right.length;d<m;d++)o[c.right[d]]=[i,0];for(d=0,m=c.down.length;d<m;d++)o[c.down[d]]=[0,i];for(d=0,m=c.up.length;d<m;d++)o[c.up[d]]=[0,-1*i]},_setZoomDelta:function(i){var o=this._zoomKeys={},c=this.keyCodes,d,m;for(d=0,m=c.zoomIn.length;d<m;d++)o[c.zoomIn[d]]=i;for(d=0,m=c.zoomOut.length;d<m;d++)o[c.zoomOut[d]]=-i},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ve(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=i.keyCode,c=this._map,d;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(d=this._panKeys[o],i.shiftKey&&(d=J(d).multiplyBy(3)),c.options.maxBounds&&(d=c._limitOffset(J(d),c.options.maxBounds)),c.options.worldCopyJump){var m=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(d)));c.panTo(m)}else c.panBy(d)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Xt(i)}}});we.addInitHook("addHandler","keyboard",um),we.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var cm=en.extend({addHooks:function(){le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ve(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var o=Wl(i),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),d),Xt(i)},_performZoom:function(){var i=this._map,o=i.getZoom(),c=this._map.options.zoomSnap||0;i._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,E=c?Math.ceil(m/c)*c:m,D=i._limitZoom(o+(this._delta>0?E:-E))-o;this._delta=0,this._startTime=null,D&&(i.options.scrollWheelZoom==="center"?i.setZoom(o+D):i.setZoomAround(this._lastMousePos,o+D))}});we.addInitHook("addHandler","scrollWheelZoom",cm);var Jw=600;we.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var hm=en.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ve(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var o=i.touches[0];this._startPos=this._newPos=new W(o.clientX,o.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(le(document,"touchend",qe),le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Jw),le(document,"touchend touchcancel contextmenu",this._cancel,this),le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Ve(document,"touchend",qe),Ve(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Ve(document,"touchend touchcancel contextmenu",this._cancel,this),Ve(document,"touchmove",this._onMove,this)},_onMove:function(i){var o=i.touches[0];this._newPos=new W(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,o){var c=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});we.addInitHook("addHandler","tapHold",hm),we.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var dm=en.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),Ve(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var o=this._map;if(!(!i.touches||i.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(i.touches[0]),d=o.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(d)._divideBy(2))),this._startDist=c.distanceTo(d),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend touchcancel",this._onTouchEnd,this),qe(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(i.touches[0]),d=o.mouseEventToContainerPoint(i.touches[1]),m=c.distanceTo(d)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var E=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(m===1&&E.x===0&&E.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var D=u(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=b(D,this,!0),qe(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Ve(document,"touchmove",this._onTouchMove,this),Ve(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});we.addInitHook("addHandler","touchZoom",dm),we.BoxZoom=om,we.DoubleClickZoom=am,we.Drag=lm,we.Keyboard=um,we.ScrollWheelZoom=cm,we.TapHold=hm,we.TouchZoom=dm,n.Bounds=he,n.Browser=se,n.CRS=dt,n.Canvas=nm,n.Circle=uh,n.CircleMarker=Xl,n.Class=oe,n.Control=zt,n.DivIcon=Xp,n.DivOverlay=zn,n.DomEvent=Zl,n.DomUtil=Hl,n.Draggable=Cn,n.Evented=Fe,n.FeatureGroup=nt,n.GeoJSON=ur,n.GridLayer=Xo,n.Handler=en,n.Icon=jn,n.ImageOverlay=iu,n.LatLng=ye,n.LatLngBounds=Ie,n.Layer=Ue,n.LayerGroup=$e,n.LineUtil=T,n.Map=we,n.Marker=Jl,n.Mixin=Ti,n.Path=Dr,n.Point=W,n.PolyUtil=gs,n.Polygon=Es,n.Polyline=lr,n.Popup=su,n.PosAnimation=Zo,n.Projection=X,n.Rectangle=sm,n.Renderer=cr,n.SVG=ta,n.SVGOverlay=Jp,n.TileLayer=Ts,n.Tooltip=ou,n.Transformation=Sr,n.Util=S,n.VideoOverlay=Qp,n.bind=u,n.bounds=ve,n.canvas=rm,n.circle=Uw,n.circleMarker=Vw,n.control=bt,n.divIcon=Kw,n.extend=s,n.featureGroup=ys,n.geoJSON=Yp,n.geoJson=jw,n.gridLayer=qw,n.icon=Mw,n.imageOverlay=zw,n.latLng=pe,n.latLngBounds=ke,n.layerGroup=Or,n.map=hs,n.marker=bw,n.point=J,n.polygon=Fw,n.polyline=Bw,n.popup=Ww,n.rectangle=Qw,n.setOptions=U,n.stamp=f,n.svg=im,n.svgOverlay=Gw,n.tileLayer=em,n.tooltip=Zw,n.transformation=Xn,n.version=r,n.videoOverlay=Hw;var Xw=window.L;n.noConflict=function(){return window.L=Xw,this},window.L=n})})(lf,lf.exports);var Zi=lf.exports;const hl=Nv(Zi);function Al(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function sh(t,e){return e==null?function(r,s){const a=ee.useRef();return a.current||(a.current=t(r,s)),a}:function(r,s){const a=ee.useRef();a.current||(a.current=t(r,s));const u=ee.useRef(r),{instance:h}=a.current;return ee.useEffect(function(){u.current!==r&&(e(h,r,u.current),u.current=r)},[h,r,s]),a}}function Lw(t,e){ee.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function kw(t){return function(n){const r=rh(),s=t(ih(n,r),r);return Pw(r.map,n.attribution),Kp(s.current,n.eventHandlers),Lw(s.current,r),s}}function eN(t,e){const n=ee.useRef();ee.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function tN(t){return function(n){const r=rh(),s=t(ih(n,r),r);return Kp(s.current,n.eventHandlers),Lw(s.current,r),eN(s.current,n),s}}function nN(t,e){const n=sh(t,e),r=kw(n);return Rw(r)}function rN(t,e){const n=sh(t),r=XC(n,e);return QC(r)}function Ow(t,e){const n=sh(t,e),r=tN(n);return Rw(r)}function iN(t,e){const n=sh(t,e),r=kw(n);return JC(r)}function sN(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function oN(){return rh().map}const aN=Ow(function({center:e,children:n,...r},s){const a=new Zi.Circle(e,r);return Al(a,Zp(s,{overlayContainer:a}))},qC);function uf(){return uf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uf.apply(this,arguments)}function lN({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:u,style:h,whenReady:f,zoom:_,...y},w){const[x]=ee.useState({className:s,id:a,style:h}),[C,V]=ee.useState(null);ee.useImperativeHandle(w,()=>(C==null?void 0:C.map)??null,[C]);const U=ee.useCallback(P=>{if(P!==null&&C===null){const A=new Zi.Map(P,y);n!=null&&_!=null?A.setView(n,_):t!=null&&A.fitBounds(t,e),f!=null&&A.whenReady(f),V(YC(A))}},[]);ee.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const G=C?$s.createElement(Nw,{value:C},r):u??null;return $s.createElement("div",uf({},x,{ref:U}),G)}const uN=ee.forwardRef(lN),$h=nN(function({position:e,...n},r){const s=new Zi.Marker(e,n);return Al(s,Zp(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Ru=Ow(function({positions:e,...n},r){const s=new Zi.Polyline(e,n);return Al(s,Zp(r,{overlayContainer:s}))},function(e,n,r){n.positions!==r.positions&&e.setLatLngs(n.positions)}),da=rN(function(e,n){const r=new Zi.Popup(e,n.overlayContainer);return Al(r,n)},function(e,n,{position:r},s){ee.useEffect(function(){const{instance:u}=e;function h(_){_.popup===u&&(u.update(),s(!0))}function f(_){_.popup===u&&s(!1)}return n.map.on({popupopen:h,popupclose:f}),n.overlayContainer==null?(r!=null&&u.setLatLng(r),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){var y;n.map.off({popupopen:h,popupclose:f}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(u)}},[e,n,s,r])}),cN=iN(function({url:e,...n},r){const s=new Zi.TileLayer(e,ih(n,r));return Al(s,r)},function(e,n,r){sN(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});try{delete hl.Icon.Default.prototype._getIconUrl,hl.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})}catch(t){console.warn("Leaflet icon fix warning:",t)}const hN=(t,e)=>hl.divIcon({className:"custom-div-icon",html:`<div style="background-color: ${e?"#22d3ee":"#374151"}; color: ${e?"#000":"#fff"}; width: 24px; height: 24px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);">${t}</div>`,iconSize:[24,24],iconAnchor:[12,12]}),dN=hl.divIcon({className:"pulsing-user-marker",html:`
      <div class="relative w-8 h-8 flex items-center justify-center">
        <div class="absolute w-full h-full bg-blue-500 rounded-full opacity-30 animate-ping"></div>
        <div class="relative w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-lg"></div>
      </div>
    `,iconSize:[32,32],iconAnchor:[16,16]}),fN=hl.divIcon({className:"bg-transparent",html:'<div style="color: #facc15; filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));"><svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg></div>',iconSize:[28,28],iconAnchor:[14,28]}),gn=(t,e)=>{const n=Number(t),r=Number(e);return!isNaN(n)&&!isNaN(r)&&n!==0&&r!==0},pN=({userLocation:t,firstLoad:e})=>{const n=oN();return ee.useEffect(()=>{e&&gn(t[0],t[1])&&n.flyTo(t,16,{animate:!0,duration:2})},[e,t,n]),null},mN=({onClick:t})=>v.jsx("button",{onClick:t,className:"absolute bottom-6 right-6 z-[1000] bg-white p-3 rounded-full shadow-lg text-slate-700 hover:text-blue-600 hover:bg-slate-50 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500",title:"My Location","aria-label":"Center map on my location",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),_N=({userLocation:t,userLocationAccuracy:e,steps:n=[],landmarks:r=[],traffic:s=[],currentStepIndex:a=0,itineraryLocations:u=[],itineraryLines:h=[],highlightedItineraryIndex:f=null})=>{var U,G;const[_,y]=$s.useState(null),[w,x]=$s.useState(!0);ee.useEffect(()=>{if(w&&gn(t[0],t[1])){const P=setTimeout(()=>x(!1),3e3);return()=>clearTimeout(P)}},[t,w]);const C=((G=(U=n[a])==null?void 0:U.path)==null?void 0:G.filter(P=>gn(P.lat,P.lng)).map(P=>[P.lat,P.lng]))||[],V=()=>{_&&gn(t[0],t[1])&&_.flyTo(t,18,{animate:!0})};return v.jsxs("div",{className:"h-[400px] w-full rounded-lg overflow-hidden border border-gray-700 shadow-lg relative z-0",children:[v.jsxs(uN,{center:gn(t[0],t[1])?t:[20.4795,85.8778],zoom:16,style:{height:"100%",width:"100%"},className:"z-0",ref:y,children:[v.jsx(cN,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),v.jsx(pN,{userLocation:t,firstLoad:w}),gn(t[0],t[1])&&v.jsxs(v.Fragment,{children:[v.jsx($h,{position:t,icon:dN,children:v.jsx(da,{children:"You are here"})}),e&&v.jsx(aN,{center:t,radius:e,pathOptions:{color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.1,weight:1,opacity:.3}})]}),n.map((P,A)=>{var j;const k=((j=P.path)==null?void 0:j.filter(Z=>gn(Z.lat,Z.lng)).map(Z=>[Z.lat,Z.lng]))||[];return k.length<2?null:v.jsx(Ru,{positions:k,pathOptions:{color:"#6b7280",weight:4,opacity:.5}},`bg-${A}`)}),s.map((P,A)=>{var Z;const k=((Z=P.path)==null?void 0:Z.filter($=>gn($.lat,$.lng)).map($=>[$.lat,$.lng]))||[];if(k.length<2)return null;const j=P.level==="heavy"?"#ef4444":P.level==="moderate"?"#eab308":"#22c55e";return v.jsx(Ru,{positions:k,pathOptions:{color:j,weight:6,opacity:.7},children:v.jsxs(da,{children:[P.description," (",P.level," traffic)"]})},`traffic-${A}`)}),C.length>1&&v.jsx(Ru,{positions:C,pathOptions:{color:"#06b6d4",weight:6,opacity:.9}}),r.map((P,A)=>{var k,j;return gn((k=P.position)==null?void 0:k.lat,(j=P.position)==null?void 0:j.lng)?v.jsx($h,{position:[P.position.lat,P.position.lng],icon:fN,children:v.jsx(da,{children:P.name})},`lm-${A}`):null}),h.map((P,A)=>{var k,j,Z,$;return!gn((k=P.start)==null?void 0:k.lat,(j=P.start)==null?void 0:j.lng)||!gn((Z=P.end)==null?void 0:Z.lat,($=P.end)==null?void 0:$.lng)?null:v.jsx(Ru,{positions:[[P.start.lat,P.start.lng],[P.end.lat,P.end.lng]],pathOptions:{color:"#3b82f6",weight:3,dashArray:"10, 10",opacity:.8},children:v.jsxs(da,{children:[v.jsx("strong",{children:P.name}),v.jsx("br",{}),P.transport," (",P.travelTime,")"]})},`line-${A}`)}),u.map((P,A)=>{if(!gn(P.lat,P.lng))return null;const k=f===A;return v.jsx($h,{position:[P.lat,P.lng],icon:hN(P.sequence||A+1,k),zIndexOffset:k?1e3:0,children:v.jsxs(da,{children:[v.jsxs("strong",{children:[P.sequence,". ",P.name]}),v.jsx("br",{}),P.time," - ",P.description]})},`loc-${A}`)})]}),v.jsx(mN,{onClick:V})]})},Pv=({chunks:t})=>{if(!t||t.length===0)return null;const e=t.filter(n=>{var r,s;return((r=n.web)==null?void 0:r.uri)||((s=n.maps)==null?void 0:s.uri)});return v.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[v.jsxs("h4",{className:"font-semibold text-slate-700 flex items-center gap-2 text-sm uppercase tracking-wide",children:[v.jsx(Fx,{})," Sources:"]}),v.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm text-slate-600",children:e.map((n,r)=>{const s=n.web||n.maps;return s?v.jsx("li",{children:v.jsx("a",{href:s.uri,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline hover:text-blue-800",children:s.title||"Source link"})},r):null})})]})},Cv=({onClick:t,disabled:e,children:n})=>v.jsx("button",{onClick:t,disabled:e,className:"bg-white border border-slate-300 hover:bg-slate-50 disabled:bg-slate-100 disabled:text-slate-400 disabled:cursor-not-allowed text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center justify-center transition-colors shadow-sm",children:n}),gN=({location:t,manualLocation:e,language:n})=>{const[r,s]=ee.useState("route"),[a,u]=ee.useState(""),[h,f]=ee.useState(""),[_,y]=ee.useState(""),[w,x]=ee.useState(!1),[C,V]=ee.useState(null),[U,G]=ee.useState(null),[P,A]=ee.useState(0),[k,j]=ee.useState(null),[Z,$]=ee.useState([]),N=fo[n];ee.useEffect(()=>{try{const S=localStorage.getItem("scb_navi_saved_routes");S&&$(JSON.parse(S))}catch(S){console.error("Failed to load saved routes:",S)}},[]);const I=()=>{if(!C)return;const S=r==="route"?`Route to ${a}`:`Day Plan - ${new Date().toLocaleDateString()}`,oe=window.prompt("Enter a name for this plan:",S);if(oe){const Le=[{id:Date.now().toString(),name:oe,timestamp:Date.now(),mode:r,result:C,destination:r==="route"?a:void 0,notes:r==="route"?h:void 0,dayPlanPrompt:r==="dayPlan"?_:void 0},...Z];$(Le),localStorage.setItem("scb_navi_saved_routes",JSON.stringify(Le)),alert("Plan saved successfully!")}},R=(S,oe)=>{if(oe.stopPropagation(),window.confirm("Are you sure you want to delete this saved plan?")){const Oe=Z.filter(Le=>Le.id!==S);$(Oe),localStorage.setItem("scb_navi_saved_routes",JSON.stringify(Oe))}},O=S=>{s(S.mode),V(S.result),S.mode==="route"?(u(S.destination||""),f(S.notes||"")):y(S.dayPlanPrompt||""),A(0),j(null),window.scrollTo({top:0,behavior:"smooth"})},b=async S=>{S.preventDefault(),G(null),V(null),x(!0),A(0),j(null);const oe=e||(t.latitude&&t.longitude?"My Current Location":"SCB Medical College Main Gate");try{if(r==="route"){if(!a.trim()){G("Please enter a destination."),x(!1);return}const Oe=await cS(oe,a,h,t.latitude&&t.longitude?{latitude:t.latitude,longitude:t.longitude}:null,n);V({...Oe,locations:[],lines:[],summaryText:""})}else{if(!_.trim()){G("Please describe your day."),x(!1);return}const Oe=await uS(_,n);V({text:"",groundingChunks:[],steps:[],landmarks:[],trafficSegments:[],...Oe})}}catch(Oe){G("Failed to generate plan. Please try again."),console.error(Oe)}finally{x(!1)}},M=t.latitude&&t.longitude?[t.latitude,t.longitude]:[20.4795,85.8778];return v.jsxs("div",{className:"animate-fadeIn max-w-2xl mx-auto",children:[v.jsxs("div",{className:"flex justify-center mb-6 space-x-2 bg-slate-200 p-1 rounded-full w-fit mx-auto",children:[v.jsx("button",{onClick:()=>{s("route"),V(null)},className:`px-5 py-2 rounded-full font-bold text-sm transition-all ${r==="route"?"bg-white text-blue-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:N.navMode}),v.jsx("button",{onClick:()=>{s("dayPlan"),V(null)},className:`px-5 py-2 rounded-full font-bold text-sm transition-all ${r==="dayPlan"?"bg-white text-blue-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:N.dayMode})]}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:r==="route"?N.campusNavTitle:N.itineraryTitle}),v.jsx("p",{className:"text-slate-500 mt-1",children:r==="route"?N.navSub:N.daySub})]}),!C&&v.jsxs(v.Fragment,{children:[v.jsxs("form",{onSubmit:b,className:"space-y-4 transition-all duration-500 bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[r==="route"?v.jsxs(v.Fragment,{children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"destination",className:"block text-sm font-semibold text-slate-700 mb-1",children:N.destLabel}),v.jsx("input",{type:"text",id:"destination",value:a,onChange:S=>u(S.target.value),placeholder:N.destPlace,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-slate-400"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"notes",className:"block text-sm font-semibold text-slate-700 mb-1",children:N.notesLabel}),v.jsx("textarea",{id:"notes",value:h,onChange:S=>f(S.target.value),placeholder:N.notesPlace,rows:3,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-slate-400"})]})]}):v.jsxs("div",{children:[v.jsx("label",{htmlFor:"dayPlan",className:"block text-sm font-semibold text-slate-700 mb-1",children:N.dayPromptLabel}),v.jsx("textarea",{id:"dayPlan",value:_,onChange:S=>y(S.target.value),placeholder:N.dayPromptPlace,rows:5,className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-slate-400"})]}),U&&v.jsx("p",{className:"text-red-600 bg-red-50 p-3 rounded-lg text-sm border border-red-100",children:U}),v.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-700 hover:bg-blue-800 text-white font-bold py-3.5 px-4 rounded-xl flex items-center justify-center transition-all shadow-md hover:shadow-lg disabled:bg-slate-300 disabled:shadow-none",children:w?v.jsx(Z0,{}):v.jsxs(v.Fragment,{children:[v.jsx(K0,{})," ",v.jsx("span",{className:"ml-2",children:r==="route"?N.findPath:N.genPlan})]})})]}),Z.length>0&&!w&&v.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200",children:[v.jsxs("h3",{className:"text-lg font-bold text-slate-700 mb-4 flex items-center gap-2",children:[v.jsx(Kx,{})," ",N.savedPlans]}),v.jsx("div",{className:"space-y-3",children:Z.map(S=>v.jsxs("div",{onClick:()=>O(S),className:"bg-white border border-slate-200 rounded-xl p-4 flex justify-between items-center cursor-pointer transition-all hover:shadow-md hover:border-blue-300 group",children:[v.jsxs("div",{children:[v.jsx("div",{className:"font-bold text-slate-800",children:S.name}),v.jsxs("div",{className:"text-xs text-slate-500 flex gap-2 mt-1",children:[v.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-slate-600 font-medium capitalize",children:S.mode==="route"?"Navigation":"Itinerary"}),v.jsx("span",{children:new Date(S.timestamp).toLocaleDateString()})]})]}),v.jsx("button",{onClick:oe=>R(S.id,oe),className:"p-2 text-slate-400 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100",title:"Delete",children:v.jsx(Zx,{})})]},S.id))})]})]}),w&&v.jsxs("div",{className:"text-center mt-8 p-6 bg-white border border-slate-200 rounded-xl shadow-sm",children:[v.jsx("p",{className:"font-bold text-slate-800",children:N.analyzing}),v.jsx("p",{className:"text-sm text-slate-500 mt-2",children:N.connecting})]}),C&&v.jsxs("div",{className:"mt-6 animate-fadeIn space-y-4",children:[v.jsx(_N,{userLocation:M,userLocationAccuracy:t.accuracy,steps:C.steps,landmarks:C.landmarks,traffic:C.trafficSegments,currentStepIndex:P,itineraryLocations:C.locations,itineraryLines:C.lines,highlightedItineraryIndex:k}),r==="route"&&C.steps.length>0&&v.jsxs("div",{className:"p-5 bg-white border border-slate-200 shadow-md rounded-xl text-center relative z-10",children:[v.jsxs("p",{className:"font-bold text-sm uppercase tracking-wide text-blue-600 mb-1",children:[N.step," ",P+1," / ",C.steps.length]}),v.jsx("p",{className:"text-slate-800 text-xl font-medium leading-relaxed",children:C.steps[P].description}),v.jsxs("div",{className:"flex justify-between mt-6",children:[v.jsxs(Cv,{onClick:()=>A(S=>Math.max(0,S-1)),disabled:P===0,children:[v.jsx(jx,{}),v.jsx("span",{className:"ml-2",children:N.prev})]}),v.jsxs(Cv,{onClick:()=>A(S=>Math.min(C.steps.length-1,S+1)),disabled:P===C.steps.length-1,children:[v.jsx("span",{className:"mr-2",children:N.next}),v.jsx(zx,{})]})]})]}),r==="dayPlan"&&C.locations.length>0&&v.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm p-6",children:[v.jsx("h3",{className:"text-xl font-bold text-blue-800 border-b border-slate-100 pb-3 mb-4",children:N.yourItinerary}),v.jsxs("div",{className:"space-y-0 relative",children:[v.jsx("div",{className:"absolute left-4 top-4 bottom-4 w-0.5 bg-slate-200"}),C.locations.map((S,oe)=>v.jsxs("div",{onClick:()=>j(oe),className:`relative pl-10 py-3 cursor-pointer transition-all rounded-r-lg ${k===oe?"bg-blue-50 border-l-4 border-blue-500 -ml-[2px]":"hover:bg-slate-50"}`,children:[v.jsx("div",{className:`absolute left-2.5 top-5 w-3 h-3 rounded-full border-2 border-white shadow-sm z-10 ${k===oe?"bg-blue-600 scale-125":"bg-slate-400"}`}),v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:S.name}),v.jsx("p",{className:"text-sm text-slate-500",children:S.description})]}),v.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[v.jsx("span",{className:"block text-blue-600 font-mono font-bold bg-blue-50 px-2 py-0.5 rounded text-sm",children:S.time}),v.jsx("span",{className:"block text-xs text-slate-400 mt-1",children:S.duration})]})]})]},oe))]}),C.summaryText&&v.jsx("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg text-sm text-slate-600 italic border-l-4 border-slate-300",children:C.summaryText})]}),v.jsxs("details",{className:"bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden",children:[v.jsxs("summary",{className:"cursor-pointer p-4 text-slate-700 font-bold bg-slate-50 hover:bg-slate-100 transition-colors flex justify-between items-center",children:[v.jsx("span",{children:r==="route"?N.viewSummary:N.viewPlanText}),v.jsx("span",{className:"text-slate-400 text-xs",children:""})]}),v.jsxs("div",{className:"p-5 border-t border-slate-200",children:[v.jsx("div",{className:"prose prose-slate prose-sm max-w-none",dangerouslySetInnerHTML:{__html:(C.text||C.summaryText).replace(/\n/g,"<br />")}}),v.jsx(Pv,{chunks:C.groundingChunks})]})]}),v.jsxs("div",{className:"flex space-x-3 pt-4",children:[v.jsx("button",{onClick:()=>V(null),className:"flex-1 bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 font-bold py-3 px-4 rounded-xl flex items-center justify-center transition-colors shadow-sm",children:r==="route"?N.planNew:N.createNew}),v.jsxs("button",{onClick:I,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-xl flex items-center justify-center transition-colors shadow-md",children:[v.jsx(Wx,{})," ",v.jsx("span",{className:"ml-2",children:N.savePlan})]})]})]}),C&&r==="route"&&C.steps.length===0&&!w&&v.jsxs("div",{className:"mt-8 text-center",children:[v.jsx("p",{className:"text-orange-600 font-medium bg-orange-50 p-2 rounded-lg inline-block",children:"Could not generate an interactive route. Displaying summary instead."}),v.jsxs("div",{className:"mt-4 p-5 bg-white border border-slate-200 shadow-sm rounded-xl text-left",children:[v.jsx("div",{className:"prose prose-slate prose-sm max-w-none",dangerouslySetInnerHTML:{__html:(C.text||C.summaryText||"").replace(/\n/g,"<br />")}}),v.jsx(Pv,{chunks:C.groundingChunks})]}),v.jsx("button",{onClick:()=>V(null),className:"mt-6 w-full bg-slate-100 hover:bg-slate-200 text-slate-800 font-bold py-3 px-4 rounded-xl transition-colors",children:"Start Over"})]})]})},vN=({language:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState(""),[a,u]=ee.useState(!1),h=ee.useRef(null),f=ee.useRef(null),_=fo[t];ee.useEffect(()=>{h.current=dS(t),n([{sender:"bot",text:_.chatWelcome}])},[t]);const y=()=>{var C;(C=f.current)==null||C.scrollIntoView({behavior:"smooth"})};ee.useEffect(y,[e]);const w=async()=>{if(!r.trim()||a||!h.current)return;const C={sender:"user",text:r};n(V=>[...V,C]),s(""),u(!0);try{const V=await fS(h.current,r);let U="";n(G=>[...G,{sender:"bot",text:""}]);for await(const G of V)U+=G.text,n(P=>{const A=[...P];return A[A.length-1].text=U,A})}catch(V){const U=V instanceof Error?V.message:"An unknown error occurred.";n(G=>[...G,{sender:"bot",text:`Sorry, something went wrong. ${U}`}])}finally{u(!1)}},x=C=>{C.key==="Enter"&&!a&&w()};return v.jsxs("div",{className:"flex flex-col h-[calc(100vh-150px)] max-h-[70vh] bg-white rounded-2xl shadow-lg border border-slate-200 animate-fadeIn overflow-hidden",children:[v.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4 bg-slate-50",children:[e.map((C,V)=>v.jsxs("div",{className:`flex items-end gap-2 ${C.sender==="user"?"justify-end":"justify-start"}`,children:[C.sender==="bot"&&v.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center mb-1 shadow-sm",children:v.jsx(Gx,{})}),v.jsxs("div",{className:`max-w-[80%] md:max-w-md px-5 py-3 rounded-2xl shadow-sm text-sm leading-relaxed ${C.sender==="user"?"bg-blue-600 text-white rounded-br-none":"bg-white text-slate-800 border border-slate-200 rounded-bl-none"}`,children:[v.jsx("p",{className:"break-words",children:C.text}),a&&C.sender==="bot"&&V===e.length-1&&v.jsxs("div",{className:"typing-indicator mt-1 opacity-70",children:[v.jsx("span",{children:"."}),v.jsx("span",{children:"."}),v.jsx("span",{children:"."})]})]}),C.sender==="user"&&v.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mb-1 shadow-sm",children:v.jsx(q0,{})})]},V)),v.jsx("div",{ref:f})]}),v.jsxs("div",{className:"p-4 bg-white border-t border-slate-200 flex items-center gap-3",children:[v.jsx("input",{type:"text",value:r,onChange:C=>s(C.target.value),onKeyPress:x,placeholder:_.chatInput,className:"flex-grow bg-slate-100 border border-slate-200 text-slate-900 rounded-full py-3 px-5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all text-sm shadow-inner",disabled:a}),v.jsx("button",{onClick:w,disabled:a||!r.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 text-white p-3 rounded-full shadow-md transition-all transform hover:scale-105",children:v.jsx(Hx,{})})]}),v.jsx("style",{children:`
        .typing-indicator span {
          display: inline-block;
          animation: bounce 1.2s infinite;
          margin: 0 1px;
        }
        .typing-indicator span:nth-child(2) {
          animation-delay: 0.2s;
        }
        .typing-indicator span:nth-child(3) {
          animation-delay: 0.4s;
        }
        @keyframes bounce {
          0%, 60%, 100% { transform: translateY(0); }
          30% { transform: translateY(-4px); }
        }
      `})]})},yN=({location:t,manualLocation:e,language:n})=>{var b;const[r,s]=ee.useState(!0),[a,u]=ee.useState(null),[h,f]=ee.useState([]),[_,y]=ee.useState(!1),[w,x]=ee.useState(""),[C,V]=ee.useState("All"),[U,G]=ee.useState(!1),[P,A]=ee.useState({temp:32,condition:"Sunny",humidity:65}),[k,j]=ee.useState(!0),Z=fo[n];ee.useEffect(()=>{if(!Ur)return;const M=OC(pw(Ur,"reports"),DC("timestamp","desc"),MC(20)),S=zC(M,oe=>{const Oe=[];oe.forEach(Le=>{var W;const Fe=Le.data();Oe.push({id:Le.id,timestamp:((W=Fe.timestamp)==null?void 0:W.toMillis())||Date.now(),severity:Fe.severity,location:Fe.location,description:Fe.description,originalText:Fe.originalText,reporterName:Fe.reporterName,verificationCount:Fe.verificationCount||0})}),f(Oe)});return()=>S()},[]);const $=async(M,S)=>{if(!Ur)return;const oe=mw(Ur,"reports",M);await FC(oe,{verificationCount:WC(S==="up"?1:-1)})};ee.useEffect(()=>{(async()=>{s(!0);const S=e||(t.latitude&&t.longitude?{latitude:t.latitude,longitude:t.longitude}:null);try{const oe=await hS(S,n);u(oe)}catch(oe){console.error("Failed to fetch updates",oe)}finally{s(!1)}})()},[t.latitude,t.longitude,e,n]);const N=()=>{if(!a||!a.text)return;if(_){window.speechSynthesis.cancel(),y(!1);return}const M=new SpeechSynthesisUtterance(a.text),oe=window.speechSynthesis.getVoices().find(Oe=>Oe.lang.includes("IN")||Oe.lang.includes("hi"));oe&&(M.voice=oe),M.rate=.9,M.onend=()=>y(!1),window.speechSynthesis.speak(M),y(!0)};ee.useEffect(()=>()=>window.speechSynthesis.cancel(),[]);const I=M=>{const S=Math.floor((Date.now()-M)/6e4);return S<1?Z.justNow:S<60?`${S} ${Z.minsAgo}`:`${Math.floor(S/60)} ${Z.hrsAgo}`},R=h.filter(M=>{const S=M.description.toLowerCase().includes(w.toLowerCase())||M.location.toLowerCase().includes(w.toLowerCase()),oe=C==="All"||M.severity===C.toLowerCase();return S&&oe}),O=((b=a==null?void 0:a.groundingChunks)==null?void 0:b.filter(M=>{var S,oe;return((S=M.web)==null?void 0:S.uri)||((oe=M.maps)==null?void 0:oe.uri)}))||[];return v.jsxs("div",{className:"animate-fadeIn pb-24 max-w-3xl mx-auto space-y-8",children:[v.jsxs("div",{className:"sticky top-0 bg-slate-50/95 backdrop-blur z-20 pt-2 pb-4 px-1",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"Campus Pulse"}),v.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-widest",children:new Date().toLocaleDateString("en-US",{weekday:"long",split:" ",month:"short",day:"numeric"})})]}),v.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1.5 rounded-full shadow-sm border border-slate-200",children:[v.jsx("span",{className:"text-yellow-500",children:v.jsx(Xx,{})}),v.jsxs("div",{children:[v.jsxs("p",{className:"text-xs font-bold text-slate-700",children:[P.temp,"C"]}),v.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:P.condition})]})]})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"text",placeholder:"Search updates, places, or reports...",value:w,onChange:M=>x(M.target.value),className:"w-full bg-white border border-slate-300 rounded-xl pl-10 pr-4 py-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),v.jsx("div",{className:"absolute left-3 top-3.5 text-slate-400",children:v.jsx(K0,{})})]})]}),v.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl shadow-lg text-white overflow-hidden relative",children:[v.jsx("div",{className:"absolute top-0 right-0 p-32 bg-white opacity-5 rounded-full blur-3xl transform translate-x-10 -translate-y-10 pointer-events-none"}),v.jsxs("div",{className:"p-6 relative z-10",children:[v.jsxs("div",{className:"flex justify-between items-start mb-4",children:[v.jsxs("div",{children:[v.jsx("span",{className:"bg-blue-500/30 text-blue-100 border border-blue-400/30 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider mb-2 inline-block",children:"AI Generated"}),v.jsx("h2",{className:"text-xl font-bold",children:"Daily Briefing"})]}),v.jsx("button",{onClick:N,className:"bg-white/10 hover:bg-white/20 p-3 rounded-full backdrop-blur-sm transition-all border border-white/10",children:_?v.jsx(Jx,{}):v.jsx(Qx,{})})]}),r?v.jsxs("div",{className:"space-y-3 animate-pulse",children:[v.jsx("div",{className:"h-4 bg-white/20 rounded w-3/4"}),v.jsx("div",{className:"h-4 bg-white/20 rounded w-full"}),v.jsx("div",{className:"h-4 bg-white/20 rounded w-5/6"})]}):a?v.jsxs("div",{className:`prose prose-invert prose-sm max-w-none transition-all duration-500 ${k?"max-h-[500px]":"max-h-24 overflow-hidden relative"}`,children:[v.jsx("div",{className:"whitespace-pre-wrap leading-relaxed opacity-90",children:a.text}),!k&&v.jsx("div",{className:"absolute bottom-0 left-0 w-full h-16 bg-gradient-to-t from-indigo-700 to-transparent"})]}):v.jsx("div",{className:"text-center py-8 opacity-70 italic",children:Z.noUpdates}),a&&v.jsx("button",{onClick:()=>j(!k),className:"mt-4 text-xs font-bold uppercase tracking-widest text-blue-200 hover:text-white transition-colors",children:k?"Show Less":"Read Full Briefing"})]}),O.length>0&&v.jsx("div",{className:"bg-black/20 p-4 backdrop-blur-sm flex gap-3 overflow-x-auto",children:O.map((M,S)=>{var oe,Oe,Le,Fe;return v.jsx("a",{href:((oe=M.web)==null?void 0:oe.uri)||((Oe=M.maps)==null?void 0:Oe.uri),target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 text-xs bg-white/10 hover:bg-white/20 border border-white/10 text-white px-3 py-1.5 rounded-lg transition-all truncate max-w-[120px]",children:((Le=M.web)==null?void 0:Le.title)||((Fe=M.maps)==null?void 0:Fe.title)||"Source"},S)})})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-4 px-1",children:"Campus Status"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow relative group",children:[v.jsx("span",{className:"absolute top-5 right-5 w-3 h-3 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),v.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center mb-3",children:""}),v.jsx("h4",{className:"font-bold text-slate-900",children:"OPD Services"}),v.jsx("p",{className:"text-xs text-slate-500 mt-1 font-medium",children:"Open  Closes in 4h 30m"}),v.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex gap-2 opacity-60 group-hover:opacity-100 transition-opacity",children:[v.jsxs("button",{className:"flex-1 text-xs bg-slate-50 hover:bg-slate-100 py-2 rounded-lg font-bold text-slate-600 flex items-center justify-center gap-1",children:[v.jsx(A_,{})," Call"]}),v.jsxs("button",{className:"flex-1 text-xs bg-slate-50 hover:bg-slate-100 py-2 rounded-lg font-bold text-slate-600 flex items-center justify-center gap-1",children:[v.jsx(S_,{})," Map"]})]})]}),v.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-red-100 shadow-sm hover:shadow-md transition-shadow relative group",children:[v.jsx("span",{className:"absolute top-5 right-5 px-2 py-0.5 bg-red-100 text-red-700 text-[10px] font-bold uppercase rounded-full border border-red-200",children:"Critical"}),v.jsx("div",{className:"w-10 h-10 bg-red-50 text-red-600 rounded-xl flex items-center justify-center mb-3",children:""}),v.jsx("h4",{className:"font-bold text-slate-900",children:"Emergency / Casuality"}),v.jsx("p",{className:"text-xs text-slate-500 mt-1 font-medium",children:"24/7 Operational  High Load"}),v.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex gap-2 opacity-60 group-hover:opacity-100 transition-opacity",children:[v.jsxs("button",{className:"flex-1 text-xs bg-red-50 hover:bg-red-100 py-2 rounded-lg font-bold text-red-600 flex items-center justify-center gap-1",children:[v.jsx(A_,{})," SOS"]}),v.jsxs("button",{className:"flex-1 text-xs bg-slate-50 hover:bg-slate-100 py-2 rounded-lg font-bold text-slate-600 flex items-center justify-center gap-1",children:[v.jsx(S_,{})," Route"]})]})]})]})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between items-end mb-4 px-1",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Community Reports"}),v.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Real-time updates from students & staff"})]}),v.jsx("div",{className:"flex bg-white p-1 rounded-lg border border-slate-200 shadow-sm",children:["All","Heavy","Closure"].map(M=>v.jsx("button",{onClick:()=>V(M),className:`px-3 py-1 rounded-md text-[10px] font-bold transition-all ${C===M?"bg-slate-800 text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:M},M))})]}),!Ur&&v.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 flex items-center gap-3 mb-6",children:[v.jsx(qx,{}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-bold text-orange-800",children:"Connection Offline"}),v.jsx("p",{className:"text-xs text-orange-600",children:"Community reports are currently read-only."})]})]}),v.jsx("div",{className:"space-y-4",children:R.length>0?R.map(M=>v.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all",children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsxs("div",{className:"flex flex-col items-center gap-1 text-slate-400 bg-slate-50 rounded-lg p-1.5 border border-slate-100",children:[v.jsx("button",{onClick:()=>$(M.id,"up"),className:"hover:text-green-600 transition-colors",children:v.jsx($x,{})}),v.jsx("span",{className:"text-xs font-bold text-slate-700",children:M.verificationCount||0}),v.jsx("button",{onClick:()=>$(M.id,"down"),className:"hover:text-red-500 transition-colors",children:v.jsx(Yx,{})})]}),v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsx("h4",{className:"font-bold text-slate-900 text-sm",children:M.location}),v.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:I(M.timestamp)})]}),v.jsx("p",{className:"text-sm text-slate-600 mt-1 leading-snug",children:M.description}),v.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[v.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded-full border ${M.severity==="heavy"?"bg-red-50 text-red-600 border-red-100":M.severity==="moderate"?"bg-yellow-50 text-yellow-600 border-yellow-100":"bg-green-50 text-green-600 border-green-100"}`,children:M.severity}),v.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400",children:[v.jsx(q0,{})," ",M.reporterName]})]})]})]})},M.id)):v.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-dashed border-slate-300",children:[v.jsx("div",{className:"text-slate-300 mb-2 mx-auto w-fit",children:v.jsx(ip,{})}),v.jsx("p",{className:"text-slate-500 text-sm font-medium",children:w?"No reports match your search":"No reports yet. Be the first!"})]})})]}),v.jsx("button",{onClick:()=>{Ur?G(!0):alert("Database not connected.")},className:"fixed bottom-24 right-5 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg shadow-blue-600/30 flex items-center justify-center hover:bg-blue-700 hover:scale-110 active:scale-95 transition-all z-30",children:v.jsx(eS,{})})]})},Lu=({icon:t,title:e,description:n})=>v.jsxs("div",{className:"flex items-start space-x-4",children:[v.jsx("div",{className:"flex-shrink-0 text-blue-600 mt-1",children:t}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-lg text-slate-800",children:e}),v.jsx("p",{className:"text-slate-600",children:n})]})]}),EN=({onClose:t})=>v.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",onClick:t,children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg p-6 md:p-8 space-y-6 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:"App Guide"}),v.jsx("p",{className:"text-slate-500 mt-1",children:"Here's a quick look at what each feature does."})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsx(Lu,{icon:v.jsx(H0,{}),title:"Plan Smart Route",description:"Use this to get detailed, step-by-step directions. Our AI 'Thinks' like a local, considering real-time traffic, narrow streets, market days, and even temporary closures. Just enter your destination and any special requests (like 'avoid the crowded temple road')."}),v.jsx(Lu,{icon:v.jsx(G0,{}),title:"Local Updates",description:"Tap here to get a quick summary of what's happening around you right now. The AI scans for news on traffic jams, road closures, festivals, or other events that could affect your travel. It's like having a local news reporter just for you."}),v.jsx(Lu,{icon:v.jsx(W0,{}),title:"Ask Assistant",description:"This is your personal chat assistant. Have a question? Just ask! You can ask for directions, find the nearest pharmacy, or even ask about the weather. For example, try asking: 'Where can I find the best chai near me?'"}),v.jsx(Lu,{icon:v.jsx(ip,{}),title:"Report Traffic",description:"This feature will allow you to help other users by reporting traffic jams, accidents, or road closures you see. By working together, we can make navigation better for everyone. (Coming soon!)"})]}),v.jsx("div",{className:"text-center pt-4",children:v.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-xl transition-colors shadow-md",children:"Got It!"})})]})}),wN=({isOpen:t,onClose:e,onSave:n,currentLocation:r})=>{const[s,a]=ee.useState("");if(ee.useEffect(()=>{t&&a(r||"")},[t,r]),!t)return null;const u=()=>{n(s)};return v.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",onClick:e,children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 space-y-5",onClick:h=>h.stopPropagation(),children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Enter Location Manually"}),v.jsx("p",{className:"text-sm text-slate-500 mt-1",children:'Set your starting point by name (e.g., "Main Market", "Railway Station"). Leave blank to clear and use GPS.'})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"manual-location",className:"sr-only",children:"Manual Location"}),v.jsx("input",{id:"manual-location",type:"text",value:s,onChange:h=>a(h.target.value),placeholder:"e.g., Town Center",className:"w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",autoFocus:!0})]}),v.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[v.jsx("button",{onClick:e,className:"px-5 py-2.5 bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 font-semibold rounded-lg transition-colors",children:"Cancel"}),v.jsx("button",{onClick:u,className:"px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors shadow-sm",children:"Save Location"})]})]})})},TN=()=>{const[t,e]=ee.useState({latitude:null,longitude:null,accuracy:null}),[n,r]=ee.useState(null),[s,a]=ee.useState(!0),u=()=>{if(!navigator.geolocation){r("Geolocation is not supported by your browser."),a(!1);return}navigator.geolocation.getCurrentPosition(h=>{e({latitude:h.coords.latitude,longitude:h.coords.longitude,accuracy:h.coords.accuracy}),a(!1),r(null)},h=>{r(h.message),a(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return ee.useEffect(()=>{u();const h=setInterval(u,5e3);return()=>clearInterval(h)},[]),{location:t,error:n,loading:s}},IN=()=>{const[t,e]=ee.useState("home"),[n,r]=ee.useState(!1),{location:s,error:a,loading:u}=TN(),[h,f]=ee.useState(null),[_,y]=ee.useState(!1),[w,x]=ee.useState(!0),[C,V]=ee.useState("en"),U=fo[C],G=async k=>{const j=k.trim();if(f(j===""?null:j),y(!1),j==="")x(!0);else{const Z=await lS(j);x(Z)}},P=()=>{switch(t){case"planner":return v.jsx(gN,{location:s,manualLocation:h,language:C});case"chat":return v.jsx(vN,{language:C});case"updates":return v.jsx(yN,{location:s,manualLocation:h,language:C});case"home":default:return v.jsx(KC,{setView:e,geoStatus:{error:a,loading:u},onShowInstructions:()=>r(!0),manualLocation:h,onEnterLocationManually:()=>y(!0),isScbContext:w,language:C})}},A=({activeView:k,targetView:j,icon:Z,label:$})=>v.jsxs("button",{onClick:()=>e(j),className:`flex flex-col items-center justify-center w-full pt-3 pb-2 transition-all duration-200 ${k===j?"text-blue-700 transform scale-105 font-semibold":"text-slate-400 hover:text-slate-600"}`,children:[Z,v.jsx("span",{className:"text-[10px] uppercase tracking-wide mt-1",children:$})]});return v.jsxs("div",{className:"h-full w-full bg-slate-50 text-slate-900 font-sans flex flex-col overflow-hidden relative",children:[n&&v.jsx(EN,{onClose:()=>r(!1)}),v.jsx(wN,{isOpen:_,onClose:()=>y(!1),onSave:G,currentLocation:h}),v.jsxs("header",{className:"bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm p-4 text-center z-10 flex justify-between items-center flex-shrink-0",children:[v.jsx("h1",{className:"text-xl font-bold tracking-tight text-blue-800 flex-grow text-center",children:U.appName}),v.jsx("button",{onClick:()=>V(k=>k==="en"?"or":"en"),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-slate-100 hover:bg-slate-200 px-3 py-1.5 rounded-md text-xs font-bold border border-slate-300 text-slate-700 transition-colors shadow-sm",children:C==="en"?"":"English"})]}),v.jsx("main",{className:"flex-grow p-4 md:p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:P()}),v.jsxs("nav",{className:"bg-white border-t border-slate-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] flex justify-around z-10 flex-shrink-0 pb-safe",children:[v.jsx(A,{activeView:t,targetView:"home",icon:v.jsx(Dx,{}),label:U.navHome}),v.jsx(A,{activeView:t,targetView:"planner",icon:v.jsx(Mx,{}),label:U.navPlanner}),v.jsx(A,{activeView:t,targetView:"updates",icon:v.jsx(Vx,{}),label:U.navUpdates}),v.jsx(A,{activeView:t,targetView:"chat",icon:v.jsx(bx,{}),label:U.navChat})]})]})},Dw=document.getElementById("root");if(!Dw)throw new Error("Could not find root element to mount to");const xN=Yh.createRoot(Dw);xN.render(v.jsx($s.StrictMode,{children:v.jsx(IN,{})}));
